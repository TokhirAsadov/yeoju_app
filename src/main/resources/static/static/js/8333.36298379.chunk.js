"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[8333],{58333:function(e,n,t){t.r(n);var a,o,i,d=t(30168),l=t(1413),r=t(29439),s=t(72791),u=t(17939),c=t(95173),f=t(27301),h=t(48550),v=t(73766),k=t(55294),Z=t(84891),p=t(72426),x=t.n(p),g=(t(23333),t(80184)),b=u.ZP.div(a||(a=(0,d.Z)(["\n    width: 300px;\n    ","\n"])),(0,c.qD)({width:"80%"})),w=u.ZP.div(o||(o=(0,d.Z)(["\n\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    overflow: hidden;\n    margin: 15px 15px 0;\n\n    ","\n"])),(0,c.qD)({margin:"15px 0 0 0",justifyContent:"center"})),m=u.ZP.div(i||(i=(0,d.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n\n"])));n.default=function(){var e=(0,s.useState)([]),n=(0,r.Z)(e,2),t=n[0],a=n[1],o=(0,s.useState)([]),i=(0,r.Z)(o,2),d=i[0],u=i[1],c=(0,s.useState)(null),p=(0,r.Z)(c,2),j=p[0],y=p[1],W=(0,s.useState)(null),Y=(0,r.Z)(W,2),S=Y[0],T=Y[1],D=(0,f.wU)().headers,O=(0,s.useState)([]),C=(0,r.Z)(O,2),_=C[0],E=C[1],F=(0,s.useState)(!1),I=(0,r.Z)(F,2),N=I[0],P=I[1],B=(0,s.useState)(null),K=(0,r.Z)(B,2),q=K[0],L=K[1],U=function(e,n){x().locale("ru");for(var t=x()().year(n).isoWeek(e).startOf("isoWeek"),a=[],o=0;o<6;o++)a.push(t.clone().add(o,"days").toDate());return a},z=(0,s.useState)({date:x()().format("YYYY-[W]WW"),dateFrom:x()().startOf("isoWeek").toDate(),dateTo:x()().endOf("isoWeek").toDate(),weekNumber:x()().isoWeek(),daysOfWeek:U(x()().isoWeek(),x()().year())}),A=(0,r.Z)(z,2),G=A[0],H=A[1];(0,s.useEffect)((function(){J()}),[]);var J=function(){k.Z.get(f._n+"/kafedra/getKafedrasForSelect",{headers:D}).then((function(e){var n;a(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.obj)})).catch((function(e){console.log(e)}))};(0,s.useEffect)((function(){j&&k.Z.get(f._n+"/kafedra/getTeachersForSelectByKafedraId?kafedraId="+j,{headers:D}).then((function(e){var n;u(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.obj)})).catch((function(e){console.log(e)}))}),[j]),(0,s.useEffect)((function(){P(!0),S&&k.Z.get(f._n+"/timeTableByWeekOfYear/getTeacherTimeTable?t="+S+"&week="+(null===G||void 0===G?void 0:G.weekNumber)+"&year="+x()(null===G||void 0===G?void 0:G.date).format("YYYY"),{headers:D}).then((function(e){var n,t=null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.obj,a=[],o={};for(var i in null===t||void 0===t||t.forEach((function(e){e.shows.forEach((function(n){var t=n.daysName;o[t]||(o[t]={teacherData:e.teacherData,shows:[]}),o[t].shows.push(n)}))})),o)a.push(o[i]);console.log(a),E(a),P(!1)})).catch((function(e){console.log(e)})),null!=S&&M(S)}),[S,G]);var M=function(e){k.Z.get(f._n+"/user/getTeacherStatisticsForTimeTableByWeek?teacherId="+e+"&week="+(null===G||void 0===G?void 0:G.weekNumber)+"&year="+x()(null===G||void 0===G?void 0:G.date).format("YYYY"),{headers:D}).then((function(e){var n;L(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.obj)})).catch((function(e){console.log(e)}))};return(0,g.jsxs)(m,{children:[(0,g.jsxs)(w,{children:[(0,g.jsx)(b,{children:(0,g.jsx)(v.Z,{disablePortal:!0,id:"combo-box-demo",options:t,onChange:function(e,n){y(null===n||void 0===n?void 0:n.value)},sx:{width:300},renderInput:function(e){return(0,g.jsx)(h.Z,(0,l.Z)((0,l.Z)({},e),{},{label:"Kafedra"}))}})}),(0,g.jsx)(b,{children:(0,g.jsx)(v.Z,{disablePortal:!0,id:"combo-box-demo",options:d,onChange:function(e,n){T(null===n||void 0===n?void 0:n.value)},sx:{width:300},renderInput:function(e){return(0,g.jsx)(h.Z,(0,l.Z)((0,l.Z)({},e),{},{label:"Teacher"}))}})}),(0,g.jsx)(h.Z,{label:"Date of the week",type:"week",sx:{width:"200px"},value:G.date,onChange:function(e){var n=e.target.value,t=x()(n).isoWeek(),a=x()(n).startOf("isoWeek").toDate(),o=x()(n).endOf("isoWeek").toDate(),i=x()(n).year();H({date:n,dateFrom:a,dateTo:o,weekNumber:t,daysOfWeek:U(t,i)})}})]}),S&&(0,g.jsx)(Z.Z,{isLoading:N,obj:G,data:_,statistics:q})]})}}}]);
//# sourceMappingURL=8333.36298379.chunk.js.map