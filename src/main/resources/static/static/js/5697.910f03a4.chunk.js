"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[5697],{75697:function(n,e,o){o.r(e);var l,i,t,d,a,r,u,s=o(30168),c=o(4942),v=o(1413),h=o(29439),p=o(72791),f=o(17939),m=o(55294),g=o(27301),x=(o(17402),o(56960)),Z=o(34197),b=o(89704),j=o(58766),y=o(23853),w=o(39126),k=o(88447),C=o(64554),S=o(17425),I=o(48550),O=o(73766),N=o(94454),T=o(56253),P=o(95173),R=o(98937),D=o(77907),E=o(56355),U=o(68096),z=o(30829),L=o(84638),_=o(58406),H=o(24518),A=o(57621),B=o(39504),V=o(80184),K=(0,V.jsx)(R.Z,{fontSize:"small"}),F=(0,V.jsx)(D.Z,{fontSize:"small"}),Q=f.ZP.div(l||(l=(0,s.Z)(["\n  height: 250px;\n  padding-top: 10px;\n  display: grid;\n  overflow-y: scroll;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 30px;\n  ","\n  ","\n  ","\n"])),(0,P.IV)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,P.yG)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,P.qD)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"})),G=(0,f.ZP)(T.E.button)(i||(i=(0,s.Z)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"])),g.Lr),M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",display:"flex",flexDirection:"column",gap:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},q=f.ZP.div(t||(t=(0,s.Z)(["\n  ","\n  ","\n  ",""])),(0,P.IV)({width:"97vw !important",height:"97vh !important"}),(0,P.yG)({width:"97vw !important",height:"97vh !important"}),(0,P.qD)({width:"97vw !important",height:"97vh !important"})),W=f.ZP.button(d||(d=(0,s.Z)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid red;\n  border-radius: 0.5rem;\n  color: red;\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"]))),Y=f.ZP.button(a||(a=(0,s.Z)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid ",";\n  border-radius: 0.5rem;\n  color: ",";\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"])),g.Lr,g.Lr),J=f.ZP.div(r||(r=(0,s.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: 5px !important;\n"]))),X=f.ZP.div(u||(u=(0,s.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 1rem;\n"])));e.default=function(){var n=(0,p.useState)([]),e=(0,h.Z)(n,2),o=(e[0],e[1]),l=(0,p.useState)(!1),i=(0,h.Z)(l,2),t=i[0],d=(i[1],(0,p.useState)([])),a=(0,h.Z)(d,2),r=a[0],u=a[1],s=(0,p.useState)([]),f=(0,h.Z)(s,2),T=f[0],P=f[1],R=(0,p.useState)(!1),D=(0,h.Z)(R,2),$=D[0],nn=D[1],en=(0,p.useState)([]),on=(0,h.Z)(en,2),ln=on[0],tn=on[1],dn=(0,p.useState)([]),an=(0,h.Z)(dn,2),rn=an[0],un=an[1],sn=(0,p.useState)([]),cn=(0,h.Z)(sn,2),vn=cn[0],hn=cn[1],pn=(0,p.useState)({id:null,name:null,owner:null,room:null,phone:null,eduType:null,facultiesName:[],roles:[],positions:[]}),fn=(0,h.Z)(pn,2),mn=fn[0],gn=fn[1],xn=(0,p.useState)(null),Zn=(0,h.Z)(xn,2),bn=Zn[0],jn=Zn[1];(0,p.useEffect)((function(){console.log(mn,"< - updateDekanat")}),[mn]),(0,p.useEffect)((function(){t&&Sn()}),[t]);var yn=[{field:"id",headerName:"ID",width:40,editable:!1},{field:"name",headerName:"Name",type:"string",width:300,editable:!1},{field:"owner",headerName:"Dean",type:"string",width:300,editable:!1,renderCell:function(n){var e,o;return(0,V.jsx)("div",{children:null===n||void 0===n||null===(e=n.row)||void 0===e||null===(o=e.owner)||void 0===o?void 0:o.fullName})}},{field:"room",headerName:"Room",type:"string",width:100,editable:!1},{field:"phone",headerName:"Phone",type:"string",width:200,editable:!1},{field:"service",headerName:"Service",type:"string",width:200,editable:!1,renderCell:function(n){return(0,V.jsxs)(J,{children:[(0,V.jsx)(Y,{onClick:function(){var e;return Cn(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.id)},children:(0,V.jsx)(y.vPQ,{})}),(0,V.jsx)(W,{onClick:function(){var e,o;return kn(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.id,null===n||void 0===n||null===(o=n.row)||void 0===o?void 0:o.name)},children:(0,V.jsx)(w.yvY,{})})]})}}],wn=(0,g.wU)().headers,kn=function(n,e){console.log(n,"deleted"),gn({id:null,nameEn:null,nameRu:null,nameUz:null,owner:null,eduType:null,room:null,phone:null,roles:[],positions:[]}),window.confirm("Do you want to delete ".concat(e,"?"))&&(m.Z.delete("".concat(g._n,"/dekanat/deleteById/").concat(n),{headers:wn}).then((function(e){var o;console.log("-------------------------------------------------------"),u(null===r||void 0===r?void 0:r.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==n}))),x.Am.success(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})).catch((function(n){console.log(n)})),x.Am.success("Deleted successfully",{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}))},Cn=function(n){m.Z.get(g._n+"/dekanat/getDekanatById?id="+n,{headers:wn}).then((function(n){var e,o;console.log(null===n||void 0===n?void 0:n.data),jn(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(o=e.obj)||void 0===o?void 0:o.owner),gn((function(e){var o,l,i,t,d,a,r,u,s,c,h,p,f,m,g,x,Z,b;return(0,v.Z)((0,v.Z)({},e),{},{id:null===n||void 0===n||null===(o=n.data)||void 0===o||null===(l=o.obj)||void 0===l?void 0:l.id,name:null===n||void 0===n||null===(i=n.data)||void 0===i||null===(t=i.obj)||void 0===t?void 0:t.name,owner:null===n||void 0===n||null===(d=n.data)||void 0===d||null===(a=d.obj)||void 0===a?void 0:a.owner,phone:null===n||void 0===n||null===(r=n.data)||void 0===r||null===(u=r.obj)||void 0===u?void 0:u.phone,room:null===n||void 0===n||null===(s=n.data)||void 0===s||null===(c=s.obj)||void 0===c?void 0:c.room,eduType:null===n||void 0===n||null===(h=n.data)||void 0===h||null===(p=h.obj)||void 0===p?void 0:p.eduType,facultiesName:null===n||void 0===n||null===(f=n.data)||void 0===f||null===(m=f.obj)||void 0===m?void 0:m.facultiesName,roles:null===n||void 0===n||null===(g=n.data)||void 0===g||null===(x=g.obj)||void 0===x?void 0:x.roles,positions:null===n||void 0===n||null===(Z=n.data)||void 0===Z||null===(b=Z.obj)||void 0===b?void 0:b.positions})}))})),nn(!0)};(0,p.useEffect)((function(){m.Z.get(g._n+"/faculty/getFacultyForDekanatSaved").then((function(n){var e,l,i,t,d,a,r;o(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.obj),tn(null===n||void 0===n||null===(l=n.data)||void 0===l||null===(i=l.obj)||void 0===i?void 0:i.map((function(n){return null===n||void 0===n?void 0:n.label}))),un(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(d=t.secondObj)||void 0===d?void 0:d.roles),hn(null===n||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.secondObj)||void 0===r?void 0:r.positions)})).catch((function(n){console.log(n)})),Sn()}),[]);var Sn=function(){m.Z.get(g._n+"/dekanat/all",{headers:wn}).then((function(n){var e;console.log(null===n||void 0===n?void 0:n.data,"dekanats"),u(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.obj)})).catch((function(n){console.log(n)}))},In=function(){nn(!1)},On=function(n){gn((function(e){return(0,v.Z)((0,v.Z)({},e),{},(0,c.Z)({},n.target.name,n.target.value))}))};return(0,V.jsxs)(X,{children:[(0,V.jsx)(C.Z,{display:"flex",justifyContent:"end",children:(0,V.jsx)(H.Z,{sx:{width:"220px"},variant:"contained",onClick:function(){jn(null),gn({id:null,name:null,owner:null,room:null,phone:null,eduType:null,facultiesName:[],roles:[],positions:[]}),nn(!0)},children:"Add new dean's office"})}),t&&(null===r||void 0===r?void 0:r.length)>0?(0,V.jsx)(Z.Z,{}):(0,V.jsx)(A.Z,{children:(0,V.jsx)(B.Z,{sx:{overflow:"scroll"},children:(0,V.jsx)(b._,{checkboxSelection:!0,sx:{minHeight:"670px!important",overflow:"scroll"},columns:yn,rows:r,components:{Toolbar:j.n},pageSize:10,initialState:(0,v.Z)((0,v.Z)({},r.initialState),{},{columns:{columnVisibilityModel:{id:!1}}})})})}),(0,V.jsx)(k.Z,{open:$,onClose:In,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,V.jsxs)(C.Z,{sx:M,component:q,children:[(0,V.jsx)(G,{onClick:In,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,V.jsx)(S.eSQ,{})}),(0,V.jsx)("h3",{style:{color:"".concat(g.Lr)},children:null!==(null===mn||void 0===mn?void 0:mn.id)&&null!==mn&&void 0!==mn&&mn.id?"Update dean's office":"Create new dean's office"}),(0,V.jsxs)(Q,{children:[(0,V.jsx)(I.Z,{id:"outlined-basic",label:"Name",variant:"outlined",value:null===mn||void 0===mn?void 0:mn.name,name:"name",onChange:On}),(0,V.jsxs)(U.Z,{fullWidth:!0,children:[(0,V.jsx)(z.Z,{id:"demo-simple-select-label",children:"Education Type"}),(0,V.jsxs)(_.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:null===mn||void 0===mn?void 0:mn.eduType,name:"eduType",label:"Education Type",onChange:On,children:[(0,V.jsx)(L.Z,{value:"KUNDUZGI",children:"KUNDUZGI"}),(0,V.jsx)(L.Z,{value:"KECHKI",children:"KECHKI"}),(0,V.jsx)(L.Z,{value:"SIRTQI",children:"SIRTQI"})]})]}),(0,V.jsx)(O.Z,{id:"checkboxes-tags-demo",options:T,disableCloseOnSelect:!0,getOptionLabel:function(n){return null===n||void 0===n?void 0:n.label},value:bn,onChange:function(n,e){console.log(e,"new value"),jn(e),gn((function(n){return(0,v.Z)((0,v.Z)({},n),{},{owner:e})}))},onInputChange:function(n,e){var o;"change"===(null===n||void 0===n?void 0:n.type)&&((o=e).length>3&&m.Z.get(g._n+"/user/getUsersForUserRole?keyword="+o,{headers:wn}).then((function(n){var e;P(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.obj)})).catch((function(n){console.log(n)})))},renderOption:function(n,e,o){var l=o.selected;return(0,V.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,V.jsx)(N.Z,{icon:K,checkedIcon:F,style:{marginRight:8},checked:l}),null===e||void 0===e?void 0:e.label]}))},renderInput:function(n){return(0,V.jsx)(I.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Owner",placeholder:"Owner"}))}}),(0,V.jsx)(I.Z,{id:"outlined-basic",label:"Room",variant:"outlined",value:null===mn||void 0===mn?void 0:mn.room,name:"room",onChange:On}),(0,V.jsx)(I.Z,{id:"outlined-basic",label:"Phone",variant:"outlined",value:null===mn||void 0===mn?void 0:mn.phone,name:"phone",onChange:On}),(0,V.jsx)(O.Z,{multiple:!0,id:"checkboxes-tags-demo",options:rn,disableCloseOnSelect:!0,getOptionLabel:function(n){return n},value:null===mn||void 0===mn?void 0:mn.roles,onChange:function(n,e){gn((function(n){return(0,v.Z)((0,v.Z)({},n),{},{roles:e})}))},renderOption:function(n,e,o){var l=o.selected;return(0,V.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,V.jsx)(N.Z,{icon:K,checkedIcon:F,style:{marginRight:8},checked:l}),e]}))},renderInput:function(n){return(0,V.jsx)(I.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Roles",placeholder:"Roles"}))}}),(0,V.jsx)(O.Z,{multiple:!0,id:"checkboxes-tags-demo",options:vn,disableCloseOnSelect:!0,getOptionLabel:function(n){return n},value:null===mn||void 0===mn?void 0:mn.positions,onChange:function(n,e){gn((function(n){return(0,v.Z)((0,v.Z)({},n),{},{positions:e})}))},renderOption:function(n,e,o){var l=o.selected;return(0,V.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,V.jsx)(N.Z,{icon:K,checkedIcon:F,style:{marginRight:8},checked:l}),e]}))},renderInput:function(n){return(0,V.jsx)(I.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Positions",placeholder:"Positions"}))}}),(0,V.jsx)(O.Z,{multiple:!0,id:"checkboxes-tags-demo",options:ln,disableCloseOnSelect:!0,getOptionLabel:function(n){return n},value:null===mn||void 0===mn?void 0:mn.facultiesName,onChange:function(n,e){gn((function(n){return(0,v.Z)((0,v.Z)({},n),{},{facultiesName:e})}))},renderOption:function(n,e,o){var l=o.selected;return(0,V.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,V.jsx)(N.Z,{icon:K,checkedIcon:F,style:{marginRight:8},checked:l}),e]}))},renderInput:function(n){return(0,V.jsx)(I.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Faculties",placeholder:"Faculties"}))}})]}),(0,V.jsx)(C.Z,{sx:{display:"flex",justifyContent:"end"},children:(0,V.jsx)(H.Z,{variant:"contained",endIcon:null!==(null===mn||void 0===mn?void 0:mn.id)&&null!==mn&&void 0!==mn&&mn.id?(0,V.jsx)(y.vPQ,{}):(0,V.jsx)(E.TvB,{}),onClick:function(){return null!==(null===mn||void 0===mn?void 0:mn.id)&&null!==mn&&void 0!==mn&&mn.id?function(n){console.log(n,"edit section"),Object.values(n).every((function(n){return null!==n&&n}))?m.Z.post(g._n+"/dekanat/saveV2",n,{headers:wn}).then((function(n){nn(!1),Sn(),x.Am.success("Updated dean successfully!.")})).catch((function(n){console.log(n)})):x.Am.warning("Empty any field..")}(mn):(delete(n=mn).id,console.log(n,"save dean"),void(Object.values(n).every((function(n){return null!==n&&n}))?m.Z.post(g._n+"/dekanat/saveV2",(0,v.Z)((0,v.Z)({},n),{},{id:null}),{headers:wn}).then((function(e){nn(!1),Sn(),x.Am.success("".concat(null===n||void 0===n?void 0:n.name," dean's office has been saved successfully!."))})).catch((function(n){var e,o;console.log(n),x.Am.error(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message)})):x.Am.warning("Empty any field..")));var n},children:null!==(null===mn||void 0===mn?void 0:mn.id)&&null!==mn&&void 0!==mn&&mn.id?"Update":" Save"})})]})})]})}},77907:function(n,e,o){var l=o(64836);e.Z=void 0;var i=l(o(45649)),t=o(80184),d=(0,i.default)((0,t.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");e.Z=d},98937:function(n,e,o){var l=o(64836);e.Z=void 0;var i=l(o(45649)),t=o(80184),d=(0,i.default)((0,t.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");e.Z=d}}]);
//# sourceMappingURL=5697.910f03a4.chunk.js.map