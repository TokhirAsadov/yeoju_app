"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[9867],{19867:function(e,n,o){o.r(n);var i,l,t,d,r,a,s,u,c,p,v,f,h=o(30168),m=o(1413),x=o(29439),g=o(72791),b=o(17939),w=o(27301),Z=o(34197),y=o(89704),j=o(58766),S=o(56355),k=o(24518),I=o(72426),C=o.n(I),P=o(23853),N=o(39126),A=o(55294),H=o(56960),O=o(88447),U=o(64554),z=o(17425),T=o(88197),_=o(56253),B=o(86388),D=o(59434),E=o(5900),L=o(95173),M=o(80184),R={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",height:"90vh",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},Q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"68vw",padding:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:8},q=b.ZP.div(i||(i=(0,h.Z)(["\n","}\n","}\n","}\n"])),(0,L.IV)({width:"75vw !important",padding:"15px !important"}),(0,L.yG)({width:"85vw !important",padding:"15px !important"}),(0,L.qD)({width:"90vw !important",padding:"10px !important"})),F={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",minHeight:400,bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},V=(0,b.ZP)(_.E.button)(l||(l=(0,h.Z)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"])),w.Lr),W=b.ZP.div(t||(t=(0,h.Z)(["\n  width: 100%;\n  display: flex;\n  gap: 10px;\n  margin: 5px!important;\n"]))),G=b.ZP.button(d||(d=(0,h.Z)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border:1px solid red;\n  border-radius: 0.5rem;\n  color: red;\n  padding: 5px!important;\n\n  &:hover{\n    transform: scale(1.1);\n  }\n\n"]))),K=b.ZP.button(r||(r=(0,h.Z)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border:1px solid ",";\n  border-radius: 0.5rem;\n  color: ",";\n  padding: 5px!important;\n\n  &:hover{\n    transform: scale(1.1);\n  }\n\n"])),w.Lr,w.Lr),Y=b.ZP.div(a||(a=(0,h.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: 5px!important;\n"]))),J=b.ZP.div(s||(s=(0,h.Z)(["\n  width: 100%;\n  background-color: #fff;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),X=b.ZP.button(u||(u=(0,h.Z)(["\n  width: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 5px 15px;\n  border-radius: 0.5rem;\n  background-color: ",";\n  border: 1px solid ",";\n  color: white;\n  transition: 0.3s background-color, color;\n  font-size: 16px;\n\n  &:focus{\n    transform: scale(0.95);\n  }\n  ","\n"])),(function(e){return e.bg}),(function(e){return e.bg}),(0,L.qD)({padding:"5px !important"})),$=b.ZP.button(c||(c=(0,h.Z)(["\n  width: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 5px 15px;\n  border-radius: 0.5rem;\n  background-color: ",";\n  border: 1px solid transparent;\n  color: white;\n  transition: 0.3s background-color, color;\n  font-size: 16px;\n\n  &:hover{\n    background-color: #fff;\n    color: ",";\n    border: 1px solid ",";\n  }\n","\n"])),w.Lr,w.Lr,w.Lr,(0,L.qD)({padding:"5px !important"})),ee=b.ZP.div(p||(p=(0,h.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n"]))),ne=b.ZP.h3(v||(v=(0,h.Z)(["\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  gap: 20px;\n  color: ",";\n"])),w.Lr),oe=b.ZP.div(f||(f=(0,h.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  border-radius: 10px;\n  padding: 10px;\n"])));n.default=function(e){var n=e.s,o=(0,D.v9)((function(e){var o,i;return n?null===e||void 0===e||null===(o=e.secondBulim)||void 0===o?void 0:o.secondBulim:null===e||void 0===e||null===(i=e.bulim)||void 0===i?void 0:i.bulim})),i=(0,g.useState)(!0),l=(0,x.Z)(i,2),t=l[0],d=l[1],r=(0,g.useState)(!1),a=(0,x.Z)(r,2),s=a[0],u=a[1],c=(0,g.useState)(""),p=(0,x.Z)(c,2),v=p[0],f=p[1],h=[{field:"id",headerName:"ID",width:40,editable:!1},{field:"fullName",headerName:"Name",type:"string",width:300,editable:!1,renderCell:function(e){var n,o,i,l;return(0,M.jsxs)(W,{children:[null!==e&&void 0!==e&&null!==(n=e.row)&&void 0!==n&&n.photo?(0,M.jsx)("img",{src:null!==e&&void 0!==e&&null!==(o=e.row)&&void 0!==o&&o.photo?w._n+"/attachment/download/"+(null===e||void 0===e||null===(i=e.row)||void 0===i||null===(l=i.photo)||void 0===l?void 0:l.id):"",width:"40px",height:"40px",alt:null===e||void 0===e?void 0:e.value,style:{borderRadius:"50%"}}):(0,M.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:(0,M.jsx)(S.q1E,{})}),(0,M.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:(0,M.jsx)(k.Z,{onClick:function(){var n;return Ne(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.id)},children:null===e||void 0===e?void 0:e.value})})]})}},{field:"login",headerName:"Login",type:"string",width:300,editable:!1},{field:"email",headerName:"Email",type:"string",width:300,editable:!1},{field:"rfid",headerName:"RFID",type:"string",width:300,editable:!1},{field:"passport",headerName:"Passport",type:"string",width:300,editable:!1},{field:"countTouch",headerName:"Kelgan kunlari \n".concat(C()(new Date).format("MMM")),type:"string",width:170,editable:!1,renderCell:function(e){return(0,M.jsx)(Y,{children:(0,M.jsxs)(k.Z,{onClick:function(){var n,o,i,l;return Ce(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.fullName,null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.id,null===e||void 0===e||null===(i=e.row)||void 0===i||null===(l=i.photo)||void 0===l?void 0:l.id)},children:[null===e||void 0===e?void 0:e.value,(0,M.jsx)(N.bbP,{size:19,color:w.Lr})]})})}},{field:"positions",headerName:"Shtat birligi va lavozimi",type:"string",width:190,editable:!1,renderCell:function(e){return(0,M.jsx)(Y,{children:null===e||void 0===e?void 0:e.value})}},{field:"STATUS",headerName:"Status",type:"string",width:100,editable:!1,renderCell:function(e){return(0,M.jsxs)(Y,{children:[(0,M.jsx)(K,{onClick:function(){var n,o,i;return Oe(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.id,null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.fullName,null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.positions)},children:(0,M.jsx)(P.vPQ,{})}),(0,M.jsx)(G,{onClick:function(){var n,o;return Ue(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.id,null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.fullName)},children:(0,M.jsx)(N.yvY,{})})]})}}],b=(0,g.useState)([]),I=(0,x.Z)(b,2),_=I[0],L=I[1],ie=(0,g.useState)(!1),le=(0,x.Z)(ie,2),te=le[0],de=le[1],re=(0,g.useState)(""),ae=(0,x.Z)(re,2),se=ae[0],ue=ae[1],ce=(0,g.useState)(""),pe=(0,x.Z)(ce,2),ve=pe[0],fe=pe[1],he=(0,g.useState)(!1),me=(0,x.Z)(he,2),xe=(me[0],me[1]),ge=(0,g.useState)(!1),be=(0,x.Z)(ge,2),we=be[0],Ze=be[1],ye=(0,g.useState)(!1),je=(0,x.Z)(ye,2),Se=je[0],ke=je[1],Ie=(0,w.wU)().headers,Ce=function(e,n,o){return fe(e),ue(o),f(n),Ze(!0)},Pe=function(){Ze(!1)},Ne=function(e){f(e),xe(!0)},Ae=function(){u(!1)},He=function(){de(!1),ke(!1)},Oe=function(e,n,i){De((function(l){return(0,m.Z)((0,m.Z)({},l),{},{sectionId:null===o||void 0===o?void 0:o.id,positionId:i,userId:{value:e,label:n}})})),A.Z.get(w._n+"/staff/getStaffIdWithUserId/"+e,{headers:Ie}).then((function(e){var n;H.Am.success(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message),De((function(n){var o;return(0,m.Z)((0,m.Z)({},n),{},{id:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.obj})})),ke(!0)})).catch((function(e){var n,o;console.log(e),H.Am.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}))},Ue=function(e,n){A.Z.get(w._n+"/staff/getStaffIdWithUserId/"+e,{headers:Ie}).then((function(e){var o;window.confirm("Do you want to delete ".concat(n,"?"))&&A.Z.delete(w._n+"/staff/deleteStaff/"+(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.obj),{headers:Ie}).then((function(e){var n;H.Am.error(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),ze()})).catch((function(e){var n,o;H.Am.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),console.log(e)}))})).catch((function(e){var n,o;console.log(e),H.Am.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)}))};(0,g.useEffect)((function(){ze()}),[]);var ze=function(){d(!0),L([]),A.Z.get(w._n+"/section/getStatistics",{headers:Ie}).then((function(e){var n,o;L(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(o=n.obj)||void 0===o?void 0:o.sort((function(e,n){return e.fullName>n.fullName?1:-1}))),d(!1)})).catch((function(e){console.log(e)}))},Te=(0,g.useState)({}),_e=(0,x.Z)(Te,2),Be=_e[0],De=_e[1],Ee=function(e){void 0!==(null===e||void 0===e?void 0:e.id)&&null!==(null===e||void 0===e?void 0:e.id)&&""!==(null===e||void 0===e?void 0:e.id)&&void 0!==(null===e||void 0===e?void 0:e.userId)&&null!==(null===e||void 0===e?void 0:e.userId)&&""!==(null===e||void 0===e?void 0:e.userId)&&void 0!==(null===e||void 0===e?void 0:e.sectionId)&&""!==(null===e||void 0===e?void 0:e.sectionId)&&null!==(null===e||void 0===e?void 0:e.sectionId)&&void 0!==(null===e||void 0===e?void 0:e.positionId)&&""!==(null===e||void 0===e?void 0:e.positionId)&&null!==(null===e||void 0===e?void 0:e.positionId)?(H.Am.success("all done"),A.Z.post(w._n+"/staff/saveStaff",e,{headers:Ie}).then((function(e){H.Am.success("Staff updated successfully."),ze(),ke(!1)})).catch((function(e){var n,o;console.log(e),H.Am.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}))):H.Am.warning("Empty any fields...")},Le=function(e){""!==(null===e||void 0===e?void 0:e.id)&&void 0!==(null===e||void 0===e?void 0:e.id)||(e.id=null),void 0!==(null===e||void 0===e?void 0:e.userId)&&null!==(null===e||void 0===e?void 0:e.userId)&&""!==(null===e||void 0===e?void 0:e.userId)&&void 0!==(null===e||void 0===e?void 0:e.sectionId)&&""!==(null===e||void 0===e?void 0:e.sectionId)&&null!==(null===e||void 0===e?void 0:e.sectionId)&&void 0!==(null===e||void 0===e?void 0:e.positionId)&&""!==(null===e||void 0===e?void 0:e.positionId)&&null!==(null===e||void 0===e?void 0:e.positionId)?A.Z.post(w._n+"/staff/saveStaff",e,{headers:Ie}).then((function(e){H.Am.success("Staff saved successfully."),ze(),de(!1)})).catch((function(e){var n,o;console.log(e),H.Am.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})):H.Am.warning("Empty any fields..."),console.log(e,"save staff")};return(0,M.jsxs)(oe,{children:[(0,M.jsxs)(ne,{children:["Table of Staffs",(0,M.jsxs)(ee,{children:[(0,M.jsx)($,{onClick:function(){u(!0)},children:"Open Month Modal"}),(0,M.jsxs)(X,{onClick:function(){De((0,m.Z)((0,m.Z)({},Be),{},{id:null,userId:null,sectionId:o.id,positionId:null})),de(!0)},padding:"5px 15px",float:"right",width:"180px",bg:"lime",children:[(0,M.jsx)(S.wEH,{})," Add Staff"]})]})]}),(0,M.jsx)(O.Z,{open:s,onClose:Ae,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,M.jsxs)(U.Z,{sx:R,children:[(0,M.jsx)(V,{onClick:Ae,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,M.jsx)(z.eSQ,{})}),(0,M.jsx)(B.Z,{colName:"Staffs",isTeacher:!1,date:new Date,userName:null===o||void 0===o?void 0:o.name,kafedraId:null===o||void 0===o?void 0:o.id,url:"/staff/getStatisticsForRektor?sectionId="})]})}),(0,M.jsx)(J,{children:t?(0,M.jsx)(Z.Z,{}):(0,M.jsx)(y._,{checkboxSelection:!0,style:{width:"500px!important",minHeight:"300px!important"},columns:h,rows:_,components:{Toolbar:j.n},autoHeight:!0,pageSize:15,initialState:(0,m.Z)((0,m.Z)({},null===_||void 0===_?void 0:_.initialState),{},{columns:{columnVisibilityModel:{id:!1,login:!1,card:!1,rfid:!1,email:!1,passport:!1}}})})}),(0,M.jsx)(O.Z,{open:we,onClose:Pe,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,M.jsxs)(U.Z,{sx:F,children:[(0,M.jsx)(V,{onClick:Pe,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,M.jsx)(z.eSQ,{})}),(0,M.jsx)(T.Z,{userName:ve,userId:v,date:new Date,photo:se})]})}),(0,M.jsx)(O.Z,{open:te,onClose:He,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,M.jsxs)(U.Z,{sx:Q,component:q,children:[(0,M.jsx)(V,{onClick:He,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,M.jsx)(z.eSQ,{})}),(0,M.jsx)(E.Z,{isSection:!0,title:"Add Staff",formArr:[{label:"id",name:"id",placeholder:"Enter id of staff",type:"text"},{label:"Select User:",name:"userId",placeholder:"Select User",type:"select"},{label:"Select Position:",name:"positionId",placeholder:"Select Position",type:"select"}],submitBtn:null!==(null===Be||void 0===Be?void 0:Be.id)?"Update":"Save",onSubmit:function(e){return null!==(null===Be||void 0===Be?void 0:Be.id)?Ee(e):Le(e)},updateItem:Be})]})}),(0,M.jsx)(O.Z,{open:Se,onClose:He,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,M.jsxs)(U.Z,{sx:Q,children:[(0,M.jsx)(V,{onClick:He,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,M.jsx)(z.eSQ,{})}),(0,M.jsx)(E.Z,{isSection:!0,title:"Update Staff",formArr:[{label:"id",name:"id",placeholder:"Enter id of staff",type:"text"},{label:"Select User:",name:"userId",placeholder:"Select User",type:"select"},{label:"Select Position:",name:"positionId",placeholder:"Select Position",type:"select"}],submitBtn:null!==(null===Be||void 0===Be?void 0:Be.id)?"Update":"Save",onSubmit:function(e){return null!==(null===Be||void 0===Be?void 0:Be.id)?Ee(e):Le(e)},updateItem:Be})]})})]})}}}]);
//# sourceMappingURL=9867.ac77252a.chunk.js.map