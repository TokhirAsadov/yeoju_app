/*! For license information please see 5098.bb716032.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["5098"],{34930:function(e,t,a){"use strict";a.r(t);var l=a("58865");a("33948"),a("57658"),a("15581"),a("34514"),a("2490");var r=a("85893"),n=a("67294"),o=a("71893"),d=a("57024"),i=a("16393"),s=a("52861"),u=a("44118"),f=a("27233"),c=a("54520"),h=a("30381"),v=a.n(h);function k(){let e=(0,l._)(["\n    width: 300px;\n    ","\n"]);return k=function(){return e},e}function x(){let e=(0,l._)(["\n\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    overflow: hidden;\n    margin: 15px 15px 0;\n\n    ","\n"]);return x=function(){return e},e}function m(){let e=(0,l._)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n\n"]);return m=function(){return e},e}a("21793");let g=o.default.div(k(),(0,d.extrasmall)({width:"80%"})),p=o.default.div(x(),(0,d.extrasmall)({margin:"15px 0 0 0",justifyContent:"center"})),b=o.default.div(m());t.default=()=>{let[e,t]=(0,n.useState)([]),[a,l]=(0,n.useState)([]),[o,d]=(0,n.useState)(null),[h,k]=(0,n.useState)(null),{headers:x}=(0,i.getHeaders)(),[m,S]=(0,n.useState)([]),[w,T]=(0,n.useState)(!1),[j,y]=(0,n.useState)(null),W=(e,t)=>{v().locale("ru");let a=v()(i.serverTimeStorage).year(t).isoWeek(e).startOf("isoWeek"),l=[];for(let e=0;e<6;e++)l.push(a.clone().add(e,"days").toDate());return l},[Y,E]=(0,n.useState)({date:v()(i.serverTimeStorage).format("YYYY-[W]WW"),dateFrom:v()(i.serverTimeStorage).startOf("isoWeek").toDate(),dateTo:v()(i.serverTimeStorage).endOf("isoWeek").toDate(),weekNumber:v()(i.serverTimeStorage).isoWeek(),daysOfWeek:W(v()(i.serverTimeStorage).isoWeek(),v()(i.serverTimeStorage).year())});(0,n.useEffect)(()=>{_()},[]);let _=()=>{f.default.get(i.BASE_URL+"/kafedra/getKafedrasForSelect",{headers:x}).then(e=>{var a;t(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.obj)}).catch(e=>{})};(0,n.useEffect)(()=>{o&&f.default.get(i.BASE_URL+"/kafedra/getTeachersForSelectByKafedraId?kafedraId="+o,{headers:x}).then(e=>{var t;l(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(e=>{})},[o]),(0,n.useEffect)(()=>{T(!0),h&&f.default.get(i.BASE_URL+"/timeTableByWeekOfYear/getTeacherTimeTable?t="+h+"&week="+(null==Y?void 0:Y.weekNumber)+"&year="+v()(null==Y?void 0:Y.date).format("YYYY"),{headers:x}).then(e=>{var t;let a=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj,l=[],r={};for(let e in null==a||a.forEach(e=>{e.shows.forEach(t=>{let a=t.daysName;!r[a]&&(r[a]={teacherData:e.teacherData,shows:[]}),r[a].shows.push(t)})}),r)l.push(r[e]);S(l),T(!1)}).catch(e=>{}),null!=h&&D(h)},[h,Y]);let D=e=>{f.default.get(i.BASE_URL+"/user/getTeacherStatisticsForTimeTableByWeek?teacherId="+e+"&week="+(null==Y?void 0:Y.weekNumber)+"&year="+v()(null==Y?void 0:Y.date).format("YYYY"),{headers:x}).then(e=>{var t;y(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(e=>{})};return(0,r.jsxs)(b,{children:[(0,r.jsxs)(p,{children:[(0,r.jsx)(g,{children:(0,r.jsx)(u.default,{disablePortal:!0,id:"combo-box-demo",options:e,onChange:(e,t)=>{d(null==t?void 0:t.value)},sx:{width:300},renderInput:e=>(0,r.jsx)(s.default,{...e,label:"Kafedra"})})}),(0,r.jsx)(g,{children:(0,r.jsx)(u.default,{disablePortal:!0,id:"combo-box-demo",options:a,onChange:(e,t)=>{k(null==t?void 0:t.value)},sx:{width:300},renderInput:e=>(0,r.jsx)(s.default,{...e,label:"Teacher"})})}),(0,r.jsx)(s.default,{label:"Date of the week",type:"week",sx:{width:"200px"},value:Y.date,onChange:e=>{let t=e.target.value,a=v()(t).isoWeek(),l=v()(t).startOf("isoWeek").toDate(),r=v()(t).endOf("isoWeek").toDate(),n=v()(t).year();E({date:t,dateFrom:l,dateTo:r,weekNumber:a,daysOfWeek:W(a,n)})}})]}),h&&(0,r.jsx)(c.default,{isLoading:w,obj:Y,data:m,statistics:j})]})}}}]);