/*! For license information please see 4539.bad83674.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["4539"],{87639:function(n,e,t){"use strict";t.r(e);var l=t("58865");t("25387"),t("72608"),t("2490"),t("33948"),t("31672"),t("59461"),t("57640"),t("9924");var i=t("85893"),r=t("67294"),o=t("71893"),a=t("39711"),u=t("16393"),d=t("23157"),s=t("41931"),c=t("27233"),f=t("53432"),p=t("50533"),x=t("94718"),h=t("55693"),v=t("57024"),m=t("89583");function g(){let n=(0,l._)(["\n  width: 100%;\n  border-radius: 10px;\n  color: ",";\n"]);return g=function(){return n},n}function j(){let n=(0,l._)(["\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  gap: 20px;\n  \n"]);return j=function(){return n},n}function y(){let n=(0,l._)(["\n  display: flex;\n  gap: 15px;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  & > div{\n    width: 250px!important;\n  }\n  ","\n"]);return y=function(){return n},n}function b(){let n=(0,l._)(["\n  border: 1px solid ",";\n  height: 40px;\n  width: 200px;\n  padding-left: 10px!important;\n  border-radius: 5px;\n  display: ",";\n\n  &::placeholder{\n    font-size: 14px;\n    letter-spacing: 1.1px;\n    color: ",";\n  }\n  &:focus{\n    outline: none;\n  }\n"]);return b=function(){return n},n}function w(){let n=(0,l._)(["\n  font-size: 20px;\n"]);return w=function(){return n},n}function k(){let n=(0,l._)(["\n  font-size: 12px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  margin-top: 10px!important;\n"]);return k=function(){return n},n}function S(){let n=(0,l._)(["\n\n"]);return S=function(){return n},n}function _(){let n=(0,l._)(["\n  color: ",";\n  margin-bottom: 20px!important;\n  text-align: start;\n"]);return _=function(){return n},n}function C(){let n=(0,l._)(["\n  text-decoration: none;\n  color: blue;\n"]);return C=function(){return n},n}let F=(0,s.default)(),I=n=>n.reduce((n,e)=>"lessonDtos"!==e.name?{...n,[e.name]:""}:{...n,[e.name]:[]},{}),D=o.default.form(g(),u.mainColor),z=o.default.div(j()),M=o.default.div(y(),(0,v.extrasmall)({flexDirection:"column"})),Y=o.default.input(b(),u.mainColor,n=>n.display?"none":"block",u.mainColor),E=o.default.label(w()),R=o.default.div(k()),T=o.default.span(S()),U=o.default.h3(_(),u.mainColor),A=(0,o.default)(a.Link)(C());e.default=n=>{let{title:e,formArr:t,submitBtn:l,onSubmit:o,updateItem:a,redirect:s,isSection:v}=n,g=(0,p.useSelector)(n=>{var e;return null==n?void 0:null===(e=n.user)||void 0===e?void 0:e.user}),[j,y]=(0,r.useState)([]),[b,w]=(0,r.useState)([]),[k,S]=(0,r.useState)(!0);I(t);let[_,C]=(0,r.useState)(I(t)),L=(n,e)=>C(t=>({...t,[e]:n})),B=()=>{o(G(_))},{headers:H}=(0,u.getHeaders)();(0,r.useEffect)(()=>{C({..._,id:null==a?void 0:a.id,userId:null==a?void 0:a.userId,sectionId:null==a?void 0:a.sectionId}),c.default.get(u.BASE_URL+"/dekanat/getUserForDekanSave?bool="+v,{headers:H}).then(n=>{var e,t,l,i;y(null==n?void 0:null===(t=n.data)||void 0===t?void 0:null===(e=t.obj)||void 0===e?void 0:e.users),w(null==n?void 0:null===(i=n.data)||void 0===i?void 0:null===(l=i.obj)||void 0===l?void 0:l.positions),(null==a?void 0:a.positionId)!==null&&(null==a?void 0:a.positionId)!==""&&C(e=>{var t,l;return{...e,positionId:null==n?void 0:null===(l=n.data)||void 0===l?void 0:null===(t=l.obj)||void 0===t?void 0:t.positions.find(n=>(null==n?void 0:n.label)===(null==a?void 0:a.positionId))}}),S(!1)}).catch(n=>{})},[]);let N=(n,e)=>{n.length>2&&"userId"===e&&c.default.get(u.BASE_URL+"/user/getUserForTeacherSavingSearch?keyword="+n,{headers:H}).then(n=>{var e;y(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.obj)}).catch(n=>{})},G=n=>{var e,t;return{id:null==n?void 0:n.id,sectionId:null==n?void 0:n.sectionId,userId:null==n?void 0:null===(e=n.userId)||void 0===e?void 0:e.value,positionId:null==n?void 0:null===(t=n.positionId)||void 0===t?void 0:t.value}};return(0,i.jsx)(D,{children:k?(0,i.jsx)(f.default,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(U,{children:e}),(0,i.jsx)(z,{children:null==t?void 0:t.map((n,e)=>{var t;let{label:l,name:r,placeholder:o,type:u,value:s}=n;if("select"!==u)return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(Y,{display:"id"===r,id:r,name:r,type:u,value:_[r],onChange:n=>L(n,r),placeholder:o},e)});return(0,i.jsxs)(M,{children:[(0,i.jsx)(E,{htmlFor:r,children:l}),(0,i.jsx)(d.default,{width:"300px",closeMenuOnSelect:!0,components:F,isMulti:!1,options:"userId"===r?j:b,onChange:n=>L(n,r),value:_[r],name:r,isClearable:!0,onInputChange:n=>N(n,r),isDisabled:(null==g?void 0:g.id)===(null==a?void 0:null===(t=a.userId)||void 0===t?void 0:t.value)&&"userId"===r})]})})}),(0,i.jsx)(h.default,{sx:{mt:"20px",display:"flex",justifyContent:"end"},children:(0,i.jsxs)(x.default,{variant:"contained",onClick:n=>{n.preventDefault(),B()},children:[l.startsWith("Update")?(0,i.jsx)(m.FaEdit,{style:{marginRight:"10px"}}):(0,i.jsx)(m.FaSave,{style:{marginRight:"10px"}}),l]})}),!!s&&(0,i.jsxs)(R,{children:[(0,i.jsxs)(T,{children:[s.label,"\xa0"]}),(0,i.jsx)(A,{to:s.link.to,children:s.link.label})]})]})})}},55605:function(n,e,t){"use strict";t.r(e);var l=t("58865");t("33948"),t("57640"),t("9924"),t("15581"),t("34514"),t("2490"),t("57658");var i=t("85893"),r=t("67294"),o=t("30381"),a=t.n(o),u=t("71893"),d=t("16393"),s=t("94718"),c=t("45155"),f=t("27233"),p=t("55693"),x=t("7104"),h=t("79352"),v=t("97367"),m=t("48684"),g=t("50533"),j=t("90650"),y=t("57024"),b=t("37595"),w=t("70231");function k(){let n=(0,l._)(["\n  flex: 3;\n  display: flex;\n  font-size: ",";\n  border: 1px solid ",";\n  align-items: center;\n  justify-content: center;\n  padding: 5px 10px !important;\n"]);return k=function(){return n},n}function S(){let n=(0,l._)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]);return S=function(){return n},n}function _(){let n=(0,l._)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 26px;\n  color: ",";\n"]);return _=function(){return n},n}function C(){let n=(0,l._)(["\n  display: flex;\n  gap: 20px;\n"]);return C=function(){return n},n}function F(){let n=(0,l._)(["\n  width: 100%;\n  min-height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  font-weight: bold;\n  border: 1px solid ",";\n  color: ",";\n  background-color: ",";\n  transition: 0.1s all ease-in;\n\n  &:hover {\n    filter: brightness(.7);\n  }\n\n  &:focus {\n    transform: scale(0.95);\n  }\n"]);return F=function(){return n},n}function I(){let n=(0,l._)(["\n  font-size: 12px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return I=function(){return n},n}function D(){let n=(0,l._)(["\n  width: 100%;\n  min-height: 40px;\n  border: 1px solid ",";\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n"]);return D=function(){return n},n}function z(){let n=(0,l._)(["\n  flex: 1;\n  height: 47px;\n  display: flex;\n  //flex-direction: column;\n"]);return z=function(){return n},n}function M(){let n=(0,l._)(["\n  display: flex;\n  width: 1200px;\n  margin: 0 auto;\n"]);return M=function(){return n},n}function Y(){let n=(0,l._)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  font-size: 24px;\n"]);return Y=function(){return n},n}function E(){let n=(0,l._)(["\n  width: 100%;\n    height: 70vh;\n  overflow: scroll;\n  display: flex;\n  flex-direction: column;\n  margin-top: 25px !important;\n"]);return E=function(){return n},n}function R(){let n=(0,l._)(["\n  width: 800px;\n  padding: 5px 10px !important;\n"]);return R=function(){return n},n}function T(){let n=(0,l._)(["\n  ","\n  ","\n"]);return T=function(){return n},n}let U=u.default.div(k(),n=>n.sz?"12px":"8px",d.mainColor),A=(0,u.default)(j.motion.button)(S(),d.mainColor),L=u.default.div(_(),d.mainColor),B=u.default.div(C()),H=u.default.button(F(),d.mainColor,n=>n.bg?"#fff":n.color?"green":"red",n=>n.bg?n.bg:"#fff"),N=u.default.span(I()),G=u.default.div(D(),d.mainColor),O=u.default.div(z()),P=u.default.div(M()),W=u.default.div(Y()),X=u.default.div(E()),q=u.default.div(R()),J={width:"40px!important",height:"40px!important",fontSize:"24px"},K={border:"none"},Q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50vw",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},V=u.default.div(T(),(0,y.small)({width:"80vw !important"}),(0,y.extrasmall)({width:"90vw !important"}));e.default=n=>{let{userName:e,kafedraId:t,date:l,forUser:o,url:u,isTeacher:j,colName:y}=n,[k,S]=(0,r.useState)(l),[_,C]=(0,r.useState)([]),[F,I]=(0,r.useState)(null),[D,z]=(0,r.useState)(null),[M,Y]=(0,r.useState)(null),[E,R]=(0,r.useState)(!1),T=(n,e)=>{var t;z(new Date(k.getFullYear(),k.getMonth(),n)),Y(null===(t=F[e])||void 0===t?void 0:t.monthly[n]),R(!0)},Z=()=>{R(!1)},{headers:$}=(0,d.getHeaders)(),nn=n=>n.getFullYear()+"."+(n.getMonth()+1)+"."+n.getDate();(0,r.useEffect)(()=>{C(()=>Array.from(Array(a()(k).daysInMonth()).keys()).map(n=>n+1)),nu()},[k]);let[ne,nt]=(0,r.useState)([]),nl=()=>{null==F||F.map(n=>{let e=0;return null==_||_.map(t=>{(null==n?void 0:n.monthly[t])!=null&&e++}),nt(n=>[...n,e]),n})};(0,r.useEffect)(()=>{I(j?nd:ns)},[]);let[ni,nr]=(0,r.useState)(!1);(0,r.useEffect)(()=>{nt([]),nl()},[ni]);let[no,na]=(0,r.useState)(!0),nu=async()=>{na(!0),await f.default.get("".concat(d.BASE_URL+u+t,"&date=").concat(nn(k)),{headers:$}).then(n=>{var e,t;I(null==n?void 0:null===(t=n.data)||void 0===t?void 0:null===(e=t.obj)||void 0===e?void 0:e.all),na(!1),nr(n=>!n)}).catch(n=>{})},nd=(0,g.useSelector)(n=>{var e,t;return null==n?void 0:null===(t=n.rektorTeachers)||void 0===t?void 0:null===(e=t.rektorTeachers)||void 0===e?void 0:e.allTeachers}),ns=(0,g.useSelector)(n=>{var e,t;return null==n?void 0:null===(t=n.rektorStaffs)||void 0===t?void 0:null===(e=t.rektorStaffs)||void 0===e?void 0:e.allStaffs});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(q,{style:{width:"".concat(o||"100%")},children:[(0,i.jsx)(B,{children:(0,i.jsx)(L,{children:e})}),(0,i.jsx)("hr",{}),(0,i.jsxs)(W,{children:[(0,i.jsx)(s.default,{style:J,onClick:()=>{S(new Date(k.getFullYear(),k.getMonth()-1))},children:(0,i.jsx)(c.GrFormPrevious,{})}),(0,i.jsx)("input",{type:"month",id:"start",name:"start",min:"2022-04",value:a()(k).format("YYYY-MM"),onChange:n=>S(new Date(n.target.value)),style:K}),(0,i.jsx)(s.default,{style:J,onClick:()=>{S(new Date(k.getFullYear(),k.getMonth()+1))},children:(0,i.jsx)(c.GrFormNext,{})})]}),(0,i.jsx)(X,{children:no?(0,i.jsx)(x.Skeleton,{animation:"wave",width:o||"100%",height:120}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P,{children:null==_?void 0:_.map((n,e)=>(0,i.jsxs)(i.Fragment,{children:[1===n&&(0,i.jsx)(U,{sz:!0,children:y},e),(0,i.jsx)(O,{children:(0,i.jsxs)(G,{children:[n,(0,i.jsx)(N,{children:a()(new Date(k.getFullYear(),k.getMonth(),n)).format("ddd")})]})},n),n===(null==_?void 0:_.length)&&(0,i.jsx)(O,{children:(0,i.jsx)(G,{children:"\u2211"})})]}))}),null==F?void 0:F.map((n,e)=>(0,i.jsxs)(P,{children:[(0,i.jsx)(U,{children:n.fullName}),null==_?void 0:_.map(t=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(O,{children:(0,i.jsx)(H,{color:n.monthly[t],onClick:()=>T(t,e),children:new Date(k.getFullYear(),k.getMonth(),t)<=new Date?n.monthly[t]?(0,i.jsx)(w.FaCircleCheck,{}):(0,i.jsx)(w.FaCircleXmark,{}):""})},t),t===(null==_?void 0:_.length)&&(0,i.jsx)(O,{children:(0,i.jsx)(H,{color:0!==ne[e],bg:0!==ne[e]?"green":"red",children:ne[e]})})]}))]}))]})}),(0,i.jsx)(p.default,{display:"flex",justifyContent:"end",mt:1,children:(0,i.jsx)(s.default,{onClick:()=>{if(!F)return;let n=[[y,..._.map(n=>n.toString()),"Total"],...F.map(n=>{let e=[n.fullName],t=0;return _.forEach(l=>{if(new Date(k.getFullYear(),k.getMonth(),l)<=new Date){let i=n.monthly[l]?"1":"0";e.push(i),t+=parseInt(i)}else e.push("")}),e.push(t.toString()),e})],e=b.utils.aoa_to_sheet(n),t=b.utils.book_new();b.utils.book_append_sheet(t,e,"Sheet1"),b.writeFile(t,"exported_data.xlsx")},variant:"contained",children:"Export"})}),(0,i.jsx)(v.default,{open:E,onClose:Z,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,i.jsxs)(p.default,{sx:Q,component:V,children:[(0,i.jsx)(A,{onClick:Z,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,i.jsx)(h.RiCloseLine,{})}),(0,i.jsx)(m.default,{time:D,item:M})]})})]})})}}}]);