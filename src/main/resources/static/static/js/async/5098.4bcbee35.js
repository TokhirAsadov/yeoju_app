/*! For license information please see 5098.4bcbee35.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["5098"],{34930:function(e,t,a){"use strict";a.r(t);var n=a("58865");a("33948"),a("25387"),a("72608"),a("2490"),a("15581"),a("34514"),a("57658");var l=a("85893"),r=a("67294"),u=a("71893"),s=a("57024"),c=a("52861"),i=a("44118"),d=a("54520"),o=a("30381"),f=a.n(o);a("21793");var h=a("93065"),p=a("50533");function x(){let e=(0,n._)(["\n    width: 300px;\n    ","\n"]);return x=function(){return e},e}function y(){let e=(0,n._)(["\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    overflow: hidden;\n    margin: 15px 15px 0;\n    ","\n"]);return y=function(){return e},e}function g(){let e=(0,n._)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n"]);return g=function(){return e},e}let w=u.default.div(x(),(0,s.extrasmall)({width:"80%"})),v=u.default.div(y(),(0,s.extrasmall)({margin:"15px 0 0 0",justifyContent:"center"})),b=u.default.div(g());t.default=()=>{let e=(0,p.useSelector)(e=>e.serverTime.time),[t,a]=(0,r.useState)([]),[n,u]=(0,r.useState)([]),[s,o]=(0,r.useState)(null),[x,y]=(0,r.useState)(null),[g,k]=(0,r.useState)([]),[j,m]=(0,r.useState)(!1),[T,S]=(0,r.useState)(null),[C,I]=(0,r.useState)(null);(0,r.useEffect)(()=>{e&&I(f()(e))},[e]),(0,r.useEffect)(()=>{W()},[]),(0,r.useEffect)(()=>{s&&E(s)},[s]),(0,r.useEffect)(()=>{x&&(Y(x),_(x))},[x,C]);let W=async()=>{try{let{data:e}=await h.default.get("/kafedra/getKafedrasForSelect");a((null==e?void 0:e.obj)||[])}catch(e){}},E=async e=>{try{let{data:t}=await h.default.get("/kafedra/getTeachersForSelectByKafedraId?kafedraId=".concat(e));u((null==t?void 0:t.obj)||[])}catch(e){}},Y=async e=>{m(!0);try{let{data:t}=await h.default.get("/timeTableByWeekOfYear/getTeacherTimeTable?t=".concat(e,"&week=").concat(C.isoWeek(),"&year=").concat(C.year())),a=D((null==t?void 0:t.obj)||[]);k(a)}catch(e){}finally{m(!1)}},_=async e=>{try{let{data:t}=await h.default.get("/user/getTeacherStatisticsForTimeTableByWeek?teacherId=".concat(e,"&week=").concat(C.isoWeek(),"&year=").concat(C.year()));S(null==t?void 0:t.obj)}catch(e){}},D=e=>Object.values(e.reduce((e,t)=>(t.shows.forEach(a=>{!e[a.daysName]&&(e[a.daysName]={teacherData:t.teacherData,shows:[]}),e[a.daysName].shows.push(a)}),e),{})),O=(0,r.useCallback)(e=>{I(f()(e.target.value))},[]);return C&&(0,l.jsxs)(b,{children:[(0,l.jsxs)(v,{children:[(0,l.jsx)(w,{children:(0,l.jsx)(i.default,{options:t,getOptionLabel:e=>e.label||"",onChange:(e,t)=>o((null==t?void 0:t.value)||null),sx:{width:300},renderInput:e=>(0,l.jsx)(c.default,{...e,label:"Kafedra"})})}),(0,l.jsx)(w,{children:(0,l.jsx)(i.default,{options:n,getOptionLabel:e=>e.label||"",onChange:(e,t)=>y((null==t?void 0:t.value)||null),sx:{width:300},renderInput:e=>(0,l.jsx)(c.default,{...e,label:"Teacher"})})}),(0,l.jsx)(c.default,{label:"Date of the week",type:"week",sx:{width:"200px"},value:C.format("YYYY-[W]WW"),onChange:O})]}),x&&(0,l.jsx)(d.default,{isLoading:j,dateInput:C,data:g,statistics:T,isChanged:!0,selectTeacherId:x,selectEduTypeId:s,refetchData:()=>{Y(x),_(x)},serverTime:e})]})}}}]);