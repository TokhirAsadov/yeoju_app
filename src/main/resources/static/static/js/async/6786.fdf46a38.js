/*! For license information please see 6786.fdf46a38.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["6786"],{24847:function(e,t,n){"use strict";n.r(t);var a=n("58865");n("33948"),n("57640"),n("9924"),n("17727");var l=n("85893"),r=n("67294"),i=n("71893"),o=n("89583"),d=n("7104"),s=n("16356"),c=n("16393"),u=n("55693"),f=n("94718"),h=n("74113"),x=n("53854"),p=n("97367"),g=n("60155"),m=n("89589"),b=n("57024"),j=n("27233"),v=n("72132"),C=n("23114"),y=n("59388"),S=n("1185"),k=n("20527"),w=n("94193");function N(){let e=(0,a._)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  h4 {\n    color: black;\n  }\n\n  h5 {\n    color: red;\n  }\n\n"]);return N=function(){return e},e}function T(){let e=(0,a._)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n  border-radius: 50%;\n  border: none;\n  background-color: ",";\n  color: white;\n  font-size: 12px;\n"]);return T=function(){return e},e}function I(){let e=(0,a._)(["\n  ","\n"]);return I=function(){return e},e}function F(){let e=(0,a._)(["\n  display: flex;\n  align-items: center;\n  color: #ff5c5c;\n  gap: 5px;\n\n  h1 {\n    margin: 0;\n    font-size: 30px;\n    font-weight: bold;\n\n  }\n"]);return F=function(){return e},e}function W(){let e=(0,a._)(["\n  width: 100%;\n  padding: 1rem;\n\n  .MuiDataGrid-columnHeaderTitleContainer {\n    justify-content: center;\n  }\n"]);return W=function(){return e},e}let _=i.default.div(N()),D=i.default.button(T(),c.mainColor),E={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:700,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},U={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},z=i.default.div(I(),(0,b.extrasmall)({width:"95% !important"})),A=i.default.div(F()),O=i.default.div(W());t.default=()=>{let e=w.MONITORING_STUDENT_FAIL_FILE,[t,n]=(0,r.useState)(1e3),[a,i]=(0,r.useState)(null),{headers:b}=(0,c.getHeaders)(),[N,T]=(0,r.useState)([]),[I,F]=(0,r.useState)(!1),[W,R]=(0,r.useState)(!1),[L,P]=(0,r.useState)(null),[B,M]=(0,r.useState)(!1),[G,H]=(0,r.useState)({page:0,pageSize:30}),Y=e=>{i({id:e.id,studentId:e.studentId,year:e.year,semester:e.semester,subject:e.subject,credit:e.credit,currents:e.currents,finals:e.finals,totals:e.totals,penalty:e.penalty,retakeN:e.retakeN,retakeData:e.retakeData,note:e.note}),M(!0)},q=()=>{F(!0),j.default.get("".concat(c.BASE_URL,"/workOtherService/getFails?page=").concat(G.page+1,"&size=").concat(G.pageSize)).then(e=>{var t,a,l,r;n(null===(t=e.data.obj)||void 0===t?void 0:t.totalElements),T(null==e?void 0:null===(r=e.data)||void 0===r?void 0:null===(l=r.obj)||void 0===l?void 0:null===(a=l.content)||void 0===a?void 0:a.map((e,t)=>({...e,count:t+1})))}).catch(e=>{}).finally(()=>F(!1))};(0,r.useEffect)(()=>{q()},[G]);let K=()=>{P(null),R(!1)},V=()=>{M(!1),i(null)};return(0,l.jsxs)(O,{children:[(0,l.jsx)(C.default,{titleFile:"MONITORING_STUDENT_FAIL_FILE",fetchData:q,saveFileUrl:"/workOtherService/updateFails",urlBase:e}),(0,l.jsxs)(A,{children:[(0,l.jsx)(o.FaClipboardList,{size:25}),(0,l.jsx)("h1",{children:"Fails"})]}),(0,l.jsx)(d.Card,{children:(0,l.jsxs)(d.CardContent,{children:[(0,l.jsx)(u.default,{display:"flex",justifyContent:"space-between",mb:2,children:(0,l.jsx)(y.default,{setData:T,searchUrl:"/otherService/studentsFails2/",pagination:G,fetchData:q})}),(0,l.jsx)(s.DataGrid,{rowCount:t,columns:[{field:"count",headerName:"\u2116",sortable:!0,width:50,align:"center",justifyContent:"center"},{minWidth:90,flex:.4,field:"year",headerName:"Year",sortable:!0,align:"center",justifyContent:"center"},{minWidth:90,flex:.4,field:"studentId",headerName:"Student Id",sortable:!0,align:"center",justifyContent:"center"},{minWidth:90,flex:.3,field:"semester",headerName:"Semester",sortable:!0,align:"center"},{minWidth:150,flex:1,field:"subject",headerName:"Subject",editable:!1,sortable:!1,align:"center"},{minWidth:70,flex:.2,field:"credit",headerName:"Credit",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.4,field:"currents",headerName:"Score",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.4,field:"finals",headerName:"Final Score",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.4,field:"totals",headerName:"Total Score",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.5,field:"penalty",headerName:"Penalty",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.5,field:"retakeN",headerName:"Contract",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.5,field:"retakeData",headerName:"Contract Date",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.5,field:"note",headerName:"Note",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.4,field:"receipt",headerName:"Receipt",editable:!1,sortable:!1,align:"center",renderCell:e=>{var t;let n=null===(t=e.row.penalty)||void 0===t?void 0:t.substring(0,1),a=e.row.penalty,r=e.row.subject,i=e.row.studentId;return(0,l.jsx)(k.default,{penaltyIf:n,penalty:a,subject:r,studentId:i})}},{flex:.4,field:"action",headerName:"Action",editable:!1,sortable:!1,align:"center",renderCell:e=>(0,l.jsx)(d.Stack,{direction:"row",spacing:2,justifyContent:"center",children:(0,l.jsx)(h.default,{"aria-label":"change",color:"success",onClick:()=>Y(e.row),children:(0,l.jsx)(x.HiPencilAlt,{})})})}],rows:N||[],loading:I,components:{Toolbar:s.GridToolbar},pageSize:G.pageSize,page:G.page,rowsPerPageOptions:[10,30,50,70,100],paginationMode:"server",onPageChange:e=>{H(t=>({...t,page:e}))},onPageSizeChange:e=>{H(t=>({...t,pageSize:e}))},autoHeight:!0,initialState:{columns:{columnVisibilityModel:{action:!1,currents:!1,finals:!1,retakeN:!1}}}})]})}),(0,l.jsx)(p.default,{open:W,onClose:K,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsxs)(u.default,{sx:U,component:z,children:[(0,l.jsxs)(_,{children:[(0,l.jsx)("h5",{children:"Delete"}),(0,l.jsxs)(D,{onClick:K,children:[" ",(0,l.jsx)(g.IoClose,{size:22})]})]}),(0,l.jsxs)(u.default,{children:[(0,l.jsx)(d.Stack,{sx:{height:"100px"},direction:"row",justifyContent:"center",alignItems:"center",children:(0,l.jsx)(m.default,{variant:"h6",color:"black",children:"Do you want to delete !"})}),(0,l.jsxs)(d.Stack,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,l.jsx)(f.default,{variant:"outlined",onClick:K,children:"Cancel"}),(0,l.jsx)(f.default,{variant:"contained",color:"error",onClick:()=>{L&&j.default.delete("".concat(c.BASE_URL,"/example/").concat(L),{headers:b}).then(e=>{K(),v.toast.success("Delete item")}).catch(e=>{v.toast.error("Error deleting")})},children:"Ok"})]})]})]})}),(0,l.jsx)(p.default,{open:B,onClose:V,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsxs)(u.default,{sx:E,component:z,children:[(0,l.jsxs)(_,{children:[(0,l.jsx)("h3",{children:a?"Update":"Create"}),(0,l.jsxs)(D,{onClick:V,children:[" ",(0,l.jsx)(g.IoClose,{size:22})]})]}),(0,l.jsx)(u.default,{children:(0,l.jsx)(S.default,{closeBtnFn:V,fetchData:q,putData:a})})]})})]})}},23114:function(e,t,n){"use strict";n.r(t);var a=n("58865");n("33948"),n("17727"),n("82801"),n("82472"),n("48675"),n("33105"),n("63408"),n("14590"),n("3462"),n("33824"),n("1439"),n("87585"),n("55315"),n("23252"),n("6461"),n("32372"),n("8922"),n("5835"),n("8970"),n("84444"),n("60285"),n("41637"),n("46229"),n("17330"),n("62062");var l=n("85893"),r=n("67294"),i=n("55693"),o=n("94718"),d=n("8193"),s=n("15729"),c=n("27233"),u=n("16393"),f=n("71893"),h=n("72132"),x=n("7701"),p=n("7104");function g(){let e=(0,a._)(["\n  position: relative;\n  width: 95%;\n  height: 30px;\n  //background-color: #ccc;\n  border-radius: 7px;\n  overflow: hidden;\n\n  .progress-bar {\n    background-color: ",";\n    color: #fff;\n    text-align: center;\n    line-height: 30px;\n    width: 0;\n    position: absolute;\n    transition: width 0.1s;\n  }\n"]);return g=function(){return e},e}let m=f.default.div(g(),u.mainColor);t.default=e=>{let{saveFileUrl:t,urlBase:n,fetchData:a,titleFile:f}=e,[g,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)(0);return(0,l.jsxs)(i.default,{display:"flex",justifyContent:"end",children:[(0,l.jsxs)(p.Stack,{direction:"row",spacing:2,children:[(0,l.jsxs)(o.default,{startIcon:(0,l.jsx)(d.AiOutlineCloudUpload,{}),variant:"contained",component:"label",onChange:e=>{b(!0);let n=e.target.files[0],l=u.BASE_URL+t,r=localStorage.getItem(u.TOKEN),i={headers:{"Content-Type":"multipart/form-data",Authorization:u.TokenType+r,"Access-Control-Allow-Origin":"*"},onUploadProgress:e=>{v(Math.round(100*e.loaded/e.total))}},o=new FormData;o.append("file",n),c.default.put(l,o,i).then(e=>{h.toast.success("Uploaded file successfully"),a()}).catch(e=>{h.toast.error("Upload failed")}).finally(()=>b(!1)),e.target.value=null},children:["import file",(0,l.jsx)("input",{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"file",hidden:!0})]}),(0,l.jsx)(o.default,{variant:"contained",onClick:()=>{let e=atob(n),t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n);let a=new Blob([t],{type:"application/xlsx"}),l=document.createElement("a");l.href=URL.createObjectURL(a),l.download="".concat(f,".xlsx"),document.body.appendChild(l),l.click(),document.body.removeChild(l)},children:"example file"})]}),(0,l.jsx)(s.default,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:g,children:(0,l.jsx)(m,{children:(0,l.jsx)(i.default,{display:"flex",justifyContent:"center",children:(0,l.jsx)(x.default,{color:"inherit"})})})})]})}},1185:function(e,t,n){"use strict";n.r(t);var a=n("58865");n("33948");var l=n("85893"),r=n("67294"),i=n("71893"),o=n("7104"),d=n("94718"),s=n("27233"),c=n("16393"),u=n("72132"),f=n("57024");function h(){let e=(0,a._)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 20px;\n  margin-bottom: 20px;\n  ","\n"]);return h=function(){return e},e}function x(){let e=(0,a._)(["\n  margin: 20px 0;\n\n"]);return x=function(){return e},e}let p=i.default.div(h(),(0,f.extrasmall)({gridTemplateColumns:"1fr"})),g=i.default.div(x());t.default=(0,r.memo)(e=>{let{closeBtnFn:t,fetchData:n,putData:a}=e,i=a||{studentId:"",year:"",semester:"",subject:"",credit:"",currents:"",finals:"",totals:"",penalty:"",retakeN:"",retakeData:"",note:""},[f,h]=(0,r.useState)(i),x=e=>{s.default.post(c.BASE_URL+"/workOtherService/saveSingleFail",e).then(e=>{n(),u.toast.success("Successfully saved"),t()}).catch(e=>{u.toast.error("Error saving")})},m=e=>{s.default.put(c.BASE_URL+"/workOtherService/updateSingleFail",e).then(e=>{u.toast.success("Successfully updated"),n(),t()}).catch(e=>{u.toast.error("Error updated")})};return(0,l.jsxs)(g,{children:[(0,l.jsxs)(p,{children:[(0,l.jsx)(o.TextField,{fullWidth:!0,disabled:!0,label:"StudentId",value:f.studentId,onChange:e=>h(t=>({...t,studentId:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Year",value:f.year,onChange:e=>h(t=>({...t,year:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Semester",value:f.semester,onChange:e=>h(t=>({...t,semester:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Subject",value:f.subject,onChange:e=>h(t=>({...t,subject:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Credit",type:"number",value:f.credit,onChange:e=>h(t=>({...t,credit:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Currents",value:f.currents,onChange:e=>h(t=>({...t,currents:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Finals",value:f.finals,onChange:e=>h(t=>({...t,finals:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Totals",value:f.totals,onChange:e=>h(t=>({...t,totals:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Penalty",value:f.penalty,onChange:e=>h(t=>({...t,penalty:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Contract N",value:f.retakeN,onChange:e=>h(t=>({...t,retakeN:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Contract date",value:f.retakeData,onChange:e=>h(t=>({...t,retakeData:e.target.value}))}),(0,l.jsx)(o.TextField,{fullWidth:!0,label:"Note",value:f.note,onChange:e=>h(t=>({...t,note:e.target.value}))})]}),(0,l.jsxs)(o.Stack,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,l.jsx)(d.default,{variant:"outlined",onClick:t,children:"Cancel"}),(0,l.jsx)(d.default,{variant:"contained",onClick:()=>{let e=!0;for(let t in f)if(""===f[t]){e=!1;break}if(e){let e=parseInt(f.credit,10);if(isNaN(e))u.toast.error("Please enter a valid number for Credit.");else{let t={...f,credit:e};a?m(t):x(t)}}else u.toast.error("Please fill in all the fields")},children:"save"})]})]})})},59388:function(e,t,n){"use strict";n.r(t),n("33948"),n("57640"),n("9924");var a=n("85893"),l=n("67294"),r=n("79623"),i=n("7104"),o=n("63750"),d=n("27233"),s=n("16393");t.default=(0,l.memo)(e=>{let{setData:t,searchUrl:n,fetchData:c,pagination:u}=e,f=(0,l.useRef)(null),[h,x]=(0,l.useState)(""),{headers:p}=(0,s.getHeaders)(),g=e=>{x(e),f.current&&f.current.cancel("Operation canceled due to new request.");let a=d.default.CancelToken.source();f.current=a;let l=setTimeout(()=>{e.length>=2?d.default.get("".concat(s.BASE_URL).concat(n).concat(e),{headers:p,cancelToken:a.token}).then(e=>{t(e.data.obj.obj.map((e,t)=>({...e,count:t+1})))}).catch(e=>{d.default.isCancel(e)}):c()},300);return()=>{a&&a.cancel("Operation canceled due to component unmount."),clearTimeout(l)}};return(0,l.useEffect)(()=>{x("")},[u]),(0,a.jsx)(i.TextField,{placeholder:"Search by ID card",size:"small",value:h,onChange:e=>g(e.target.value),id:"idCard",sx:{width:"300px"},InputProps:{startAdornment:(0,a.jsx)(r.default,{position:"start",children:(0,a.jsx)(o.BsSearch,{size:20})})}})})}}]);