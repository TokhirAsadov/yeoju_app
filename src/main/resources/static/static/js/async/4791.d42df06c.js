/*! For license information please see 4791.d42df06c.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["4791"],{54072:function(e,t,a){"use strict";a.r(t);var l=a("58865");a("33948"),a("31672"),a("59461"),a("2490"),a("57640"),a("9924");var n=a("85893"),d=a("67294"),i=a.n(d),s=a("71893"),o=a("61261"),r=a("44025"),u=a("32392"),c=a("42154"),p=a("52861"),m=a("30381"),f=a.n(m),h=a("94718"),x=a("47516"),b=a("60155"),g=a("55693"),v=a("7104"),j=a("97367"),y=a("15729"),C=a("3506"),T=a("16393"),k=a("27233"),S=a("72132"),w=a("57024"),I=a("78258"),D=a("89589"),E=a("45697"),A=a.n(E);function O(){let e=(0,l._)(["\n    ","\n"]);return O=function(){return e},e}function M(){let e=(0,l._)(["\n    margin-top: 20px;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 30px;\n    ","\n"]);return M=function(){return e},e}function _(){let e=(0,l._)(["\n    width: 100%;\n    padding: 15px;\n"]);return _=function(){return e},e}let R={zIndex:0,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"480px",bgcolor:"background.paper",borderRadius:"5px",boxShadow:24,p:2},Y=s.default.div(O(),(0,w.extrasmall)({width:"330px !important"})),W=s.default.div(M(),(0,w.extrasmall)({gridTemplateColumns:"1fr",justifyItems:"center"})),U=s.default.div(_());t.default=()=>{let[e,t]=i().useState(0),a=[2022,2023,2024,2025,2026,2027,2028,2029,2030],l=[{name:"Orientation week",shortname:"OW",bgColor:"#FFF",type:"ORIENTATION_WEEK"},{name:"Theoretical education",shortname:"TE",bgColor:"#d0ffff",type:"THEORETICAL_EDUCATION"},{name:"Final exams",shortname:"F",bgColor:"#90b5e1",type:"FINAL_EXAMS"},{name:"Vacation",shortname:"V",bgColor:"#e4b7b7",type:"VACATION"},{name:"Theoretical/Practical education",shortname:"T/P",bgColor:"#d0ffff",type:"THEORETICAL_PRACTICAL_EDUCATION"},{name:"Self-study/Distancion education",shortname:"S/D",bgColor:"#d0ffff",type:"SELF_STUDY_DISTANCE_EDUCATION"},{name:"Extramural studies",shortname:"ES",bgColor:"#c5d79e",type:"EXTRAMURAL_STUDIES"}],s=["KUNDUZGI_KECHKI","SIRTQI","MAGISTRATURE"],m=["DEFAULT","MED"],[w,E]=(0,d.useState)([]),[O,M]=(0,d.useState)(""),[_,z]=(0,d.useState)(l[0].type),[F,N]=(0,d.useState)(a[1]),[L,P]=(0,d.useState)(m[0]),[B,H]=(0,d.useState)(l[0].name),[K,q]=(0,d.useState)(s[0]),[V,G]=(0,d.useState)(""),[X,Q]=(0,d.useState)(null),[Z,J]=(0,d.useState)(!0),[$,ee]=(0,d.useState)("".concat(f()(new Date).year(),"-W").concat(f()(new Date).isoWeek())),[et,ea]=(0,d.useState)(!1),el=()=>ea(!1);(0,d.useEffect)(()=>{""!==O&&""!=F&&null!==X&&""!==$&&""!==V?J(!1):J(!0)},[F,X,$,V]),(0,d.useEffect)(()=>{k.default.get(T.BASE_URL+"/education/educationYearsForSelected").then(e=>{var t,a;E(e.data.obj),M((a=e.data)===null||void 0===a?void 0:(t=a.obj[0])===null||void 0===t?void 0:t.name)}).catch(e=>{E([]),M("")})},[]);let en=e=>{var t;e.preventDefault();let a="".concat(T.BASE_URL,"/attachment/upload/").concat(null==w?void 0:(t=w.find(e=>(null==e?void 0:e.name)===O))===null||void 0===t?void 0:t.id,"/").concat(f()($).isoWeek(),"?year=").concat(f()($).year(),"&defaultOrMed=").concat(L,"&weekNumber=").concat(V,"&eduType=").concat(K,"&weekType=").concat(_,"&startWeek=").concat(f()($).startOf("isoWeek").format("DD.MM.YYYY"),"&endWeek=").concat(f()($).startOf("isoWeek").add(5,"days").format("DD.MM.YYYY")),l=new FormData;l.append("file",X);let n=localStorage.getItem(T.TOKEN),d={headers:{"Content-Type":"multipart/form-data",Authorization:T.TokenType+n,"Access-Control-Allow-Origin":"*"}};k.default.post(a,l,d).then(e=>{var t;S.toast.success(null==e?void 0:(t=e.data)===null||void 0===t?void 0:t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),ea(!1)}).catch(e=>{var t,a;S.toast.error(null==e?void 0:(a=e.response)===null||void 0===a?void 0:(t=a.data)===null||void 0===t?void 0:t.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})};function ed(e){return(0,n.jsxs)(g.default,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(g.default,{sx:{width:"100%",mr:1},children:(0,n.jsx)(I.default,{variant:"determinate",...e})}),(0,n.jsx)(g.default,{sx:{minWidth:35},children:(0,n.jsx)(D.default,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}return ed.propTypes={value:A().number.isRequired},(0,n.jsxs)(U,{children:[(0,n.jsx)(g.default,{display:"flex",justifyContent:"end",children:(0,n.jsx)(h.default,{variant:"contained",onClick:()=>ea(!0),children:"Add weekly training file"})}),(0,n.jsx)(j.default,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:et,onClose:el,closeAfterTransition:!0,slots:{backdrop:y.default},slotProps:{backdrop:{timeout:500}},children:(0,n.jsx)(v.Fade,{in:et,children:(0,n.jsx)(g.default,{sx:R,component:Y,children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f()($).isoWeek(),f()($).format("MMMM"),f()($).format("MM"),f()($).year(),f()($).startOf("isoWeek").format("DD"),f()($).startOf("isoWeek").add(5,"days").format("DD.MM.YYYY"),en(e)},children:[(0,n.jsxs)(W,{children:[(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{id:"demo-simple-select-label",children:"O'quv yili"}),(0,n.jsx)(r.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:O,label:"O'quv yili",onChange:e=>M(e.target.value),children:w.length>0&&w.map((e,t)=>(0,n.jsx)(o.default,{value:e.name,children:e.name},t))})]}),(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{id:"demo-simple-select-label1",children:"Year"}),(0,n.jsx)(r.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:F,label:"Year",onChange:e=>N(e.target.value),children:a.map((e,t)=>(0,n.jsx)(o.default,{value:e,children:e},t))})]}),(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{id:"demo-simple-select-label1",children:"Type of week"}),(0,n.jsx)(r.default,{size:"small",sx:{width:"200px",borderRadius:"5px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:B,label:"Type of week",onChange:e=>H(e.target.value),children:l.map((e,t)=>(0,n.jsx)(o.default,{value:e.name,onClick:()=>z(e.type),children:(0,n.jsxs)(g.default,{sx:{width:"100%",display:"flex",gap:"5px",alignItems:"center"},children:[(0,n.jsx)(g.default,{sx:{fontSize:"12px",borderRight:"none",width:"40px",padding:"0 3px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"5px",border:"1px solid silver",backgroundColor:"".concat(e.bgColor),fontWeight:"bold"},children:e.shortname}),(0,n.jsx)("p",{children:e.name})]})},t))})]}),(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{id:"demo-simple-select-label1",children:"Type of education"}),(0,n.jsx)(r.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:K,label:"Type of education",onChange:e=>q(e.target.value),children:s.map((e,t)=>(0,n.jsx)(o.default,{value:e,children:e},t))})]}),(0,n.jsx)(p.default,{size:"small",value:V,label:"Week of education",type:"number",sx:{width:"200px"},InputProps:{inputProps:{min:1,max:53}},onChange:e=>G(e.target.value)}),(0,n.jsx)(p.default,{size:"small",label:"Date of the week",type:"week",value:$,sx:{width:"200px"},onChange:e=>ee(e.target.value)}),(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{id:"demo-simple-select-label1",children:"Data type"}),(0,n.jsx)(r.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:L,label:"Data type",onChange:e=>P(e.target.value),children:m.map((e,t)=>(0,n.jsx)(o.default,{value:e,children:e},t))})]}),(0,n.jsxs)(h.default,{sx:{width:"200px",overflow:"hidden"},size:"sm",variant:"outlined",component:"label",endIcon:(0,n.jsx)(x.BiUpload,{}),children:[(0,n.jsx)("p",{children:(null==X?void 0:X.name)?X.name.length<13?X.name:X.name.substring(0,13)+"....":"Choose file "}),(0,n.jsx)("input",{onChange:e=>Q(e.target.files[0]),accept:"xml,.xml",type:"file",hidden:!0})]})]}),e>0&&(0,n.jsx)(g.default,{sx:{width:"100%",marginTop:"15px"},children:(0,n.jsx)(ed,{value:e})}),(0,n.jsxs)(g.default,{sx:{marginTop:"15px",width:"100%",display:"flex",justifyContent:"end",gap:"15px"},children:[(0,n.jsx)(h.default,{onClick:el,variant:"outlined",children:"Cancel"}),(0,n.jsx)(C.default,{title:Z?"Fill in all the fields !":"",placement:"top",children:(0,n.jsx)("span",{children:(0,n.jsx)(h.default,{disabled:Z,endIcon:(0,n.jsx)(b.IoSend,{size:15}),type:"submit",variant:"contained",children:"Send"})})})]})]})})})})]})}}}]);