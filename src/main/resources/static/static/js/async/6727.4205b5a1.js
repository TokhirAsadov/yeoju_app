/*! For license information please see 6727.4205b5a1.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["6727"],{73896:function(e,t,n){"use strict";n.r(t);var l=n("58865");n("33948"),n("57640"),n("9924");var i=n("85893"),o=n("67294"),d=n("71893"),a=n("50533"),r=n("16393"),s=n("89583"),u=n("94718"),c=n("30381"),p=n.n(c),v=n("86893"),f=n("63750"),h=n("27233"),m=n("72132"),x=n("97367"),g=n("55693"),b=n("79352"),w=n("55605"),S=n("53432"),j=n("16356"),y=n("61006"),k=n("87639"),C=n("90650"),I=n("57024");function _(){let e=(0,l._)(["\n  ",",\n  ","\n"]);return _=function(){return e},e}function N(){let e=(0,l._)(["\n","\n"]);return N=function(){return e},e}function U(){let e=(0,l._)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]);return U=function(){return e},e}function B(){let e=(0,l._)(["\n  width: 100%;\n  display: flex;\n  gap: 10px;\n  margin: 5px !important;\n"]);return B=function(){return e},e}function R(){let e=(0,l._)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid red;\n  border-radius: 0.5rem;\n  color: red;\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"]);return R=function(){return e},e}function A(){let e=(0,l._)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid ",";\n  border-radius: 0.5rem;\n  color: ",";\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"]);return A=function(){return e},e}function E(){let e=(0,l._)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: 5px !important;\n"]);return E=function(){return e},e}function H(){let e=(0,l._)(["\n  width: 100%;\n  background-color: #fff;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]);return H=function(){return e},e}function L(){let e=(0,l._)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n"]);return L=function(){return e},e}function T(){let e=(0,l._)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  gap: 20px;\n  color: ",";\n"]);return T=function(){return e},e}function O(){let e=(0,l._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  border-radius: 10px;\n  margin-top: 10px !important;\n  margin-left: 10px !important;\n  padding: 5px 10px !important;\n"]);return O=function(){return e},e}let P=d.default.div(_(),(0,I.extrasmall)({width:"90vw !important"}),(0,I.small)({width:"90vw !important"})),D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"85vw",height:"85vh",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"500px",padding:"15px ",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:3},F=d.default.div(N(),(0,I.extrasmall)({width:"95vw !important"})),M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"95vw",minHeight:400,bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},G=(0,d.default)(C.motion.button)(U(),r.mainColor),W=d.default.div(B()),K=d.default.button(R()),V=d.default.button(A(),r.mainColor,r.mainColor),q=d.default.div(E()),J=d.default.div(H()),Q=d.default.div(L()),X=d.default.h3(T(),r.mainColor),Y=d.default.div(O());t.default=()=>{let e=(0,a.useSelector)(e=>{var t;return null==e?void 0:(t=e.dekanat)===null||void 0===t?void 0:t.dekanat}),[t,n]=(0,o.useState)(!0),[l,d]=(0,o.useState)(!1),[c,C]=(0,o.useState)(""),I=[{field:"id",headerName:"ID",width:40,editable:!1},{field:"fullName",headerName:"Name",type:"string",width:300,editable:!1,renderCell:e=>{var t,n,l,o;return(0,i.jsxs)(W,{children:[(null==e?void 0:(t=e.row)===null||void 0===t?void 0:t.photo)?(0,i.jsx)("img",{src:(null==e?void 0:(n=e.row)===null||void 0===n?void 0:n.photo)?r.BASE_URL+"/attachment/download/"+(null==e?void 0:(o=e.row)===null||void 0===o?void 0:(l=o.photo)===null||void 0===l?void 0:l.id):"",width:"40px",height:"40px",alt:null==e?void 0:e.value,style:{borderRadius:"50%"}}):(0,i.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:(0,i.jsx)(s.FaUserAlt,{})}),(0,i.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:(0,i.jsx)(u.default,{onClick:()=>{var t;return ei(null==e?void 0:(t=e.row)===null||void 0===t?void 0:t.id)},children:null==e?void 0:e.value})})]})}},{field:"login",headerName:"Login",type:"string",width:300,editable:!1},{field:"email",headerName:"Email",type:"string",width:300,editable:!1},{field:"rfid",headerName:"RFID",type:"string",width:300,editable:!1},{field:"passport",headerName:"Passport",type:"string",width:300,editable:!1},{field:"countTouch",headerName:"Kelgan kunlari \n".concat(p()(new Date).format("MMM")),type:"string",width:170,editable:!1,renderCell:e=>(0,i.jsx)(q,{children:(0,i.jsxs)(u.default,{onClick:()=>{var t,n,l,i;return en(null==e?void 0:(t=e.row)===null||void 0===t?void 0:t.fullName,null==e?void 0:(n=e.row)===null||void 0===n?void 0:n.id,null==e?void 0:(i=e.row)===null||void 0===i?void 0:(l=i.photo)===null||void 0===l?void 0:l.id)},children:[null==e?void 0:e.value,(0,i.jsx)(f.BsCalendar2Date,{size:20})]})})},{field:"positions",headerName:"Shtat birligi va lavozimi",type:"string",width:190,editable:!1,renderCell:e=>(0,i.jsx)(q,{children:null==e?void 0:e.value})},{field:"STATUS",headerName:"Action",type:"string",width:100,editable:!1,renderCell:e=>(0,i.jsxs)(q,{children:[(0,i.jsx)(V,{onClick:()=>{var t,n,l;return ea(null==e?void 0:(t=e.row)===null||void 0===t?void 0:t.id,null==e?void 0:(n=e.row)===null||void 0===n?void 0:n.fullName,null==e?void 0:(l=e.row)===null||void 0===l?void 0:l.positions)},children:(0,i.jsx)(v.FiEdit,{})}),(0,i.jsx)(K,{onClick:()=>{var t,n;return er(null==e?void 0:(t=e.row)===null||void 0===t?void 0:t.id,null==e?void 0:(n=e.row)===null||void 0===n?void 0:n.fullName)},children:(0,i.jsx)(f.BsTrash,{})})]})}],[_,N]=(0,o.useState)([]),[U,B]=(0,o.useState)(!1),[R,A]=(0,o.useState)(""),[E,H]=(0,o.useState)(""),[L,T]=(0,o.useState)(!1),[O,Z]=(0,o.useState)(!1),[$,ee]=(0,o.useState)(!1),{headers:et}=(0,r.getHeaders)(),en=(e,t,n)=>(H(e),A(n),C(t),Z(!0)),el=()=>{Z(!1)},ei=e=>{C(e),T(!0)},eo=()=>{d(!1)},ed=()=>{B(!1),ee(!1)},ea=(e,t,n)=>{ec(l=>({...l,sectionId:null,positionId:n,userId:{value:e,label:t}})),h.default.get(r.BASE_URL+"/staff/getStaffIdWithUserId/"+e,{headers:et}).then(e=>{var t;m.toast.success(null==e?void 0:(t=e.data)===null||void 0===t?void 0:t.message),ec(t=>{var n;return{...t,id:null==e?void 0:(n=e.data)===null||void 0===n?void 0:n.obj}}),ee(!0)}).catch(e=>{var t,n;m.toast.error(null==e?void 0:(n=e.response)===null||void 0===n?void 0:(t=n.data)===null||void 0===t?void 0:t.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})},er=(e,t)=>{h.default.get(r.BASE_URL+"/staff/getStaffIdWithUserId/"+e,{headers:et}).then(e=>{if(window.confirm("Do you want to delete ".concat(t,"?"))){var n;h.default.delete(r.BASE_URL+"/staff/deleteStaff/"+(null==e?void 0:(n=e.data)===null||void 0===n?void 0:n.obj),{headers:et}).then(e=>{var t;m.toast.error(null==e?void 0:(t=e.data)===null||void 0===t?void 0:t.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),es()}).catch(e=>{var t,n;m.toast.error(null==e?void 0:(n=e.response)===null||void 0===n?void 0:(t=n.data)===null||void 0===t?void 0:t.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})}}).catch(e=>{var t,n;m.toast.error(null==e?void 0:(n=e.response)===null||void 0===n?void 0:(t=n.data)===null||void 0===t?void 0:t.message)})};(0,o.useEffect)(()=>{es()},[]);let es=()=>{n(!0),N([]),h.default.get(r.BASE_URL+"/section/getStatisticsForDekan",{headers:et}).then(e=>{var t,l;N(null==e?void 0:(l=e.data)===null||void 0===l?void 0:(t=l.obj)===null||void 0===t?void 0:t.sort((e,t)=>e.fullName>t.fullName?1:-1)),n(!1)}).catch(e=>{})},[eu,ec]=(0,o.useState)({id:null,sectionId:null,positionId:null,userId:null}),ep=e=>{(null==e?void 0:e.id)!==void 0&&(null==e?void 0:e.id)!==null&&(null==e?void 0:e.id)!==""&&(null==e?void 0:e.userId)!==void 0&&(null==e?void 0:e.userId)!==null&&(null==e?void 0:e.userId)!==""&&(null==e?void 0:e.positionId)!==void 0&&(null==e?void 0:e.positionId)!==""&&(null==e?void 0:e.positionId)!==null?h.default.post(r.BASE_URL+"/staff/saveStaff",e,{headers:et}).then(e=>{m.toast.success("Staff updated successfully."),es(),ee(!1)}).catch(e=>{var t,n;m.toast.error(null==e?void 0:(n=e.response)===null||void 0===n?void 0:(t=n.data)===null||void 0===t?void 0:t.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}):m.toast.warning("Empty any fields...")},ev=e=>{((null==e?void 0:e.id)===""||(null==e?void 0:e.id)===void 0)&&(e.id=null,e.sectionId=null),(null==e?void 0:e.id)===null&&(e.sectionId=null),(null==e?void 0:e.userId)!==void 0&&(null==e?void 0:e.userId)!==null&&(null==e?void 0:e.userId)!==""&&(null==e?void 0:e.positionId)!==void 0&&(null==e?void 0:e.positionId)!==""&&(null==e?void 0:e.positionId)!==null?(m.toast.success("all done add"),h.default.post(r.BASE_URL+"/staff/saveStaff",e,{headers:et}).then(e=>{m.toast.success("Staff saved successfully."),es(),B(!1)}).catch(e=>{var t,n;m.toast.error(null==e?void 0:(n=e.response)===null||void 0===n?void 0:(t=n.data)===null||void 0===t?void 0:t.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})):m.toast.warning("Empty any fields...")};return(0,i.jsxs)(Y,{children:[(0,i.jsxs)(X,{children:["Table of Staffs",(0,i.jsxs)(Q,{children:[(0,i.jsx)(u.default,{variant:"contained",onClick:()=>{d(!0)},children:"Open Month Modal"}),(0,i.jsx)(u.default,{variant:"contained",color:"success",onClick:()=>{ec({...eu,id:null,userId:null,sectionId:null,positionId:null}),B(!0)},endIcon:(0,i.jsx)(f.BsPersonFillAdd,{}),children:"Add Staff"})]})]}),(0,i.jsx)(x.default,{open:l,onClose:eo,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,i.jsxs)(g.default,{sx:D,component:P,children:[(0,i.jsx)(G,{onClick:eo,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,i.jsx)(b.RiCloseLine,{})}),(0,i.jsx)(w.default,{colName:"Staffs",isTeacher:!1,date:new Date,userName:e.name,kafedraId:e.id,url:"/staff/getStatisticsForRektor?sectionId="})]})}),(0,i.jsx)(J,{children:t?(0,i.jsx)(S.default,{}):(0,i.jsx)(j.DataGrid,{checkboxSelection:!0,style:{width:"500px!important",minHeight:"300px!important"},columns:I,rows:_,components:{Toolbar:j.GridToolbar},autoHeight:!0,pageSize:10,initialState:{...null==_?void 0:_.initialState,columns:{columnVisibilityModel:{id:!1,login:!1,card:!1,rfid:!1,email:!1,passport:!1}}}})}),(0,i.jsx)(x.default,{open:O,onClose:el,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,i.jsxs)(g.default,{sx:M,children:[(0,i.jsx)(G,{onClick:el,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,i.jsx)(b.RiCloseLine,{})}),(0,i.jsx)(y.default,{userName:E,userId:c,date:new Date,photo:R})]})}),(0,i.jsx)(x.default,{open:U,onClose:ed,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,i.jsxs)(g.default,{sx:z,component:F,children:[(0,i.jsx)(G,{onClick:ed,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,i.jsx)(b.RiCloseLine,{})}),(0,i.jsx)(k.default,{isSection:!1,title:"Add Staff",formArr:[{label:"id",name:"id",placeholder:"Enter id of staff",type:"text"},{label:"Select User:",name:"userId",placeholder:"Select User",type:"select"},{label:"Select Position:",name:"positionId",placeholder:"Select Position",type:"select"}],submitBtn:(null==eu?void 0:eu.id)!==null?"Update":"Save",onSubmit:e=>(null==eu?void 0:eu.id)!==null?ep(e):ev(e),updateItem:eu})]})}),(0,i.jsx)(x.default,{open:$,onClose:ed,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,i.jsxs)(g.default,{sx:z,component:F,children:[(0,i.jsx)(G,{onClick:ed,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,i.jsx)(b.RiCloseLine,{})}),(0,i.jsx)(k.default,{isSection:!1,title:"Update Staff",formArr:[{label:"id",name:"id",placeholder:"Enter id of staff",type:"text"},{label:"Select User:",name:"userId",placeholder:"Select User",type:"select"},{label:"Select Position:",name:"positionId",placeholder:"Select Position",type:"select"}],submitBtn:(null==eu?void 0:eu.id)!==null?"Update":"Save",onSubmit:e=>(null==eu?void 0:eu.id)!==null?ep(e):ev(e),updateItem:eu})]})})]})}}}]);