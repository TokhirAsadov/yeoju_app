/*! For license information please see 9117.3ccd0bc8.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["9117"],{89926:function(e,n,t){"use strict";t.r(n);var l=t("58865");t("33948"),t("57640"),t("9924");var o=t("85893"),i=t("67294"),d=t("71893"),r=t("16393"),a=t("53432"),s=t("16356"),u=t("89583"),c=t("94718"),p=t("30381"),f=t.n(p),v=t("86893"),h=t("63750"),m=t("27233"),x=t("72132"),g=t("97367"),b=t("55693"),w=t("79352"),j=t("61006"),y=t("90650"),S=t("55605"),C=t("50533"),k=t("87639"),I=t("57024");function _(){let e=(0,l._)(["\n","}\n","}\n","}\n"]);return _=function(){return e},e}function N(){let e=(0,l._)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]);return N=function(){return e},e}function U(){let e=(0,l._)(["\n  width: 100%;\n  display: flex;\n  gap: 10px;\n  margin: 5px!important;\n"]);return U=function(){return e},e}function B(){let e=(0,l._)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border:1px solid red;\n  border-radius: 0.5rem;\n  color: red;\n  padding: 5px!important;\n\n  &:hover{\n    transform: scale(1.1);\n  }\n\n"]);return B=function(){return e},e}function R(){let e=(0,l._)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border:1px solid ",";\n  border-radius: 0.5rem;\n  color: ",";\n  padding: 5px!important;\n\n  &:hover{\n    transform: scale(1.1);\n  }\n\n"]);return R=function(){return e},e}function E(){let e=(0,l._)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: 5px!important;\n"]);return E=function(){return e},e}function A(){let e=(0,l._)(["\n  width: 100%;\n  background-color: #fff;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]);return A=function(){return e},e}function H(){let e=(0,l._)(["\n  width: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 5px 15px;\n  border-radius: 0.5rem;\n  background-color: ",";\n  border: 1px solid ",";\n  color: white;\n  transition: 0.3s background-color, color;\n  font-size: 16px;\n\n  &:focus{\n    transform: scale(0.95);\n  }\n  ","\n"]);return H=function(){return e},e}function T(){let e=(0,l._)(["\n  width: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 5px 15px;\n  border-radius: 0.5rem;\n  background-color: ",";\n  border: 1px solid transparent;\n  color: white;\n  transition: 0.3s background-color, color;\n  font-size: 16px;\n\n  &:hover{\n    background-color: #fff;\n    color: ",";\n    border: 1px solid ",";\n  }\n","\n"]);return T=function(){return e},e}function L(){let e=(0,l._)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n"]);return L=function(){return e},e}function P(){let e=(0,l._)(["\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  gap: 20px;\n  color: ",";\n"]);return P=function(){return e},e}function O(){let e=(0,l._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  border-radius: 10px;\n  padding: 10px;\n  .MuiDataGrid-columnHeaderTitleContainer {\n    justify-content: center;\n  }\n"]);return O=function(){return e},e}let z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",height:"90vh",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"68vw",padding:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:8},W=d.default.div(_(),(0,I.medium)({width:"75vw !important",padding:"15px !important"}),(0,I.small)({width:"85vw !important",padding:"15px !important"}),(0,I.extrasmall)({width:"90vw !important",padding:"10px !important"})),M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",minHeight:400,bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},F=(0,d.default)(y.motion.button)(N(),r.mainColor),G=d.default.div(U()),V=d.default.button(B()),q=d.default.button(R(),r.mainColor,r.mainColor),J=d.default.div(E()),K=d.default.div(A());d.default.button(H(),e=>e.bg,e=>e.bg,(0,I.extrasmall)({padding:"5px !important"})),d.default.button(T(),r.mainColor,r.mainColor,r.mainColor,(0,I.extrasmall)({padding:"5px !important"}));let Q=d.default.div(L()),X=d.default.h3(P(),r.mainColor),Y=d.default.div(O());n.default=e=>{let{s:n}=e,t=(0,C.useSelector)(e=>{var t,l;return n?null==e?void 0:null===(t=e.secondBulim)||void 0===t?void 0:t.secondBulim:null==e?void 0:null===(l=e.bulim)||void 0===l?void 0:l.bulim}),[l,d]=(0,i.useState)(!0),[p,y]=(0,i.useState)(!1),[I,_]=(0,i.useState)(""),N=[{field:"count",headerName:"\u2116",width:40,align:"center",editable:!1},{field:"fullName",headerName:"Name",type:"string",minWidth:300,flex:1,editable:!1,renderCell:e=>{var n,t,l,i;return(0,o.jsxs)(G,{children:[(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.photo)?(0,o.jsx)("img",{src:(null==e?void 0:null===(t=e.row)||void 0===t?void 0:t.photo)?r.BASE_URL+"/attachment/download/"+(null==e?void 0:null===(i=e.row)||void 0===i?void 0:null===(l=i.photo)||void 0===l?void 0:l.id):"",width:"40px",height:"40px",alt:null==e?void 0:e.value,style:{borderRadius:"50%"}}):(0,o.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:(0,o.jsx)(u.FaUserAlt,{})}),(0,o.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:(0,o.jsx)(c.default,{onClick:()=>{var n;return ei(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id)},children:null==e?void 0:e.value})})]})}},{field:"login",headerName:"Login",type:"string",minWidth:100,flex:1,align:"center",editable:!1},{field:"email",headerName:"Email",type:"string",minWidth:150,flex:1,align:"center",editable:!1},{field:"rfid",headerName:"RFID",type:"string",minWidth:120,flex:1,align:"center",editable:!1},{field:"passport",headerName:"Passport",type:"string",minWidth:300,flex:1,align:"center",editable:!1},{field:"countTouch",align:"center",headerName:"Days to come - \n".concat(f()(new Date).format("MMM")),type:"string",width:170,editable:!1,renderCell:e=>(0,o.jsx)(J,{children:(0,o.jsxs)(c.default,{onClick:()=>{var n,t,l,o;return el(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.fullName,null==e?void 0:null===(t=e.row)||void 0===t?void 0:t.id,null==e?void 0:null===(o=e.row)||void 0===o?void 0:null===(l=o.photo)||void 0===l?void 0:l.id)},children:[null==e?void 0:e.value,(0,o.jsx)(h.BsCalendar2Date,{size:19,color:r.mainColor})]})})},{field:"positions",align:"center",headerName:"Positions",type:"string",minWidth:190,flex:.5,editable:!1,renderCell:e=>(0,o.jsx)(J,{children:null==e?void 0:e.value})},{field:"STATUS",align:"center",headerName:"Status",type:"string",minWidth:100,flex:.5,editable:!1,renderCell:e=>(0,o.jsxs)(J,{children:[(0,o.jsx)(q,{onClick:()=>{var n,t,l;return ea(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id,null==e?void 0:null===(t=e.row)||void 0===t?void 0:t.fullName,null==e?void 0:null===(l=e.row)||void 0===l?void 0:l.positions)},children:(0,o.jsx)(v.FiEdit,{})}),(0,o.jsx)(V,{onClick:()=>{var n,t;return es(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id,null==e?void 0:null===(t=e.row)||void 0===t?void 0:t.fullName)},children:(0,o.jsx)(h.BsTrash,{})})]})}],[U,B]=(0,i.useState)([]),[R,E]=(0,i.useState)(!1),[A,H]=(0,i.useState)(""),[T,L]=(0,i.useState)(""),[P,O]=(0,i.useState)(!1),[Z,$]=(0,i.useState)(!1),[ee,en]=(0,i.useState)(!1),{headers:et}=(0,r.getHeaders)(),el=(e,n,t)=>(L(e),H(t),_(n),$(!0)),eo=()=>{$(!1)},ei=e=>{_(e),O(!0)},ed=()=>{y(!1)},er=()=>{E(!1),en(!1)},ea=(e,n,l)=>{ep(o=>({...o,sectionId:null==t?void 0:t.id,positionId:l,userId:{value:e,label:n}})),m.default.get(r.BASE_URL+"/staff/getStaffIdWithUserId/"+e,{headers:et}).then(e=>{var n;x.toast.success(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.message),ep(n=>{var t;return{...n,id:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj}}),en(!0)}).catch(e=>{var n,t;x.toast.error(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})},es=(e,n)=>{m.default.get(r.BASE_URL+"/staff/getStaffIdWithUserId/"+e,{headers:et}).then(e=>{if(window.confirm("Do you want to delete ".concat(n,"?"))){var t;m.default.delete(r.BASE_URL+"/staff/deleteStaff/"+(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj),{headers:et}).then(e=>{var n;x.toast.error(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),eu()}).catch(e=>{var n,t;x.toast.error(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})}}).catch(e=>{var n,t;x.toast.error(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message)})};(0,i.useEffect)(()=>{eu()},[]);let eu=()=>{d(!0),B([]),m.default.get(r.BASE_URL+"/section/getStatistics",{headers:et}).then(e=>{var n,t;B(null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(n=t.obj)||void 0===n?void 0:n.sort((e,n)=>e.fullName>n.fullName?1:-1).map((e,n)=>({...e,count:n+1}))),d(!1)}).catch(e=>{})},[ec,ep]=(0,i.useState)({}),ef=e=>{(null==e?void 0:e.id)!==void 0&&(null==e?void 0:e.id)!==null&&(null==e?void 0:e.id)!==""&&(null==e?void 0:e.userId)!==void 0&&(null==e?void 0:e.userId)!==null&&(null==e?void 0:e.userId)!==""&&(null==e?void 0:e.sectionId)!==void 0&&(null==e?void 0:e.sectionId)!==""&&(null==e?void 0:e.sectionId)!==null&&(null==e?void 0:e.positionId)!==void 0&&(null==e?void 0:e.positionId)!==""&&(null==e?void 0:e.positionId)!==null?(x.toast.success("all done"),m.default.post(r.BASE_URL+"/staff/saveStaff",e,{headers:et}).then(e=>{x.toast.success("Staff updated successfully."),eu(),en(!1)}).catch(e=>{var n,t;x.toast.error(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})):x.toast.warning("Empty any fields...")},ev=e=>{((null==e?void 0:e.id)===""||(null==e?void 0:e.id)===void 0)&&(e.id=null),(null==e?void 0:e.userId)!==void 0&&(null==e?void 0:e.userId)!==null&&(null==e?void 0:e.userId)!==""&&(null==e?void 0:e.sectionId)!==void 0&&(null==e?void 0:e.sectionId)!==""&&(null==e?void 0:e.sectionId)!==null&&(null==e?void 0:e.positionId)!==void 0&&(null==e?void 0:e.positionId)!==""&&(null==e?void 0:e.positionId)!==null?m.default.post(r.BASE_URL+"/staff/saveStaff",e,{headers:et}).then(e=>{x.toast.success("Staff saved successfully."),eu(),E(!1)}).catch(e=>{var n,t;x.toast.error(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}):x.toast.warning("Empty any fields...")};return(0,o.jsxs)(Y,{children:[(0,o.jsxs)(X,{children:["Table of Staffs",(0,o.jsxs)(Q,{children:[(0,o.jsx)(c.default,{variant:"contained",onClick:()=>{y(!0)},children:"Open Month Modal"}),(0,o.jsx)(c.default,{variant:"contained",color:"success",endIcon:(0,o.jsx)(u.FaUserPlus,{}),onClick:()=>{ep({...ec,id:null,userId:null,sectionId:t.id,positionId:null}),E(!0)},children:" Add Staff"})]})]}),(0,o.jsx)(g.default,{open:p,onClose:ed,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,o.jsxs)(b.default,{sx:z,children:[(0,o.jsx)(F,{onClick:ed,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,o.jsx)(w.RiCloseLine,{})}),(0,o.jsx)(S.default,{colName:"Staffs",isTeacher:!1,date:new Date,userName:null==t?void 0:t.name,kafedraId:null==t?void 0:t.id,url:"/staff/getStatisticsForRektor?sectionId="})]})}),(0,o.jsx)(K,{children:l?(0,o.jsx)(a.default,{}):(0,o.jsx)(s.DataGrid,{columns:N,rows:U,components:{Toolbar:s.GridToolbar},autoHeight:!0,pageSize:15,initialState:{columns:{columnVisibilityModel:{login:!1,card:!1,rfid:!1,email:!1,passport:!1}}}})}),(0,o.jsx)(g.default,{open:Z,onClose:eo,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,o.jsxs)(b.default,{sx:M,children:[(0,o.jsx)(F,{onClick:eo,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,o.jsx)(w.RiCloseLine,{})}),(0,o.jsx)(j.default,{userName:T,userId:I,date:new Date,photo:A})]})}),(0,o.jsx)(g.default,{open:R,onClose:er,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,o.jsxs)(b.default,{sx:D,component:W,children:[(0,o.jsx)(F,{onClick:er,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,o.jsx)(w.RiCloseLine,{})}),(0,o.jsx)(k.default,{isSection:!0,title:"Add Staff",formArr:[{label:"id",name:"id",placeholder:"Enter id of staff",type:"text"},{label:"Select User:",name:"userId",placeholder:"Select User",type:"select"},{label:"Select Position:",name:"positionId",placeholder:"Select Position",type:"select"}],submitBtn:(null==ec?void 0:ec.id)!==null?"Update":"Save",onSubmit:e=>(null==ec?void 0:ec.id)!==null?ef(e):ev(e),updateItem:ec})]})}),(0,o.jsx)(g.default,{open:ee,onClose:er,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,o.jsxs)(b.default,{sx:D,children:[(0,o.jsx)(F,{onClick:er,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,o.jsx)(w.RiCloseLine,{})}),(0,o.jsx)(k.default,{isSection:!0,title:"Update Staff",formArr:[{label:"id",name:"id",placeholder:"Enter id of staff",type:"text"},{label:"Select User:",name:"userId",placeholder:"Select User",type:"select"},{label:"Select Position:",name:"positionId",placeholder:"Select Position",type:"select"}],submitBtn:(null==ec?void 0:ec.id)!==null?"Update":"Save",onSubmit:e=>(null==ec?void 0:ec.id)!==null?ef(e):ev(e),updateItem:ec})]})})]})}}}]);