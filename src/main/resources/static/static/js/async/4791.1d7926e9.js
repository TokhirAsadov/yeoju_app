/*! For license information please see 4791.1d7926e9.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["4791"],{89819:function(e,t,a){"use strict";a.r(t);var l=a("58865"),n=a("85893");a("67294");var i=a("71893"),d=a("38345");function s(){let e=(0,l._)(["\nwidth: 100%;\n"]);return s=function(){return e},e}let o=i.default.div(s());t.default=()=>(0,n.jsx)(o,{children:(0,n.jsx)(d.default,{columns:[{field:"count",headerName:"\u2116",sortable:!0,width:50,align:"center",justifyContent:"center"},{minWidth:100,flex:1,field:"name",headerName:"Name",sortable:!0,align:"center",justifyContent:"center"}],rows:[],loading:!1})})},54072:function(e,t,a){"use strict";a.r(t);var l=a("58865");a("33948"),a("31672"),a("59461"),a("2490"),a("57640"),a("9924");var n=a("85893"),i=a("67294"),d=a.n(i),s=a("71893"),o=a("61261"),r=a("44025"),u=a("32392"),c=a("42154"),f=a("52861"),m=a("30381"),p=a.n(m),h=a("94718"),x=a("47516"),g=a("60155"),v=a("55693"),b=a("7104"),j=a("97367"),y=a("15729"),C=a("3506"),T=a("16393"),k=a("27233"),w=a("72132"),S=a("57024"),I=a("78258"),D=a("89589"),E=a("45697"),A=a.n(E),O=a("89819");function M(){let e=(0,l._)(["\n    ","\n"]);return M=function(){return e},e}function _(){let e=(0,l._)(["\n    margin-top: 20px;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 30px;\n    ","\n"]);return _=function(){return e},e}function R(){let e=(0,l._)(["\n    width: 100%;\n    padding: 1rem;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]);return R=function(){return e},e}let W={zIndex:0,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"480px",bgcolor:"background.paper",borderRadius:"5px",boxShadow:24,p:2},Y=s.default.div(M(),(0,S.extrasmall)({width:"330px !important"})),N=s.default.div(_(),(0,S.extrasmall)({gridTemplateColumns:"1fr",justifyItems:"center"})),U=s.default.div(R());t.default=()=>{let[e,t]=d().useState(0),a=[2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035],l=[{name:"Orientation week",shortname:"OW",bgColor:"#FFF",type:"ORIENTATION_WEEK"},{name:"Theoretical education",shortname:"TE",bgColor:"#d0ffff",type:"THEORETICAL_EDUCATION"},{name:"Final exams",shortname:"F",bgColor:"#90b5e1",type:"FINAL_EXAMS"},{name:"Vacation",shortname:"V",bgColor:"#e4b7b7",type:"VACATION"},{name:"Theoretical/Practical education",shortname:"T/P",bgColor:"#d0ffff",type:"THEORETICAL_PRACTICAL_EDUCATION"},{name:"Self-study/Distancion education",shortname:"S/D",bgColor:"#d0ffff",type:"SELF_STUDY_DISTANCE_EDUCATION"},{name:"Extramural studies",shortname:"ES",bgColor:"#c5d79e",type:"EXTRAMURAL_STUDIES"}],s=["KUNDUZGI_KECHKI","SIRTQI","MAGISTRATURE"],m=["DEFAULT","MED"],[S,E]=(0,i.useState)([]),[M,_]=(0,i.useState)(""),[R,z]=(0,i.useState)(l[0].type),[F,L]=(0,i.useState)(a.find(e=>e===p()().year())),[H,P]=(0,i.useState)(m[0]),[B,K]=(0,i.useState)(l[0].name),[q,G]=(0,i.useState)(s[0]),[V,X]=(0,i.useState)(""),[Q,Z]=(0,i.useState)(null),[J,$]=(0,i.useState)(!0),[ee,et]=(0,i.useState)("".concat(p()(new Date).year(),"-W").concat(p()(new Date).isoWeek())),[ea,el]=(0,i.useState)(!1),en=()=>el(!1),ei=()=>{var e;M&&k.default.get("".concat(T.BASE_URL,"/education/getSortNumberOfWeek/").concat(null==S?void 0:null===(e=S.find(e=>(null==e?void 0:e.name)===M))||void 0===e?void 0:e.id),(0,T.getHeaders)()).then(e=>{X(e.data.obj||1)}).catch(e=>{})},ed=()=>{k.default.get("".concat(T.BASE_URL,"/education/educationYearsForCRUD"),(0,T.getHeaders)()).then(e=>{var t,a;E(e.data.obj.map((e,t)=>({...e,count:t+1}))),_(null===(a=e.data)||void 0===a?void 0:null===(t=a.obj[0])||void 0===t?void 0:t.name)}).catch(e=>{E([]),_("")})};(0,i.useEffect)(()=>{""!==M&&""!=F&&null!==Q&&""!==ee&&""!==V?$(!1):$(!0)},[F,Q,ee,V]),(0,i.useEffect)(()=>{ed()},[]),(0,i.useEffect)(()=>{ei()},[M]);let es=e=>{var t;e.preventDefault();let a="".concat(T.BASE_URL,"/attachment/upload/").concat(null==S?void 0:null===(t=S.find(e=>(null==e?void 0:e.name)===M))||void 0===t?void 0:t.id,"/").concat(p()(ee).isoWeek(),"?year=").concat(p()(ee).year(),"&defaultOrMed=").concat(H,"&weekNumber=").concat(V,"&eduType=").concat(q,"&weekType=").concat(R,"&startWeek=").concat(p()(ee).startOf("isoWeek").format("DD.MM.YYYY"),"&endWeek=").concat(p()(ee).startOf("isoWeek").add(5,"days").format("DD.MM.YYYY")),l=new FormData;l.append("file",Q);let n=localStorage.getItem(T.TOKEN),i={headers:{"Content-Type":"multipart/form-data",Authorization:T.TokenType+n,"Access-Control-Allow-Origin":"*"}};k.default.post(a,l,i).then(e=>{var t;w.toast.success(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),el(!1)}).catch(e=>{var t,a;w.toast.error(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})};function eo(e){return(0,n.jsxs)(v.default,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(v.default,{sx:{width:"100%",mr:1},children:(0,n.jsx)(I.default,{variant:"determinate",...e})}),(0,n.jsx)(v.default,{sx:{minWidth:35},children:(0,n.jsx)(D.default,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}return eo.propTypes={value:A().number.isRequired},(0,n.jsxs)(U,{children:[(0,n.jsx)(v.default,{display:"flex",justifyContent:"end",gap:2,mb:3,children:(0,n.jsx)(h.default,{variant:"contained",onClick:()=>el(!0),children:"Add weekly training file"})}),(0,n.jsx)(j.default,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:ea,onClose:en,closeAfterTransition:!0,slots:{backdrop:y.default},slotProps:{backdrop:{timeout:500}},children:(0,n.jsx)(b.Fade,{in:ea,children:(0,n.jsx)(v.default,{sx:W,component:Y,children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p()(ee).isoWeek(),p()(ee).format("MMMM"),p()(ee).format("MM"),p()(ee).year(),p()(ee).startOf("isoWeek").format("DD"),p()(ee).startOf("isoWeek").add(5,"days").format("DD.MM.YYYY"),es(e)},children:[(0,n.jsxs)(N,{children:[(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{id:"demo-simple-select-label",children:"O'quv yili"}),(0,n.jsx)(r.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:M,label:"O'quv yili",onChange:e=>_(e.target.value),children:S.length>0&&S.map((e,t)=>(0,n.jsx)(o.default,{value:e.name,children:e.name},t))})]}),(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{id:"demo-simple-select-label1",children:"Year"}),(0,n.jsx)(r.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:F,label:"Year",onChange:e=>L(e.target.value),children:a.map((e,t)=>(0,n.jsx)(o.default,{value:e,children:e},t))})]}),(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{id:"demo-simple-select-label1",children:"Type of week"}),(0,n.jsx)(r.default,{size:"small",sx:{width:"200px",borderRadius:"5px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:B,label:"Type of week",onChange:e=>K(e.target.value),children:l.map((e,t)=>(0,n.jsx)(o.default,{value:e.name,onClick:()=>z(e.type),children:(0,n.jsxs)(v.default,{sx:{width:"100%",display:"flex",gap:"5px",alignItems:"center"},children:[(0,n.jsx)(v.default,{sx:{fontSize:"12px",borderRight:"none",width:"40px",padding:"0 3px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"5px",border:"1px solid silver",backgroundColor:"".concat(e.bgColor),fontWeight:"bold"},children:e.shortname}),(0,n.jsx)("p",{children:e.name})]})},t))})]}),(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{id:"demo-simple-select-label1",children:"Type of education"}),(0,n.jsx)(r.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:q,label:"Type of education",onChange:e=>G(e.target.value),children:s.map((e,t)=>(0,n.jsx)(o.default,{value:e,children:e},t))})]}),(0,n.jsx)(f.default,{size:"small",value:V,label:"Week of education",type:"number",sx:{width:"200px"},InputProps:{inputProps:{min:1,max:53}},onChange:e=>X(e.target.value)}),(0,n.jsx)(f.default,{size:"small",label:"Date of the week",type:"week",value:ee,sx:{width:"200px"},onChange:e=>et(e.target.value)}),(0,n.jsxs)(c.default,{children:[(0,n.jsx)(u.default,{id:"demo-simple-select-label1",children:"Data type"}),(0,n.jsx)(r.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:H,label:"Data type",onChange:e=>P(e.target.value),children:m.map((e,t)=>(0,n.jsx)(o.default,{value:e,children:e},t))})]}),(0,n.jsxs)(h.default,{sx:{width:"200px",overflow:"hidden"},size:"sm",variant:"outlined",component:"label",endIcon:(0,n.jsx)(x.BiUpload,{}),children:[(0,n.jsx)("p",{children:(null==Q?void 0:Q.name)?Q.name.length<13?Q.name:Q.name.substring(0,13)+"....":"Choose file "}),(0,n.jsx)("input",{onChange:e=>Z(e.target.files[0]),accept:"xml,.xml",type:"file",hidden:!0})]})]}),e>0&&(0,n.jsx)(v.default,{sx:{width:"100%",marginTop:"15px"},children:(0,n.jsx)(eo,{value:e})}),(0,n.jsxs)(v.default,{sx:{marginTop:"15px",width:"100%",display:"flex",justifyContent:"end",gap:"15px"},children:[(0,n.jsx)(h.default,{onClick:en,variant:"outlined",children:"Cancel"}),(0,n.jsx)(C.default,{title:J?"Fill in all the fields !":"",placement:"top",children:(0,n.jsx)("span",{children:(0,n.jsx)(h.default,{disabled:J,endIcon:(0,n.jsx)(g.IoSend,{size:15}),type:"submit",variant:"contained",children:"Send"})})})]})]})})})}),(0,n.jsx)(O.default,{})]})}}}]);