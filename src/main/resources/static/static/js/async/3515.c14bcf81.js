/*! For license information please see 3515.c14bcf81.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["3515"],{58577:function(e,n,t){"use strict";t.r(n);var l=t("58865");t("33948"),t("88449"),t("19894"),t("2490"),t("57640"),t("9924"),t("31672"),t("59461");var i=t("85893"),o=t("67294"),d=t.n(o),a=t("71893"),r=t("16393"),u=t("27233"),s=t("72132"),c=t("53432"),p=t("16356"),f=t("97367"),x=t("55693"),h=t("79352"),v=t("52861"),m=t("42154"),g=t("32392"),b=t("61261"),j=t("7104"),C=t("89583"),w=t("5434"),S=t("94718");function _(){let e=(0,l._)(["\n    width: 120px;\n    height: 50px;\n    background: ",";\n    font-size: 18px;\n    border-radius: 4px;\n    cursor: pointer;\n    border: 1px solid ",";\n    color: #fff;\n    transition: all 0.2s ease;\n    margin-left: 15px !important;\n    letter-spacing: 1.2px;\n    box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n\n    &:focus {\n        transform: scale(0.95);\n    }\n"]);return _=function(){return e},e}function D(){let e=(0,l._)(["\n    padding: 20px;\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 25px;\n"]);return D=function(){return e},e}function A(){let e=(0,l._)(["\n    width: 30px;\n    height: 30px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: rgba(255, 255, 255, 0.6);\n    border-radius: 50%;\n    color: ",";\n    font-size: 26px;\n    border: none;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n"]);return A=function(){return e},e}function R(){let e=(0,l._)(["\n    width: 100%;\n    display: flex;\n    gap: 10px;\n   justify-content: center;\n"]);return R=function(){return e},e}function k(){let e=(0,l._)(["\n    width: 100%;\n    background-color: #fff;\n    border-radius: 10px;\n    display: flex;\n    align-items: center;\n"]);return k=function(){return e},e}function y(){let e=(0,l._)(["\n    display: flex;\n    width: 100%;\n    float: left;\n    margin-left: 15px;\n    margin-top: ",";\n    color: ",";\n"]);return y=function(){return e},e}function N(){let e=(0,l._)(["\n    margin-top: 20px;\n    width: 100px;\n    height: 35px;\n    background: ",";\n    padding-left: 5px;\n    font-size: 18px;\n    padding-right: 10px;\n    border-radius: 10px;\n    cursor: pointer;\n    border: 1px solid ",";\n    color: #fff;\n    transition: all 0.2s ease;\n    margin-left: 15px !important;\n    letter-spacing: 1.2px;\n    box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n\n    &:focus {\n        transform: scale(0.95);\n    }\n"]);return N=function(){return e},e}function E(){let e=(0,l._)(["\n    display: flex;\n    flex-wrap: wrap;\n    padding: 8px !important;\n    color: ",";\n"]);return E=function(){return e},e}function I(){let e=(0,l._)(["\n    width: ",";\n    margin-top: 20px;\n    height: 35px;\n    background: white;\n    padding-left: 5px;\n    font-size: 18px;\n    padding-right: 10px;\n    border-radius: 7px;\n    cursor: pointer;\n    border: 1px solid ",";\n    color: ",";\n    margin-left: 15px;\n    box-shadow: rgba(149, 157, 165, 0.2) 0px 8px 24px;\n\n    &:focus {\n        outline: none;\n    }\n\n    option {\n        color: black;\n        background: white;\n        font-weight: 300;\n        display: flex;\n        white-space: pre;\n        min-height: 20px;\n        padding: 0px 2px 1px;\n    }\n\n"]);return I=function(){return e},e}function O(){let e=(0,l._)(["\n    padding: 1rem;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]);return O=function(){return e},e}let U=a.default.button(_(),r.mainColor,r.mainColor),P=a.default.div(D()),B=a.default.button(A(),r.mainColor),L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50%",bgcolor:"background.paper",borderRadius:2,boxShadow:24,p:4},z=a.default.div(R()),T=a.default.div(k()),M=a.default.h3(y(),e=>e.mt,r.mainColor),W=a.default.button(N(),r.mainColor,r.mainColor),G=a.default.div(E(),r.mainColor),H=a.default.select(I(),e=>e.width,r.mainColor,r.mainColor),F=a.default.div(O());n.default=()=>{var e;let[n,t]=(0,o.useState)(""),[l,a]=(0,o.useState)(1),[_,D]=(0,o.useState)([]),[A,R]=(0,o.useState)(1),[k,y]=(0,o.useState)([]),[N,E]=(0,o.useState)(""),[I,O]=(0,o.useState)([]),[V,q]=(0,o.useState)(""),[J,K]=(0,o.useState)([]),[Q,X]=(0,o.useState)({deviceId:l,doorName:V,doorNo:A}),[Y,Z]=(0,o.useState)(!1),$=[{field:"count",headerName:"\u2116",width:40,align:"center",editable:!1},{field:"ip",headerName:"Device",minWidth:300,flex:1,align:"center",editable:!1},{field:"port",headerName:"Port",minWidth:180,flex:1,align:"center",editable:!1},{field:"room",headerName:"Room",minWidth:140,flex:1,align:"center",editable:!1},{field:"actions",headerName:"Actions",minWidth:240,flex:1,align:"center",editable:!1,renderCell:e=>(0,i.jsxs)(z,{children:[(0,i.jsx)(S.default,{size:"small",variant:"contained",startIcon:(0,i.jsx)(C.FaEdit,{size:17}),onClick:n=>{n.preventDefault(),ex(e.id)},children:"Update"}),(0,i.jsx)(S.default,{size:"small",startIcon:(0,i.jsx)(w.MdDelete,{size:17}),variant:"contained",color:"error",onClick:n=>{n.preventDefault(),eh(e.id)},children:"Delete"})]})}],[ee,en]=(0,o.useState)([]),[et,el]=d().useState(!1),[ei,eo]=(0,o.useState)({}),[ed,ea]=(0,o.useState)([]),er=()=>el(!0),eu=()=>el(!1),{headers:es}=(0,r.getHeaders)();(0,o.useEffect)(()=>{X({...Q,deviceId:l,doorName:V,doorNo:A})},[l,A,V]),(0,o.useEffect)(()=>{ec()},[]),(0,o.useEffect)(()=>{var e,n;a(null===(e=_[0])||void 0===e?void 0:e.id),_[0]&&u.default.get(r.BASE_URL+r.ADMIN.ACC_DOOR_PORTS+(null===(n=_[0])||void 0===n?void 0:n.id),{headers:es}).then(e=>{var n;y(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.obj)}).catch(e=>{})},[_]),(0,o.useEffect)(()=>{var e;let t=null===(e=_.filter(e=>(null==e?void 0:e.ip)===n)[0])||void 0===e?void 0:e.id;a(t),t&&u.default.get(r.BASE_URL+r.ADMIN.ACC_DOOR_PORTS+t,{headers:es}).then(e=>{var n;y(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.obj)}).catch(e=>{})},[n]);let ec=()=>{u.default.get(r.BASE_URL+r.ADMIN.DEVICE,{headers:es}).then(e=>{var n,t,l,i,o,d,a;D(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.devices),O(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.buildings),K(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.rooms),q(null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(i=o.rooms[0])||void 0===i?void 0:i.name),en(null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(d=a.deviceList)||void 0===d?void 0:d.map((e,n)=>({...e,count:n+1})))}).catch(e=>{})},ep=e=>{u.default.get(r.BASE_URL+r.ADMIN.ACC_DOOR_PORTS+e,{headers:es}).then(e=>{ea(n=>{var t;return[...n,...null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj]})}).catch(e=>{})},ef=e=>{u.default.put(r.BASE_URL+r.ADMIN.ACC_DOOR_UPDATED,e,{headers:es}).then(e=>{el(!1),ec(),200===e.status&&s.toast.success("Changed successfully...")}).catch(e=>{})},ex=e=>{var n;er(),eo(ee.find(n=>n.id===e)),ea([null==ee?void 0:null===(n=ee.find(n=>n.id===e))||void 0===n?void 0:n.port]),ep(e)},eh=e=>{u.default.get(r.BASE_URL+"/ac-door/findById/"+e,{headers:es}).then(n=>{if(200===n.status){var t,l;window.confirm("Do you agree to delete "+(null===(l=n.data)||void 0===l?void 0:null===(t=l.obj)||void 0===t?void 0:t.doorName)+" room?")&&ev(e)}}).catch(e=>{})},ev=e=>{u.default.delete(r.BASE_URL+"/ac-door/delete/"+e,{headers:es}).then(n=>{204===n.status&&(s.toast.success("Deleted room successfully!..."),en(ee.filter(n=>n.id!==e)),ec())}).catch(e=>{})};return(0,i.jsxs)(F,{children:[(0,i.jsx)(M,{children:"Update Device"}),(0,i.jsxs)(G,{children:[(0,i.jsx)(H,{id:"device",width:"230px",value:n,onChange:e=>t(e.target.value),children:(0,i.jsx)("optgroup",{label:"Devices",children:null==_?void 0:_.map((e,n)=>(0,i.jsx)("option",{value:e.ip,children:e.ip},n))})}),(0,i.jsx)(H,{id:"ip",width:"140px",value:A,onChange:e=>R(e.target.value),children:(0,i.jsx)("optgroup",{label:"Ports",children:null==k?void 0:k.map((e,n)=>(0,i.jsx)("option",{value:e,children:e},n))})}),(0,i.jsx)(H,{id:"building",width:"140px",value:N,onChange:e=>E(e.target.value),children:(0,i.jsx)("optgroup",{label:"Buildings",children:null==I?void 0:I.map((e,n)=>(0,i.jsx)("option",{value:e.name,children:e.name},n))})}),(0,i.jsx)(H,{id:"room",width:"230px",value:V,onChange:e=>q(e.target.value),children:(0,i.jsx)("optgroup",{label:"Rooms",children:null==J?void 0:J.map((e,n)=>(0,i.jsx)("option",{value:e.name,children:e.name},n))})}),(0,i.jsx)(W,{onClick:()=>{u.default.put(r.BASE_URL+r.ADMIN.ACC_DOOR_UPDATED,Q,{headers:es}).then(e=>{ec(),200===e.status&&s.toast.success("Changed successfully...")}).catch(e=>{})},children:"Save"})]}),(0,i.jsx)(M,{mt:"50px",children:"Table of Device"}),(0,i.jsxs)(T,{children:[Y?(0,i.jsx)(c.default,{}):(0,i.jsx)(p.DataGrid,{columns:$,rows:ee,components:{Toolbar:p.GridToolbar},autoHeight:!0,rowsPerPageOptions:[10,20,30,40,50,100],initialState:{pagination:{pageSize:30}}}),(0,i.jsx)(f.default,{open:et,onClose:eu,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,i.jsxs)(x.default,{sx:L,children:[(0,i.jsx)(B,{onClick:eu,children:(0,i.jsx)(h.RiCloseLine,{})}),(0,i.jsxs)(P,{children:[(0,i.jsx)(v.default,{id:"outlined-basic",label:"IP",variant:"outlined",value:null==ei?void 0:ei.ip,disabled:!0}),(0,i.jsx)(x.default,{sx:{minWidth:200},children:(0,i.jsxs)(m.default,{fullWidth:!0,children:[(0,i.jsx)(g.default,{id:"demo-simple-select-label",children:"Port"}),(0,i.jsx)(j.Select,{disabled:!0,sx:{width:"200px"," @media only screen and  (max-width: 576px)":{width:300}},labelId:"demo-simple-select-label",id:"demo-simple-select",name:"port",value:null==ei?void 0:ei.port,label:"Port",onChange:e=>eo(n=>{var t;return{...n,port:null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value}}),children:null==ed?void 0:ed.map(e=>(0,i.jsx)(b.default,{value:e,children:e},e))})]})}),(0,i.jsx)(x.default,{sx:{minWidth:200},children:(0,i.jsxs)(m.default,{fullWidth:!0,children:[(0,i.jsx)(g.default,{id:"demo-simple-select-label",children:"Room"}),(0,i.jsx)(j.Select,{sx:{width:"200px"," @media only screen and  (max-width: 576px)":{width:300}},labelId:"demo-simple-select-label",id:"demo-simple-select",name:"room",value:null==ei?void 0:ei.room,label:"Room",onChange:e=>eo(n=>{var t;return{...n,room:null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.value}}),children:(e=[{name:null==ei?void 0:ei.room},...J],e.map(e=>(0,i.jsx)(b.default,{value:null==e?void 0:e.name,children:null==e?void 0:e.name},null==e?void 0:e.name)))})]})})]}),(0,i.jsx)(P,{children:(0,i.jsx)(U,{onClick:()=>ef({deviceId:null==ei?void 0:ei.deviceId,doorName:null==ei?void 0:ei.room,doorNo:null==ei?void 0:ei.port}),children:"Update"})})]})})]})]})}}}]);