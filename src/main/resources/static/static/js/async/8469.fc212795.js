/*! For license information please see 8469.fc212795.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["8469"],{8924:function(e,n,l){"use strict";l.r(n);var t=l("58865");l("33948"),l("31672"),l("59461"),l("2490"),l("57658"),l("88449"),l("19894"),l("57640"),l("9924");var i=l("85893"),o=l("67294"),d=l.n(o),r=l("71893"),u=l("57024"),a=l("52861"),s=l("44118"),v=l("27233"),c=l("16393"),f=l("30381"),x=l.n(f),h=l("32392"),m=l("44025"),p=l("61261"),g=l("42154"),b=l("81538"),j=l("96413"),w=l("73871"),D=l("14628"),y=l("78951"),k=l("53432");function C(){let e=(0,t._)(["\n    width: 300px;\n    ","\n"]);return C=function(){return e},e}function T(){let e=(0,t._)(["\n    overflow: hidden;\n    margin: 15px 0 0;\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    ","\n"]);return T=function(){return e},e}function S(){let e=(0,t._)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n\n"]);return S=function(){return e},e}let Y=r.default.div(C(),(0,u.extrasmall)({width:"80%"})),M=r.default.div(T(),(0,u.extrasmall)({justifyContent:"center"})),z=r.default.div(S());n.default=()=>{var e,n,l,t,r,u;let[f,C]=(0,o.useState)(!1),[T,S]=(0,o.useState)([]),[_,O]=(0,o.useState)([]),[F,N]=(0,o.useState)([]),[W,A]=(0,o.useState)(null),[B,I]=(0,o.useState)((null==F?void 0:null===(e=F.find(e=>(null==e?void 0:e.label)===W))||void 0===e?void 0:e.minFloor)||1),{headers:R}=(0,c.getHeaders)(),[E,P]=d().useState(x()()),[L,H]=(0,o.useState)(!1);(0,o.useEffect)(()=>{v.default.get(c.BASE_URL+"/building/getBuildingsForSelect",{headers:R}).then(e=>{var n,l,t;N(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.obj),A(null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(l=t.obj[0])||void 0===l?void 0:l.label)}).catch(e=>{})},[]);let[U,V]=(0,o.useState)({date:new Date,dateFrom:x()().startOf("isoWeek").toDate(),dateTo:x()().endOf("isoWeek").toDate(),weekNumber:x()().isoWeek(),year:x()().year(),weekday:x()().day()}),X=e=>{let n=x()(e.format("YYYY-MM-DD")).isoWeek(),l=x()(e.format("YYYY-MM-DD")).day(),t=x()(e.format("YYYY-MM-DD")).year(),i=x()(e.format("YYYY-MM-DD")).startOf("isoWeek").toDate(),o=x()(e.format("YYYY-MM-DD")).endOf("isoWeek").toDate();V({date:e,dateFrom:i,dateTo:o,weekNumber:n,year:t,weekday:l})};(0,o.useEffect)(()=>{C(!1),H(!1),W&&q()},[W,B,U]),(0,o.useEffect)(()=>{X(E)},[E]);let q=()=>{v.default.get(c.BASE_URL+"/timeTableByWeekOfYear/getTimeTableByAllRoomAndWeek?b=".concat(null==W?void 0:W.substring(0,1),"-").concat(B,"&week=").concat(null==U?void 0:U.weekNumber,"&weekday=").concat(U.weekday,"&year=").concat(U.year,"&t=true"),{headers:R}).then(e=>{var n;S(e.data.obj),O(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.secondObj),C(!0),H(!1)}).catch(e=>{H(!0)})};return(0,i.jsxs)(z,{children:[F&&(null==F?void 0:F.length)>0&&(0,i.jsxs)(M,{children:[(0,i.jsx)(Y,{children:(0,i.jsx)(s.default,{disablePortal:!0,id:"combo-box-demo",options:F,defaultValue:F[0],onChange:(e,n)=>{A(null==n?void 0:n.label)},renderInput:e=>(0,i.jsx)(a.default,{...e,label:"Buildings"})})}),(0,i.jsx)(Y,{children:(0,i.jsxs)(g.default,{fullWidth:!0,children:[(0,i.jsx)(h.default,{id:"demo-simple-select-label",children:"Floor"}),(0,i.jsx)(m.default,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:B,label:"Floor",onChange:e=>{I(e.target.value)},children:null===(l=function(e,n){let l=[];for(;e<=n;e++)l.push(e);return l}(null==F?void 0:null===(t=F.find(e=>(null==e?void 0:e.label)===W))||void 0===t?void 0:t.minFloor,null==F?void 0:null===(r=F.find(e=>(null==e?void 0:e.label)===W))||void 0===r?void 0:r.maxFloor))||void 0===l?void 0:null===(n=l.filter(e=>0!==e))||void 0===n?void 0:n.map(e=>(0,i.jsx)(p.default,{value:e,children:e}))})]})}),(0,i.jsx)(w.LocalizationProvider,{dateAdapter:j.AdapterMoment,children:(0,i.jsx)(D.DesktopDatePicker,{label:"Day",inputFormat:"DD/MM/YYYY",value:E,onChange:e=>{P(e)},renderInput:e=>(0,i.jsx)(a.default,{...e})})})]}),(0,i.jsx)("div",{style:{width:"100%",overflowX:"scroll"},children:f?null==T?void 0:null===(u=T.filter(e=>(null==e?void 0:e.length)>0))||void 0===u?void 0:u.map((e,n)=>{let l=[];return null==_||_.map(n=>{var t;return(null==n?void 0:null===(t=n.filter(n=>{var l,t,i,o,d,r,u,a,s,v;return((null==n?void 0:null===(l=n.room)||void 0===l?void 0:l.lastIndexOf("-"))===5?null==n?void 0:null===(t=n.room)||void 0===t?void 0:t.substring(0,5):null==n?void 0:n.room)===((null===(d=e[0])||void 0===d?void 0:null===(o=d.room)||void 0===o?void 0:null===(i=o.trim())||void 0===i?void 0:i.length)===7?null===(r=e[0])||void 0===r?void 0:r.room:null===(v=e[0])||void 0===v?void 0:null===(s=v.room)||void 0===s?void 0:s.substring(0,(null===(a=e[0])||void 0===a?void 0:null===(u=a.room)||void 0===u?void 0:u.indexOf("-"))+4))}))||void 0===t?void 0:t.length)>0&&(l=null==n?void 0:n.filter(n=>{var l,t,i,o,d,r,u,a;return(null==n?void 0:n.room)===(null===(i=e[0])||void 0===i?void 0:null===(t=i.room)||void 0===t?void 0:null===(l=t.trim())||void 0===l?void 0:l.length)==7?null===(o=e[0])||void 0===o?void 0:o.room:null===(a=e[0])||void 0===a?void 0:null===(u=a.room)||void 0===u?void 0:u.substring(0,(null===(r=e[0])||void 0===r?void 0:null===(d=r.room)||void 0===d?void 0:d.indexOf("-"))+4)})),n}),(0,i.jsx)(b.default,{index:n,data:e,statistics:l,objWeek:U})}):L?(0,i.jsx)(y.default,{w:"200",h:"180"}):(0,i.jsx)(k.default,{})})]})}},98880:function(e,n,l){"use strict";l.r(n);var t=l("58865");l("31672"),l("59461"),l("2490"),l("88449"),l("19894"),l("57640"),l("9924");var i=l("85893"),o=l("67294"),d=l("7104"),r=l("71893"),u=l("26178"),a=l("78951"),s=l("30381"),v=l.n(s),c=l("50533"),f=l("5434"),x=l("51649");function h(){let e=(0,t._)(["\n    color: ",";\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 5px;\n"]);return h=function(){return e},e}let m=(0,o.forwardRef)(function(e,n){return(0,i.jsx)(d.Slide,{direction:"up",ref:n,...e})}),p=(0,u.createTheme)({components:{MuiTableCell:{styleOverrides:{root:{justifyContent:"center",textAlign:"center",border:"1px solid #ccc",padding:"10px"}}}}}),g=r.default.span(h(),e=>e.color?"green":"red");n.default=(0,o.memo)(e=>{var n,l,t;let{open:o,handleClose:r,data:s}=e,h=(0,c.useSelector)(e=>e.hourSection),b=e=>{var n,l,t;let o=null===(n=e.teachers[0])||void 0===n?void 0:n.shortName,d=null==e?void 0:e.hourNumber,r=null===(l=h.find(e=>e.number===d))||void 0===l?void 0:l.start,u=null==s?void 0:s.timesTouchFilter.filter(e=>(null==e?void 0:e.section)===d&&(null==e?void 0:e.login)===o).sort((e,n)=>new Date(e.time)-new Date(n.time));if(!u||0===u.length)return(0,i.jsx)(x.IoMdCloseCircle,{size:20,color:"red"});let a=null===(t=u[0])||void 0===t?void 0:t.time,c=new Date(r).setDate(new Date(a).getDate())>=a;return(0,i.jsxs)(g,{color:c,children:[c?(0,i.jsx)(f.MdOutlineAddCircleOutline,{size:16}):(0,i.jsx)(f.MdRemoveCircleOutline,{size:16}),(0,i.jsx)("p",{children:v()(Math.abs(new Date(r).setDate(new Date(a).getDate())-a)).format("mm:ss")})]})};return o?(0,i.jsxs)(d.Dialog,{open:o,maxWidth:"md",TransitionComponent:m,keepMounted:!0,onClose:r,"aria-labelledby":"selected-lesson-dialog-title",fullWidth:!0,children:[(0,i.jsxs)(d.DialogTitle,{id:"selected-lesson-dialog-title",children:[null==s?void 0:null===(n=s.hourItemFilter[0])||void 0===n?void 0:n.room," ",null==s?void 0:null===(l=s.hourItemFilter[0])||void 0===l?void 0:l.periodStartAndEndTime]}),(0,i.jsx)(d.DialogContent,{sx:{padding:"0 5px"},children:(0,i.jsx)(u.ThemeProvider,{theme:p,children:(0,i.jsx)(d.TableContainer,{component:d.Paper,children:(0,i.jsxs)(d.Table,{sx:{minWidth:450},"aria-label":"selected-hour-lessons",children:[(0,i.jsx)(d.TableHead,{children:(0,i.jsxs)(d.TableRow,{children:[(0,i.jsx)(d.TableCell,{children:(0,i.jsx)("b",{children:"Teacher"})}),(0,i.jsx)(d.TableCell,{children:(0,i.jsx)("b",{children:"Subjects"})}),(0,i.jsx)(d.TableCell,{children:(0,i.jsx)("b",{children:"Attendance"})})]})}),(0,i.jsx)(d.TableBody,{children:(null==s?void 0:null===(t=s.hourItemFilter)||void 0===t?void 0:t.length)?s.hourItemFilter.map((e,n)=>(0,i.jsxs)(d.TableRow,{children:[(0,i.jsx)(d.TableCell,{children:null==e?void 0:e.teacherName}),(0,i.jsx)(d.TableCell,{children:null==e?void 0:e.lessonName}),(0,i.jsx)(d.TableCell,{children:b(e)})]},n)):(0,i.jsx)(d.TableRow,{children:(0,i.jsx)(d.TableCell,{colSpan:3,children:(0,i.jsx)(a.default,{w:200,h:180})})})})]})})})}),(0,i.jsx)(d.DialogActions,{children:(0,i.jsx)(d.Button,{size:"small",variant:"outlined",onClick:r,children:"Close"})})]}):null})},81538:function(e,n,l){"use strict";l.r(n);var t=l("58865");l("33948"),l("57640"),l("9924"),l("31672"),l("59461"),l("2490"),l("88449"),l("19894");var i=l("85893"),o=l("67294"),d=l("71893"),r=l("5434"),u=l("30381"),a=l.n(u),s=l("50533"),v=l("98880");function c(){let e=(0,t._)(["\n    color: ",";\n    position: absolute;\n    top: 40%;\n    right: -26.3px;\n    font-size: 11px;\n    rotate: 90deg;\n"]);return c=function(){return e},e}function f(){let e=(0,t._)(["\n    cursor: pointer;\n    color: #fff;\n    width: 23px;\n    height: 23px;\n    position: absolute;\n    left: 10px;\n    bottom: 10px;\n    font-size: 12px;\n    border-radius: 50%;\n    background-color: rgba(0, 0, 255, 0.75);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n    line-height: 1;\n"]);return f=function(){return e},e}function x(){let e=(0,t._)(["\n    display: flex;\n    align-items: start;\n    font-size: ",";\n    text-align: start;\n    font-weight: 600;\n    letter-spacing: 0.8px;\n"]);return x=function(){return e},e}function h(){let e=(0,t._)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: ",";\n    text-align: center;\n    font-weight: 600;\n    letter-spacing: 0.8px;\n"]);return h=function(){return e},e}function m(){let e=(0,t._)(["\n    font-size: 12px;\n    font-weight: 300;\n"]);return m=function(){return e},e}function p(){let e=(0,t._)(["\n    width: 100%;\n    height: 180px;\n    display: flex;\n    border-top: 0.1px solid #cacaca;\n"]);return p=function(){return e},e}function g(){let e=(0,t._)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    background-color: #fff;\n    font-size: 14px;\n    font-weight: 600;\n    letter-spacing: 0.2px;\n"]);return g=function(){return e},e}function b(){let e=(0,t._)(["\n    position: relative;\n    flex: ",";\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    gap: 8px;\n    border-right: 0.1px solid #cacaca;\n    font-size: 10px;\n    padding: 10px !important;\n\n    background-color: ",";\n    color: ",";\n\n"]);return b=function(){return e},e}function j(){let e=(0,t._)(["\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-direction: column;\n    gap: 20px;\n    position: relative;\n"]);return j=function(){return e},e}function w(){let e=(0,t._)(["\n    width: 100%;\n    height: 60px;\n    display: flex;\n    background-color: #B4E2FB;\n    font-size: 14px;\n    font-weight: 600;\n    letter-spacing: 0.2px;\n"]);return w=function(){return e},e}function D(){let e=(0,t._)(["\n    margin: 0 auto;\n    width: 1900px;\n    box-shadow: rgba(99, 99, 99, 0.2) 0 2px 8px 0;\n"]);return D=function(){return e},e}function y(){let e=(0,t._)(["\n    width: 100%;\n"]);return y=function(){return e},e}let k=d.default.span(c(),e=>(null==e?void 0:e.color)?"green":"red"),C=d.default.span(f()),T=d.default.span(x(),e=>e.fontSize||"9px"),S=d.default.span(h(),e=>e.fontSize||"9px"),Y=d.default.span(m()),M=d.default.div(p()),z=d.default.div(g()),_=d.default.span(b(),e=>e.flex,e=>(null==e?void 0:e.bg)?"red":"white",e=>(null==e?void 0:e.bg)?"white":"#000"),O=d.default.span(j()),F=d.default.div(w()),N=d.default.div(D()),W=d.default.div(y());n.default=e=>{var n,l,t,d,u;let{index:c,data:f,statistics:x,objWeek:h}=e,[m,p]=(0,o.useState)(!1),[g,b]=(0,o.useState)(null),j=(0,s.useSelector)(e=>e.hourSection),w=a()(new Date).isoWeek(),D=e=>{b(e),p(!0)};return(0,i.jsxs)(W,{children:[(0,i.jsxs)(N,{children:[0===c&&(0,i.jsxs)(F,{children:[(0,i.jsx)(_,{flex:1,children:"TIME"}),null==j?void 0:j.map((e,n)=>(0,i.jsx)(_,{flex:2,children:null==e?void 0:e.hour},n))]}),(0,i.jsx)(z,{children:(0,i.jsxs)(M,{children:[(0,i.jsx)(_,{flex:1,children:(0,i.jsx)(Y,{children:f&&(null===(l=f[0])||void 0===l?void 0:null===(n=l.room)||void 0===n?void 0:n.length)===7?null===(t=f[0])||void 0===t?void 0:t.room:null===(u=f[0])||void 0===u?void 0:null===(d=u.room)||void 0===d?void 0:d.substring(0,5)})}),null==j?void 0:j.map((e,n)=>{var l,t,o,d,u,s,v,c,m,p,g,b,j;let y=null==f?void 0:f.find(n=>(null==n?void 0:n.hourNumber)===(null==e?void 0:e.number)),Y=null==f?void 0:f.filter(n=>(null==n?void 0:n.hourNumber)===(null==e?void 0:e.number)),M=null==x?void 0:null===(l=x.filter(n=>{var l;return(null==n?void 0:n.section)===(null==e?void 0:e.number)&&(null==n?void 0:n.login)===(null==y?void 0:null===(l=y.teachers[0])||void 0===l?void 0:l.shortName)}))||void 0===l?void 0:l.sort(function(e,n){return(null==e?void 0:e.time)>(null==n?void 0:n.time)?1:(null==e?void 0:e.time)<(null==n?void 0:n.time)?-1:0}),z=null==x?void 0:x.filter(n=>(null==n?void 0:n.section)===(null==e?void 0:e.number)),F=new Date(null==e?void 0:e.start);return F.setDate(F.getDate()-F.getDay()+a()().weekday()),y?(0,i.jsxs)(_,{flex:2,bg:(void 0===M||(null==M?void 0:M.length)===0)&&((null==h?void 0:h.weekday)<=new Date().getDay()&&((null==e?void 0:e.start)<new Date||F<new Date)||h.weekNumber<w||h.year<new Date().getFullYear()),children:[(null==Y?void 0:Y.length)>1&&(0,i.jsx)(C,{onClick:()=>D({hourItemFilter:Y,timesTouchFilter:z}),children:null==Y?void 0:Y.length}),(0,i.jsxs)(O,{children:[(0,i.jsx)(S,{fontSize:15,children:y.lessonName}),M&&(null==M?void 0:M.length)!==0&&(0,i.jsxs)(k,{color:new Date(null==e?void 0:e.start).setDate(new Date(null===(t=M[0])||void 0===t?void 0:t.time).getDate())>=(null===(o=M[0])||void 0===o?void 0:o.time),children:[new Date(null==e?void 0:e.start).setDate(new Date(null===(d=M[0])||void 0===d?void 0:d.time).getDate())>=(null===(u=M[0])||void 0===u?void 0:u.time)?(0,i.jsx)(r.MdOutlineAddCircleOutline,{size:16}):(0,i.jsx)(r.MdRemoveCircleOutline,{size:16})," ",a()(new Date(new Date(null==e?void 0:e.start).setDate(new Date(null===(s=M[0])||void 0===s?void 0:s.time).getDate())>=(null===(v=M[0])||void 0===v?void 0:v.time)?new Date(null==e?void 0:e.start).setDate(new Date(null===(c=M[0])||void 0===c?void 0:c.time).getDate())-(null===(m=M[0])||void 0===m?void 0:m.time):(null===(p=M[0])||void 0===p?void 0:p.time)-new Date(null==e?void 0:e.start).setDate(new Date(null===(g=M[0])||void 0===g?void 0:g.time).getDate()))).format("mm:ss")]}),(void 0===M||(null==M?void 0:M.length)===0)&&(h.weekday<=new Date().getDay()&&((null==e?void 0:e.start)<new Date||F<new Date)||(null==h?void 0:h.weekNumber)<w)&&(0,i.jsxs)(k,{color:!1,children:[(0,i.jsx)(r.MdRemoveCircleOutline,{size:12})," "," "," 50:00"]}),(0,i.jsx)(T,{fontSize:10,children:(null==y?void 0:null===(b=y.teacherName)||void 0===b?void 0:b.length)>1?null==y?void 0:null===(j=y.teacherName)||void 0===j?void 0:j.join("/ "):null==y?void 0:y.teacherName[0]})]})]},n):(0,i.jsx)(_,{flex:2,children:" - "},n)})]},c)})]}),(0,i.jsx)(v.default,{open:m,handleClose:()=>{p(!1),b(null)},data:g})]})}}}]);