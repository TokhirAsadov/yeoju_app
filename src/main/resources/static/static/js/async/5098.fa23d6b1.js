/*! For license information please see 5098.fa23d6b1.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["5098"],{34930:function(e,t,a){"use strict";a.r(t);var n=a("58865");a("33948"),a("25387"),a("72608"),a("2490"),a("15581"),a("34514"),a("57658");var l=a("85893"),r=a("67294"),u=a("71893"),s=a("57024"),c=a("16393"),i=a("52861"),d=a("44118"),o=a("54520"),f=a("30381"),h=a.n(f);a("21793");var p=a("93065");function x(){let e=(0,n._)(["\n    width: 300px;\n    ","\n"]);return x=function(){return e},e}function g(){let e=(0,n._)(["\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    overflow: hidden;\n    margin: 15px 15px 0;\n    ","\n"]);return g=function(){return e},e}function y(){let e=(0,n._)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n"]);return y=function(){return e},e}let w=u.default.div(x(),(0,s.extrasmall)({width:"80%"})),v=u.default.div(g(),(0,s.extrasmall)({margin:"15px 0 0 0",justifyContent:"center"})),b=u.default.div(y());t.default=()=>{let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[u,s]=(0,r.useState)(null),[f,x]=(0,r.useState)(null),[g,y]=(0,r.useState)([]),[k,j]=(0,r.useState)(!1),[m,S]=(0,r.useState)(null),[T,C]=(0,r.useState)(h()(c.serverTimeStorage));(0,r.useEffect)(()=>{I()},[]),(0,r.useEffect)(()=>{u&&W(u)},[u]),(0,r.useEffect)(()=>{f&&(Y(f),_(f))},[f,T]);let I=async()=>{try{let{data:e}=await p.default.get("/kafedra/getKafedrasForSelect");t((null==e?void 0:e.obj)||[])}catch(e){}},W=async e=>{try{let{data:t}=await p.default.get("/kafedra/getTeachersForSelectByKafedraId?kafedraId=".concat(e));n((null==t?void 0:t.obj)||[])}catch(e){}},Y=async e=>{j(!0);try{let{data:t}=await p.default.get("/timeTableByWeekOfYear/getTeacherTimeTable?t=".concat(e,"&week=").concat(T.isoWeek(),"&year=").concat(T.year())),a=D((null==t?void 0:t.obj)||[]);y(a)}catch(e){}finally{j(!1)}},_=async e=>{try{let{data:t}=await p.default.get("/user/getTeacherStatisticsForTimeTableByWeek?teacherId=".concat(e,"&week=").concat(T.isoWeek(),"&year=").concat(T.year()));S(null==t?void 0:t.obj)}catch(e){}},D=e=>Object.values(e.reduce((e,t)=>(t.shows.forEach(a=>{!e[a.daysName]&&(e[a.daysName]={teacherData:t.teacherData,shows:[]}),e[a.daysName].shows.push(a)}),e),{})),E=(0,r.useCallback)(e=>{C(h()(e.target.value))},[]);return(0,l.jsxs)(b,{children:[(0,l.jsxs)(v,{children:[(0,l.jsx)(w,{children:(0,l.jsx)(d.default,{options:e,getOptionLabel:e=>e.label||"",onChange:(e,t)=>s((null==t?void 0:t.value)||null),sx:{width:300},renderInput:e=>(0,l.jsx)(i.default,{...e,label:"Kafedra"})})}),(0,l.jsx)(w,{children:(0,l.jsx)(d.default,{options:a,getOptionLabel:e=>e.label||"",onChange:(e,t)=>x((null==t?void 0:t.value)||null),sx:{width:300},renderInput:e=>(0,l.jsx)(i.default,{...e,label:"Teacher"})})}),(0,l.jsx)(i.default,{label:"Date of the week",type:"week",sx:{width:"200px"},value:T.format("YYYY-[W]WW"),onChange:E})]}),f&&(0,l.jsx)(o.default,{isLoading:k,dateInput:T,data:g,statistics:m,isChanged:!0,selectTeacherId:f,refetchData:()=>{Y(f),_(f)}})]})}}}]);