/*! For license information please see 4695.4265ebfc.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["4695"],{14928:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return F}});var l=t("27412"),i=t("7409"),o=t("99282"),a=t("38956"),d=t("58865");t("69826"),t("31672"),t("59461"),t("2490"),t("41539"),t("26833"),t("68216"),t("79433"),t("92222"),t("57327"),t("88449"),t("19894");var r=t("85893"),u=t("67294"),s=t("71893"),c=t("71632"),f=t("28685"),h=t("45184"),v=t("16356"),p=t("27233"),m=t("86893"),g=t("63750"),x=t("97367"),b=t("55693"),w=t("79352"),y=t("52861"),j=t("89583"),C=t("90650"),_=t("72132"),k=t("94718"),E=t("7104");function S(){var n=(0,d._)(["\n  height: 155px;\n  padding-top: 10px;\n  display: grid;\n  overflow-y: scroll;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 30px;\n  ","\n  ","\n  ","\n"]);return S=function(){return n},n}function R(){var n=(0,d._)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]);return R=function(){return n},n}function U(){var n=(0,d._)(["\n  ","\n  ","\n  ","\n"]);return U=function(){return n},n}function z(){var n=(0,d._)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid ",";\n  border-radius: 0.5rem;\n  color: ",";\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"]);return z=function(){return n},n}function B(){var n=(0,d._)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: 5px !important;\n"]);return B=function(){return n},n}function O(){var n=(0,d._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 1rem;\n"]);return O=function(){return n},n}var N=s.default.div(S(),(0,c.medium)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,c.small)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,c.extrasmall)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"})),T=(0,s.default)(C.motion.button)(R(),f.mainColor),L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"900px",display:"flex",flexDirection:"column",gap:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},A=s.default.div(U(),(0,c.medium)({width:"97vw !important",height:"70vh !important"}),(0,c.small)({width:"97vw !important",height:"70vh  !important"}),(0,c.extrasmall)({width:"97vw !important",height:"70vh  !important"})),D=s.default.button(z(),function(n){return n.color},function(n){return n.color}),H=s.default.div(B()),I=s.default.div(O()),F=function(){var n=(0,f.getHeaders)().headers,e=(0,a._)((0,u.useState)(!1),2),t=e[0],d=e[1],s=(0,a._)((0,u.useState)([]),2),c=s[0],C=s[1],S=(0,a._)((0,u.useState)(!1),2),R=S[0],U=S[1],z=(0,a._)((0,u.useState)({id:null,code:null,nameEn:null,nameRu:null,nameUz:null}),2),B=z[0],O=z[1],F=[{field:"id",headerName:"ID",width:300,editable:!1},{field:"code",headerName:"Code",type:"string",width:60,editable:!1},{field:"nameEn",headerName:"Name English",type:"string",width:300,editable:!1},{field:"nameRu",headerName:"\u0420\u0443\u0441\u0441\u043A\u043E\u0435 \u0438\u043C\u044F",type:"string",width:300,editable:!1},{field:"nameUz",headerName:"O`zbekcha nomi",type:"string",width:300,editable:!1},{field:"service",headerName:"Service",type:"string",width:100,editable:!1,renderCell:function(n){return(0,r.jsxs)(H,{children:[(0,r.jsx)(D,{color:f.mainColor,onClick:function(){var e;return V(null==n?void 0:null===(e=n.row)||void 0===e?void 0:e.id)},children:(0,r.jsx)(m.FiEdit,{})}),(0,r.jsx)(D,{color:"red",onClick:function(){var e,t;return K(null==n?void 0:null===(e=n.row)||void 0===e?void 0:e.id,null==n?void 0:null===(t=n.row)||void 0===t?void 0:t.nameEn)},children:(0,r.jsx)(g.BsTrash,{})})]})}}],P=function(){p.default.get(f.BASE_URL+"/school/findAll",{headers:n}).then(function(n){var e;C(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.obj),d(!1)}).catch(function(n){})};(0,u.useEffect)(function(){P()},[]),(0,u.useEffect)(function(){t&&P()},[t]);var G=function(){U(!1)},M=function(n){O(function(e){return(0,o._)((0,i._)({},e),(0,l._)({},n.target.name,n.target.value))})},V=function(n){(null==c?void 0:c.length)>0&&O(function(e){return(0,i._)({},e,null==c?void 0:c.find(function(e){return(null==e?void 0:e.id)===n}))}),U(!0)},q=function(e){delete e.id,Object.values(e).every(function(n){return null!==n&&n})?p.default.post(f.BASE_URL+"/school/save",(0,o._)((0,i._)({},e),{id:null}),{headers:n}).then(function(n){U(!1),P(),_.toast.success("".concat(null==e?void 0:e.name," school has been saved successfully!."))}).catch(function(n){var e,t;_.toast.error(null==n?void 0:null===(t=n.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)}):_.toast.warning("Empty any field..")},J=function(e){Object.values(e).every(function(n){return null!==n&&n})?p.default.post(f.BASE_URL+"/school/save",e,{headers:n}).then(function(n){U(!1),P(),_.toast.success("".concat(null==e?void 0:e.name," school has been updated successfully!."))}).catch(function(n){var e,t;_.toast.error(null==n?void 0:null===(t=n.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)}):_.toast.warning("Empty any field..")},K=function(e,t){O({id:null,code:null,nameEn:null,nameRu:null,nameUz:null}),window.confirm("Do you want to delete ".concat(t,"?"))&&(p.default.delete("".concat(f.BASE_URL,"/school/deleteById/").concat(e),{headers:n}).then(function(n){var t;C(null==c?void 0:c.filter(function(n){return(null==n?void 0:n.id)!==e})),_.toast.success(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}).catch(function(n){}),_.toast.success("Deleted successfully",{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}))};return(0,r.jsxs)(I,{children:[(0,r.jsx)(b.default,{display:"flex",justifyContent:"end",children:(0,r.jsx)(k.default,{sx:{width:"220px"},variant:"contained",onClick:function(){U(!0),O({id:null,code:null,nameEn:null,nameRu:null,nameUz:null})},children:"Create School"})}),t&&(null==c?void 0:c.length)>0?(0,r.jsx)(h.default,{}):(0,r.jsx)(E.Card,{children:(0,r.jsx)(E.CardContent,{children:(0,r.jsx)(v.DataGrid,{checkboxSelection:!0,sx:{minHeight:"410px!important",overflow:"scroll"},columns:F,rows:c,components:{Toolbar:v.GridToolbar},pageSize:5,initialState:(0,o._)((0,i._)({},c.initialState),{columns:{columnVisibilityModel:{id:!1}}})})})}),(0,r.jsx)(x.default,{open:R,onClose:G,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,r.jsxs)(b.default,{sx:L,component:A,children:[(0,r.jsx)(T,{onClick:G,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,r.jsx)(w.RiCloseLine,{})}),(0,r.jsx)("h3",{style:{color:"".concat(f.mainColor)},children:(null==B?void 0:B.id)!==null&&(null==B?void 0:B.id)?"Update school":"Create new school"}),(0,r.jsxs)(N,{children:[(0,r.jsx)(y.default,{id:"outlined-basic",label:"English name",variant:"outlined",value:null==B?void 0:B.nameEn,name:"nameEn",onChange:M}),(0,r.jsx)(y.default,{id:"outlined-basic",label:"\u0420\u0443\u0441\u0441\u043A\u043E\u0435 \u0438\u043C\u044F",variant:"outlined",value:null==B?void 0:B.nameRu,name:"nameRu",onChange:M}),(0,r.jsx)(y.default,{id:"outlined-basic",label:"O`zbekcha nomi",variant:"outlined",value:null==B?void 0:B.nameUz,name:"nameUz",onChange:M}),(0,r.jsx)(y.default,{label:"Code",variant:"outlined",id:"outlined-number",type:"number",InputLabelProps:{shrink:!0},value:null==B?void 0:B.code,name:"code",onChange:M})]}),(0,r.jsx)(b.default,{sx:{display:"flex",justifyContent:"end"},children:(0,r.jsx)(k.default,{variant:"contained",endIcon:(null==B?void 0:B.id)!==null&&(null==B?void 0:B.id)?(0,r.jsx)(m.FiEdit,{}):(0,r.jsx)(j.FaSave,{}),onClick:function(){return(null==B?void 0:B.id)!==null&&(null==B?void 0:B.id)?J(B):q(B)},children:(null==B?void 0:B.id)!==null&&(null==B?void 0:B.id)?"Update":" Save"})})]})})]})}}}]);