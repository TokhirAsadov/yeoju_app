/*! For license information please see 9856.a6392563.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["9856"],{68036:function(e,t,n){"use strict";n.r(t);var i=n("58865");n("33948"),n("57640"),n("9924");var l=n("85893"),o=n("67294"),a=n("71893"),r=n("47229"),d=n("16393"),s=n("50533"),u=n("27233"),c=n("53432"),f=n("90650"),h=n("31942");function m(){let e=(0,i._)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]);return m=function(){return e},e}let p=a.default.div(m());t.default=e=>{let{seriesK:t,isSpinner:n}=e,[i,a]=(0,o.useState)(!1),[m,v]=(0,o.useState)(""),[x,g]=(0,o.useState)(!1),[b,j]=(0,o.useState)(""),[y,w]=(0,o.useState)(!1),S=(0,s.useSelector)(e=>{var t;return null==e?void 0:null===(t=e.section)||void 0===t?void 0:t.section}),[k,C]=(0,o.useState)({chart:{type:"donut",width:380,events:{dataPointSelection:function(e,t,n){1===n.dataPointIndex?g(!1):g(!0),1===n.dataPointIndex?j("Absentees"):j("At work"),w(!1),Y(n.dataPointIndex),a(!0)}}},labels:["At work","Absentees"],title:{text:"Statistics Of Today",style:{fontSize:"12px",fontWeight:"bold",fontFamily:void 0,color:"".concat(d.mainColor)}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}],colors:[function(e){let{value:t,seriesIndex:n,w:i}=e;return"".concat(d.mainColor)},function(e){let{value:t,seriesIndex:n,w:i}=e;return t<i.config.series[0]/5?(v("#fff700"),"#fff700"):t>i.config.series[0]/5&&t<i.config.series[0]/2?(v("#f88017"),"#f88017"):(v("#f00"),"#f00")}],plotOptions:{pie:{expandOnClick:!1,size:400,height:"5%",donut:{size:"55%",labels:{show:!0,total:{show:!0,showAlways:!0,fontSize:"18px",color:"".concat(d.mainColor)}}}}}}),[D,T]=(0,o.useState)([]),Y=e=>{u.default.get(d.BASE_URL+"/kafedra/getStatisticsForKafedraDashboard?index="+e+"&kafedraId="+S.id).then(e=>{var t,n;T(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(t=n.obj)||void 0===t?void 0:t.map((e,t)=>({...e,id:t}))),w(!0)}).catch(e=>{})};return(0,l.jsxs)(l.Fragment,{children:[i&&(0,l.jsx)(h.default,{setExpanded:()=>a(!1),isDefault:x,openColor:m,title:b,openTable:y,data:D}),(0,l.jsx)(f.motion.div,{layoutId:"kafedraId",style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:(0,l.jsx)(p,{children:n?(0,l.jsx)(c.default,{}):(0,l.jsx)(r.default,{options:k,series:t,type:"donut",width:"350"})})})]})}},92355:function(e,t,n){"use strict";n.r(t);var i=n("58865");n("33948"),n("25387"),n("72608"),n("2490"),n("31672"),n("59461"),n("57658"),n("57640"),n("9924");var l=n("85893"),o=n("67294"),a=n.n(o),r=n("71893"),d=n("68036"),s=n("27233"),u=n("50533"),c=n("16393"),f=n("2585"),h=n("44178"),m=n("30381"),p=n.n(m),v=n("98888"),x=n("63750"),g=n("57024"),b=n("52861"),j=n("74113"),y=n("60155"),w=n("97367"),S=n("55693"),k=n("89589"),C=n("7104"),D=n("94718"),T=n("911"),Y=n("72132"),_=n("66270");function z(){let e=(0,i._)(["\n    ","\n"]);return z=function(){return e},e}function I(){let e=(0,i._)(["\n    color: ",";\n    position: absolute;\n    top: 40%;\n    right: -8px;\n    font-size: 11px;\n    rotate: 90deg;\n"]);return I=function(){return e},e}function M(){let e=(0,i._)(["\n    font-size: 8px;\n    width: 100%;\n    display: flex;\n    text-align: start;\n"]);return M=function(){return e},e}function E(){let e=(0,i._)(["\n    flex: 1;\n    display: flex;\n    align-items: center;\n    flex-direction: column;\n    gap: 10px;\n    font-size: ",";\n    padding: 0.95rem !important;\n    background-color: ",";\n    color: ",";\n    border: 1px solid lightgray;\n    position: relative;\n"]);return E=function(){return e},e}function R(){let e=(0,i._)(["\n    width: 100%;\n    display: flex;\n"]);return R=function(){return e},e}function A(){let e=(0,i._)(["\n    width: 100%;\n    display: flex;\n    margin: 0 auto;\n    flex-direction: column;\n"]);return A=function(){return e},e}function H(){let e=(0,i._)(["\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: ",";\n    font-weight: bold;\n    padding: 0.95rem !important;\n    background-color: ",";\n    color: #ffffff;\n    border: 1px solid lightgray;\n"]);return H=function(){return e},e}function N(){let e=(0,i._)(["\n    flex: 1.6;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: 10px !important;\n    background-color: ",";\n    font-weight: bold;\n    font-size: 12px;\n    color: #ffffff;\n    text-align: center;\n    border: 1px solid lightgray;\n"]);return N=function(){return e},e}function O(){let e=(0,i._)(["\n    width: 100%;\n    display: flex;\n    margin: 0 auto;\n"]);return O=function(){return e},e}function W(){let e=(0,i._)(["\n    width: 100%;\n"]);return W=function(){return e},e}function B(){let e=(0,i._)(["\n    width: 100%;\n    overflow: scroll;\n"]);return B=function(){return e},e}function F(){let e=(0,i._)(["\n    width: 1800px;\n    margin: 0 auto;\n    display: flex;\n    flex-direction: column;\n"]);return F=function(){return e},e}function L(){let e=(0,i._)(["\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    width: 80px;\n    display: flex;\n    justify-content: flex-start;\n    align-items: center;\n"]);return L=function(){return e},e}function P(){let e=(0,i._)(["\n    width: 100px;\n    height: 100px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 40px;\n    background: #f7f7f7;\n    border-radius: 50%;\n"]);return P=function(){return e},e}function U(){let e=(0,i._)(["\n    position: relative;\n    width: 100%;\n    height: 100%;\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    justify-content: space-around;\n    gap: 30px;\n"]);return U=function(){return e},e}function K(){let e=(0,i._)(["\n    padding: 10px;\n    margin: 0 20px;\n    display: flex;\n    align-items: center;\n    flex: 1;\n    border-radius: 0.75rem;\n    background-color: #fff;\n    min-height: 250px;\n    color: ",";\n"]);return K=function(){return e},e}function G(){let e=(0,i._)(["\n    position: relative;\n    flex: 1;\n    margin: 0 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 0.75rem;\n    background-color: #fff;\n    min-height: 250px;\n"]);return G=function(){return e},e}function V(){let e=(0,i._)(["\n    width: 100%;\n    display: flex;\n    flex-wrap: wrap;\n    gap: 10px;\n    ","\n"]);return V=function(){return e},e}function q(){let e=(0,i._)(["\n    display: block;\n    font-size: 25px;\n    color: ",";\n"]);return q=function(){return e},e}function X(){let e=(0,i._)(["\n"]);return X=function(){return e},e}function J(){let e=(0,i._)(["\n    font-size: 24px;\n    color: ",";\n"]);return J=function(){return e},e}function Q(){let e=(0,i._)(["\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    min-height: 500px;\n    border-radius: 10px;\n    padding: 1rem;\n    margin-bottom: 20px;\n"]);return Q=function(){return e},e}let Z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},$=r.default.div(z(),(0,g.extrasmall)({width:"95% !important"}));r.default.span(I(),e=>null==e?void 0:e.color),r.default.div(M()),r.default.div(E(),e=>e.sz,e=>e.bg||"#fff",e=>e.cl||"#000"),r.default.div(R()),r.default.div(A()),r.default.div(H(),e=>e.sz,c.mainColor),r.default.div(N(),c.mainColor),r.default.div(O()),r.default.div(W()),r.default.div(B()),r.default.div(F());let ee=r.default.div(L()),et=r.default.span(P()),en=r.default.div(U()),ei=r.default.div(K(),c.mainColor),el=r.default.div(G()),eo=r.default.div(V(),(0,g.extrasmall)({flexDirection:"column",gap:"30px"})),ea=r.default.span(q(),c.mainColor),er=r.default.div(X()),ed=r.default.div(J(),c.mainColor),es=r.default.div(Q());t.default=()=>{let e=(0,u.useSelector)(e=>e.hourSection),t=(0,u.useSelector)(e=>{var t;return null==e?void 0:null===(t=e.section)||void 0===t?void 0:t.section}),n=(0,u.useSelector)(e=>{var t;return null==e?void 0:null===(t=e.user)||void 0===t?void 0:t.user}),[i,r]=(0,o.useState)(null),[m,g]=(0,o.useState)([0,0]),[z,I]=(0,o.useState)(!0),[M,E]=(0,o.useState)([]),[R,A]=(0,o.useState)([]),[H,N]=(0,o.useState)(!1),[O,W]=(0,o.useState)([]),[B,F]=(0,o.useState)(0),[L,P]=(0,o.useState)(!1),[U,K]=(0,o.useState)(null),[G,V]=a().useState(p()(c.serverTimeStorage)),[q,X]=(0,o.useState)({}),[J,Q]=(0,o.useState)(!0),{headers:eu}=(0,c.getHeaders)(),ec=(0,u.useDispatch)(),{request:ef}=(0,v.useHttp)(),[eh,em]=(0,o.useState)({date:new Date(c.serverTimeStorage),dateFrom:p()(c.serverTimeStorage).startOf("isoWeek").toDate(),dateTo:p()(c.serverTimeStorage).endOf("isoWeek").toDate(),weekNumber:p()(c.serverTimeStorage).isoWeek(),year:p()(c.serverTimeStorage).year(),month:p()(c.serverTimeStorage).month(),day:p()(c.serverTimeStorage).date(),weekday:p()(c.serverTimeStorage).day()});p()(new Date(c.serverTimeStorage)).isoWeek(),p()(new Date(c.serverTimeStorage)).day();let ep=()=>P(!1),ev=e=>{let t=p()(e.format("YYYY-MM-DD")).isoWeek(),n=p()(e.format("YYYY-MM-DD")).day(),i=p()(e.format("YYYY-MM-DD")).date(),l=p()(e.format("YYYY-MM-DD")).month(),o=p()(e.format("YYYY-MM-DD")).year(),a=p()(e.format("YYYY-MM-DD")).startOf("isoWeek").toDate(),r=p()(e.format("YYYY-MM-DD")).endOf("isoWeek").toDate();em({dateValue:e,dateFrom:a,dateTo:r,weekNumber:t,year:o,weekday:n,day:i,month:l})};(0,o.useEffect)(()=>{Q(!0),(null==t?void 0:t.id)&&s.default.get(c.BASE_URL+"/timeTableByWeekOfYear/getTeacherTimeTableAndStatisticsForKafedra?kafedraId="+(null==t?void 0:t.id)+"&year="+(null==eh?void 0:eh.year)+"&month="+((null==eh?void 0:eh.month)+1)+"&day="+(null==eh?void 0:eh.day)+"&week="+(null==eh?void 0:eh.weekNumber)+"&weekday="+(null==eh?void 0:eh.weekday),{headers:eu}).then(e=>{var t,n;W(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj.reduce((e,t)=>{let n=e.find(e=>e.teacherData.id===t.teacherData.id);return n?n.shows=[...n.shows,...t.shows]:e.push(t),e},[])),K(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.secondObj),Q(!1)}).catch(e=>{W([]),Q(!1)})},[eh]),(0,o.useEffect)(()=>{X(t)},[t]),(0,o.useEffect)(()=>{ev(G)},[G]);let ex=()=>{F(setInterval(()=>{eg()},6e4))};(0,o.useEffect)(()=>{t&&r(null==t?void 0:t.id)},[t]),(0,o.useEffect)(()=>{(null==t?void 0:t.id)&&s.default.get(c.BASE_URL+"/kafedra/getComeCountTodayStatistics?id="+(null==t?void 0:t.id),{headers:eu}).then(e=>{var t,n,i,l,o,a,r,d,s,u,c,f;let h=[];(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(t=n.obj)||void 0===t?void 0:t.comeCount)!==null?h.push(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(i=l.obj)||void 0===i?void 0:i.comeCount):h.push(0),(null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(o=a.obj)||void 0===o?void 0:o.comeCount)!==null?h.push((null==e?void 0:null===(d=e.data)||void 0===d?void 0:null===(r=d.obj)||void 0===r?void 0:r.allCount)-(null==e?void 0:null===(u=e.data)||void 0===u?void 0:null===(s=u.obj)||void 0===s?void 0:s.comeCount)):h.push(null==e?void 0:null===(f=e.data)||void 0===f?void 0:null===(c=f.obj)||void 0===c?void 0:c.allCount),g(()=>h),I(!1)}).catch(e=>{}),(null==t?void 0:t.id)&&s.default.get(c.BASE_URL+"/kafera-mudiri/getTeachersStatisticsForKafedraDashboard?kafedraId="+i,{headers:eu}).then(e=>{var t;K(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(e=>{})},[i]),(0,o.useEffect)(()=>{eg(),ex()},[]),(0,o.useEffect)(()=>{(null==R?void 0:R.length)===0?N(!0):N(!1)},[R]);let eg=async()=>{await s.default.get("".concat(c.BASE_URL,"/user/notification?week=",45,"&year=",2023),{headers:eu}).then(e=>{var t;E(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(e=>{N(!0)})};(0,o.useEffect)(()=>{clearInterval(B)},[H]),(0,o.useEffect)(()=>{(null==M?void 0:M.length)===0?clearInterval(B):eb(O)},[M,O]);let eb=t=>{let n=[];null==M||M.map((i,l)=>{var o,a;let r=null==t?void 0:t.find(e=>{var t;return(null==e?void 0:null===(t=e.teacherData)||void 0===t?void 0:t.id)===(null==i?void 0:i.id)}),d=new Date(c.serverTimeStorage);d.setHours(d.getHours(),0,0);let s=null===(o=e.find(e=>p()(e.start).format("HH:mm:ss")===p()(d).format("HH:mm:ss")))||void 0===o?void 0:o.number;(null==r?void 0:null===(a=r.shows)||void 0===a?void 0:a.find(e=>(null==e?void 0:e.hourNumber)===s+2))&&n.push(i)}),0!==n.length?A(n):A([])},ej=async()=>{(null==q?void 0:q.name.trim().length)!==0&&n&&await s.default.put("".concat(c.BASE_URL,"/kafera-mudiri/changeNameOfKafedra"),q,{headers:eu}).then(e=>{var t;Y.toast.success(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message),ec((0,T.fetchSection)(ef)),ep()}).catch(e=>{var t,n;Y.toast.error(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message)})};return(0,l.jsxs)(es,{children:[(0,l.jsx)(ed,{children:(0,l.jsxs)(eo,{children:[(0,l.jsx)(ei,{children:(0,l.jsxs)(en,{children:[(0,l.jsx)(j.default,{onClick:()=>P(!0),sx:{position:"absolute",top:0,right:0},title:"change kafedra name",children:(0,l.jsx)(x.BsThreeDotsVertical,{})}),(0,l.jsx)(et,{children:(0,l.jsx)(f.GiTeacher,{})}),(0,l.jsx)(er,{children:(0,l.jsx)(ea,{children:null==t?void 0:t.name})})]})}),(0,l.jsxs)(el,{children:[!H&&0!==R.length&&(0,l.jsx)(ee,{children:(0,l.jsx)(h.default,{data:R})}),null!==i&&(null==m?void 0:m.reduce((e,t)=>e+t))?(0,l.jsx)(d.default,{seriesK:m,isSpinner:z}):"Not exists teachers"]})]})}),(0,l.jsx)("hr",{style:{width:"100%",minHeight:"2px",backgroundColor:c.mainColor}}),(0,l.jsx)(_.default,{}),(0,l.jsx)(w.default,{open:L,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsxs)(S.default,{sx:Z,component:$,children:[(0,l.jsxs)(S.default,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,l.jsx)(k.default,{variant:"h6",color:c.mainColor,mt:1,children:"Update department name"}),(0,l.jsxs)(j.default,{onClick:ep,children:[" ",(0,l.jsx)(y.IoClose,{size:22})]})]}),(0,l.jsxs)(S.default,{children:[(0,l.jsx)(C.Stack,{sx:{height:"150px",padding:"0 10px"},direction:"row",justifyContent:"center",alignItems:"center",children:(0,l.jsx)(b.default,{fullWidth:!0,required:!0,value:null==q?void 0:q.name,label:"Department",onChange:e=>X(t=>({...t,name:e.target.value}))})}),(0,l.jsxs)(C.Stack,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,l.jsx)(D.default,{variant:"outlined",onClick:ep,children:"Cancel"}),(0,l.jsx)(D.default,{variant:"contained",onClick:ej,children:"Update"})]})]})]})})]})}},31942:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var i=n("58865"),l=n("85893"),o=n("16356");n("67294");var a=n("71893"),r=n("53432"),d=n("16393"),s=n("97367"),u=n("55693"),c=n("89589"),f=n("74113"),h=n("51649"),m=n("57024");function p(){let e=(0,i._)(["\n","\n"]);return p=function(){return e},e}function v(){let e=(0,i._)(["\n  width: 100% ;\n  display: flex;\n  gap: 10px;\n  margin: 5px !important;\n"]);return v=function(){return e},e}function x(e){let{sty:t,data:n,setExpanded:i,openColor:a,isDefault:m,title:p,openTable:v}=e,x=[{field:"id",headerName:"ID",width:40,editable:!1},{field:"fullName",headerName:"Name",type:"string",width:300,editable:!1,renderCell:e=>{var t,n,i;return(0,l.jsxs)(j,{children:[(0,l.jsx)("img",{src:(null==e?void 0:null===(t=e.row)||void 0===t?void 0:t.photo)?d.BASE_URL+"/attachment/download/"+(null==e?void 0:null===(i=e.row)||void 0===i?void 0:null===(n=i.photo)||void 0===n?void 0:n.id):"",width:"50px",height:"50px",alt:null==e?void 0:e.value,style:{borderRadius:"50%"}}),(0,l.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:null==e?void 0:e.value})]})}},{field:"login",headerName:"Login",type:"string",width:300,editable:!1},{field:"email",headerName:"Email",type:"string",width:300,editable:!1},{field:"rfid",headerName:"RFID",type:"string",width:300,editable:!1},{field:"passport",headerName:"Passport",type:"string",width:300,editable:!1},{field:"positions",headerName:"Shtat birligi va lavozimi",type:"string",width:300,editable:!1}];return(0,l.jsx)(s.default,{open:v,onClose:i,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsxs)(u.default,{sx:g,component:b,children:[(0,l.jsxs)(u.default,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,l.jsxs)(c.default,{id:"modal-modal-title",variant:"h6",component:"h2",sx:{color:m?"#0096DB":a},children:[p,"-",n.length]}),(0,l.jsx)(f.default,{onClick:i,children:(0,l.jsx)(h.IoMdClose,{})})]}),(0,l.jsx)(u.default,{children:v?(0,l.jsx)(o.DataGrid,{density:"comfortable",style:{width:"100%",minHeight:"600px!important",borderRadius:"0.3rem",zIndex:"1000000000000000",backgroundColor:"#fff"},columns:x,rows:n,components:{Toolbar:o.GridToolbar},autoHeight:!0,pageSize:5,rowsPerPageOptions:[5],initialState:{...n.initialState,columns:{columnVisibilityModel:{id:!1,login:!1,card:!1,rfid:!1,email:!1,passport:!1}}}}):(0,l.jsx)(r.default,{})})]})})}let g={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,minHeight:400,bgcolor:"background.paper",border:"none",outline:"none",boxShadow:24,borderRadius:1,p:2},b=a.default.div(p(),(0,m.extrasmall)({width:"95% !important"})),j=a.default.div(v())},44178:function(e,t,n){"use strict";n.r(t),n("33948");var i=n("85893"),l=n("67294"),o=n("90650"),a=n("31942"),r=n("70231");let d={animationOne:{scale:1.1,transition:{yoyo:1/0,duration:.25}},hover:{scale:1,textShadow:"0 0 8px rgb(255,255,255)",boxShadow:"0 0 8px #f00"},focus:{scale:.9}};t.default=e=>{let{data:t,count:n}=e,[s,u]=(0,l.useState)(!1);return(0,i.jsxs)(o.AnimateSharedLayout,{children:[s&&(0,i.jsx)(a.default,{sty:{left:"10px"},setExpanded:()=>u(!1),isDefault:!1,openColor:"#f00",title:"Teachers who are late for class",openTable:(null==t?void 0:t.length)!==0,data:t}),(0,i.jsx)(o.motion.div,{layoutId:"kafedraId",style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:(0,i.jsxs)(o.motion.button,{style:{width:"80px",minHeight:"80px",display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",backgroundColor:"#f00",border:"none",fontSize:"24px",borderRadius:"50%"},variants:d,animate:"animationOne",whileHover:"hover",onClick:()=>u(!0),children:[(0,i.jsx)(r.FaTriangleExclamation,{}),"\xa0",null==t?void 0:t.length]})})]})}},44924:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}}),n("88449"),n("19894"),n("2490"),n("57640"),n("9924"),n("33792"),n("31672"),n("59461");var i=n("85893");n("67294");var l=n("50533"),o=n("7104"),a=n("30381"),r=n.n(a),d=n("16393"),s=n("55693");function u(e){let{data:t,enterRoomData:n,dateInput:a}=e,u=(0,l.useSelector)(e=>e.hourSection),c=null==n?void 0:n.filter(e=>{var t;return(null==e?void 0:null===(t=e.rooms)||void 0===t?void 0:t.length)>0}).map(e=>e.rooms).flat(),f=(e,t,n)=>{var l;let s=r()(e),c=r()(null===(l=u.find(e=>e.number===t))||void 0===l?void 0:l.start).date(s.date()).diff(s,"milliseconds"),f=r().utc(Math.abs(c)).format("mm:ss"),h=r()(a).set({hour:r()(n).hours(),minute:r()(n).minutes()});if(r()(d.serverTimeStorage).isAfter(h)){if(!e)return(0,i.jsx)(o.Chip,{label:"Missed",color:"error",size:"small"});if(c<0)return(0,i.jsx)(o.Tooltip,{title:s.format("HH:mm"),arrow:!0,placement:"top",children:(0,i.jsx)(o.Chip,{label:(0,i.jsx)("p",{style:{fontSize:11},children:f}),color:"warning",size:"small"})});else if(c>0)return(0,i.jsx)(o.Tooltip,{title:s.format("HH:mm"),arrow:!0,placement:"top",children:(0,i.jsx)(o.Chip,{label:(0,i.jsx)("p",{style:{fontSize:11},children:f}),color:"success",size:"small"})});else return(0,i.jsx)(o.Chip,{label:"On time",color:"default",size:"small"})}};return(0,i.jsx)(o.TableContainer,{component:o.Paper,sx:{overflow:"auto"},children:(0,i.jsxs)(o.Table,{sx:{minWidth:2200},children:[(0,i.jsx)(o.TableHead,{children:(0,i.jsxs)(o.TableRow,{children:[(0,i.jsx)(o.TableCell,{align:"center",sx:{position:"sticky",left:0,backgroundColor:"#fff",zIndex:1,borderRight:"1px solid rgba(224, 224, 224, 1)",maxWidth:150},children:(0,i.jsx)("strong",{children:"Teachers"})}),u.map(e=>(0,i.jsx)(o.TableCell,{align:"center",sx:{borderRight:"1px solid rgba(224, 224, 224, 1)",width:250},children:(0,i.jsx)("strong",{children:e.hour})},e.number))]})}),(0,i.jsx)(o.TableBody,{children:null==t?void 0:t.map(e=>{var t;let n=c.filter(t=>t.id===e.teacherData.id);return(0,i.jsxs)(o.TableRow,{children:[(0,i.jsx)(o.TableCell,{align:"center",sx:{position:"sticky",left:0,backgroundColor:"#fff",zIndex:1,borderRight:"1px solid rgba(224, 224, 224, 1)",width:200,height:100},children:null===(t=e.teacherData)||void 0===t?void 0:t.fullName}),u.map(t=>{var l,a;let r=null==e?void 0:e.shows.find(e=>e.hourNumber===t.number),d=null==n?void 0:n.find(t=>(null==t?void 0:t.room.substring(0,5))===(null==r?void 0:r.room.substring(0,5))&&t.id===e.teacherData.id),u=null==d?void 0:null===(a=d.times)||void 0===a?void 0:null===(l=a.filter(e=>e.section===t.number))||void 0===l?void 0:l.sort((e,t)=>e.time-t.time)[0];return(0,i.jsx)(o.Tooltip,{title:(null==r?void 0:r.groups.join(", "))||"",arrow:!0,children:(0,i.jsx)(o.TableCell,{align:"center",sx:{position:"relative",borderRight:"1px solid rgba(224, 224, 224, 1)",width:250},children:r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Typography,{sx:{position:"absolute",top:5,left:"50%",transform:"translateX(-50%)"},fontSize:14,fontWeight:"bold",children:r.room.substring(0,5)}),(0,i.jsx)(o.Typography,{fontSize:10,children:null==r?void 0:r.lessonName}),(0,i.jsx)(s.default,{sx:{position:"absolute",bottom:5,right:5},children:f(null==u?void 0:u.time,null==u?void 0:u.section,t.start)})]})})},"".concat(e.teacherData.id,"-").concat(t.number))})]},e.teacherData.id)})})]})})}},66270:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}}),n("33948"),n("25387"),n("72608"),n("2490"),n("31672"),n("59461"),n("57658");var i=n("85893"),l=n("67294"),o=n("50533"),a=n("27233"),r=n("16393"),d=n("96413"),s=n("52861"),u=n("73871"),c=n("1190"),f=n("30381"),h=n.n(f),m=n("44924"),p=n("53432"),v=n("7104"),x=n("55693");function g(){let e=(0,o.useSelector)(e=>{var t;return null==e?void 0:null===(t=e.section)||void 0===t?void 0:t.section}),[t,n]=(0,l.useState)([]),[f,g]=(0,l.useState)(null),[b,j]=(0,l.useState)(h()(r.serverTimeStorage)),[y,w]=(0,l.useState)(!1),[S,k]=(0,l.useState)(""),C=async()=>{if(null==e?void 0:e.id){w(!0),k("");try{let{data:t}=await a.default.get("".concat(r.BASE_URL,"/timeTableByWeekOfYear/getTeacherTimeTableAndStatisticsForKafedra"),{params:{kafedraId:e.id,year:b.format("YYYY"),month:b.format("MM"),day:b.format("DD"),week:b.isoWeek(),weekday:b.format("d")}}),{obj:i=[],secondObj:l=null}=t,o=i.reduce((e,t)=>{let n=e.find(e=>e.teacherData.id===t.teacherData.id);return n?n.shows=[...n.shows,...t.shows]:e.push(t),e},[]);n(o),g(l)}catch(e){k("Failed to fetch timetable data. Please try again.")}finally{w(!1)}}};(0,l.useEffect)(()=>{C()},[b]);let D=e=>(0,i.jsx)(v.Card,{children:(0,i.jsx)(v.CardContent,{children:(0,i.jsx)(x.default,{sx:{display:"flex",justifyContent:"center"},children:e})})});return(0,i.jsxs)("div",{children:[(0,i.jsx)(u.LocalizationProvider,{dateAdapter:d.AdapterMoment,children:(0,i.jsx)(c.DatePicker,{label:"Select Date",inputFormat:"DD/MM/YYYY",value:b,onChange:e=>j(e),renderInput:e=>(0,i.jsx)(s.default,{...e,sx:{width:165,margin:"10px 0"},size:"small"})})}),y?D((0,i.jsx)(p.default,{})):S?D(S):t.length?(0,i.jsx)(m.default,{data:t,dateInput:b,enterRoomData:f}):D("No timetable data available")]})}}}]);