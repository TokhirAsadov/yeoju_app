/*! For license information please see 8562.a55eb9bb.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["8562"],{6226:function(e,t,a){"use strict";a.r(t);var l=a("58865");a("33948"),a("15581"),a("34514"),a("2490"),a("57658"),a("17727");var n=a("85893"),u=a("67294"),i=a("16393"),r=a("30381"),d=a.n(r),o=a("27233"),s=a("44118"),c=a("52861"),f=a("54520"),h=a("71893"),v=a("57024"),k=a("50533");function g(){let e=(0,l._)(["\n  width: 300px;\n  ","\n"]);return g=function(){return e},e}function p(){let e=(0,l._)(["\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 25px;\n  margin-bottom: 1rem;\n  ","\n"]);return p=function(){return e},e}function x(){let e=(0,l._)(["\n  width: 100%;\n  padding: 1rem;\n"]);return x=function(){return e},e}a("21793");let b=h.default.div(g(),(0,v.extrasmall)({width:"80%"})),m=h.default.div(p(),(0,v.extrasmall)({justifyContent:"center"})),w=h.default.div(x());t.default=()=>{let e=(0,k.useSelector)(e=>e.serverTime.time),t=(0,k.useSelector)(e=>{var t;return null==e?void 0:null===(t=e.section)||void 0===t?void 0:t.section}),[a,l]=(0,u.useState)([]),[r,h]=(0,u.useState)(null),{headers:v}=(0,i.getHeaders)(),[g,p]=(0,u.useState)([]),[x,S]=(0,u.useState)(!1),[y,j]=(0,u.useState)(null),[T,E]=(0,u.useState)(d()());(0,u.useEffect)(()=>{E(d()(e))},[]),(0,u.useEffect)(()=>{(null==t?void 0:t.id)&&o.default.get(i.BASE_URL+"/kafedra/getTeachersForSelectByKafedraId?kafedraId="+(null==t?void 0:t.id),{headers:v}).then(e=>{var t;l(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(e=>{})},[]),(0,u.useEffect)(()=>{S(!0),r&&o.default.get(i.BASE_URL+"/timeTableByWeekOfYear/getTeacherTimeTable?t="+r+"&week="+(null==T?void 0:T.isoWeek())+"&year="+(null==T?void 0:T.year()),{headers:v}).then(e=>{var t;let a=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj,l=[],n={};for(let e in null==a||a.forEach(e=>{e.shows.forEach(t=>{let a=t.daysName;!n[a]&&(n[a]={teacherData:e.teacherData,shows:[]}),n[a].shows.push(t)})}),n)l.push(n[e]);p(l)}).catch(e=>{p([])}).finally(()=>{S(!1)}),r&&_(r)},[r,T]);let _=e=>{o.default.get(i.BASE_URL+"/user/getTeacherStatisticsForTimeTableByWeek?teacherId="+e+"&week="+(null==T?void 0:T.isoWeek())+"&year="+T.year(),{headers:v}).then(e=>{var t;j(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(e=>{j(null)})};return(0,n.jsxs)(w,{children:[(0,n.jsxs)(m,{children:[(0,n.jsx)(b,{children:(0,n.jsx)(s.default,{disablePortal:!0,id:"combo-box-demo",options:a,onChange:(e,t)=>{h(null==t?void 0:t.value)},sx:{width:300,background:"#fff"},renderInput:e=>(0,n.jsx)(c.default,{...e,label:"Teacher"})})}),(0,n.jsx)(c.default,{label:"Date of the week",type:"week",sx:{width:"200px",background:"#fff"},value:d()(T).format("YYYY-[W]WW"),onChange:e=>E(d()(e.target.value))})]}),r&&(0,n.jsx)(f.default,{isLoading:x,dateInput:T,data:g,statistics:y})]})}}}]);