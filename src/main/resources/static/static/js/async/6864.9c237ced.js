/*! For license information please see 6864.9c237ced.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["6864"],{32404:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var a=n("7409"),o=n("99282"),r=n("38956"),u=n("58865");n("57658"),n("15581"),n("34514"),n("2490"),n("41539");var l=n("85893"),i=n("67294"),d=n("71893"),s=n("71632"),f=n("28685"),c=n("52861"),h=n("44118"),v=n("27233"),k=n("87346"),x=n("30381"),p=n.n(x);function g(){var e=(0,u._)(["\n    width: 300px;\n    ","\n"]);return g=function(){return e},e}function m(){var e=(0,u._)(["\n\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    overflow: hidden;\n    margin: 15px 15px 0;\n\n    ","\n"]);return m=function(){return e},e}function b(){var e=(0,u._)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n\n"]);return b=function(){return e},e}n("21793");var w=d.default.div(g(),(0,s.extrasmall)({width:"80%"})),_=d.default.div(m(),(0,s.extrasmall)({margin:"15px 0 0 0",justifyContent:"center"})),j=d.default.div(b()),y=function(){var e=(0,r._)((0,i.useState)([]),2),t=e[0],n=e[1],u=(0,r._)((0,i.useState)([]),2),d=u[0],s=u[1],x=(0,r._)((0,i.useState)(null),2),g=x[0],m=x[1],b=(0,r._)((0,i.useState)(null),2),y=b[0],W=b[1],S=(0,f.getHeaders)().headers,Y=(0,r._)((0,i.useState)([]),2),T=Y[0],E=Y[1],D=(0,r._)((0,i.useState)(!1),2),O=D[0],B=D[1],C=(0,r._)((0,i.useState)(null),2),F=C[0],I=C[1],L=function(e,t){p().locale("ru");for(var n=p()().year(t).isoWeek(e).startOf("isoWeek"),a=[],o=0;o<6;o++)a.push(n.clone().add(o,"days").toDate());return a},N=(0,r._)((0,i.useState)({date:p()().format("YYYY-[W]WW"),dateFrom:p()().startOf("isoWeek").toDate(),dateTo:p()().endOf("isoWeek").toDate(),weekNumber:p()().isoWeek(),daysOfWeek:L(p()().isoWeek(),p()().year())}),2),A=N[0],R=N[1];(0,i.useEffect)(function(){U()},[]);var U=function(){v.default.get(f.BASE_URL+"/kafedra/getKafedrasForSelect",{headers:S}).then(function(e){var t;n(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(function(e){console.log(e)})};(0,i.useEffect)(function(){g&&v.default.get(f.BASE_URL+"/kafedra/getTeachersForSelectByKafedraId?kafedraId="+g,{headers:S}).then(function(e){var t;s(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(function(e){console.log(e)})},[g]),(0,i.useEffect)(function(){B(!0),y&&v.default.get(f.BASE_URL+"/timeTableByWeekOfYear/getTeacherTimeTable?t="+y+"&week="+(null==A?void 0:A.weekNumber)+"&year="+p()(null==A?void 0:A.date).format("YYYY"),{headers:S}).then(function(e){var t,n=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj,a=[],o={};for(var r in null==n||n.forEach(function(e){e.shows.forEach(function(t){var n=t.daysName;!o[n]&&(o[n]={teacherData:e.teacherData,shows:[]}),o[n].shows.push(t)})}),o)a.push(o[r]);console.log(a),E(a),B(!1)}).catch(function(e){console.log(e)}),null!=y&&K(y)},[y,A]);var K=function(e){v.default.get(f.BASE_URL+"/user/getTeacherStatisticsForTimeTableByWeek?teacherId="+e+"&week="+(null==A?void 0:A.weekNumber)+"&year="+p()(null==A?void 0:A.date).format("YYYY"),{headers:S}).then(function(e){var t;I(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(function(e){console.log(e)})};return(0,l.jsxs)(j,{children:[(0,l.jsxs)(_,{children:[(0,l.jsx)(w,{children:(0,l.jsx)(h.default,{disablePortal:!0,id:"combo-box-demo",options:t,onChange:function(e,t){m(null==t?void 0:t.value)},sx:{width:300},renderInput:function(e){return(0,l.jsx)(c.default,(0,o._)((0,a._)({},e),{label:"Kafedra"}))}})}),(0,l.jsx)(w,{children:(0,l.jsx)(h.default,{disablePortal:!0,id:"combo-box-demo",options:d,onChange:function(e,t){W(null==t?void 0:t.value)},sx:{width:300},renderInput:function(e){return(0,l.jsx)(c.default,(0,o._)((0,a._)({},e),{label:"Teacher"}))}})}),(0,l.jsx)(c.default,{label:"Date of the week",type:"week",sx:{width:"200px"},value:A.date,onChange:function(e){var t=e.target.value,n=p()(t).isoWeek(),a=p()(t).startOf("isoWeek").toDate(),o=p()(t).endOf("isoWeek").toDate(),r=p()(t).year();R({date:t,dateFrom:a,dateTo:o,weekNumber:n,daysOfWeek:L(n,r)})}})]}),y&&(0,l.jsx)(k.default,{isLoading:O,obj:A,data:T,statistics:F})]})}}}]);