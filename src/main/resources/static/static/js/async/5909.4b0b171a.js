/*! For license information please see 5909.4b0b171a.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["5909"],{724327:function(e,l,t){"use strict";t.r(l);var n=t("258865");t("333948"),t("757658"),t("857640"),t("409924"),t("888449"),t("959849"),t("2490"),t("25387"),t("772608");var d=t("785893"),a=t("667294"),i=t("671893"),o=t("730381"),r=t.n(o),s=t("455693"),c=t("36498"),u=t("50533"),h=t("607701"),x=t("478951"),p=t("63551"),v=t("316393");function m(){let e=(0,n._)(["\n\n    table {\n        min-width: 900px;\n        border-collapse: collapse;\n        width: 100%;\n        font-size: 10px;\n        font-weight: bold;\n        overflow: hidden;\n\n        td, th {\n            border: 1px solid #bebcbc;\n            padding: 7px;\n            font-size: 12px;\n            text-align: center;\n        }\n\n        th {\n            background: ",";\n        }\n    }\n\n    .td_item {\n        &:hover {\n            background-color: rgba(0, 0, 0, 0.25)!important;\n            cursor: pointer;\n        }\n    }\n\n"]);return m=function(){return e},e}let f=(0,a.memo)(e=>{var l,t,n,i,o;let{data:v,isLoading:m,isError:f}=(0,u.useSelector)(e=>e.tableData),y=(0,u.useSelector)(e=>{var l;return null==e?void 0:null===(l=e.section)||void 0===l?void 0:l.section}),[b,g]=(0,a.useState)({personId:"",day:"",hourValue:""}),[S,w]=(0,a.useState)(!1),A=()=>w(!0),C=(e=>{let l=r()(e),t=l.month(),n=l.year(),d=l.endOf("month").format("D"),a=[],i=r()({year:n,month:t}),o=null;for(let e=0;e<i.daysInMonth();e++){let l=i.clone().startOf("isoWeek").add(e,"days");if(l.month()===t&&7===l.isoWeekday()){o=parseInt(l.format("D"));break}}return null!==o&&a.push(...Array.from({length:Math.ceil((d-o+1)/7)},(e,l)=>o+7*l)),a})(null===(l=v[0])||void 0===l?void 0:l.date),I=e=>{let l=e.filter(e=>"number"==typeof(null==e?void 0:e.hourValue)&&(null==e?void 0:e.hourValue)!==0),t=null==l?void 0:l.reduce((e,l)=>({hourValue:((null==e?void 0:e.hourValue)||0)+(null==l?void 0:l.hourValue)}),{hourValue:0});return(null==t?void 0:t.hourValue)||0},k=(e,l)=>{!C.includes(l.day)&&(A(),g({personId:e.id,day:l.day,hourValue:l.hourValue}))};return(0,d.jsxs)(j,{children:[m?(0,d.jsx)(s.default,{sx:{display:"flex",justifyContent:"center"},children:(0,d.jsx)(h.default,{})}):f?(0,d.jsx)("h4",{children:"error"}):v.length>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("table",{children:[(0,d.jsxs)("thead",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{rowSpan:2,children:"\u2116"}),(0,d.jsx)("th",{rowSpan:2,children:"F.I.O"}),(0,d.jsx)("th",{rowSpan:2,children:"Position"}),(0,d.jsx)("th",{colSpan:null===(n=v[0])||void 0===n?void 0:null===(t=n.monthly)||void 0===t?void 0:t.length,children:"Attendance and absence notes by day of the month"}),(0,d.jsx)("th",{colSpan:2,children:"Worked for the month"})]}),(0,d.jsxs)("tr",{children:[null===(o=v[0])||void 0===o?void 0:null===(i=o.monthly)||void 0===i?void 0:i.map(e=>(0,d.jsx)("td",{style:{minWidth:25},children:null==e?void 0:e.day},null==e?void 0:e.day)),(0,d.jsx)("td",{children:"days"}),(0,d.jsx)("td",{children:"hours"})]})]}),(0,d.jsx)("tbody",{children:null==v?void 0:v.map((e,l)=>{var t,n,a,i,o;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:l+1}),(0,d.jsx)("th",{style:{textAlign:"start"},children:function(e){let l=e.split(" ").slice(0,3);return l.length>1?l.map((e,l)=>{if(!(l>0))return e;if(e)return"S"==e[0]&&"H"==e[1]||"C"==e[0]&&"H"==e[1]?e[0]+e[1]+".":e[0]+"."}).filter(Boolean).join(" "):e}(null==e?void 0:null===(t=e.fullName)||void 0===t?void 0:t.toUpperCase())}),(0,d.jsxs)("th",{children:[null==e?void 0:null===(n=e.userPosition)||void 0===n?void 0:n.label," ",(null==e?void 0:e.rate)?"(".concat(null==e?void 0:e.rate,")"):""]}),null==e?void 0:null===(a=e.monthly)||void 0===a?void 0:a.map(l=>(0,d.jsx)("td",{style:{background:((null==l?void 0:l.hourValue)===0||"string"==typeof(null==l?void 0:l.hourValue))&&"rgba(255, 0, 0, 0.8)",color:((null==l?void 0:l.hourValue)===0||"string"==typeof(null==l?void 0:l.hourValue))&&"#FFF"},className:"td_item",onClick:()=>k(e,l),children:null==l?void 0:l.hourValue},null==l?void 0:l.day)),(0,d.jsx)("td",{children:null==e?void 0:null===(o=e.monthly)||void 0===o?void 0:null===(i=o.filter(e=>"number"==typeof(null==e?void 0:e.hourValue)&&(null==e?void 0:e.hourValue)!==0))||void 0===i?void 0:i.length}),(0,d.jsx)("td",{children:I(null==e?void 0:e.monthly)})]},l)})})]}),(0,d.jsx)(s.default,{sx:{mt:"1.5rem",display:"flex",justifyContent:"end",gap:"1.5rem"},children:(0,d.jsx)(c.default,{departmentId:e,data:v,mudir:null==y?void 0:y.kafedraMudiri})})]}):(0,d.jsx)(x.default,{w:200,h:180}),(0,d.jsx)(p.default,{selectedDay:b,open:S,handleClose:()=>w(!1)})]})}),j=i.default.div(m(),v.mainColor);l.default=f},318393:function(e,l,t){"use strict";t.r(l);var n=t("258865");t("333948"),t("757658"),t("857640"),t("409924");var d=t("785893"),a=t("667294"),i=t("671893");t("730381");var o=t("455693"),r=t("50533"),s=t("607701"),c=t("478951"),u=t("63551"),h=t("316393"),x=t("153339"),p=t("503506");function v(){let e=(0,n._)(["\n\n    table {\n        min-width: 900px;\n        border-collapse: collapse;\n        width: 100%;\n        font-size: 10px;\n        font-weight: bold;\n        overflow: hidden;\n\n        td, th {\n            border: 1px solid #bebcbc;\n            padding: 7px;\n            font-size: 12px;\n            text-align: center;\n        }\n\n        th {\n            background: ",";\n        }\n    }\n\n    .td_item {\n        &:hover {\n            background-color: rgba(0, 0, 0, 0.25) !important;\n            cursor: pointer;\n        }\n    }\n\n"]);return v=function(){return e},e}let m=(0,a.memo)(e=>{let{data:l,isLoading:t,isError:n}=(0,r.useSelector)(e=>e.tableData),[i,h]=(0,a.useState)({personId:"",day:"",hourValue:""}),[v,m]=(0,a.useState)(!1);return(0,d.jsxs)(f,{children:[t?(0,d.jsx)(o.default,{sx:{display:"flex",justifyContent:"center"},children:(0,d.jsx)(s.default,{})}):n?(0,d.jsx)("h4",{children:"error"}):l.length>0?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("table",{children:[(0,d.jsxs)("thead",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{rowSpan:2,children:"\u2116"}),(0,d.jsx)("th",{rowSpan:2,children:"F.I.O"}),(0,d.jsx)("th",{rowSpan:2,children:"Position"}),(0,d.jsx)("th",{colSpan:9,children:"Oylik"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{colSpan:3,children:"Rejada"}),(0,d.jsx)("td",{colSpan:3,children:"Amalda"}),(0,d.jsx)("td",{colSpan:3,children:"Farqi"})]})]}),(0,d.jsx)("tbody",{children:null==l?void 0:l.map((e,l)=>{var t,n,a;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:l+1}),(0,d.jsx)("th",{style:{textAlign:"start"},children:null==e?void 0:null===(t=e.fullName)||void 0===t?void 0:t.toUpperCase()}),(0,d.jsxs)("th",{children:[null==e?void 0:null===(n=e.userPosition)||void 0===n?void 0:n.label," ",(null==e?void 0:e.rate)?"(".concat(null==e?void 0:e.rate,")"):""]}),(0,d.jsx)("td",{colSpan:3,children:(null==e?void 0:e.totalAttendedSum)+(null==e?void 0:e.totalNotAttendedSum)}),(0,d.jsx)("td",{colSpan:3,children:null==e?void 0:e.totalAttendedSum}),(0,d.jsx)("td",{colSpan:3,children:(0,d.jsx)(p.default,{title:(null==e?void 0:null===(a=e.missedLessons)||void 0===a?void 0:a.length)?(0,d.jsx)("div",{style:{fontSize:"11px",lineHeight:"1.4"},children:e.missedLessons.map((e,l)=>(0,d.jsxs)("div",{children:[e.day,"-kun |"," ",null!==e.hour?"".concat(e.hour,"-para"):"soat: -"," |"," ","xona: ",e.room," | hafta: ",e.week]},l))}):"No missed lessons",placement:"top",arrow:!0,children:(0,d.jsx)("span",{style:{cursor:"pointer"},children:null==e?void 0:e.totalNotAttendedSum})})})]},l)})})]}),(0,d.jsx)(o.default,{sx:{mt:"1.5rem",display:"flex",justifyContent:"end",gap:"1.5rem"},children:(0,d.jsx)(x.default,{departmentId:e,data:l})})]}):(0,d.jsx)(c.default,{w:200,h:180}),(0,d.jsx)(u.default,{selectedDay:i,open:v,handleClose:()=>m(!1)})]})}),f=i.default.div(v(),h.mainColor);l.default=m},63551:function(e,l,t){"use strict";t.r(l),t("333948"),t("764211"),t("641874"),t("2490"),t("757658");var n=t("785893"),d=t("667294"),a=t("455693"),i=t("807104"),o=t("194718"),r=t("844118"),s=t("752861"),c=t("50533"),u=t("789776");let h=(0,r.createFilterOptions)();l.default=(0,d.memo)(e=>{let{open:l,handleClose:t,selectedDay:x}=e,[p,v]=(0,d.useState)(""),m=(0,c.useDispatch)();return(0,n.jsxs)(i.Dialog,{disableEscapeKeyDown:!0,open:l,onClose:t,children:[(0,n.jsx)(i.DialogTitle,{children:"Select day type"}),(0,n.jsx)(i.DialogContent,{children:(0,n.jsx)(a.default,{component:"form",sx:{my:2},children:(0,n.jsx)(r.default,{value:p,onChange:(e,l)=>{l&&l.inputValue?v(l.inputValue):v(l.toString().substring(0,l.indexOf("-")))},filterOptions:(e,l)=>{let t=h(e,l),{inputValue:n}=l,d=e.some(e=>n===e||e.inputValue===n);return""!==n&&!d&&t.push({inputValue:n,title:'Add "'.concat(n,'"')}),t},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,id:"free-solo-with-text-dsgdemo",options:["H-Holiday","SL-Sick leave","DO-Day off","V-Vacation"],getOptionLabel:e=>"string"==typeof e?e:e.title,renderOption:(e,l)=>(0,n.jsx)("li",{...e,children:l.title||l}),sx:{width:300},freeSolo:!0,renderInput:e=>(0,n.jsx)(s.default,{...e,label:"Type"})})})}),(0,n.jsxs)(i.DialogActions,{children:[(0,n.jsx)(o.default,{onClick:()=>{t(),v("")},children:"Cancel"}),(0,n.jsx)(o.default,{onClick:()=>{""!==p.trim()&&(m((0,u.changeDayValue)({...x,hourValue:p})),t(),v(""))},children:"Ok"})]})]})})},324681:function(e,l,t){"use strict";t.r(l);var n=t("258865");t("333948"),t("931672"),t("359461"),t("2490"),t("857640"),t("409924");var d=t("785893"),a=t("667294"),i=t("671893"),o=t("807104"),r=t("742154"),s=t("332392"),c=t("444025"),u=t("661261"),h=t("455693"),x=t("896484"),p=t("15352"),v=t("973871"),m=t("201190"),f=t("296413"),j=t("752861"),y=t("724327"),b=t("730381"),g=t.n(b),S=t("727233"),w=t("316393"),A=t("50533"),C=t("411070"),I=t("194718"),k=t("889583"),D=t("639711"),N=t("318393");function M(){let e=(0,n._)(["\n    width: 100%;\n    padding: 1rem;\n"]);return M=function(){return e},e}let T={PaperProps:{style:{maxHeight:368,width:300}}},V=i.default.div(M());l.default=()=>{let e=(0,A.useSelector)(e=>e.section.section),{headers:l}=(0,w.getHeaders)(),t=(0,A.useDispatch)(),[n,i]=(0,a.useState)([]),[b,M]=(0,a.useState)([]),Y=(0,D.useNavigate)(),[F,E]=(0,a.useState)({department:"",personData:[],selectedDate:g()(w.serverTimeStorage)}),O=()=>{S.default.get(w.BASE_URL+"/kafedra/getKafedrasForSelect",{headers:l}).then(l=>{var t;i(null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.obj),E(t=>{var n,d;return{...t,department:null===(d=l.data)||void 0===d?void 0:null===(n=d.obj.find(l=>l.value===e.id))||void 0===n?void 0:n.value}})}).catch(e=>{i([])})},H=e=>{e&&(null==e?void 0:e.trim())!==""&&S.default.get(w.BASE_URL+"/kafedra/getTeachersForTableByKafedraId?kafedraId="+e,{headers:l}).then(e=>{var l;M(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.obj)}).catch(e=>{M([])})};return(0,a.useEffect)(()=>{O()},[]),(0,a.useEffect)(()=>{H(null==F?void 0:F.department)},[F.department]),(0,a.useEffect)(()=>{F.personData.length>0&&t((0,C.getTableDataTeachers)({valueData:F,staffData:b}))},[F]),(0,d.jsxs)(V,{children:[(0,d.jsx)(h.default,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:(0,d.jsxs)(h.default,{sx:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[(0,d.jsxs)(r.default,{sx:{width:300},children:[(0,d.jsx)(s.default,{id:"demo-simple-select-label",children:"Department"}),(0,d.jsxs)(c.default,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:F.department,label:"Department",onChange:e=>{E(l=>({...l,department:e.target.value})),E(e=>({...e,personData:[]}))},disabled:!0,children:[(0,d.jsx)(u.default,{value:"",children:(0,d.jsx)("em",{children:"None"})}),null==n?void 0:n.map(e=>(0,d.jsx)(u.default,{value:null==e?void 0:e.value,children:null==e?void 0:e.label},null==e?void 0:e.value))]})]}),(0,d.jsxs)(r.default,{sx:{width:300},children:[(0,d.jsx)(s.default,{id:"demo-multiple-checkbox-label",children:"Choose teachers"}),(0,d.jsx)(c.default,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:F.personData,onChange:e=>{let{target:{value:l}}=e;E(e=>({...e,personData:l}))},input:(0,d.jsx)(x.default,{label:"Choose teachers"}),renderValue:e=>e.join(", "),MenuProps:T,children:b.map(e=>(0,d.jsxs)(u.default,{value:null==e?void 0:e.label,children:[(0,d.jsx)(p.default,{checked:F.personData.indexOf(null==e?void 0:e.label)>-1}),(0,d.jsx)(o.ListItemText,{primary:null==e?void 0:e.label})]},null==e?void 0:e.value))})]}),(0,d.jsx)(v.LocalizationProvider,{dateAdapter:f.AdapterMoment,adapterLocale:"en",children:(0,d.jsx)(m.DatePicker,{inputFormat:"MMMM YYYY",value:F.selectedDate,label:"month",views:["month"],openTo:"month",onChange:e=>{E(l=>({...l,selectedDate:e}))},renderInput:e=>(0,d.jsx)(j.default,{...e,variant:"outlined",label:"Choose month"}),disableMaskedInput:!0})})]})}),(0,d.jsx)(h.default,{sx:{display:"flex",justifyContent:"end",my:2},children:(0,d.jsx)(I.default,{variant:"contained",color:"inherit",endIcon:(0,d.jsx)(k.FaFileAlt,{size:18}),onClick:()=>Y("history"),children:"History"})}),(0,d.jsx)(o.Card,{sx:{mt:"1.5rem"},children:(0,d.jsx)(o.CardContent,{children:(0,d.jsx)(y.default,{departmentId:F.department})})}),(0,d.jsx)(o.Card,{sx:{mt:"1.5rem"},children:(0,d.jsx)(o.CardContent,{children:(0,d.jsx)(N.default,{departmentId:F.department})})})]})}},36498:function(e,l,t){"use strict";t.r(l);var n=t("258865");t("333948"),t("931672"),t("359461"),t("2490"),t("888449"),t("959849"),t("25387"),t("772608"),t("857640"),t("409924");var d=t("785893"),a=t("667294"),i=t("949492"),o=t("194718"),r=t("607701"),s=t("671893"),c=t("70231"),u=t("727233"),h=t("316393"),x=t("730381"),p=t.n(x),v=t("572132");function m(){let e=(0,n._)(["\n    width: 100%;\n    margin: 0 auto;\n    font-size: 10px;\n    padding: 5px;\n    color: black;\n    line-height: 1.7;\n\n\n    table {\n        font-size: 10px;\n        min-width: 700px;\n        border-collapse: collapse;\n        width: 100%;\n        overflow: hidden;\n\n        table, td, th {\n            border: 1px solid #000000;\n            padding: 5px;\n            font-size: 10px;\n            text-align: center;\n        }\n    }\n"]);return m=function(){return e},e}let f=s.default.div(m());l.default=(0,a.memo)(e=>{var l,t,n,s,x,m,j,y,b,g;let{data:S,departmentId:w,mudir:A}=e;p().locale("en");let C=(0,a.useRef)(null),[I,k]=(0,a.useState)(!1),[D,N]=(0,a.useState)(null),{headers:M}=(0,h.getHeaders)(),T=e=>{(null==e?void 0:e.trim())!==""&&(null==S?void 0:S.length)!==0&&u.default.get("".concat(h.BASE_URL,"/table/getTables/").concat(e),{headers:M}).then(e=>{var l;N((null===(l=e.data.obj.find(e=>"".concat(e.month,"-").concat(e.year)===p()(S[0].date).format("MMMM-YYYY")))||void 0===l?void 0:l.id)||null)}).catch(e=>{})},V=async()=>{var e,l,t,n;try{k(!0),p().locale("en");let t=C.current,n={margin:5,filename:"table-file".concat(new Date().getTime(),".pdf"),image:{type:"jpeg",quality:1},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"landscape"}},d=await (0,i.default)().set(n).from(t).output("blob"),a=new FormData;a.append("file",new Blob([d],{type:"application/pdf"}),n.filename);let o=localStorage.getItem(h.TOKEN),r={headers:{Authorization:h.TokenType+o}},s="".concat(h.BASE_URL,"/table/upload/").concat(p()(null===(e=S[0])||void 0===e?void 0:e.date).format("YYYY"),"/").concat(p()(null===(l=S[0])||void 0===l?void 0:l.date).format("MMMM"),"?kafedraId=").concat(null==w?void 0:w.departmentId);await u.default.post(s,a,r),await (0,i.default)().set(n).from(t).save(),v.toast.success("Success")}catch(e){v.toast.error("Error saving: ".concat((null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message)||e.message))}finally{k(!1)}},Y=async()=>{var e,l,t,n;try{k(!0),p().locale("en");let t=C.current,n={margin:5,filename:"table-file".concat(new Date().getTime(),".pdf"),image:{type:"jpeg",quality:1},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"landscape"}},d=await (0,i.default)().set(n).from(t).output("blob"),a=new FormData;a.append("file",new Blob([d],{type:"application/pdf"}),n.filename);let o=localStorage.getItem(h.TOKEN),r={headers:{Authorization:h.TokenType+o}},s="".concat(h.BASE_URL,"/table/upload/").concat(p()(null===(e=S[0])||void 0===e?void 0:e.date).format("YYYY"),"/").concat(p()(null===(l=S[0])||void 0===l?void 0:l.date).format("MMMM"),"?kafedraId=").concat(null==w?void 0:w.departmentId,"&id=").concat(D);await u.default.post(s,a,r),await (0,i.default)().set(n).from(t).save(),v.toast.success("Success")}catch(e){v.toast.error("Error saving: ".concat((null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message)||e.message))}finally{k(!1)}},F=e=>{let l=e.filter(e=>"number"==typeof(null==e?void 0:e.hourValue)&&(null==e?void 0:e.hourValue)!==0),t=null==l?void 0:l.reduce((e,l)=>({hourValue:((null==e?void 0:e.hourValue)||0)+(null==l?void 0:l.hourValue)}),{hourValue:0});return(null==t?void 0:t.hourValue)||0};function E(e){let l=e.split(" ").slice(0,3);return l.length>1?l.map((e,l)=>{if(!(l>0))return e;if(e)return"S"==e[0]&&"H"==e[1]||"C"==e[0]&&"H"==e[1]?e[0]+e[1]+".":e[0]+"."}).filter(Boolean).join(" "):e}return(0,a.useEffect)(()=>{T(null==w?void 0:w.departmentId)},[S]),(0,d.jsxs)(d.Fragment,{children:[I?(0,d.jsx)(o.default,{disabled:!0,variant:"outlined",endIcon:(0,d.jsx)(r.default,{size:18}),children:D?"update and download":"save and download"}):(0,d.jsx)(o.default,{variant:"contained",endIcon:(0,d.jsx)(c.FaRegFilePdf,{}),onClick:D?Y:V,children:D?"update and download":"save and download"}),(0,d.jsx)("div",{style:{display:"none"},children:(0,d.jsxs)(f,{ref:C,children:[(0,d.jsxs)("div",{className:"header",children:[(0,d.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,d.jsxs)("div",{style:{width:200,textAlign:"center"},children:[(0,d.jsxs)("h4",{children:["I confirm: ",(0,d.jsx)("br",{}),"Rector ",(0,d.jsx)("br",{})]}),(0,d.jsx)("br",{}),(0,d.jsx)("p",{style:{width:200,borderBottom:"1px solid #000"}})]})}),(0,d.jsx)("h2",{style:{textAlign:"center"},children:"KIMYO INTERNATIONAL UNIVERSITY IN TASHKENT"}),(0,d.jsx)("h3",{style:{textAlign:"center"},children:"Department of information technologies"}),(0,d.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,d.jsxs)("p",{children:["Document number:25 ",(0,d.jsx)("br",{}),"Date of compilation: ",p()(null===(l=S[0])||void 0===l?void 0:l.date).format("MMMM YYYY")]})}),(0,d.jsx)("h3",{style:{textAlign:"center"},children:"T A B E L"}),(0,d.jsx)("h4",{style:{textAlign:"center"},children:"recording the use of working time"})]}),(0,d.jsxs)("div",{className:"main",children:[(0,d.jsxs)("table",{children:[(0,d.jsxs)("thead",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{rowSpan:2,children:"\u2116"}),(0,d.jsx)("th",{rowSpan:2,children:"F.I.O"}),(0,d.jsx)("th",{rowSpan:2,children:"Position"}),(0,d.jsx)("th",{colSpan:null===(n=S[0])||void 0===n?void 0:null===(t=n.monthly)||void 0===t?void 0:t.length,children:"Attendance and absence notes by day of the month"}),(0,d.jsx)("th",{colSpan:2,children:"Worked for the month"})]}),(0,d.jsxs)("tr",{children:[null===(x=S[0])||void 0===x?void 0:null===(s=x.monthly)||void 0===s?void 0:s.map(e=>(0,d.jsx)("td",{style:{minWidth:25},children:null==e?void 0:e.day},null==e?void 0:e.day)),(0,d.jsx)("td",{children:"days"}),(0,d.jsx)("td",{children:"hours"})]})]}),(0,d.jsx)("tbody",{children:null==S?void 0:null===(m=S.slice(0,14))||void 0===m?void 0:m.map((e,l)=>{var t,n,a,i,o;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:l+1}),(0,d.jsx)("td",{style:{textAlign:"start",width:140},children:E(null==e?void 0:null===(t=e.fullName)||void 0===t?void 0:t.toUpperCase())}),(0,d.jsxs)("td",{style:{width:130},children:[null==e?void 0:null===(n=e.userPosition)||void 0===n?void 0:n.label," ",(null==e?void 0:e.rate)?"(".concat(null==e?void 0:e.rate,")"):""]}),null==e?void 0:null===(a=e.monthly)||void 0===a?void 0:a.map(e=>(0,d.jsxs)("td",{children:[" ",null==e?void 0:e.hourValue]},null==e?void 0:e.day)),(0,d.jsx)("td",{children:null==e?void 0:null===(o=e.monthly)||void 0===o?void 0:null===(i=o.filter(e=>"number"==typeof(null==e?void 0:e.hourValue)&&(null==e?void 0:e.hourValue)!==0))||void 0===i?void 0:i.length}),(0,d.jsx)("td",{children:F(null==e?void 0:e.monthly)})]},l)})})]}),S.length>=15&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{})]}),(null==S?void 0:S.length)>14&&(0,d.jsxs)("table",{children:[(0,d.jsxs)("thead",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{rowSpan:2,children:"\u2116"}),(0,d.jsx)("th",{rowSpan:2,children:"F.I.O"}),(0,d.jsx)("th",{rowSpan:2,children:"Position"}),(0,d.jsx)("th",{colSpan:null===(y=S[0])||void 0===y?void 0:null===(j=y.monthly)||void 0===j?void 0:j.length,children:"Attendance and absence notes by day of the month"}),(0,d.jsx)("th",{colSpan:2,children:"Worked for the month"})]}),(0,d.jsxs)("tr",{children:[null===(g=S[0])||void 0===g?void 0:null===(b=g.monthly)||void 0===b?void 0:b.map(e=>(0,d.jsx)("td",{style:{minWidth:25},children:null==e?void 0:e.day},null==e?void 0:e.day)),(0,d.jsx)("td",{children:"days"}),(0,d.jsx)("td",{children:"hours"})]})]}),(0,d.jsx)("tbody",{children:null==S?void 0:S.slice(14).map((e,l)=>{var t,n,a,i,o;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:l+(null==S?void 0:S.slice(0,14).length)+1}),(0,d.jsx)("td",{style:{textAlign:"start",width:140},children:E(null==e?void 0:null===(t=e.fullName)||void 0===t?void 0:t.toUpperCase())}),(0,d.jsxs)("td",{style:{width:130},children:[null==e?void 0:null===(n=e.userPosition)||void 0===n?void 0:n.label," ",(null==e?void 0:e.rate)?"(".concat(null==e?void 0:e.rate,")"):""]}),null==e?void 0:null===(a=e.monthly)||void 0===a?void 0:a.map(e=>(0,d.jsxs)("td",{children:[" ",null==e?void 0:e.hourValue]},null==e?void 0:e.day)),(0,d.jsx)("td",{children:null==e?void 0:null===(o=e.monthly)||void 0===o?void 0:null===(i=o.filter(e=>"number"==typeof(null==e?void 0:e.hourValue)&&(null==e?void 0:e.hourValue)!==0))||void 0===i?void 0:i.length}),(0,d.jsx)("td",{children:F(null==e?void 0:e.monthly)})]},l)})})]})]}),(0,d.jsxs)("div",{className:"footer",style:{display:"flex",justifyContent:"space-between"},children:[(0,d.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:15},children:[(0,d.jsx)("p",{children:"Meaning of abbreviations: "}),(0,d.jsxs)("p",{children:["H - Holiday ",(0,d.jsx)("br",{}),"SL - Sick leave ",(0,d.jsx)("br",{}),"DO - Day off ",(0,d.jsx)("br",{}),"V - Vacation ",(0,d.jsx)("br",{})]})]}),(0,d.jsxs)("div",{style:{width:700,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",marginTop:15,rowGap:15},children:[(0,d.jsx)("b",{children:"Head of the department"}),(0,d.jsx)("p",{style:{width:150,borderBottom:"1px solid #000"}}),(0,d.jsx)("b",{children:(e=>{let l="",t="",n="";if(e&&"object"==typeof e){if(e.firstName&&e.middleName&&e.lastName)l=(e.firstName||"").trim().toUpperCase(),t=(e.middleName||"").trim().toUpperCase(),n=(e.lastName||"").trim();else if(e.fullName){let d=e.fullName.trim().split(" ");if(d.length>=3)l=d[0].toUpperCase(),t=d[1].toUpperCase(),n=d.slice(2).join(" ");else{if(2!==d.length)return e.fullName||"";l=d[0].toUpperCase(),n=d[1]}}}if(!l||!n)return"No name";let d=l.startsWith("SH")&&l.length>=2?l.substring(0,2):l.charAt(0)+".",a=t.startsWith("CH")&&t.length>=2?t.substring(0,2):t?t.charAt(0)+".":"",i=n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"";return"".concat(d,".").concat(a).concat("").concat(i)})(A)}),(0,d.jsx)("b",{children:"Head of HR Department"}),(0,d.jsx)("p",{style:{width:150,borderBottom:"1px solid #000"}}),(0,d.jsx)("b",{children:"\u0424.\u0428. \u0421\u0443\u043B\u0430\u0439\u043C\u0430\u043D\u043E\u0432"})]})]})]})})]})})},153339:function(e,l,t){"use strict";t.r(l);var n=t("258865");t("333948"),t("931672"),t("359461"),t("2490"),t("888449"),t("959849"),t("25387"),t("772608"),t("857640"),t("409924");var d=t("785893"),a=t("667294"),i=t("949492"),o=t("194718"),r=t("607701"),s=t("671893"),c=t("70231"),u=t("727233"),h=t("316393"),x=t("730381"),p=t.n(x),v=t("572132");function m(){let e=(0,n._)(["\n    width: 100%;\n    margin: 0 auto;\n    font-size: 10px;\n    padding: 5px;\n    color: black;\n    line-height: 1.7;\n\n\n    table {\n        font-size: 10px;\n        min-width: 700px;\n        border-collapse: collapse;\n        width: 100%;\n        overflow: hidden;\n\n        table, td, th {\n            border: 1px solid #000000;\n            padding: 5px;\n            font-size: 10px;\n            text-align: center;\n        }\n    }\n"]);return m=function(){return e},e}let f=s.default.div(m());l.default=(0,a.memo)(e=>{var l;let{data:t,departmentId:n}=e;p().locale("en");let s=(0,a.useRef)(null),[x,m]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null),{headers:b}=(0,h.getHeaders)(),g=e=>{(null==e?void 0:e.trim())!==""&&(null==t?void 0:t.length)!==0&&u.default.get("".concat(h.BASE_URL,"/table/getTables/").concat(e),{headers:b}).then(e=>{var l;y((null===(l=e.data.obj.find(e=>"".concat(e.month,"-").concat(e.year)===p()(t[0].date).format("MMMM-YYYY")))||void 0===l?void 0:l.id)||null)}).catch(e=>{})},S=async()=>{var e,l,d,a;try{m(!0),p().locale("en");let d=s.current,a={margin:5,filename:"table-file".concat(new Date().getTime(),".pdf"),image:{type:"jpeg",quality:1},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"landscape"}},o=await (0,i.default)().set(a).from(d).output("blob"),r=new FormData;r.append("file",new Blob([o],{type:"application/pdf"}),a.filename);let c=localStorage.getItem(h.TOKEN),x={headers:{Authorization:h.TokenType+c}},f="".concat(h.BASE_URL,"/table/upload/").concat(p()(null===(e=t[0])||void 0===e?void 0:e.date).format("YYYY"),"/").concat(p()(null===(l=t[0])||void 0===l?void 0:l.date).format("MMMM"),"?kafedraId=").concat(null==n?void 0:n.departmentId);await u.default.post(f,r,x),await (0,i.default)().set(a).from(d).save(),v.toast.success("Success")}catch(e){v.toast.error("Error saving: ".concat((null===(a=e.response)||void 0===a?void 0:null===(d=a.data)||void 0===d?void 0:d.message)||e.message))}finally{m(!1)}},w=async()=>{var e,l,d,a;try{m(!0),p().locale("en");let d=s.current,a={margin:5,filename:"table-file".concat(new Date().getTime(),".pdf"),image:{type:"jpeg",quality:1},html2canvas:{scale:2},jsPDF:{unit:"mm",format:"a4",orientation:"landscape"}},o=await (0,i.default)().set(a).from(d).output("blob"),r=new FormData;r.append("file",new Blob([o],{type:"application/pdf"}),a.filename);let c=localStorage.getItem(h.TOKEN),x={headers:{Authorization:h.TokenType+c}},f="".concat(h.BASE_URL,"/table/upload/").concat(p()(null===(e=t[0])||void 0===e?void 0:e.date).format("YYYY"),"/").concat(p()(null===(l=t[0])||void 0===l?void 0:l.date).format("MMMM"),"?kafedraId=").concat(null==n?void 0:n.departmentId,"&id=").concat(j);await u.default.post(f,r,x),await (0,i.default)().set(a).from(d).save(),v.toast.success("Success")}catch(e){v.toast.error("Error saving: ".concat((null===(a=e.response)||void 0===a?void 0:null===(d=a.data)||void 0===d?void 0:d.message)||e.message))}finally{m(!1)}};return(0,a.useEffect)(()=>{g(null==n?void 0:n.departmentId)},[t]),(0,d.jsxs)(d.Fragment,{children:[x?(0,d.jsx)(o.default,{disabled:!0,variant:"outlined",endIcon:(0,d.jsx)(r.default,{size:18}),children:j?"update and download":"save and download"}):(0,d.jsx)(o.default,{variant:"contained",endIcon:(0,d.jsx)(c.FaRegFilePdf,{}),onClick:j?w:S,children:j?"update and download":"save and download"}),(0,d.jsx)("div",{style:{display:"none"},children:(0,d.jsxs)(f,{ref:s,children:[(0,d.jsxs)("div",{className:"header",children:[(0,d.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,d.jsxs)("div",{style:{width:200,textAlign:"center"},children:[(0,d.jsxs)("h4",{children:["I confirm: ",(0,d.jsx)("br",{}),"Rector ",(0,d.jsx)("br",{})]}),(0,d.jsx)("br",{}),(0,d.jsx)("p",{style:{width:200,borderBottom:"1px solid #000"}})]})}),(0,d.jsx)("h2",{style:{textAlign:"center"},children:"KIMYO INTERNATIONAL UNIVERSITY IN TASHKENT"}),(0,d.jsx)("h3",{style:{textAlign:"center"},children:"Department of information technologies"}),(0,d.jsx)("div",{style:{display:"flex",justifyContent:"end"},children:(0,d.jsxs)("p",{children:["Document number:25 ",(0,d.jsx)("br",{}),"Date of compilation: ",p()(null===(l=t[0])||void 0===l?void 0:l.date).format("MMMM YYYY")]})}),(0,d.jsx)("h3",{style:{textAlign:"center"},children:"T A B E L"}),(0,d.jsx)("h4",{style:{textAlign:"center"},children:"recording the use of working time"})]}),(0,d.jsxs)("div",{className:"main",children:[(0,d.jsxs)("table",{children:[(0,d.jsxs)("thead",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{rowSpan:2,children:"\u2116"}),(0,d.jsx)("th",{rowSpan:2,children:"F.I.O"}),(0,d.jsx)("th",{rowSpan:2,children:"Position"}),(0,d.jsx)("th",{colSpan:9,children:"Oylik"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{colSpan:3,children:"Rejada"}),(0,d.jsx)("td",{colSpan:3,children:"Amalda"}),(0,d.jsx)("td",{colSpan:3,children:"Farqi"})]})]}),(0,d.jsx)("tbody",{children:null==t?void 0:t.map((e,l)=>{var t,n;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:l+1}),(0,d.jsx)("th",{style:{textAlign:"start"},children:null==e?void 0:null===(t=e.fullName)||void 0===t?void 0:t.toUpperCase()}),(0,d.jsxs)("th",{children:[null==e?void 0:null===(n=e.userPosition)||void 0===n?void 0:n.label," ",(null==e?void 0:e.rate)?"(".concat(null==e?void 0:e.rate,")"):""]}),(0,d.jsx)("td",{colSpan:3,children:(null==e?void 0:e.totalAttendedSum)+(null==e?void 0:e.totalNotAttendedSum)}),(0,d.jsx)("td",{colSpan:3,children:null==e?void 0:e.totalAttendedSum}),(0,d.jsx)("td",{colSpan:3,children:null==e?void 0:e.totalNotAttendedSum})]},l)})})]}),t.length>=15&&(0,d.jsxs)(d.Fragment,{children:[" ",(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{}),(0,d.jsx)("br",{})]}),(null==t?void 0:t.length)>14&&(0,d.jsxs)("table",{children:[(0,d.jsxs)("thead",{children:[(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{rowSpan:2,children:"\u2116"}),(0,d.jsx)("th",{rowSpan:2,children:"F.I.O"}),(0,d.jsx)("th",{rowSpan:2,children:"Position"}),(0,d.jsx)("th",{colSpan:9,children:"Oylik"})]}),(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{colSpan:3,children:"Rejada"}),(0,d.jsx)("td",{colSpan:3,children:"Amalda"}),(0,d.jsx)("td",{colSpan:3,children:"Farqi"})]})]}),(0,d.jsx)("tbody",{children:null==t?void 0:t.map((e,l)=>{var t,n;return(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{children:l+1}),(0,d.jsx)("th",{style:{textAlign:"start"},children:null==e?void 0:null===(t=e.fullName)||void 0===t?void 0:t.toUpperCase()}),(0,d.jsxs)("th",{children:[null==e?void 0:null===(n=e.userPosition)||void 0===n?void 0:n.label," ",(null==e?void 0:e.rate)?"(".concat(null==e?void 0:e.rate,")"):""]}),(0,d.jsx)("td",{colSpan:3,children:(null==e?void 0:e.totalAttendedSum)+(null==e?void 0:e.totalNotAttendedSum)}),(0,d.jsx)("td",{colSpan:3,children:null==e?void 0:e.totalAttendedSum}),(0,d.jsx)("td",{colSpan:3,children:null==e?void 0:e.totalNotAttendedSum})]},l)})})]})]}),(0,d.jsxs)("div",{className:"footer",style:{display:"flex",justifyContent:"space-between"},children:[(0,d.jsxs)("div",{style:{display:"flex",gap:"5px",marginTop:15},children:[(0,d.jsx)("p",{children:"Meaning of abbreviations: "}),(0,d.jsxs)("p",{children:["H - Holiday ",(0,d.jsx)("br",{}),"SL - Sick leave ",(0,d.jsx)("br",{}),"DO - Day off ",(0,d.jsx)("br",{}),"V - Vacation ",(0,d.jsx)("br",{})]})]}),(0,d.jsxs)("div",{style:{width:700,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",marginTop:15,rowGap:15},children:[(0,d.jsx)("b",{children:"Head of the department"}),(0,d.jsx)("p",{style:{width:150,borderBottom:"1px solid #000"}}),(0,d.jsx)("b",{children:"\u0428.\u0422.\u0421\u0430\u0431\u0438\u0440\u043E\u0432"}),(0,d.jsx)("b",{children:"Head of HR Department"}),(0,d.jsx)("p",{style:{width:150,borderBottom:"1px solid #000"}}),(0,d.jsx)("b",{children:"\u0424.\u0428. \u0421\u0443\u043B\u0430\u0439\u043C\u0430\u043D\u043E\u0432"})]})]})]})})]})})}}]);