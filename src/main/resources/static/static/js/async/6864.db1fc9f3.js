/*! For license information please see 6864.db1fc9f3.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["6864"],{32404:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return y}});var n=a("7409"),o=a("99282"),r=a("38956"),u=a("58865");a("57658"),a("15581"),a("34514"),a("2490"),a("41539");var i=a("85893"),d=a("67294"),l=a("71893"),s=a("71632"),f=a("28685"),c=a("52861"),h=a("44118"),v=a("27233"),k=a("87346"),x=a("30381"),p=a.n(x);function m(){var e=(0,u._)(["\n    width: 300px;\n    ","\n"]);return m=function(){return e},e}function b(){var e=(0,u._)(["\n\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    overflow: hidden;\n    margin: 15px 15px 0;\n\n    ","\n"]);return b=function(){return e},e}function w(){var e=(0,u._)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n\n"]);return w=function(){return e},e}a("21793");var g=l.default.div(m(),(0,s.extrasmall)({width:"80%"})),_=l.default.div(b(),(0,s.extrasmall)({margin:"15px 0 0 0",justifyContent:"center"})),j=l.default.div(w()),y=function(){var e=(0,r._)((0,d.useState)([]),2),t=e[0],a=e[1],u=(0,r._)((0,d.useState)([]),2),l=u[0],s=u[1],x=(0,r._)((0,d.useState)(null),2),m=x[0],b=x[1],w=(0,r._)((0,d.useState)(null),2),y=w[0],W=w[1],S=(0,f.getHeaders)().headers,Y=(0,r._)((0,d.useState)([]),2),T=Y[0],E=Y[1],D=(0,r._)((0,d.useState)(!1),2),O=D[0],B=D[1],C=(0,r._)((0,d.useState)(null),2),F=C[0],I=C[1],L=function(e,t){p().locale("ru");for(var a=p()().year(t).isoWeek(e).startOf("isoWeek"),n=[],o=0;o<6;o++)n.push(a.clone().add(o,"days").toDate());return n},N=(0,r._)((0,d.useState)({date:p()().format("YYYY-[W]WW"),dateFrom:p()().startOf("isoWeek").toDate(),dateTo:p()().endOf("isoWeek").toDate(),weekNumber:p()().isoWeek(),daysOfWeek:L(p()().isoWeek(),p()().year())}),2),A=N[0],R=N[1];(0,d.useEffect)(function(){U()},[]);var U=function(){v.default.get(f.BASE_URL+"/kafedra/getKafedrasForSelect",{headers:S}).then(function(e){var t;a(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(function(e){})};(0,d.useEffect)(function(){m&&v.default.get(f.BASE_URL+"/kafedra/getTeachersForSelectByKafedraId?kafedraId="+m,{headers:S}).then(function(e){var t;s(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(function(e){})},[m]),(0,d.useEffect)(function(){B(!0),y&&v.default.get(f.BASE_URL+"/timeTableByWeekOfYear/getTeacherTimeTable?t="+y+"&week="+(null==A?void 0:A.weekNumber)+"&year="+p()(null==A?void 0:A.date).format("YYYY"),{headers:S}).then(function(e){var t,a=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj,n=[],o={};for(var r in null==a||a.forEach(function(e){e.shows.forEach(function(t){var a=t.daysName;!o[a]&&(o[a]={teacherData:e.teacherData,shows:[]}),o[a].shows.push(t)})}),o)n.push(o[r]);E(n),B(!1)}).catch(function(e){}),null!=y&&K(y)},[y,A]);var K=function(e){v.default.get(f.BASE_URL+"/user/getTeacherStatisticsForTimeTableByWeek?teacherId="+e+"&week="+(null==A?void 0:A.weekNumber)+"&year="+p()(null==A?void 0:A.date).format("YYYY"),{headers:S}).then(function(e){var t;I(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(function(e){})};return(0,i.jsxs)(j,{children:[(0,i.jsxs)(_,{children:[(0,i.jsx)(g,{children:(0,i.jsx)(h.default,{disablePortal:!0,id:"combo-box-demo",options:t,onChange:function(e,t){b(null==t?void 0:t.value)},sx:{width:300},renderInput:function(e){return(0,i.jsx)(c.default,(0,o._)((0,n._)({},e),{label:"Kafedra"}))}})}),(0,i.jsx)(g,{children:(0,i.jsx)(h.default,{disablePortal:!0,id:"combo-box-demo",options:l,onChange:function(e,t){W(null==t?void 0:t.value)},sx:{width:300},renderInput:function(e){return(0,i.jsx)(c.default,(0,o._)((0,n._)({},e),{label:"Teacher"}))}})}),(0,i.jsx)(c.default,{label:"Date of the week",type:"week",sx:{width:"200px"},value:A.date,onChange:function(e){var t=e.target.value,a=p()(t).isoWeek(),n=p()(t).startOf("isoWeek").toDate(),o=p()(t).endOf("isoWeek").toDate(),r=p()(t).year();R({date:t,dateFrom:n,dateTo:o,weekNumber:a,daysOfWeek:L(a,r)})}})]}),y&&(0,i.jsx)(k.default,{isLoading:O,obj:A,data:T,statistics:F})]})}}}]);