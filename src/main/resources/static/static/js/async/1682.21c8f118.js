/*! For license information please see 1682.21c8f118.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["1682"],{45357:function(e,t,n){"use strict";n.r(t);var l=n("58865");n("33948"),n("57640"),n("9924"),n("17727");var a=n("85893"),i=n("67294"),r=n("71893"),o=n("27233"),s=n("16393"),d=n("16356"),c=n("7104"),u=n("74113"),f=n("8193"),h=n("94718"),x=n("55693"),p=n("89583"),j=n("97367"),m=n("60155"),b=n("72132"),g=n("57024"),C=n("44118"),v=n("89589");function k(){let e=(0,l._)(["\n    ","\n"]);return k=function(){return e},e}function S(){let e=(0,l._)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    h4 {\n        color: black;\n    }\n\n    h5 {\n        color: red;\n    }\n\n"]);return S=function(){return e},e}function y(){let e=(0,l._)(["\n    ","\n"]);return y=function(){return e},e}function w(){let e=(0,l._)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 5px;\n    border-radius: 50%;\n    border: none;\n    background-color: ",";\n    color: white;\n    font-size: 12px;\n"]);return w=function(){return e},e}function A(){let e=(0,l._)(["\n    display: flex;\n    align-items: center;\n    justify-content: start;\n    gap: 5px;\n    color: ",";\n\n    h1 {\n        font-size: 22px;\n    }\n"]);return A=function(){return e},e}function _(){let e=(0,l._)(["\n    width: 100%;\n    padding: 1rem;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]);return _=function(){return e},e}let T=r.default.div(k(),(0,g.extrasmall)({width:"95% !important"})),I={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},O=r.default.div(S()),R=r.default.div(y(),(0,g.extrasmall)({width:"97% !important"})),L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},U=r.default.button(w(),s.mainColor),E=r.default.div(A(),s.mainColor),D=r.default.div(_());t.default=()=>{let[e,t]=(0,i.useState)([]),[n,l]=(0,i.useState)(!1),{headers:r}=(0,s.getHeaders)(),[g,k]=(0,i.useState)(!1),[S,y]=(0,i.useState)(null),[w,A]=(0,i.useState)(""),[_,F]=(0,i.useState)([]),[N,z]=(0,i.useState)(null),[B,G]=(0,i.useState)(!1),W=(0,i.useRef)(null),[H,M]=(0,i.useState)("ROLE_MONITORING_ASSISTANT"),P=()=>{k(!1)},V=()=>{l(!0),o.default.get(s.BASE_URL+"/dataOfLastActive/getAssistants",{headers:r}).then(e=>{var n;t(null===(n=e.data.obj)||void 0===n?void 0:n.map((e,t)=>({...e,count:t+1})))}).catch(e=>void 0).finally(()=>{l(!1)})},Y=async e=>{let t=o.default.CancelToken.source();W.current=t;let n=setTimeout(()=>{e.length>=4&&o.default.get("".concat(s.BASE_URL,"/user/getUserForTeacherSavingSearch?keyword=").concat(e),{headers:r,cancelToken:t.token}).then(e=>{F(e.data.obj)}).catch(e=>{o.default.isCancel(e)})},300);return()=>{t&&t.cancel("Operation canceled due to component unmount."),clearTimeout(n)}},q=e=>{z(e),G(!0)};(0,i.useEffect)(()=>{V()},[]);let J=()=>{z(null),G(!1)};return(0,a.jsxs)(D,{children:[(0,a.jsxs)(E,{children:[(0,a.jsx)(p.FaUser,{size:23}),(0,a.jsx)("h1",{children:"Assistants"})]}),(0,a.jsx)(c.Card,{sx:{mt:2},children:(0,a.jsxs)(c.CardContent,{children:[(0,a.jsx)(x.default,{sx:{display:"flex",justifyContent:"end",mb:2},children:(0,a.jsx)(h.default,{onClick:()=>{k(!0)},variant:"contained",color:"success",endIcon:(0,a.jsx)(p.FaUserPlus,{}),children:"Add User"})}),(0,a.jsx)(d.DataGrid,{columns:[{field:"count",headerName:"\u2116",sortable:!0,width:50,align:"center",justifyContent:"center"},{minWidth:250,flex:1,field:"fullName",headerName:"Full name",sortable:!0,align:"center",justifyContent:"center"},{minWidth:250,flex:.5,field:"action",headerName:"Action",sortable:!0,align:"center",justifyContent:"center",renderCell:e=>(0,a.jsx)(c.Stack,{direction:"row",spacing:2,justifyContent:"center",children:(0,a.jsx)(u.default,{"aria-label":"delete",color:"error",onClick:()=>q(e.row.id),children:(0,a.jsx)(f.AiFillDelete,{})})})}],rows:e||[],loading:n,components:{Toolbar:d.GridToolbar},rowsPerPageOptions:[10,30,50,70,100],autoHeight:!0,initialState:{columns:{columnVisibilityModel:{action:!1}}}})]})}),(0,a.jsx)(j.default,{open:g,onClose:P,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,a.jsxs)(x.default,{sx:L,component:R,children:[(0,a.jsxs)(O,{children:[(0,a.jsx)("h4",{children:" Add user"}),(0,a.jsxs)(U,{onClick:P,children:[" ",(0,a.jsx)(m.IoClose,{size:22})]})]}),(0,a.jsxs)(x.default,{children:[(0,a.jsxs)(x.default,{sx:{marginY:3,display:"flex",flexDirection:"column",gap:3},children:[(0,a.jsx)(C.default,{value:S,fullWidth:!0,onChange:(e,t)=>{y(t)},inputValue:w,onInputChange:(e,t)=>{A(t),Y(t)},id:"user-autocomplete",options:_||[],getOptionLabel:e=>null==e?void 0:e.label,getOptionSelected:(e,t)=>(null==e?void 0:e.value)===(null==t?void 0:t.value),renderInput:e=>(0,a.jsx)(c.TextField,{...e,label:"Select User"})}),(0,a.jsx)(c.TextField,{size:"small",label:"Role",fullWidth:!0,value:H,onChange:e=>M(e.target.value),disabled:!0})]}),(0,a.jsxs)(c.Stack,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,a.jsx)(h.default,{variant:"outlined",onClick:P,children:"Cancel"}),(0,a.jsx)(h.default,{variant:"contained",onClick:()=>{if(S){let e={userId:S.value,roleName:H};o.default.post("".concat(s.BASE_URL,"/dataOfLastActive/createAssistant"),e,{headers:r}).then(e=>{b.toast.success("Add user"),V(),y(null)}).catch(e=>{b.toast.error("Error adding user")})}k(!1)},children:"save"})]})]})]})}),(0,a.jsx)(j.default,{open:B,onClose:J,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsxs)(x.default,{sx:I,component:T,children:[(0,a.jsxs)(O,{children:[(0,a.jsx)("h5",{children:"Delete"}),(0,a.jsxs)(U,{onClick:J,children:[" ",(0,a.jsx)(m.IoClose,{size:22})]})]}),(0,a.jsxs)(x.default,{children:[(0,a.jsx)(c.Stack,{sx:{height:"100px"},direction:"row",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(v.default,{variant:"h6",color:"black",children:"Do you want to delete !"})}),(0,a.jsxs)(c.Stack,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,a.jsx)(h.default,{variant:"outlined",onClick:J,children:"Cancel"}),(0,a.jsx)(h.default,{variant:"contained",color:"error",onClick:()=>{N&&o.default.delete(s.BASE_URL+"/dataOfLastActive/deleteAssistant/"+N,{headers:r}).then(e=>{b.toast.success("Deleted assistant"),V(),G(!1)}).catch(e=>{b.toast.error("Error")})},children:"Ok"})]})]})]})})]})}}}]);