/*! For license information please see 5098.94a2845c.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["5098"],{34930:function(e,t,a){"use strict";a.r(t);var l=a("58865");a("33948"),a("57658"),a("15581"),a("34514"),a("2490");var n=a("85893"),d=a("67294"),o=a("71893"),r=a("57024"),u=a("16393"),i=a("52861"),s=a("44118"),f=a("27233"),c=a("54520"),h=a("30381"),v=a.n(h);function k(){let e=(0,l._)(["\n    width: 300px;\n    ","\n"]);return k=function(){return e},e}function x(){let e=(0,l._)(["\n\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    overflow: hidden;\n    margin: 15px 15px 0;\n\n    ","\n"]);return x=function(){return e},e}function p(){let e=(0,l._)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n\n"]);return p=function(){return e},e}a("21793");let b=o.default.div(k(),(0,r.extrasmall)({width:"80%"})),m=o.default.div(x(),(0,r.extrasmall)({margin:"15px 0 0 0",justifyContent:"center"})),g=o.default.div(p());t.default=()=>{let[e,t]=(0,d.useState)([]),[a,l]=(0,d.useState)([]),[o,r]=(0,d.useState)(null),[h,k]=(0,d.useState)(null),{headers:x}=(0,u.getHeaders)(),[p,w]=(0,d.useState)([]),[j,y]=(0,d.useState)(!1),[W,S]=(0,d.useState)(null),Y=(e,t)=>{v().locale("ru");let a=v()().year(t).isoWeek(e).startOf("isoWeek"),l=[];for(let e=0;e<6;e++)l.push(a.clone().add(e,"days").toDate());return l},[T,E]=(0,d.useState)({date:v()().format("YYYY-[W]WW"),dateFrom:v()().startOf("isoWeek").toDate(),dateTo:v()().endOf("isoWeek").toDate(),weekNumber:v()().isoWeek(),daysOfWeek:Y(v()().isoWeek(),v()().year())});(0,d.useEffect)(()=>{_()},[]);let _=()=>{f.default.get(u.BASE_URL+"/kafedra/getKafedrasForSelect",{headers:x}).then(e=>{var a;t(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.obj)}).catch(e=>{})};(0,d.useEffect)(()=>{o&&f.default.get(u.BASE_URL+"/kafedra/getTeachersForSelectByKafedraId?kafedraId="+o,{headers:x}).then(e=>{var t;l(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(e=>{})},[o]),(0,d.useEffect)(()=>{y(!0),h&&f.default.get(u.BASE_URL+"/timeTableByWeekOfYear/getTeacherTimeTable?t="+h+"&week="+(null==T?void 0:T.weekNumber)+"&year="+v()(null==T?void 0:T.date).format("YYYY"),{headers:x}).then(e=>{var t;let a=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj,l=[],n={};for(let e in null==a||a.forEach(e=>{e.shows.forEach(t=>{let a=t.daysName;!n[a]&&(n[a]={teacherData:e.teacherData,shows:[]}),n[a].shows.push(t)})}),n)l.push(n[e]);w(l),y(!1)}).catch(e=>{}),null!=h&&D(h)},[h,T]);let D=e=>{f.default.get(u.BASE_URL+"/user/getTeacherStatisticsForTimeTableByWeek?teacherId="+e+"&week="+(null==T?void 0:T.weekNumber)+"&year="+v()(null==T?void 0:T.date).format("YYYY"),{headers:x}).then(e=>{var t;S(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(e=>{})};return(0,n.jsxs)(g,{children:[(0,n.jsxs)(m,{children:[(0,n.jsx)(b,{children:(0,n.jsx)(s.default,{disablePortal:!0,id:"combo-box-demo",options:e,onChange:(e,t)=>{r(null==t?void 0:t.value)},sx:{width:300},renderInput:e=>(0,n.jsx)(i.default,{...e,label:"Kafedra"})})}),(0,n.jsx)(b,{children:(0,n.jsx)(s.default,{disablePortal:!0,id:"combo-box-demo",options:a,onChange:(e,t)=>{k(null==t?void 0:t.value)},sx:{width:300},renderInput:e=>(0,n.jsx)(i.default,{...e,label:"Teacher"})})}),(0,n.jsx)(i.default,{label:"Date of the week",type:"week",sx:{width:"200px"},value:T.date,onChange:e=>{let t=e.target.value,a=v()(t).isoWeek(),l=v()(t).startOf("isoWeek").toDate(),n=v()(t).endOf("isoWeek").toDate(),d=v()(t).year();E({date:t,dateFrom:l,dateTo:n,weekNumber:a,daysOfWeek:Y(a,d)})}})]}),h&&(0,n.jsx)(c.default,{isLoading:j,obj:T,data:p,statistics:W})]})}}}]);