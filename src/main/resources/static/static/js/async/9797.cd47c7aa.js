/*! For license information please see 9797.cd47c7aa.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["9797"],{6188:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return _}});var i=e("76150"),r=e("38956"),l=e("58865"),o=e("18965");e("92222"),e("17727"),e("88674"),e("41539");var d=e("85893"),s=e("67294"),a=e("71893"),c=e("28685"),u=e("7104"),h=e("94718"),f=e("55693"),x=e("13642"),v=e("59962"),j=e("63750"),p=e("27233"),m=e("50533");function g(){var n=(0,l._)(["\n    width: 100%;\n    padding: 1rem;\n"]);return g=function(){return n},n}var b=a.default.div(g()),_=function(){var n,t,e=(0,r._)((0,s.useState)([]),2),l=e[0],a=e[1],g=(0,r._)((0,s.useState)([]),2),_=g[0],C=g[1],y=(0,r._)((0,s.useState)(!0),2),S=y[0],w=y[1],k=(0,r._)((0,s.useState)(!1),2),A=k[0],Y=k[1],D=(0,m.useSelector)(function(n){var t;return null==n?void 0:null===(t=n.educationYear)||void 0===t?void 0:t.educationYear});var E=(n=(0,i._)(function(){return(0,o._)(this,function(n){switch(n.label){case 0:return Y(!0),[4,p.default.get("".concat(c.BASE_URL,"/permissionForTeacherGrading/findAllPermissionsForTeacherGradingByEducationYearIdAndStatus/").concat(null==D?void 0:D.id,"?status=AT_PROCESS")).then(function(n){var t;a(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.obj),console.log(n,"------------------------- permissions found------------------------")}).catch(function(n){console.log(n,"------------------------- permissions error------------------------"),a([])}).finally(function(){Y(!1)})];case 1:return n.sent(),[2]}})}),function(){return n.apply(this,arguments)});var R=(t=(0,i._)(function(){return(0,o._)(this,function(n){switch(n.label){case 0:return Y(!0),[4,p.default.get("".concat(c.BASE_URL,"/permissionForTeacherGrading/getHistory")).then(function(n){var t;C(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.obj),console.log(n,"------------------------- old permissions found------------------------")}).catch(function(n){C([]),console.log(n,"------------------------- old permissions error------------------------")}).finally(function(){Y(!1)})];case 1:return n.sent(),[2]}})}),function(){return t.apply(this,arguments)});return(0,s.useEffect)(function(){E()},[]),(0,s.useEffect)(function(){R()},[l]),(0,d.jsxs)(b,{children:[(0,d.jsx)(f.default,{sx:{my:2,display:"flex",justifyContent:"end"},children:S?(0,d.jsx)(h.default,{onClick:function(){return w(!1)},endIcon:(0,d.jsx)(j.BsClockHistory,{}),variant:"contained",children:"history"}):(0,d.jsx)(h.default,{onClick:function(){return w(!0)},startIcon:(0,d.jsx)(j.BsArrowLeft,{}),variant:"outlined",children:"Back"})}),(0,d.jsx)(u.Card,{children:(0,d.jsx)(u.CardContent,{children:S?(0,d.jsx)(x.default,{data:l,setData:a,isLoadData:A,fetchData:E}):(0,d.jsx)(v.default,{isLoadData:A,dataOld:_})})})]})}},13642:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return C}});var i=e("76150"),r=e("7409"),l=e("99282"),o=e("58865"),d=e("18965");e("21249"),e("57640"),e("9924"),e("92222"),e("52550"),e("64211"),e("41874"),e("2490"),e("41539");var s=e("85893");e("67294");var a=e("7104"),c=e("94718"),u=e("55693"),h=e("51649"),f=e("71893"),x=e("28685"),v=e("72132"),j=e("90199"),p=e("30381"),m=e.n(p),g=e("27233");function b(){var n=(0,o._)(["\n  margin-top: 25px;\n  width: 100%;\n  overflow-x: scroll;\n\n\n  table {\n    min-width: 900px;\n    border-collapse: collapse;\n    width: 100%;\n    border-radius: 5px;\n    overflow: hidden;\n\n    td, th {\n      border: 1px solid #ddd;\n      padding: 8px;\n      font-size: 13px;\n    }\n\n    th {\n      text-align: center;\n    }\n\n    tr {\n      &:nth-child(even) {\n        background-color: #fcf9f9;\n      }\n    }\n\n    th {\n      background-color: ",";\n      color: white;\n    }\n\n    .date_position {\n      position: relative;\n\n      span {\n        width: 100%;\n        position: absolute;\n        bottom: 0;\n        left: 0;\n        padding-right: 5px;\n        color: #c9bcbc;\n        font-size: 12px;\n        text-align: end;\n      }\n    }\n\n  }\n\n"]);return b=function(){return n},n}var _=f.default.div(b(),x.mainColor),C=function(n){var t,e=n.data,o=n.setData,f=n.fetchData,p=(0,x.getHeaders)().headers,b=function(n){o(function(t){return t.map(function(t){return t.id===n?(0,l._)((0,r._)({},t),{status:"CONFIRM"}):t})})},C=function(n,t){o(function(e){return e.map(function(e){return e.id===t?(0,l._)((0,r._)({},e),{deadline:n.target.value}):e})})},y=function(n){o(function(t){return t.map(function(t){return t.id===n?(0,l._)((0,r._)({},t),{status:"REJECT",deadline:null}):t})})};var S=(t=(0,i._)(function(){return(0,d._)(this,function(n){switch(n.label){case 0:return console.log(e),[4,g.default.put("".concat(x.BASE_URL,"/permissionForTeacherGrading/changePermissionStatus"),e,{headers:p}).then(function(n){console.log(n," all updated")}).catch(function(n){console.log(n,"all updated error")})];case 1:return n.sent(),v.toast.success("success"),f(),[2]}})}),function(){return t.apply(this,arguments)});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_,{children:(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"\u2116"}),(0,s.jsx)("th",{children:"Full Name"}),(0,s.jsx)("th",{children:"Subject"}),(0,s.jsx)("th",{children:"Group"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Deadline"}),(0,s.jsx)("th",{children:"Action"})]})}),(0,s.jsx)("tbody",{children:null==e?void 0:e.map(function(n,t){var e,i,r;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{textAlign:"center"},children:t+1}),(0,s.jsxs)("td",{className:"date_position",children:[null==n?void 0:null===(e=n.teacher)||void 0===e?void 0:e.fullName," ",(0,s.jsx)("span",{children:m()(null==n?void 0:n.createdAt).format("DD.MM.YYYY HH:mm")})," "]}),(0,s.jsx)("td",{style:{textAlign:"center"},children:null==n?void 0:null===(i=n.subject)||void 0===i?void 0:i.name}),(0,s.jsx)("td",{style:{textAlign:"center"},children:null==n?void 0:null===(r=n.group)||void 0===r?void 0:r.name}),(0,s.jsx)("td",{children:(0,s.jsx)(a.Stack,{direction:"row",justifyContent:"center",children:(0,s.jsx)(c.default,{color:"CONFIRM"===n.status?"success":"AT_PROCESS"===n.status?"primary":"error",variant:"contained",children:n.status})})}),(0,s.jsx)("td",{children:(0,s.jsx)(a.Stack,{direction:"row",justifyContent:"center",children:(0,s.jsx)(a.TextField,{sx:{width:"175px"},size:"small",disabled:"REJECT"===n.status||"AT_PROCESS"===n.status,inputProps:{min:m()().format("YYYY-MM-DDTHH:mm")},type:"datetime-local",onChange:function(t){return C(t,n.id)}})})}),(0,s.jsx)("td",{children:(0,s.jsxs)(a.Stack,{direction:"row",justifyContent:"center",spacing:3,children:[(0,s.jsx)(c.default,{onClick:function(){return b(n.id)},variant:"outlined",size:"small",color:"success",children:"Confirm"}),(0,s.jsx)(c.default,{onClick:function(){return y(n.id)},variant:"outlined",size:"small",color:"error",children:"Reject"})]})})]},t)})})]})}),(null==e?void 0:e.length)===0?(0,s.jsx)(j.default,{w:200,h:180}):(0,s.jsx)(u.default,{mt:"15px",display:"flex",justifyContent:"end",children:(0,s.jsx)(c.default,{variant:"contained",endIcon:(0,s.jsx)(h.IoMdSave,{}),disabled:e.some(function(n){if("AT_PROCESS"===n.status||"CONFIRM"===n.status&&null===n.deadline)return!0}),onClick:S,children:"Save"})})]})}},59962:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return j}});var i=e("58865");e("21249"),e("57640"),e("9924"),e("52550");var r=e("85893");e("67294");var l=e("7104"),o=e("94718"),d=e("71893"),s=e("28685"),a=e("90199"),c=e("55693"),u=e("78258"),h=e("30381"),f=e.n(h);function x(){var n=(0,i._)(["\n    margin-top: 25px;\n    width: 100%;\n    overflow-x: scroll;\n\n\n    table {\n        min-width: 700px;\n        border-collapse: collapse;\n        width: 100%;\n        border-radius: 5px;\n        overflow: hidden;\n\n        td, th {\n            border: 1px solid #ddd;\n            padding: 8px;\n            font-size: 15px;\n        }\n\n        th {\n            text-align: center;\n        }\n\n        tr {\n            &:nth-child(even) {\n                background-color: #fcf9f9;\n            }\n        }\n\n        th {\n            background-color: ",";\n            color: white;\n        }\n    }\n\n    .date_position {\n        position: relative;\n\n        span {\n            width: 100%;\n            position: absolute;\n            bottom: 0;\n            left: 0;\n            padding-right: 5px;\n            color: #c9bcbc;\n            font-size: 12px;\n            text-align: end;\n        }\n    }\n\n"]);return x=function(){return n},n}var v=d.default.div(x(),s.mainColor),j=function(n){var t=n.dataOld,e=n.isLoadData;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v,{children:(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"\u2116"}),(0,r.jsx)("th",{children:"Full Name"}),(0,r.jsx)("th",{children:"Group"}),(0,r.jsx)("th",{children:"Subject"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Deadline"})]})}),(0,r.jsx)("tbody",{children:!e&&(null==t?void 0:t.length)>0&&(null==t?void 0:t.map(function(n,t){var e,i,d;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{textAlign:"center"},children:t+1}),(0,r.jsxs)("td",{className:"date_position",children:[null==n?void 0:null===(e=n.teacher)||void 0===e?void 0:e.fullName,(0,r.jsx)("span",{children:f()(null==n?void 0:n.createdAt).format("DD.MM.YYYY HH:mm")})]}),(0,r.jsx)("td",{style:{textAlign:"center"},children:null==n?void 0:null===(i=n.subject)||void 0===i?void 0:i.name}),(0,r.jsx)("td",{style:{textAlign:"center"},children:null==n?void 0:null===(d=n.group)||void 0===d?void 0:d.name}),(0,r.jsx)("td",{children:(0,r.jsx)(l.Stack,{direction:"row",justifyContent:"center",children:(0,r.jsx)(o.default,{color:"CONFIRM"===n.status?"success":"AT_PROCESS"===n.status?"primary":"error",variant:"contained",children:n.status})})}),(0,r.jsx)("td",{style:{textAlign:"center"},children:(null==n?void 0:n.deadline)&&f()(null==n?void 0:n.deadline).format("DD.MM.YYYY HH:mm")})]},t)}))})]})}),e&&(0,r.jsx)(c.default,{sx:{width:"100%"},children:(0,r.jsx)(u.default,{})}),!e&&(null==t?void 0:t.length)===0&&(0,r.jsx)(a.default,{w:200,h:180})]})}}}]);