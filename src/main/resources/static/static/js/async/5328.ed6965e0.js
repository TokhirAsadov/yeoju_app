/*! For license information please see 5328.ed6965e0.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["5328"],{517171:function(e,l,n){"use strict";n.r(l);var i=n("258865");n("333948"),n("857640"),n("409924"),n("888449"),n("959849"),n("2490"),n("25387"),n("772608"),n("931672"),n("359461"),n("868216"),n("779433");var o=n("785893"),t=n("667294"),d=n("671893"),a=n("727233"),r=n("316393"),u=n("572132"),s=n("553432"),c=n("816356"),v=n("686893"),p=n("463750"),h=n("797367"),f=n("455693"),m=n("379352"),g=n("752861"),x=n("844118"),b=n("15352"),j=n("190650"),y=n("857024"),w=n("339628"),C=n("17171"),k=n("889583"),S=n("194718"),O=n("807104");function R(){let e=(0,i._)(["\n    height: 250px;\n    padding-top: 10px;\n    display: grid;\n    overflow-y: scroll;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 30px;\n    ","\n    ","\n    ","\n"]);return R=function(){return e},e}function T(){let e=(0,i._)(["\n    width: 30px;\n    height: 30px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: ",";\n    border-radius: 50%;\n    color: white;\n    font-size: 26px;\n    border: none;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n"]);return T=function(){return e},e}function N(){let e=(0,i._)(["\n    ","\n    ","\n    ",""]);return N=function(){return e},e}function E(){let e=(0,i._)(["\n    width: 30px;\n    height: 30px;\n    background-color: #fff;\n    font-size: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid red;\n    border-radius: 0.5rem;\n    color: red;\n    padding: 5px !important;\n\n    &:hover {\n        transform: scale(1.1);\n    }\n\n"]);return E=function(){return e},e}function I(){let e=(0,i._)(["\n    width: 30px;\n    height: 30px;\n    background-color: #fff;\n    font-size: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid ",";\n    border-radius: 0.5rem;\n    color: ",";\n    padding: 5px !important;\n\n    &:hover {\n        transform: scale(1.1);\n    }\n\n"]);return I=function(){return e},e}function _(){let e=(0,i._)(["\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n    margin: 5px !important;\n"]);return _=function(){return e},e}function U(){let e=(0,i._)(["\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]);return U=function(){return e},e}let L=(0,o.jsx)(w.default,{fontSize:"small"}),B=(0,o.jsx)(C.default,{fontSize:"small"}),F=d.default.div(R(),(0,y.medium)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,y.small)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,y.extrasmall)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"})),A=(0,d.default)(j.motion.button)(T(),r.mainColor),D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",display:"flex",flexDirection:"column",gap:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},P=d.default.div(N(),(0,y.medium)({width:"97vw !important",height:"97vh !important"}),(0,y.small)({width:"97vw !important",height:"97vh !important"}),(0,y.extrasmall)({width:"97vw !important",height:"97vh !important"})),z=d.default.button(E()),H=d.default.button(I(),r.mainColor,r.mainColor),W=d.default.div(_()),G=d.default.div(U());l.default=()=>{let[e,l]=(0,t.useState)([]),[n,i]=(0,t.useState)(!1),[d,j]=(0,t.useState)([]),[y,w]=(0,t.useState)([]),[C,R]=(0,t.useState)(!1),[T,N]=(0,t.useState)([]),[E,I]=(0,t.useState)([]),[_,U]=(0,t.useState)([]),[K,V]=(0,t.useState)({id:null,name:null,owner:null,room:null,phone:null,eduTypes:[],facultiesName:[],roles:[],positions:[]}),[M,Q]=(0,t.useState)(null);(0,t.useEffect)(()=>{},[K]),(0,t.useEffect)(()=>{n&&$()},[n]);let Z=[{field:"count",headerName:"\u2116",width:40,align:"center",editable:!1},{field:"name",headerName:"Name",flex:1,minWidth:300,editable:!1},{field:"owner",headerName:"Dean",type:"string",flex:1,minWidth:350,editable:!1,renderCell:e=>{var l,n;return(0,o.jsx)("div",{children:null==e?void 0:null===(n=e.row)||void 0===n?void 0:null===(l=n.owner)||void 0===l?void 0:l.fullName})}},{field:"roles",headerName:"Roles",flex:.8,minWidth:300,editable:!1,renderCell:e=>{var l,n,i;return null==e?void 0:null===(i=e.row)||void 0===i?void 0:null===(n=i.owner)||void 0===n?void 0:null===(l=n.authorities)||void 0===l?void 0:l.map((e,l)=>(0,o.jsxs)("div",{children:[null==e?void 0:e.roleName,",\xa0"]},l))}},{field:"faculties",headerName:"Faculties",flex:.8,align:"left",minWidth:300,editable:!1,renderCell:e=>{var l,n;return null==e?void 0:null===(n=e.row)||void 0===n?void 0:null===(l=n.faculties)||void 0===l?void 0:l.map((e,l)=>(0,o.jsxs)("div",{children:[null==e?void 0:e.shortName,",\xa0"]},l))}},{field:"room",headerName:"Room",flex:.2,minWidth:110,align:"center",editable:!1},{field:"phone",headerName:"Phone",flex:.2,minWidth:200,align:"center",editable:!1},{field:"actions",headerName:"Actions",type:"string",flex:.3,minWidth:200,editable:!1,renderCell:e=>(0,o.jsxs)(W,{children:[(0,o.jsx)(H,{onClick:()=>{var l;return X(null==e?void 0:null===(l=e.row)||void 0===l?void 0:l.id)},children:(0,o.jsx)(v.FiEdit,{})}),(0,o.jsx)(z,{onClick:()=>{var l,n;return J(null==e?void 0:null===(l=e.row)||void 0===l?void 0:l.id,null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.name)},children:(0,o.jsx)(p.BsTrash,{})})]})}],{headers:q}=(0,r.getHeaders)(),J=(e,l)=>{V({id:null,nameEn:null,nameRu:null,nameUz:null,owner:null,eduTypes:[],room:null,phone:null,roles:[],positions:[]}),window.confirm("Do you want to delete ".concat(l,"?"))&&(a.default.delete("".concat(r.BASE_URL,"/dekanat/deleteById/").concat(e),{headers:q}).then(l=>{var n;j(null==d?void 0:d.filter(l=>(null==l?void 0:l.id)!==e)),u.toast.success(null==l?void 0:null===(n=l.data)||void 0===n?void 0:n.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}).catch(e=>{}),u.toast.success("Deleted successfully",{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}))},X=e=>{a.default.get(r.BASE_URL+"/dekanat/getDekanatById?id="+e,{headers:q}).then(e=>{var l,n;Q(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(l=n.obj)||void 0===l?void 0:l.owner),V(l=>{var n,i,o,t,d,a,r,u,s,c,v,p,h,f,m,g,x,b;return{...l,id:null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(n=i.obj)||void 0===n?void 0:n.id,name:null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(o=t.obj)||void 0===o?void 0:o.name,owner:null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(d=a.obj)||void 0===d?void 0:d.owner,phone:null==e?void 0:null===(u=e.data)||void 0===u?void 0:null===(r=u.obj)||void 0===r?void 0:r.phone,room:null==e?void 0:null===(c=e.data)||void 0===c?void 0:null===(s=c.obj)||void 0===s?void 0:s.room,eduTypes:(null==e?void 0:null===(p=e.data)||void 0===p?void 0:null===(v=p.obj)||void 0===v?void 0:v.eduType)||[],facultiesName:null==e?void 0:null===(f=e.data)||void 0===f?void 0:null===(h=f.obj)||void 0===h?void 0:h.facultiesName,roles:null==e?void 0:null===(g=e.data)||void 0===g?void 0:null===(m=g.obj)||void 0===m?void 0:m.roles,positions:null==e?void 0:null===(b=e.data)||void 0===b?void 0:null===(x=b.obj)||void 0===x?void 0:x.positions}})}),R(!0)},Y=e=>{e.length>4?a.default.get(r.BASE_URL+"/user/getUsersForUserRole?keyword="+e,{headers:q}).then(e=>{var l;w((null===(l=e.data)||void 0===l?void 0:l.obj).reduce((e,l)=>e.find(e=>e.label===l.label)?e:e.concat([l]),[]))}).catch(e=>{}):w([])};(0,t.useEffect)(()=>{a.default.get(r.BASE_URL+"/faculty/getFacultyForDekanatSaved").then(e=>{var n,i,o,t,d,a,r;l(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.obj),N(null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(i=o.obj)||void 0===i?void 0:i.map(e=>null==e?void 0:e.label)),I(null==e?void 0:null===(d=e.data)||void 0===d?void 0:null===(t=d.secondObj)||void 0===t?void 0:t.roles),U(null==e?void 0:null===(r=e.data)||void 0===r?void 0:null===(a=r.secondObj)||void 0===a?void 0:a.positions)}).catch(e=>{}),$()},[]);let $=()=>{a.default.get(r.BASE_URL+"/dekanat/all",{headers:q}).then(e=>{var l,n;j(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(l=n.obj)||void 0===l?void 0:l.map((e,l)=>({...e,count:l+1})))}).catch(e=>{})},ee=()=>{R(!1)},el=e=>{V(l=>({...l,[e.target.name]:e.target.value}))},en=e=>{delete e.id,Object.values(e).every(e=>null!==e&&e)?a.default.post(r.BASE_URL+"/dekanat/saveV2",{...e,id:null},{headers:q}).then(l=>{R(!1),$(),u.toast.success("".concat(null==e?void 0:e.name," dean's office has been saved successfully!."))}).catch(e=>{var l,n;u.toast.error(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(l=n.data)||void 0===l?void 0:l.message)}):u.toast.warning("Empty any field..")},ei=e=>{Object.values(e).every(e=>null!==e&&e)?a.default.post(r.BASE_URL+"/dekanat/saveV2",e,{headers:q}).then(e=>{R(!1),$(),u.toast.success("Updated dean successfully!.")}).catch(e=>{}):u.toast.warning("Empty any field..")},eo=(0,x.createFilterOptions)({stringify:e=>e.label+e.login});return(0,o.jsxs)(G,{children:[(0,o.jsx)(f.default,{display:"flex",justifyContent:"end",children:(0,o.jsx)(S.default,{sx:{width:"220px"},variant:"contained",onClick:()=>{Q(null),V({id:null,name:null,owner:null,room:null,phone:null,eduTypes:[],facultiesName:[],roles:[],positions:[]}),R(!0)},children:"Add new dean's office"})}),n&&(null==d?void 0:d.length)>0?(0,o.jsx)(s.default,{}):(0,o.jsx)(O.Card,{children:(0,o.jsx)(O.CardContent,{children:(0,o.jsx)(c.DataGrid,{columns:Z,rows:d,components:{Toolbar:c.GridToolbar},rowsPerPageOptions:[10,20,30,40,50,100],autoHeight:!0,initialState:{columns:{columnVisibilityModel:{name:!1,roles:!1,actions:!1}},pagination:{pageSize:10}}})})}),(0,o.jsx)(h.default,{open:C,onClose:ee,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,o.jsxs)(f.default,{sx:D,component:P,children:[(0,o.jsx)(A,{onClick:ee,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,o.jsx)(m.RiCloseLine,{})}),(0,o.jsx)("h3",{style:{color:"".concat(r.mainColor)},children:(null==K?void 0:K.id)!==null&&(null==K?void 0:K.id)?"Update dean's office":"Create new dean's office"}),(0,o.jsxs)(F,{children:[(0,o.jsx)(g.default,{id:"outlined-basic",label:"Name",variant:"outlined",value:null==K?void 0:K.name,name:"name",onChange:el}),(0,o.jsx)(x.default,{multiple:!0,id:"checkboxes-tags-demo456654",options:["KUNDUZGI","KECHKI","SIRTQI"],limitTags:1,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:null==K?void 0:K.eduTypes,onChange:(e,l)=>{V(e=>({...e,eduTypes:l}))},renderOption:(e,l,n)=>{let{selected:i}=n;return(0,o.jsxs)("li",{...e,children:[(0,o.jsx)(b.default,{icon:L,checkedIcon:B,style:{marginRight:8},checked:i}),l]})},renderInput:e=>(0,o.jsx)(g.default,{...e,label:"Education Type",placeholder:"Education Type"})}),(0,o.jsx)(x.default,{id:"checkboxes-tags-demo",options:y,disableCloseOnSelect:!0,onFocus:()=>w([]),getOptionLabel:e=>null==e?void 0:e.label,value:M,filterOptions:eo,onChange:(e,l)=>{Q(l),V(e=>({...e,owner:l}))},onInputChange:(e,l)=>{(null==e?void 0:e.type)==="change"&&Y(l)},renderOption:(e,l,n)=>{let{selected:i}=n;return(0,o.jsxs)("li",{...e,children:[(0,o.jsx)(b.default,{icon:L,checkedIcon:B,style:{marginRight:8},checked:i}),null==l?void 0:l.label]})},renderInput:e=>(0,o.jsx)(g.default,{...e,label:"Owner",placeholder:"Owner"})}),(0,o.jsx)(g.default,{id:"outlined-basic",label:"Room",variant:"outlined",value:null==K?void 0:K.room,name:"room",onChange:el}),(0,o.jsx)(g.default,{id:"outlined-basic",label:"Phone",variant:"outlined",value:null==K?void 0:K.phone,name:"phone",onChange:el}),(0,o.jsx)(x.default,{multiple:!0,limitTags:1,id:"checkboxes-tags-demo",options:E,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:null==K?void 0:K.roles,onChange:(e,l)=>{V(e=>({...e,roles:l}))},renderOption:(e,l,n)=>{let{selected:i}=n;return(0,o.jsxs)("li",{...e,children:[(0,o.jsx)(b.default,{icon:L,checkedIcon:B,style:{marginRight:8},checked:i}),l]})},renderInput:e=>(0,o.jsx)(g.default,{...e,label:"Roles",placeholder:"Roles"})}),(0,o.jsx)(x.default,{multiple:!0,limitTags:1,id:"checkboxes-tags-demo",options:_,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:null==K?void 0:K.positions,onChange:(e,l)=>{V(e=>({...e,positions:l}))},renderOption:(e,l,n)=>{let{selected:i}=n;return(0,o.jsxs)("li",{...e,children:[(0,o.jsx)(b.default,{icon:L,checkedIcon:B,style:{marginRight:8},checked:i}),l]})},renderInput:e=>(0,o.jsx)(g.default,{...e,label:"Positions",placeholder:"Positions"})}),(0,o.jsx)(x.default,{multiple:!0,limitTags:1,id:"checkboxes-tags-demo",options:T,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:null==K?void 0:K.facultiesName,onChange:(e,l)=>{V(e=>({...e,facultiesName:l}))},renderOption:(e,l,n)=>{let{selected:i}=n;return(0,o.jsxs)("li",{...e,children:[(0,o.jsx)(b.default,{icon:L,checkedIcon:B,style:{marginRight:8},checked:i}),l]})},renderInput:e=>(0,o.jsx)(g.default,{...e,label:"Faculties",placeholder:"Faculties"})})]}),(0,o.jsx)(f.default,{sx:{display:"flex",justifyContent:"end"},children:(0,o.jsx)(S.default,{variant:"contained",endIcon:(null==K?void 0:K.id)!==null&&(null==K?void 0:K.id)?(0,o.jsx)(v.FiEdit,{}):(0,o.jsx)(k.FaSave,{}),onClick:()=>(null==K?void 0:K.id)!==null&&(null==K?void 0:K.id)?ei(K):en(K),children:(null==K?void 0:K.id)!==null&&(null==K?void 0:K.id)?"Update":" Save"})})]})})]})}}}]);