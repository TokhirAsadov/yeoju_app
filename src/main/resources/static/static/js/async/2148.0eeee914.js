/*! For license information please see 2148.0eeee914.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["2148"],{17716:function(e,n,l){"use strict";l.r(n);var o=l("58865");l("33948"),l("57640"),l("9924"),l("88449"),l("19894"),l("2490"),l("25387"),l("72608"),l("31672"),l("59461"),l("68216"),l("79433");var i=l("85893"),t=l("67294"),a=l("71893"),d=l("16393"),r=l("27233"),u=l("72132"),s=l("53432"),c=l("16356"),v=l("89583"),h=l("86893"),f=l("63750"),m=l("79352"),p=l("57024"),x=l("90650"),g=l("55693"),b=l("52861"),j=l("44118"),w=l("97367"),k=l("15352"),C=l("39628"),y=l("17171"),R=l("94718"),S=l("7104");function E(){let e=(0,o._)(["\n    height: 250px;\n    padding-top: 10px;\n    display: grid;\n    overflow-y: scroll;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 30px;\n    ","\n    ","\n    ","\n"]);return E=function(){return e},e}function O(){let e=(0,o._)(["\n    width: 30px;\n    height: 30px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: ",";\n    border-radius: 50%;\n    color: white;\n    font-size: 26px;\n    border: none;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n"]);return O=function(){return e},e}function U(){let e=(0,o._)(["\n    ","\n    ","\n    ","\n"]);return U=function(){return e},e}function z(){let e=(0,o._)(["\n    width: 30px;\n    height: 30px;\n    background-color: #fff;\n    font-size: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid red;\n    border-radius: 0.5rem;\n    color: red;\n    padding: 5px !important;\n\n    &:hover {\n        transform: scale(1.1);\n    }\n\n"]);return z=function(){return e},e}function _(){let e=(0,o._)(["\n    width: 30px;\n    height: 30px;\n    background-color: #fff;\n    font-size: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid ",";\n    border-radius: 0.5rem;\n    color: ",";\n    padding: 5px !important;\n\n    &:hover {\n        transform: scale(1.1);\n    }\n\n"]);return _=function(){return e},e}function B(){let e=(0,o._)(["\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n    margin: 5px !important;\n"]);return B=function(){return e},e}function I(){let e=(0,o._)(["\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]);return I=function(){return e},e}let L=(0,i.jsx)(C.default,{fontSize:"small"}),N=(0,i.jsx)(y.default,{fontSize:"small"}),P=a.default.div(E(),(0,p.medium)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,p.small)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,p.extrasmall)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"})),T=(0,a.default)(x.motion.button)(O(),d.mainColor),W={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",display:"flex",flexDirection:"column",gap:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},A=a.default.div(U(),(0,p.medium)({width:"97vw !important",height:"97vh !important"}),(0,p.small)({width:"97vw !important",height:"97vh !important"}),(0,p.extrasmall)({width:"97vw !important",height:"97vh !important"})),F=a.default.button(z()),H=a.default.button(_(),d.mainColor,d.mainColor),D=a.default.div(B()),K=a.default.div(I());n.default=()=>{let[e,n]=(0,t.useState)(!1),[l,o]=(0,t.useState)([]),[a,p]=(0,t.useState)([]),[x,C]=(0,t.useState)(!1),[y,E]=(0,t.useState)([]),[O,U]=(0,t.useState)([]),[z,_]=(0,t.useState)({id:null,nameEn:null,nameRu:null,nameUz:null,owner:null,room:null,phone:null,roles:[],positions:[]}),[B,I]=(0,t.useState)(null),V=[{field:"count",headerName:"\u2116",width:40,align:"center",editable:!1},{field:"nameEn",headerName:"English name",flex:1,minWidth:300,editable:!1},{field:"nameUz",headerName:"O`zbekcha nomi",flex:1,minWidth:300,editable:!1},{field:"nameRu",headerName:"\u0420\u0443\u0441\u0441\u043A\u043E\u0435 \u0438\u043C\u044F",flex:1,minWidth:300,editable:!1},{field:"owner",headerName:"Head of the department",flex:1,minWidth:250,editable:!1,renderCell:e=>{var n,l;return(0,i.jsx)("div",{children:null==e?void 0:null===(l=e.row)||void 0===l?void 0:null===(n=l.owner)||void 0===n?void 0:n.label})}},{field:"positions",headerName:"Positions",flex:.5,minWidth:200,editable:!1},{field:"roles",headerName:"Roles",flex:.5,minWidth:200,editable:!1},{field:"room",headerName:"Room",flex:.5,minWidth:100,align:"center",editable:!1},{field:"phone",headerName:"Phone",flex:.5,minWidth:150,align:"center",editable:!1},{field:"service",headerName:"Service",flex:.3,minWidth:100,editable:!1,renderCell:e=>(0,i.jsxs)(D,{children:[(0,i.jsx)(H,{onClick:()=>{var n;return Y(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id)},children:(0,i.jsx)(h.FiEdit,{})}),(0,i.jsx)(F,{onClick:()=>{var n,l;return J(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id,null==e?void 0:null===(l=e.row)||void 0===l?void 0:l.nameEn)},children:(0,i.jsx)(f.BsTrash,{})})]})}],{headers:G}=(0,d.getHeaders)();(0,t.useEffect)(()=>{q(),M()},[]);let M=()=>{r.default.get(d.BASE_URL+"/kafedra/allKafedra",{headers:G}).then(e=>{var l,i;o(null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(l=i.obj)||void 0===l?void 0:l.map((e,n)=>({...e,count:n+1}))),n(!1)}).catch(e=>{})},q=()=>{r.default.get(d.BASE_URL+"/dekanat/getDatasForSavedKafedraMudiri").then(e=>{var n,l,o,i,t,a;p(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(n=l.obj)||void 0===n?void 0:n.users),E(null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(o=i.obj)||void 0===o?void 0:o.roles),U(null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(t=a.obj)||void 0===t?void 0:t.positions)}).catch(e=>{})},J=(e,n)=>{_({id:null,nameEn:null,nameRu:null,nameUz:null,owner:null,room:null,phone:null,roles:[],positions:[]}),window.confirm("Do you want to delete ".concat(n,"?"))&&(r.default.delete("".concat(d.BASE_URL,"/kafedra/deleteKafedra/").concat(e),{headers:G}).then(n=>{var i;o(null==l?void 0:l.filter(n=>(null==n?void 0:n.id)!==e)),u.toast.success(null==n?void 0:null===(i=n.data)||void 0===i?void 0:i.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}).catch(e=>{}),u.toast.success("Deleted successfully",{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}))},Q=e=>{e.length>4?r.default.get(d.BASE_URL+"/user/getUsersForUserRole?keyword="+e,{headers:G}).then(e=>{var n;p((null===(n=e.data)||void 0===n?void 0:n.obj).reduce((e,n)=>e.find(e=>e.label===n.label)?e:e.concat([n]),[]))}).catch(e=>{}):p([])},X=()=>{C(!1)},Y=e=>{C(!0),r.default.get("".concat(d.BASE_URL,"/kafedra/getKafedraV3ById?id=").concat(e),{headers:G}).then(e=>{var n,l;I(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(n=l.obj)||void 0===n?void 0:n.owner),_(n=>{var l,o,i,t,a,d,r,u,s,c,v,h,f,m,p,x,g,b,j,w,k;return{...n,id:null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(l=o.obj)||void 0===l?void 0:l.id,nameEn:null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(i=t.obj)||void 0===i?void 0:i.nameEn,nameRu:null==e?void 0:null===(d=e.data)||void 0===d?void 0:null===(a=d.obj)||void 0===a?void 0:a.nameRu,nameUz:null==e?void 0:null===(u=e.data)||void 0===u?void 0:null===(r=u.obj)||void 0===r?void 0:r.nameUz,owner:null==e?void 0:null===(c=e.data)||void 0===c?void 0:null===(s=c.obj)||void 0===s?void 0:s.owner,ownerId:null==e?void 0:null===(f=e.data)||void 0===f?void 0:null===(h=f.obj)||void 0===h?void 0:null===(v=h.owner)||void 0===v?void 0:v.value,room:null==e?void 0:null===(p=e.data)||void 0===p?void 0:null===(m=p.obj)||void 0===m?void 0:m.room,phone:null==e?void 0:null===(g=e.data)||void 0===g?void 0:null===(x=g.obj)||void 0===x?void 0:x.phone,roles:null==e?void 0:null===(j=e.data)||void 0===j?void 0:null===(b=j.obj)||void 0===b?void 0:b.roles,positions:null==e?void 0:null===(k=e.data)||void 0===k?void 0:null===(w=k.obj)||void 0===w?void 0:w.positions}})}).catch(e=>{})};(0,t.useEffect)(()=>{e&&M()},[e]);let Z=e=>{_(n=>({...n,[e.target.name]:e.target.value}))},$=e=>{delete e.owner,delete e.id,Object.values(e).every(e=>null!==e&&e)?r.default.post(d.BASE_URL+"/kafedra/createKafedraV2",{...e,id:null},{headers:G}).then(n=>{C(!1),M(),u.toast.success("".concat(null==e?void 0:e.name," kafedra has been saved successfully!."))}).catch(e=>{var n,l;u.toast.error(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)}):u.toast.warning("Empty any field..")},ee=e=>{delete e.owner,Object.values(e).every(e=>null!==e&&e)?r.default.post(d.BASE_URL+"/kafedra/createKafedraV2",e,{headers:G}).then(e=>{C(!1),M(),u.toast.success("Updated kafedra successfully!.")}).catch(e=>{}):u.toast.warning("Empty any field..")},en=(0,j.createFilterOptions)({stringify:e=>e.label+e.login});return(0,i.jsxs)(K,{children:[(0,i.jsx)(g.default,{display:"flex",justifyContent:"end",children:(0,i.jsx)(R.default,{sx:{width:"220px"},variant:"contained",onClick:()=>{I(null),_({id:null,nameEn:null,nameRu:null,nameUz:null,owner:null,room:null,phone:null,roles:[],positions:[]}),C(!0)},children:" Add new department"})}),e&&(null==l?void 0:l.length)>0?(0,i.jsx)(s.default,{}):(0,i.jsx)(S.Card,{children:(0,i.jsx)(S.CardContent,{children:(0,i.jsx)(c.DataGrid,{columns:V,rows:l,components:{Toolbar:c.GridToolbar},autoHeight:!0,rowsPerPageOptions:[10,20,30,40,50,100],initialState:{columns:{columnVisibilityModel:{nameRu:!1,nameUz:!1,positions:!1,roles:!1}},pagination:{pageSize:10}}})})}),(0,i.jsx)(w.default,{open:x,onClose:X,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,i.jsxs)(g.default,{sx:W,component:A,children:[(0,i.jsx)(T,{onClick:X,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,i.jsx)(m.RiCloseLine,{})}),(0,i.jsx)("h3",{style:{color:"".concat(d.mainColor)},children:(null==z?void 0:z.id)!==null&&(null==z?void 0:z.id)?"Update kafedra":"Create new kafedra"}),(0,i.jsxs)(P,{children:[(0,i.jsx)(b.default,{id:"outlined-basic",label:"English name",variant:"outlined",value:null==z?void 0:z.nameEn,name:"nameEn",onChange:Z}),(0,i.jsx)(b.default,{id:"outlined-basic",label:"\u0420\u0443\u0441\u0441\u043A\u043E\u0435 \u0438\u043C\u044F",variant:"outlined",value:null==z?void 0:z.nameRu,name:"nameRu",onChange:Z}),(0,i.jsx)(b.default,{id:"outlined-basic",label:"O`zbekcha nomi",variant:"outlined",value:null==z?void 0:z.nameUz,name:"nameUz",onChange:Z}),(0,i.jsx)(j.default,{id:"checkboxes-tags-demo",options:a,onFocus:()=>p([]),getOptionLabel:e=>null==e?void 0:e.label,value:B,filterOptions:en,onChange:(e,n)=>{I(n),_(e=>({...e,ownerId:null==n?void 0:n.value}))},onInputChange:(e,n)=>{Q(n)},isOptionEqualToValue:(e,n)=>e.value===n.value,renderOption:(e,n,l)=>{let{selected:o}=l;return(0,i.jsxs)("li",{...e,children:[(0,i.jsx)(k.default,{icon:L,checkedIcon:N,style:{marginRight:8},checked:o}),null==n?void 0:n.label]})},renderInput:e=>(0,i.jsx)(b.default,{...e,label:"Owner",placeholder:"Owner"})}),(0,i.jsx)(b.default,{id:"outlined-basic",label:"Room",variant:"outlined",value:null==z?void 0:z.room,name:"room",onChange:Z}),(0,i.jsx)(b.default,{id:"outlined-basic",label:"Phone",variant:"outlined",value:null==z?void 0:z.phone,name:"phone",onChange:Z}),(0,i.jsx)(j.default,{multiple:!0,id:"checkboxes-tags-demo",options:y,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:null==z?void 0:z.roles,onChange:(e,n)=>{_(e=>({...e,roles:n}))},renderOption:(e,n,l)=>{let{selected:o}=l;return(0,i.jsxs)("li",{...e,children:[(0,i.jsx)(k.default,{icon:L,checkedIcon:N,style:{marginRight:8},checked:o}),n]})},renderInput:e=>(0,i.jsx)(b.default,{...e,label:"Roles",placeholder:"Roles"})}),(0,i.jsx)(j.default,{multiple:!0,id:"checkboxes-tags-demo",options:O,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:null==z?void 0:z.positions,onChange:(e,n)=>{_(e=>({...e,positions:n}))},renderOption:(e,n,l)=>{let{selected:o}=l;return(0,i.jsxs)("li",{...e,children:[(0,i.jsx)(k.default,{icon:L,checkedIcon:N,style:{marginRight:8},checked:o}),n]})},renderInput:e=>(0,i.jsx)(b.default,{...e,label:"Positions",placeholder:"Positions"})})]}),(0,i.jsx)(g.default,{sx:{display:"flex",justifyContent:"end"},children:(0,i.jsx)(R.default,{variant:"contained",endIcon:(null==z?void 0:z.id)!==null&&(null==z?void 0:z.id)?(0,i.jsx)(h.FiEdit,{}):(0,i.jsx)(v.FaSave,{}),onClick:()=>(null==z?void 0:z.id)!==null&&(null==z?void 0:z.id)?ee(z):$(z),children:(null==z?void 0:z.id)!==null&&(null==z?void 0:z.id)?"Update":" Save"})})]})})]})}}}]);