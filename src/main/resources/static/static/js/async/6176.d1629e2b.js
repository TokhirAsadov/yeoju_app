/*! For license information please see 6176.d1629e2b.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["6176"],{42944:function(e,n,l){"use strict";l.r(n);var t=l("58865");l("33948"),l("57640"),l("9924"),l("57658"),l("33792"),l("31672"),l("59461"),l("2490"),l("25387"),l("72608");var i=l("85893"),o=l("67294"),a=l("71893"),d=l("27233"),u=l("16393"),r=l("55693"),s=l("32392"),c=l("61261"),v=l("42154"),f=l("44025"),m=l("33217"),p=l("22092"),h=l("57024"),x=l("45697"),g=l.n(x),b=l("71982"),j=l("72625"),w=l("30381"),k=l.n(w),S=l("92120"),y=l("50533"),D=l("78951");function N(){let e=(0,t._)(["\n    margin: 0 auto;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 30px;\n    height: 30px;\n    background-color: red;\n    color: white;\n    border-radius: 50%;\n"]);return N=function(){return e},e}function E(){let e=(0,t._)(["\n    h6 {\n        font-size: 11px;\n        font-weight: bold;\n        color: #000000;\n    }\n\n    p {\n        font-size: 10px;\n        font-weight: normal;\n        color: silver;\n    }\n\n"]);return E=function(){return e},e}function C(){let e=(0,t._)(["\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    margin: 0 auto;\n\n"]);return C=function(){return e},e}function T(){let e=(0,t._)(["\n    margin-top: 15px;\n    display: grid;\n    grid-template-columns: 0.2fr 1fr 0.2fr;\n    align-items: center;\n    gap: 5px;\n\n"]);return T=function(){return e},e}function _(){let e=(0,t._)(["\n    margin-top: 20px;\n\n    h5 {\n        text-align: center;\n        margin: 30px 0;\n        color: ",";\n    }\n"]);return _=function(){return e},e}function z(){let e=(0,t._)(["\n    font-size: 15px;\n    font-weight: bold;\n    color: ",";\n"]);return z=function(){return e},e}function F(){let e=(0,t._)(["\n    border-radius: 8px;\n    background-color: #fff;\n    padding: 10px;\n    box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n"]);return F=function(){return e},e}function W(){let e=(0,t._)(["\n    display: flex;\n    justify-content: end;\n    margin: 20px 0;\n"]);return W=function(){return e},e}function O(){let e=(0,t._)(["\n    width: 100%;\n    min-width: 300px;\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr 1fr;\n    gap: 40px;\n    margin-bottom: 40px;\n    ","\n    ","\n"]);return O=function(){return e},e}function B(){let e=(0,t._)(["\n    font-size: 13px;\n    width: 200px !important;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    border-radius: 8px !important;;\n    color: ",";\n    padding: 5px 20px !important;\n    height: 42px !important;\n    margin: 5px !important;\n    box-shadow: rgba(0, 0, 0, 0.1) 0 4px 12px;\n\n    &:hover {\n        color: #ffffff !important;\n        background-color: #5093f1 !important;\n    }\n\n    &.Mui-selected {\n        color: #ffffff !important;\n        background-color: #5093f1 !important;\n    }\n"]);return B=function(){return e},e}function Y(){let e=(0,t._)(["\n    width: 100%;\n    padding: 10px;\n\n"]);return Y=function(){return e},e}let R=a.default.div(N()),A=a.default.div(E()),I=a.default.div(C()),L=a.default.div(T()),U=a.default.div(_(),u.mainColor),q=a.default.p(z(),e=>e.cl),M=a.default.div(F()),H=a.default.div(W()),G=a.default.div(O(),(0,h.small)({gridTemplateColumns:"auto auto"}),(0,h.extrasmall)({gridTemplateColumns:"auto"})),J=a.default.div(B(),u.mainColor),K=a.default.div(Y());n.default=()=>{let[e,n]=(0,o.useState)([]),[l,t]=(0,o.useState)(""),[a,h]=(0,o.useState)({}),[x,w]=(0,o.useState)([]),[N,E]=(0,o.useState)([]),[C,T]=(0,o.useState)(0),[_,z]=(0,o.useState)([]),[F,W]=(0,o.useState)([]),[O,B]=(0,o.useState)([]),Y=(0,y.useSelector)(e=>{var n;return null==e?void 0:null===(n=e.educationYear)||void 0===n?void 0:n.educationYear}),[P,Q]=(0,o.useState)(!0),[V,X]=(0,o.useState)(!1),{headers:Z}=(0,u.getHeaders)(),$=(0,y.useDispatch)(),ee=[1,2,3,4],en=[1,2,3,4,5],[el,et]=(0,o.useState)({date:new Date(u.serverTimeStorage),dateFrom:k()(u.serverTimeStorage).startOf("isoWeek").toDate(),dateTo:k()(u.serverTimeStorage).endOf("isoWeek").toDate(),weekNumber:k()(u.serverTimeStorage).isoWeek(),weekDay:k()(u.serverTimeStorage).day()}),ei=async()=>{await d.default.get(u.BASE_URL+"/education/educationYearsForSelected",{headers:Z}).then(e=>{var n,l;$((0,S.fetchEducationYear)(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(n=l.obj)||void 0===n?void 0:n[0]))}).catch(e=>{})};(0,o.useEffect)(()=>{d.default.get(u.BASE_URL+"/dekanat/all",Z).then(e=>{var l;n(e.data.obj),w(null===(l=e.data.obj)||void 0===l?void 0:l.map(e=>e.name)),t(e.data.obj[0].name)}).catch(e=>void 0)},[]),(0,o.useEffect)(()=>{ei()},[]),(0,o.useEffect)(()=>{var e,n;B([]),Q(!0),(null==N?void 0:N.length)>0&&Y&&d.default.get("".concat(u.BASE_URL,"/timeTableByWeekOfYear/studentStatisticsWithWeekOfEduYear/").concat(null==Y?void 0:Y.id,"?facultyId=").concat(N[C].id,"&facultyShortName=").concat(N[C].shortName,"&eduType=").concat(null==a?void 0:null===(e=a.eduType)||void 0===e?void 0:e.name,"&eduTypeId=").concat(null==a?void 0:null===(n=a.eduType)||void 0===n?void 0:n.id)).then(e=>{var n,l,t,i,o,a;z(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(n=l.obj)||void 0===n?void 0:n.map(e=>{let n=[];return null==e||e.map(e=>{en.map(l=>{var t,i,o,a;(null==e?void 0:e.sortNumber)===(null==el?void 0:el.weekNumber)?l<=(null==el?void 0:el.weekDay)&&n.push(null==e?void 0:null===(i=e[l])||void 0===i?void 0:null===(t=i.statistics)||void 0===t?void 0:t.map(n=>({...n,day:l,week:null==e?void 0:e.sortNumber}))):n.push(null==e?void 0:null===(a=e[l])||void 0===a?void 0:null===(o=a.statistics)||void 0===o?void 0:o.map(n=>({...n,day:l,week:null==e?void 0:e.sortNumber})))})}),Object.values(function(e){return e.reduce((e,n)=>{let l=null==n?void 0:n.fullName;return e[l]?e[l].push(n):e[l]=[n],e},{})}(null==n?void 0:n.flat()))})),W(null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(t=i.secondObj)||void 0===t?void 0:t.map(e=>null==e?void 0:e.map(e=>({...e,count:Object.values(function(e){return e.reduce((e,n)=>(e[n]?e[n].push(n):e[n]=[n],e),{})}(null==e?void 0:e.count))})))),null==e||null===(a=e.data)||void 0===a||null===(o=a.obj)||void 0===o||o.map(e=>{e.map(e=>{(null==e?void 0:e.sortNumber)===(null==el?void 0:el.weekNumber)?en.map(n=>{n<=(null==el?void 0:el.weekDay)&&B(l=>{var t;return[...l,...null==e?void 0:null===(t=e[n])||void 0===t?void 0:t.statistics]})}):en.map(n=>{B(l=>{var t;return[...l,...null==e?void 0:null===(t=e[n])||void 0===t?void 0:t.statistics]})})})}),Q(!1)}).catch(e=>{Q(!1),X(!0)})},[Y,C,N]),(0,o.useEffect)(()=>{var n;E((null===(n=e.find(e=>e.name===l))||void 0===n?void 0:n.faculties)||[]),h(e.find(e=>e.name===l))},[l]),(0,o.useEffect)(()=>{},[N]);let eo=[5,10,20,30,40,50],[ea,ed]=(0,o.useState)(eo[0]),eu=e=>{ed(e.target.value)};function er(e){let{children:n,value:l,index:t,...o}=e;return(0,i.jsx)("div",{role:"tabpanel",hidden:l!==t,id:"simple-tabpanel-".concat(t),"aria-labelledby":"simple-tab-".concat(t),...o,children:l===t&&(0,i.jsx)(r.default,{sx:{p:0},children:(0,i.jsx)("div",{children:n})})})}return er.propTypes={children:g().node,index:g().number.isRequired,value:g().number.isRequired},(0,i.jsxs)(K,{children:[(0,i.jsxs)(v.default,{sx:{width:"200px",m:2},children:[(0,i.jsx)(s.default,{id:"demo-simple-select-label",children:"Dean"}),(0,i.jsx)(f.default,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l,label:"Dean",onChange:e=>{t(e.target.value)},children:x.map((e,n)=>(0,i.jsx)(c.default,{value:e,children:e},n))})]}),(0,i.jsx)("div",{className:"dekantabs",children:(0,i.jsx)(m.default,{variant:"scrollable",scrollButtons:!0,allowScrollButtonsMobile:!0,value:C,onChange:(e,n)=>{T(n)},indicatorColor:"","aria-label":"basic tabs example",children:null==N?void 0:N.map((e,n)=>{var l;return(0,i.jsx)(p.default,{component:J,label:null==e?void 0:e.shortName,...(l=n,{id:"simple-tab-".concat(l),"aria-controls":"simple-tabpanel-".concat(l)})},n)})})}),null==N?void 0:N.map((e,n)=>(0,i.jsxs)(er,{value:C,index:n,children:[(0,i.jsx)(H,{children:(0,i.jsxs)(v.default,{sx:{minWidth:100},size:"small",children:[(0,i.jsx)(s.default,{id:"select-label",children:"Size"}),(0,i.jsx)(f.default,{labelId:"select-label",id:"select-small-size",value:ea,label:"Size",onChange:eu,children:eo.map((e,n)=>(0,i.jsx)(c.default,{value:e,children:e},n))})]})}),(0,i.jsxs)(G,{children:[P&&Array.from({length:4}).map((e,n)=>(0,i.jsxs)(M,{children:[(0,i.jsxs)(q,{cl:0===n&&"".concat(u.mainColor)||1===n&&"#FD8539"||2===n&&"#2ED480"||3===n&&"#FE6D8E",children:[n+1,"-Course"]}),(0,i.jsx)(U,{children:(0,i.jsxs)(r.default,{sx:{width:"100%"},children:[(0,i.jsx)(b.default,{}),(0,i.jsx)(b.default,{animation:"wave"}),(0,i.jsx)(b.default,{animation:!1})]})})]},n)),!P&&_?null==_?void 0:_.map((e,n)=>{var l,t,o;return(0,i.jsxs)(M,{children:[(0,i.jsxs)(q,{cl:0===n&&"".concat(u.mainColor)||1===n&&"#FD8539"||2===n&&"#2ED480"||3===n&&"#FE6D8E",children:[n+1,"-Course"]}),(0,i.jsx)(U,{children:e.length>0?null==e?void 0:null===(o=e.sort(function(e,n){return(null==e?void 0:e.length)<(null==n?void 0:n.length)?1:(null==e?void 0:e.length)>(null==n?void 0:n.length)?-1:0}))||void 0===o?void 0:null===(t=o.map((e,l)=>{let t=0;return null==e||e.map(e=>{let l=k()(u.serverTimeStorage).isoWeek(),i=k()(u.serverTimeStorage).format("DD");if(l>e.week&&Number(i)>e.day){var o,a,d,r,s,c,v,f;(null==F?void 0:null===(r=F[n])||void 0===r?void 0:null===(d=r.find(n=>(null==n?void 0:n.week)===(null==e?void 0:e.week)&&n.groupName===(null==e?void 0:e.groupName)))||void 0===d?void 0:null===(a=d.count)||void 0===a?void 0:null===(o=a[(null==e?void 0:e.day)-1])||void 0===o?void 0:o.length)&&(t+=null==F?void 0:null===(f=F[n])||void 0===f?void 0:null===(v=f.find(n=>(null==n?void 0:n.week)===(null==e?void 0:e.week)&&(null==n?void 0:n.groupName)===(null==e?void 0:e.groupName)))||void 0===v?void 0:null===(c=v.count)||void 0===c?void 0:null===(s=c[(null==e?void 0:e.day)-1])||void 0===s?void 0:s.length)}}),{...e,counter:t}}))||void 0===t?void 0:null===(l=t.sort(function(e,n){return(null==e?void 0:e.counter)<(null==n?void 0:n.counter)?1:(null==e?void 0:e.counter)>(null==n?void 0:n.counter)?-1:0}))||void 0===l?void 0:l.map((e,n)=>{var l,t;return n<ea&&(0,i.jsxs)(L,{children:[(0,i.jsx)(I,{children:(0,i.jsx)("img",{style:{width:"100%"},src:(null==e?void 0:e.avatarimg)?null==e?void 0:e.avatarimg:j,alt:"avatar"})}),(0,i.jsxs)(A,{children:[(0,i.jsx)("h6",{children:null==e?void 0:null===(l=e[0])||void 0===l?void 0:l.fullName}),(0,i.jsx)("p",{children:null==e?void 0:null===(t=e[0])||void 0===t?void 0:t.groupName})]}),(0,i.jsx)(R,{children:null==e?void 0:e.counter})]},n)}):(0,i.jsx)(r.default,{children:(0,i.jsx)(D.default,{w:150,h:130})})})]},n)}):!P&&ee.map((e,n)=>(0,i.jsxs)(M,{children:[(0,i.jsxs)(q,{cl:0===n&&"".concat(u.mainColor)||1===n&&"#FD8539"||2===n&&"#2ED480"||3===n&&"#FE6D8E",children:[n+1,"-Course"]}),(0,i.jsx)(U,{children:(0,i.jsx)("h5",{children:"No data Students"})})]}))]})]},n))]})}}}]);