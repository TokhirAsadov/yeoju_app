/*! For license information please see 9581.c0a49fbb.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["9581"],{4585:function(l,e,d){"use strict";d.r(e);var n=d("58865");d("33948"),d("57640"),d("9924"),d("25387"),d("72608"),d("2490"),d("31672"),d("59461"),d("57658"),d("15581"),d("34514");var a=d("85893"),i=d("67294"),o=d.n(i),u=d("71893"),t=d("55693"),r=d("94718"),s=d("89589"),c=d("97367"),p=d("5434"),v=d("80471"),f=d("74113"),g=d("39628"),x=d("17171"),m=d("7104"),h=d("15352"),j=d("52861"),b=d("50533"),y=d("60155"),I=d("57024"),C=d("39711"),k=d("42154"),w=d("32392"),T=d("61261"),S=d("44025"),D=d("23219"),L=d("47516"),_=d("16393"),P=d("89583"),A=d("27233"),R=d("72132"),Y=d("63750");function E(){let l=(0,n._)(["\n    padding: 0 10px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    p {\n        color: ",";\n        font-size: 30px;\n        font-weight: bold;\n        ","\n    }\n"]);return E=function(){return l},l}function U(){let l=(0,n._)(["\n    ","\n"]);return U=function(){return l},l}function z(){let l=(0,n._)(["\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    gap: 20px;\n    padding: 10px;\n    ","\n    ","\n    ","\n    ","\n    ","\n"]);return z=function(){return l},l}function B(){let l=(0,n._)(["\n    border: 1px solid #f1eded;\n    padding: 10px;\n    border-radius: 5px;\n    background-color: #FFFF;\n    box-shadow: rgba(99, 99, 99, 0.2) 0 2px 8px 0;\n\n"]);return B=function(){return l},l}function G(){let l=(0,n._)(["\n    color: ",";\n    font-size: ",";\n    font-weight: ",";\n    cursor: pointer;\n"]);return G=function(){return l},l}function O(){let l=(0,n._)(["\n    display: flex;\n    justify-content: end;\n"]);return O=function(){return l},l}function F(){let l=(0,n._)(["\n    width: 100%;\n    padding: 1rem;\n"]);return F=function(){return l},l}let M=u.default.h1(E(),_.mainColor,(0,I.extrasmall)({textAlign:"center",fontSize:"20px"})),N={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,borderRadius:2,p:3},q=u.default.div(U(),(0,I.extrasmall)({width:"95% !important"})),H=u.default.div(z(),(0,I.xlarge)({gridTemplateColumns:"1fr 1fr 1fr  "}),(0,I.large)({gridTemplateColumns:"1fr 1fr 1fr  "}),(0,I.medium)({gridTemplateColumns:"1fr 1fr "}),(0,I.small)({gridTemplateColumns:"1fr 1fr "}),(0,I.extrasmall)({gridTemplateColumns:"1fr "})),V=u.default.div(B()),J=u.default.p(G(),l=>l.cl||"black",l=>l.fs,l=>l.fw||"normal"),K=u.default.div(O()),Q=u.default.div(F());e.default=()=>{var l,e,d,n,u,I,E,U,z,B,G,O,F,W,X,Z,$,ll,le,ld,ln;let la;let{fan:li}=(0,C.useParams)(),lo=(0,a.jsx)(g.default,{fontSize:"small"}),lu=(0,a.jsx)(x.default,{fontSize:"small"}),{forLessonsData:lt}=(0,b.useSelector)(l=>l.lessonsTeacherSlice),[lr,ls]=(0,i.useState)(!1),[lc,lp]=(0,i.useState)([]),[lv,lf]=(0,i.useState)(!0),[lg,lx]=(0,i.useState)([]),[lm,lh]=(0,i.useState)({educationYearId:null==lt?void 0:null===(l=lt.educationYear)||void 0===l?void 0:l.id,eduType:null==lt?void 0:null===(e=lt.groupData)||void 0===e?void 0:e.eduType,eduLang:null==lt?void 0:null===(d=lt.groupData)||void 0===d?void 0:d.eduLang,subjectId:null==lt?void 0:null===(n=lt.groupData)||void 0===n?void 0:n.lessonId,level:null==lt?void 0:null===(u=lt.groupData)||void 0===u?void 0:u.level,groupsIds:(null==lc?void 0:lc.map(l=>null==l?void 0:l.groupId))||[]}),[lj,lb]=(0,i.useState)({id:null,educationYearId:null==lt?void 0:null===(I=lt.educationYear)||void 0===I?void 0:I.id,eduType:null==lt?void 0:null===(E=lt.groupData)||void 0===E?void 0:E.eduType,eduLang:null==lt?void 0:null===(U=lt.groupData)||void 0===U?void 0:U.eduLang,subjectId:null==lt?void 0:null===(z=lt.groupData)||void 0===z?void 0:z.lessonId,level:null==lt?void 0:null===(B=lt.groupData)||void 0===B?void 0:B.level,groupsIds:(null==lc?void 0:lc.map(l=>null==l?void 0:l.groupId))||[]}),[ly,lI]=(0,i.useState)(!0),lC=(0,C.useNavigate)(),{headers:lk}=(0,_.getHeaders)(),lw=[{title:"Update",icon:(0,a.jsx)(p.MdUpdate,{color:"#0087be"})},{title:"Delete",icon:(0,a.jsx)(p.MdDelete,{color:"red"})}],lT=null==lt?void 0:null===(G=lt.allGroup)||void 0===G?void 0:G.reduce((l,e)=>(!l.find(l=>l.groupId===e.groupId)&&l.push(e),l),[]),[lS,lD]=o().useState(null),lL=!!lS,l_=(l,e)=>{lD(l.currentTarget);let d=null==lg?void 0:lg.find(l=>l.id===e);lb(l=>{var n;return{...l,id:e,eduLang:null==d?void 0:d.eduLang,eduType:null==d?void 0:d.eduType,groupsIds:null==d?void 0:null===(n=d.groups)||void 0===n?void 0:n.map(l=>l.groupId)}})},lP=l=>{lD(null),"Update"===l&&ls(!0)},lA=()=>{ls(!1),lb(l=>({...l,id:null}))};(0,i.useEffect)(()=>{(null==lc?void 0:lc.length)>0&&lf(!1)},[lc]);let lR=async()=>{A.default.post("".concat(_.BASE_URL,"/plan/createdPlan"),lm,{headers:lk}).then(l=>{R.toast.success("created plan of subject successfully"),ls(!1),lp([]),lE()}).catch(l=>{})},lY=async()=>{A.default.put("".concat(_.BASE_URL,"/plan/updatedPlan"),lj,{headers:lk}).then(l=>{R.toast.success("created plan of subject successfully"),ls(!1),lb(l=>({...l,id:null})),lp([]),lE()}).catch(l=>{})},lE=async()=>{var l,e,d;await A.default.get("".concat(_.BASE_URL,"/plan/getExistPlans?educationYearId=").concat(null==lt?void 0:null===(l=lt.educationYear)||void 0===l?void 0:l.id,"&level=").concat(null==lt?void 0:null===(e=lt.groupData)||void 0===e?void 0:e.level,"&subjectId=").concat(null==lt?void 0:null===(d=lt.groupData)||void 0===d?void 0:d.lessonId),{headers:lk}).then(l=>{lx(l.data.obj)}).catch(l=>{})};(0,i.useEffect)(()=>{lE()},[]);return(0,a.jsxs)(Q,{children:[(0,a.jsxs)(M,{children:[(0,a.jsx)("p",{children:li}),(0,a.jsx)(r.default,{onClick:()=>lC(-1),variant:"outlined",startIcon:(0,a.jsx)(L.BiArrowBack,{}),children:"Back"})]}),(0,a.jsx)(t.default,{sx:{padding:"10px"},children:(0,a.jsx)(r.default,{variant:"contained",endIcon:(0,a.jsx)(p.MdOutlineCreateNewFolder,{}),onClick:()=>ls(!0),children:"create group plan"})}),(0,a.jsx)(H,{children:null==lg?void 0:lg.map((l,e)=>(0,a.jsx)(V,{children:(0,a.jsxs)(t.default,{display:"flex",alignItems:"flex-start",children:[(0,a.jsxs)(t.default,{width:"100%",children:[(0,a.jsxs)(J,{onClick:()=>lC("".concat(l.id)),fs:"25px",fw:"bold",cl:_.mainColor,children:[(0,a.jsx)(P.FaLayerGroup,{})," Groups "]}),(0,a.jsx)(t.default,{onClick:()=>lC("".concat(l.id)),sx:{cursor:"pointer",marginTop:1,display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"5px"},children:null==l?void 0:l.groups.slice(0,ly?5:void 0).map((l,e)=>(0,a.jsxs)("p",{style:{color:"black",margin:0,textAlign:"center"},children:[(0,a.jsx)("b",{children:e+1+"."})," ",l.groupName]},l.groupId))}),(0,a.jsx)(t.default,{sx:{mt:2,display:"flex",justifyContent:"center"},children:(0,a.jsx)(r.default,{onClick:()=>lI(!ly),children:ly?"show more":"hidden"})})]}),(0,a.jsx)(f.default,{"aria-label":"actions",id:"long-button","aria-controls":lL?"long-menu":void 0,"aria-expanded":lL?"true":void 0,"aria-haspopup":"true",onClick:e=>l_(e,null==l?void 0:l.id),size:"small",children:(0,a.jsx)(Y.BsThreeDotsVertical,{})})]})},e))}),(0,a.jsx)(c.default,{open:lr,onClose:()=>lA(),"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsxs)(t.default,{sx:N,component:q,children:[(0,a.jsx)(K,{children:(0,a.jsx)(f.default,{onClick:()=>lA(),"aria-label":"close",size:"medium",children:(0,a.jsx)(v.CgClose,{})})}),(0,a.jsxs)(s.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:[(null==lj?void 0:lj.id)===null?"Create ":"Update "," group plan"]}),(0,a.jsxs)(k.default,{sx:{width:"100%",margin:"25px 0"},children:[(0,a.jsx)(w.default,{id:"demo-simple-select-readonly-label",children:"Academic year"}),(0,a.jsx)(S.default,{labelId:"demo-simple-select-readonly-label",id:"demo-simple-select-readonly",value:null==lt?void 0:null===(O=lt.educationYear)||void 0===O?void 0:O.name,label:"Academic year",inputProps:{readOnly:!0},children:(0,a.jsx)(T.default,{value:null==lt?void 0:null===(F=lt.educationYear)||void 0===F?void 0:F.name,children:null==lt?void 0:null===(W=lt.educationYear)||void 0===W?void 0:W.name})}),(0,a.jsx)(D.default,{children:"Read only"})]}),(0,a.jsxs)(t.default,{sx:{display:"flex",gap:"20px"},children:[(0,a.jsxs)(k.default,{sx:{width:"100%"},children:[(0,a.jsx)(w.default,{id:"demo-simple-select-readonly-label1",children:"Language"}),(0,a.jsx)(S.default,{labelId:"demo-simple-select-readonly-label1",id:"demo-simple-select-readonly",value:null==lt?void 0:null===(X=lt.groupData)||void 0===X?void 0:X.eduLang,label:"Language",inputProps:{readOnly:!0},children:(0,a.jsx)(T.default,{value:null==lt?void 0:null===(Z=lt.groupData)||void 0===Z?void 0:Z.eduLang,children:null==lt?void 0:null===($=lt.groupData)||void 0===$?void 0:$.eduLang})}),(0,a.jsx)(D.default,{children:"Read only"})]}),(0,a.jsxs)(k.default,{sx:{width:"100%"},children:[(0,a.jsx)(w.default,{id:"demo-simple-select-readonly-label1",children:"Type of education"}),(0,a.jsx)(S.default,{labelId:"demo-simple-select-readonly-label1",id:"demo-simple-select-readonly",value:null==lt?void 0:null===(ll=lt.groupData)||void 0===ll?void 0:ll.eduType,label:"Type of education",inputProps:{readOnly:!0},children:(0,a.jsx)(T.default,{value:null==lt?void 0:null===(le=lt.groupData)||void 0===le?void 0:le.eduType,children:null==lt?void 0:null===(ld=lt.groupData)||void 0===ld?void 0:ld.eduType})}),(0,a.jsx)(D.default,{children:"Read only"})]})]}),(0,a.jsx)(m.Autocomplete,{multiple:!0,id:"checkboxes-tags-demo",options:lT,disableCloseOnSelect:!0,getOptionLabel:l=>null==l?void 0:l.groupName,value:(null==lj?void 0:lj.id)===null?lc:(la=[],null==lj||null===(ln=lj.groupsIds)||void 0===ln||ln.forEach(l=>{var e,d;(null==lt?void 0:null===(e=lt.allGroup)||void 0===e?void 0:e.find(e=>e.groupId===l))&&la.push(null==lt?void 0:null===(d=lt.allGroup)||void 0===d?void 0:d.find(e=>e.groupId===l))}),la.reduce((l,e)=>(!l.find(l=>l.groupId===e.groupId)&&l.push(e),l),[])),onChange:(l,e)=>{(null==lj?void 0:lj.id)===null?lh(l=>({...l,groupsIds:null==e?void 0:e.map(l=>null==l?void 0:l.groupId)})):lb(l=>({...l,groupsIds:null==e?void 0:e.map(l=>null==l?void 0:l.groupId)})),lp(e)},renderOption:(l,e,d)=>{let{selected:n}=d;return(0,a.jsxs)("li",{...l,children:[(0,a.jsx)(h.default,{icon:lo,checkedIcon:lu,style:{marginRight:8},checked:n}),null==e?void 0:e.groupName]})},style:{width:"100%",margin:"25px 0"},renderInput:l=>(0,a.jsx)(j.default,{required:!0,...l,label:"Groups",placeholder:"Group",helperText:"Required"})}),(0,a.jsx)(K,{children:(0,a.jsxs)(r.default,{onClick:(null==lj?void 0:lj.id)===null?lR:lY,variant:"contained",endIcon:(0,a.jsx)(y.IoSend,{}),disabled:lv,children:[" ",(null==lj?void 0:lj.id)===null?"Save":"Update"]})})]})}),(0,a.jsx)(m.Menu,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:lS,open:lL,onClose:lP,PaperProps:{style:{maxHeight:180,width:"20ch"}},children:lw.map((l,e)=>(0,a.jsx)(T.default,{onClick:()=>lP(l.title),children:(0,a.jsxs)(t.default,{display:"flex",gap:"5px",alignItems:"center",children:[l.icon," ",l.title]})},e))})]})}}}]);