/*! For license information please see 6895.dd2dcbe8.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["6895"],{59254:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Y}});var n=a("7409"),o=a("99282"),r=a("38956"),u=a("58865");a("57658"),a("15581"),a("34514"),a("2490"),a("41539"),a("17727"),a("88674");var i=a("85893"),d=a("67294"),l=a("28685"),s=a("30381"),f=a.n(s),c=a("27233"),v=a("44118"),h=a("52861"),k=a("87346"),m=a("71893"),w=a("71632"),b=a("50533");function p(){var e=(0,u._)(["\n  width: 300px;\n  ","\n"]);return p=function(){return e},e}function x(){var e=(0,u._)(["\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 25px;\n  margin-bottom: 1rem;\n  ","\n"]);return x=function(){return e},e}function y(){var e=(0,u._)(["\n  width: 100%;\n  padding: 1rem;\n"]);return y=function(){return e},e}a("21793");var W=m.default.div(p(),(0,w.extrasmall)({width:"80%"})),_=m.default.div(x(),(0,w.extrasmall)({justifyContent:"center"})),g=m.default.div(y()),Y=function(){var e=(0,b.useSelector)(function(e){var t;return null==e?void 0:null===(t=e.section)||void 0===t?void 0:t.section}),t=(0,r._)((0,d.useState)([]),2),a=t[0],u=t[1],s=(0,r._)((0,d.useState)(null),2),m=s[0],w=s[1],p=(0,l.getHeaders)().headers,x=(0,r._)((0,d.useState)([]),2),y=x[0],Y=x[1],j=(0,r._)((0,d.useState)(!1),2),S=j[0],T=j[1],D=(0,r._)((0,d.useState)(null),2),O=D[0],E=D[1],B=function(e,t){f().locale("ru");for(var a=f()().year(t).isoWeek(e).startOf("isoWeek"),n=[],o=0;o<6;o++)n.push(a.clone().add(o,"days").toDate());return n},C=(0,r._)((0,d.useState)({date:f()().format("YYYY-[W]WW"),dateFrom:f()().startOf("isoWeek").toDate(),dateTo:f()().endOf("isoWeek").toDate(),weekNumber:f()().isoWeek(),daysOfWeek:B(f()().isoWeek(),f()().year())}),2),N=C[0],F=C[1];(0,d.useEffect)(function(){(null==e?void 0:e.id)&&c.default.get(l.BASE_URL+"/kafedra/getTeachersForSelectByKafedraId?kafedraId="+(null==e?void 0:e.id),{headers:p}).then(function(e){var t;u(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(function(e){})},[]),(0,d.useEffect)(function(){T(!0),m&&c.default.get(l.BASE_URL+"/timeTableByWeekOfYear/getTeacherTimeTable?t="+m+"&week="+(null==N?void 0:N.weekNumber)+"&year="+f()(null==N?void 0:N.date).format("YYYY"),{headers:p}).then(function(e){var t,a=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj,n=[],o={};for(var r in null==a||a.forEach(function(e){e.shows.forEach(function(t){var a=t.daysName;!o[a]&&(o[a]={teacherData:e.teacherData,shows:[]}),o[a].shows.push(t)})}),o)n.push(o[r]);Y(n)}).catch(function(e){Y([])}).finally(function(){T(!1)}),m&&I(m)},[m,N]);var I=function(e){c.default.get(l.BASE_URL+"/user/getTeacherStatisticsForTimeTableByWeek?teacherId="+e+"&week="+(null==N?void 0:N.weekNumber)+"&year="+f()(null==N?void 0:N.date).format("YYYY"),{headers:p}).then(function(e){var t;E(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.obj)}).catch(function(e){E(null)})};return(0,i.jsxs)(g,{children:[(0,i.jsxs)(_,{children:[(0,i.jsx)(W,{children:(0,i.jsx)(v.default,{disablePortal:!0,id:"combo-box-demo",options:a,onChange:function(e,t){w(null==t?void 0:t.value)},sx:{width:300},renderInput:function(e){return(0,i.jsx)(h.default,(0,o._)((0,n._)({},e),{label:"Teacher"}))}})}),(0,i.jsx)(h.default,{label:"Date of the week",type:"week",sx:{width:"200px"},value:N.date,onChange:function(e){var t=e.target.value,a=f()(t).isoWeek(),n=f()(t).startOf("isoWeek").toDate(),o=f()(t).endOf("isoWeek").toDate(),r=f()(t).year();F({date:t,dateFrom:n,dateTo:o,weekNumber:a,daysOfWeek:B(a,r)})}})]}),m&&(0,i.jsx)(k.default,{isLoading:S,obj:N,data:y,statistics:O})]})}}}]);