/*! For license information please see 4791.6278acac.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["4791"],{89819:function(e,t,a){"use strict";a.r(t),a("88449"),a("19894"),a("2490");var l=a("85893");a("67294");var n=a("38345"),d=a("30381"),i=a.n(d),r=a("7104"),s=a("16393"),o=a("27233"),c=a("94718"),u=a("55693"),f=a("74113"),m=a("5434"),p=a("72132");t.default=e=>{let{rows:t,setRow:a}=e,d=e=>{o.default.get(s.BASE_URL+"/errorReminder/changeActivityOfError?type=SINGLE&id=".concat(e),(0,s.getHeaders)()).then(t=>{var l;a(t=>t.filter(t=>t.id!==e)),p.toast.success(null===(l=t.data)||void 0===l?void 0:l.message)}).catch(e=>{p.toast.error(e.response.data.message||"Error")})};return(0,l.jsx)(r.Card,{children:(0,l.jsxs)(r.CardContent,{children:[(0,l.jsx)(u.default,{sx:{display:"flex",justifyContent:"end",mb:2},children:(0,l.jsx)(c.default,{onClick:()=>{o.default.get(s.BASE_URL+"/errorReminder/changeActivityOfError?type=All",(0,s.getHeaders)()).then(e=>{var t;a([]),p.toast.success(null===(t=e.data)||void 0===t?void 0:t.message)}).catch(e=>{p.toast.error(e.response.data.message||"Error")})},variant:"contained",size:"small",color:"error",children:"Clear all"})}),(0,l.jsx)(n.default,{columns:[{field:"count",headerName:"\u2116",sortable:!0,width:60,align:"center"},{minWidth:100,flex:1,field:"error",headerName:"File errors",sortable:!0,align:"left"},{minWidth:100,flex:.2,field:"timestamp",headerName:"Time",sortable:!0,align:"center",valueGetter:e=>"".concat(i()(e.row.timestamp).format("DD.MM.YYYY HH:mm"))},{minWidth:100,flex:.1,field:"action",headerName:"Action",sortable:!0,align:"center",renderCell:e=>(0,l.jsx)(f.default,{color:"error",onClick:()=>d(e.row.id),children:(0,l.jsx)(m.MdDelete,{})})}],rows:t||[],loading:!1})]})})}},54072:function(e,t,a){"use strict";a.r(t);var l=a("58865");a("33948"),a("31672"),a("59461"),a("2490"),a("57640"),a("9924"),a("17727");var n=a("85893"),d=a("67294"),i=a.n(d),r=a("71893"),s=a("61261"),o=a("44025"),c=a("32392"),u=a("42154"),f=a("52861"),m=a("30381"),p=a.n(m),h=a("94718"),x=a("47516"),g=a("60155"),v=a("55693"),b=a("7104"),j=a("97367"),y=a("15729"),C=a("3506"),S=a("16393"),w=a("27233"),E=a("72132"),T=a("57024"),k=a("89589"),A=a("89819"),D=a("7701");function I(){let e=(0,l._)(["\n    ","\n"]);return I=function(){return e},e}function R(){let e=(0,l._)(["\n    margin-top: 20px;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 30px;\n    ","\n"]);return R=function(){return e},e}function O(){let e=(0,l._)(["\n    width: 100%;\n    padding: 1rem;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]);return O=function(){return e},e}let M={zIndex:0,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"480px",bgcolor:"background.paper",borderRadius:"5px",boxShadow:24,p:2},_=r.default.div(I(),(0,T.extrasmall)({width:"330px !important"})),Y=r.default.div(R(),(0,T.extrasmall)({gridTemplateColumns:"1fr",justifyItems:"center"})),U=r.default.div(O());t.default=()=>{let[e,t]=i().useState(!1),a=[2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035],l=[{name:"Orientation week",shortname:"OW",bgColor:"#FFF",type:"ORIENTATION_WEEK"},{name:"Theoretical education",shortname:"TE",bgColor:"#d0ffff",type:"THEORETICAL_EDUCATION"},{name:"Final exams",shortname:"F",bgColor:"#90b5e1",type:"FINAL_EXAMS"},{name:"Vacation",shortname:"V",bgColor:"#e4b7b7",type:"VACATION"},{name:"Theoretical/Practical education",shortname:"T/P",bgColor:"#d0ffff",type:"THEORETICAL_PRACTICAL_EDUCATION"},{name:"Self-study/Distancion education",shortname:"S/D",bgColor:"#d0ffff",type:"SELF_STUDY_DISTANCE_EDUCATION"},{name:"Extramural studies",shortname:"ES",bgColor:"#c5d79e",type:"EXTRAMURAL_STUDIES"}],r=["KUNDUZGI_KECHKI","SIRTQI","MAGISTRATURE"],m=["DEFAULT","MED"],[T,I]=(0,d.useState)([]),[R,O]=(0,d.useState)([]),[W,N]=(0,d.useState)(""),[z,L]=(0,d.useState)(l[0].type),[F,H]=(0,d.useState)(a.find(e=>e===p()().year())),[B,P]=(0,d.useState)(m[0]),[G,K]=(0,d.useState)(l[0].name),[V,q]=(0,d.useState)(r[0]),[X,Q]=(0,d.useState)(""),[Z,J]=(0,d.useState)(null),[$,ee]=(0,d.useState)(!0),[et,ea]=(0,d.useState)("".concat(p()(new Date).year(),"-W").concat(p()(new Date).isoWeek())),[el,en]=(0,d.useState)(!1),ed=()=>en(!1),ei=()=>{var e;W&&w.default.get("".concat(S.BASE_URL,"/education/getSortNumberOfWeek/").concat(null==T?void 0:null===(e=T.find(e=>(null==e?void 0:e.name)===W))||void 0===e?void 0:e.id),(0,S.getHeaders)()).then(e=>{Q(e.data.obj||1)}).catch(e=>{})},er=()=>{w.default.get("".concat(S.BASE_URL,"/education/educationYearsForCRUD"),(0,S.getHeaders)()).then(e=>{var t,a;I(e.data.obj.map((e,t)=>({...e,count:t+1}))),N(null===(a=e.data)||void 0===a?void 0:null===(t=a.obj[0])||void 0===t?void 0:t.name)}).catch(e=>{I([]),N("")})},es=()=>{w.default.get(S.BASE_URL+"/errorReminder/findAllErrorData",(0,S.getHeaders)()).then(e=>{O(e.data.obj.map((e,t)=>({...e,count:t+1})))}).catch(e=>{})};(0,d.useEffect)(()=>{""!==W&&""!=F&&null!==Z&&""!==et&&""!==X?ee(!1):ee(!0)},[F,Z,et,X]),(0,d.useEffect)(()=>{er(),es()},[]),(0,d.useEffect)(()=>{ei()},[W]);let eo=e=>{var a;e.preventDefault(),t(!0),en(!1);let l="".concat(S.BASE_URL,"/attachment/upload/").concat(null==T?void 0:null===(a=T.find(e=>(null==e?void 0:e.name)===W))||void 0===a?void 0:a.id,"/").concat(p()(et).isoWeek(),"?year=").concat(p()(et).year(),"&defaultOrMed=").concat(B,"&weekNumber=").concat(X,"&eduType=").concat(V,"&weekType=").concat(z,"&startWeek=").concat(p()(et).startOf("isoWeek").format("DD.MM.YYYY"),"&endWeek=").concat(p()(et).startOf("isoWeek").add(5,"days").format("DD.MM.YYYY")),n=new FormData;n.append("file",Z);let d=localStorage.getItem(S.TOKEN),i={headers:{"Content-Type":"multipart/form-data",Authorization:S.TokenType+d,"Access-Control-Allow-Origin":"*"}};w.default.post(l,n,i).then(e=>{var t;E.toast.success(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message),es()}).catch(e=>{var t,a;E.toast.error(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)}).finally(()=>{t(!1)})};return(0,n.jsxs)(U,{children:[(0,n.jsx)(v.default,{display:"flex",justifyContent:"end",gap:2,mb:3,children:(0,n.jsx)(h.default,{variant:"contained",onClick:()=>en(!0),children:"Add weekly training file"})}),(0,n.jsx)(j.default,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:el,onClose:ed,closeAfterTransition:!0,slots:{backdrop:y.default},slotProps:{backdrop:{timeout:500}},children:(0,n.jsx)(b.Fade,{in:el,children:(0,n.jsx)(v.default,{sx:M,component:_,children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p()(et).isoWeek(),p()(et).format("MMMM"),p()(et).format("MM"),p()(et).year(),p()(et).startOf("isoWeek").format("DD"),p()(et).startOf("isoWeek").add(5,"days").format("DD.MM.YYYY"),eo(e)},children:[(0,n.jsxs)(Y,{children:[(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c.default,{id:"demo-simple-select-label",children:"O'quv yili"}),(0,n.jsx)(o.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:W,label:"O'quv yili",onChange:e=>N(e.target.value),children:T.length>0&&T.map((e,t)=>(0,n.jsx)(s.default,{value:e.name,children:e.name},t))})]}),(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c.default,{id:"demo-simple-select-label1",children:"Year"}),(0,n.jsx)(o.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:F,label:"Year",onChange:e=>H(e.target.value),children:a.map((e,t)=>(0,n.jsx)(s.default,{value:e,children:e},t))})]}),(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c.default,{id:"demo-simple-select-label1",children:"Type of week"}),(0,n.jsx)(o.default,{size:"small",sx:{width:"200px",borderRadius:"5px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:G,label:"Type of week",onChange:e=>K(e.target.value),children:l.map((e,t)=>(0,n.jsx)(s.default,{value:e.name,onClick:()=>L(e.type),children:(0,n.jsxs)(v.default,{sx:{width:"100%",display:"flex",gap:"5px",alignItems:"center"},children:[(0,n.jsx)(v.default,{sx:{fontSize:"12px",borderRight:"none",width:"40px",padding:"0 3px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"5px",border:"1px solid silver",backgroundColor:"".concat(e.bgColor),fontWeight:"bold"},children:e.shortname}),(0,n.jsx)("p",{children:e.name})]})},t))})]}),(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c.default,{id:"demo-simple-select-label1",children:"Type of education"}),(0,n.jsx)(o.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:V,label:"Type of education",onChange:e=>q(e.target.value),children:r.map((e,t)=>(0,n.jsx)(s.default,{value:e,children:e},t))})]}),(0,n.jsx)(f.default,{size:"small",value:X,label:"Week of education",type:"number",sx:{width:"200px"},InputProps:{inputProps:{min:1,max:53}},onChange:e=>Q(e.target.value)}),(0,n.jsx)(f.default,{size:"small",label:"Date of the week",type:"week",value:et,sx:{width:"200px"},onChange:e=>ea(e.target.value)}),(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c.default,{id:"demo-simple-select-label1",children:"Data type"}),(0,n.jsx)(o.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:B,label:"Data type",onChange:e=>P(e.target.value),children:m.map((e,t)=>(0,n.jsx)(s.default,{value:e,children:e},t))})]}),(0,n.jsxs)(h.default,{sx:{width:"200px",overflow:"hidden"},size:"sm",variant:"outlined",component:"label",endIcon:(0,n.jsx)(x.BiUpload,{}),children:[(0,n.jsx)("p",{children:(null==Z?void 0:Z.name)?Z.name.length<13?Z.name:Z.name.substring(0,13)+"....":"Choose file "}),(0,n.jsx)("input",{onChange:e=>J(e.target.files[0]),accept:"xml,.xml",type:"file",hidden:!0})]})]}),(0,n.jsxs)(v.default,{sx:{marginTop:"15px",width:"100%",display:"flex",justifyContent:"end",gap:"15px"},children:[(0,n.jsx)(h.default,{onClick:ed,variant:"outlined",children:"Cancel"}),(0,n.jsx)(C.default,{title:$?"Fill in all the fields !":"",placement:"top",children:(0,n.jsx)("span",{children:(0,n.jsx)(h.default,{disabled:$,endIcon:(0,n.jsx)(g.IoSend,{size:15}),type:"submit",variant:"contained",children:"Send"})})})]})]})})})}),(0,n.jsx)(y.default,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:e,children:(0,n.jsxs)(v.default,{sx:{display:"flex",justifyContent:"center",flexDirection:"column",gap:2},children:[(0,n.jsx)(D.default,{color:"inherit",sx:{margin:"0 auto"}}),(0,n.jsx)(k.default,{children:"Please waiting"})]})}),(0,n.jsx)(A.default,{rows:R,setRow:O})]})}}}]);