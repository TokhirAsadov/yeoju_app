/*! For license information please see 7885.bb15a8f8.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["7885"],{20995:function(e,n,l){"use strict";l.r(n);var t=l("58865");l("33948"),l("31672"),l("59461"),l("2490"),l("88449"),l("19894"),l("57640"),l("9924");var a=l("85893"),i=l("67294"),d=l.n(i),s=l("71893"),o=l("16393"),r=l("57024"),u=l("79352"),c=l("7104"),f=l("61261"),v=l("55693"),p=l("5434"),m=l("74113"),x=l("63750"),h=l("94718"),g=l("97367"),j=l("60155"),b=l("89589"),w=l("50533"),y=l("27233"),C=l("72132");function k(){let e=(0,t._)(["\n  ","\n"]);return k=function(){return e},e}function S(){let e=(0,t._)(["\n  width: 100%;\n  display: flex;\n  gap: 5px;\n  align-items: start;\n  font-size: 16px;\n  text-align: start;\n  color: ",";\n  font-weight: bold;\n  ","\n"]);return S=function(){return e},e}function I(){let e=(0,t._)(["\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  background-color: #fff;\n  border-radius: 0.5rem;\n  box-shadow: 1px 3px 8px 0 rgba(34, 60, 80, 0.2);\n\n  p {\n    display: flex;\n    align-items: center;\n    color: black;\n    font-size: 14px;\n  }\n\n"]);return I=function(){return e},e}function L(){let e=(0,t._)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr 1fr;\n  gap: 20px;\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return L=function(){return e},e}function _(){let e=(0,t._)(["\n  width: 100%;\n  padding: 1rem;\n\n  h2 {\n    color: ",";\n    font-size: 28px;\n  }\n"]);return _=function(){return e},e}let E={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},A=s.default.div(k(),(0,r.extrasmall)({width:"95% !important"})),U=s.default.div(S(),o.mainColor,(0,r.extrasmall)({fontSize:"14px"})),B=s.default.div(I()),R=s.default.div(L(),(0,r.xlarge)({gridTemplateColumns:"1fr 1fr 1fr  "}),(0,r.large)({gridTemplateColumns:"1fr 1fr 1fr  "}),(0,r.medium)({gridTemplateColumns:"1fr 1fr "}),(0,r.small)({gridTemplateColumns:"1fr 1fr "}),(0,r.extrasmall)({gridTemplateColumns:"1fr "})),T=s.default.div(_(),o.mainColor);n.default=function(){let e=(0,w.useSelector)(e=>{var n;return null===(n=e.section)||void 0===n?void 0:n.section}),n=(0,w.useSelector)(e=>{var n;return null===(n=e.user)||void 0===n?void 0:n.user}),l=[{title:"Update",icon:(0,a.jsx)(p.MdUpdate,{color:"#0087be"})},{title:"Delete",icon:(0,a.jsx)(p.MdDelete,{color:"red"})}],{headers:t}=(0,o.getHeaders)(),[s,r]=(0,i.useState)({id:null,name:null,kafedraId:null==e?void 0:e.id}),[k,S]=(0,i.useState)([]),[I,L]=(0,i.useState)(!1),[_,z]=d().useState(null),[N,M]=(0,i.useState)(!0),D=!!_,P=(e,n)=>{z(e.currentTarget),r(e=>{var l;return{...e,id:n,name:null==k?void 0:null===(l=k.find(e=>(null==e?void 0:e.subjectId)===n))||void 0===l?void 0:l.subjectName}})},V=()=>L(!0),F=()=>{L(!1),r(e=>({...e,name:null,id:null}))},H=async e=>{await y.default.post("".concat(o.BASE_URL,"/lesson/createLessonV2"),e,{headers:t}).then(e=>{var n;C.toast.success(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.message),q(),F()}).catch(e=>{})},q=async()=>{await y.default.get("".concat(o.BASE_URL,"/lesson/getAllLessonByKafedraOwnerId/").concat(null==n?void 0:n.id),{headers:t}).then(e=>{var n;S(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.obj)}).catch(e=>{})};(0,i.useEffect)(()=>{(null==s?void 0:s.name)&&(null==s?void 0:s.name)!==""?M(!1):M(!0)},[s]);let K=e=>{z(null),"Update"===e?V():"Delete"===e?G(null==s?void 0:s.id):r(e=>({...e,name:null,id:null}))},O=async()=>{await y.default.get("".concat(o.BASE_URL,"/lesson/checkLessonNameAlreadyExists?subjectName=").concat(null==s?void 0:s.name),{headers:t}).then(e=>{var n,l;(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.success)?C.toast.error("\u26A0\uFE0F"+(null===(l=e.data)||void 0===l?void 0:l.message)):W()}).catch(e=>{})},W=async()=>{await y.default.put("".concat(o.BASE_URL,"/lesson/updateLessonV2"),s,{headers:t}).then(e=>{var n,l,t;(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.success)?C.toast.success(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.message):C.toast.error(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message),q(),F()}).catch(e=>{})},G=async e=>{window.confirm("Are you sure you want to delete lesson?")?await y.default.delete("".concat(o.BASE_URL,"/lesson/deleteLesson/").concat(e),{headers:t}).then(n=>{var l;C.toast.success(null==n?void 0:null===(l=n.data)||void 0===l?void 0:l.message),S(null==k?void 0:k.filter(n=>n.subjectId!==e)),r(e=>({...e,name:null,id:null}))}).catch(e=>{}):r(e=>({...e,name:null,id:null}))};return(0,i.useEffect)(()=>{q()},[]),(0,a.jsxs)(T,{children:[(0,a.jsxs)(v.default,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,a.jsx)("h2",{children:"Subjects"}),(0,a.jsx)(h.default,{variant:"contained",onClick:V,children:"create a new subject"})]}),(0,a.jsx)(R,{children:null==k?void 0:k.map((e,n)=>(0,a.jsx)(B,{children:(0,a.jsxs)(v.default,{display:"flex",alignItems:"flex-start",children:[(0,a.jsx)(v.default,{width:"100%",children:(0,a.jsxs)(U,{children:[(0,a.jsx)(v.default,{width:"30px",height:"30px",children:(0,a.jsx)(u.RiBookMarkFill,{size:30})}),(0,a.jsx)("span",{children:null==e?void 0:e.subjectName})]})}),(0,a.jsx)(m.default,{"aria-label":"actions",id:"long-button","aria-controls":D?"long-menu":void 0,"aria-expanded":D?"true":void 0,"aria-haspopup":"true",onClick:n=>P(n,null==e?void 0:e.subjectId),size:"small",children:(0,a.jsx)(x.BsThreeDotsVertical,{})})]})},null==e?void 0:e.subjectId))}),(0,a.jsx)(g.default,{open:I,onClose:F,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsxs)(v.default,{sx:E,component:A,children:[(0,a.jsxs)(v.default,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,a.jsx)(b.default,{variant:"h6",color:o.mainColor,mt:1,children:(null==s?void 0:s.id)===null?"Create a new subject":"Update subject"}),(0,a.jsxs)(m.default,{onClick:F,children:[" ",(0,a.jsx)(j.IoClose,{size:22})]})]}),(0,a.jsxs)(v.default,{children:[(0,a.jsx)(c.Stack,{sx:{height:"150px",padding:"0 10px"},direction:"row",justifyContent:"center",alignItems:"center",children:(0,a.jsx)(c.TextField,{fullWidth:!0,value:null==s?void 0:s.name,required:!0,label:"Subject name",onChange:e=>r(n=>({...n,name:e.target.value}))})}),(0,a.jsxs)(c.Stack,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,a.jsx)(h.default,{variant:"outlined",onClick:F,children:"Cancel"}),(0,a.jsx)(h.default,{variant:"contained",onClick:(null==s?void 0:s.id)===null?()=>{y.default.get("".concat(o.BASE_URL,"/lesson/checkLessonNameAlreadyExists?subjectName=").concat(null==s?void 0:s.name),{headers:t}).then(e=>{var n,l;(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.success)?C.toast.error("\u26A0\uFE0F"+(null===(l=e.data)||void 0===l?void 0:l.message)):H(s)}).catch(e=>{})}:O,disabled:N,children:(null==s?void 0:s.id)===null?"save":"update"})]})]})]})}),(0,a.jsx)(c.Menu,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:_,open:D,onClose:K,PaperProps:{style:{maxHeight:180,width:"20ch"}},children:l.map((e,n)=>(0,a.jsx)(f.default,{onClick:()=>K(e.title),children:(0,a.jsxs)(v.default,{display:"flex",gap:"5px",alignItems:"center",children:[e.icon," ",e.title]})},n))})]})}}}]);