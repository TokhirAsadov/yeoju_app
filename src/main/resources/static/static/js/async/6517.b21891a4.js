/*! For license information please see 6517.b21891a4.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["6517"],{26972:function(e,t,a){"use strict";a.r(t);var l=a("58865");a("33948"),a("88449"),a("19894"),a("2490"),a("31672"),a("59461"),a("57640"),a("9924");var n=a("85893"),i=a("67294"),r=a("97367"),d=a("55693"),o=a("60155"),s=a("44118"),u=a("7104"),c=a("94718"),f=a("71893"),m=a("57024"),h=a("16393"),p=a("44025"),x=a("42154"),j=a("32392"),v=a("61261"),g=a("15352"),b=a("27233"),D=a("73871"),C=a("96413"),y=a("1190"),S=a("50533"),k=a("72132"),w=a("3506");function N(){let e=(0,l._)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    h4 {\n        color: black;\n    }\n\n    h5 {\n        color: red;\n    }\n\n"]);return N=function(){return e},e}function F(){let e=(0,l._)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 5px;\n    border-radius: 50%;\n    border: none;\n    background-color: ",";\n    color: white;\n    font-size: 12px;\n"]);return F=function(){return e},e}function I(){let e=(0,l._)(["\n    ","\n"]);return I=function(){return e},e}let O=f.default.div(N()),Y=f.default.button(F(),h.mainColor),E=f.default.div(I(),(0,m.extrasmall)({width:"97% !important"})),T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"};t.default=(0,i.memo)(e=>{let{modalCreate:t,handleCloseModalCreate:a,getNoticeFOrDean:l,putData:f}=e,m=["SIRTQI"],N=(0,S.useSelector)(e=>e.dekanat.dekanat.id),[F,I]=(0,i.useState)(""),[A,M]=(0,i.useState)(m[0]),[W,_]=(0,i.useState)([]),[L,R]=(0,i.useState)([]),[P,B]=(0,i.useState)([]),[U,G]=(0,i.useState)([]),[z,H]=(0,i.useState)([]),[q,V]=(0,i.useState)({fromDate:"",toDate:""}),[Q,J]=(0,i.useState)(""),[K,X]=(0,i.useState)(""),{headers:Z}=(0,h.getHeaders)(),$=()=>{I(""),R([]),G([]),X(""),V({fromDate:"",toDate:""}),J("")},ee=()=>{a(),$()},et=()=>{if(f){if(f.course&&I(f.course),(null==f?void 0:f.dynamicSection)&&J(f.dynamicSection),f.facultyNames&&R(W.filter(e=>f.facultyNames.includes(e.name))),f.educationYear&&z){var e;X((null===(e=z.find(e=>e.name===f.educationYear))||void 0===e?void 0:e.id)||"")}f.fromDate&&f.toDate&&V({fromDate:f.fromDate,toDate:f.toDate})}},ea=e=>{I(e),R([]),G([])},el=async()=>{await b.default.get(h.BASE_URL+"/education/educationYearsForSelected",{headers:Z}).then(e=>{H(e.data.obj)}).catch(e=>{})},en=()=>{b.default.get(h.BASE_URL+"/faculty/allFacultiesWithShortName").then(e=>{var t;_(null===(t=e.data.obj)||void 0===t?void 0:t.sort((e,t)=>(null==e?void 0:e.name)<(null==t?void 0:t.name)?-1:(null==e?void 0:e.name)>(null==t?void 0:t.name)?1:0))}).catch(e=>{_([])})},ei=(e,t,a)=>{""!==e&&""!==t&&0!==a.length&&b.default.get(h.BASE_URL+"/group/getGroupsByFacultiesIds?course=".concat(e,"&educationType=").concat(t,"&facultiesIds=").concat(a.map(e=>e.id))).then(e=>{var t;B(null===(t=e.data.obj)||void 0===t?void 0:t.sort((e,t)=>(null==e?void 0:e.name)<(null==t?void 0:t.name)?-1:(null==e?void 0:e.name)>(null==t?void 0:t.name)?1:0)),(null==f?void 0:f.groupNames)&&G(e.data.obj.filter(e=>f.groupNames.includes(e.name)))}).catch(e=>{B([])})};return(0,i.useEffect)(()=>{en(),el()},[]),(0,i.useEffect)(()=>{ei(F,A,L)},[F,A,L]),(0,i.useEffect)(()=>{et()},[f]),(0,n.jsx)(r.default,{open:t,onClose:ee,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,n.jsxs)(d.default,{sx:T,component:E,children:[(0,n.jsxs)(O,{children:[(0,n.jsx)("h4",{children:" Notice"}),(0,n.jsxs)(Y,{onClick:ee,children:[" ",(0,n.jsx)(o.IoClose,{size:22})]})]}),(0,n.jsxs)(d.default,{children:[(0,n.jsxs)(d.default,{sx:{overflowY:"scroll",marginY:3,height:"70vh",display:"flex",flexDirection:"column",gap:3},children:[(0,n.jsxs)(x.default,{fullWidth:!0,sx:{mt:1},children:[(0,n.jsx)(j.default,{id:"demo-simple-select-label",children:"Years of education"}),(0,n.jsx)(p.default,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:K,label:"Years of education",onChange:e=>X(e.target.value),children:z.map(e=>(0,n.jsx)(v.default,{value:null==e?void 0:e.id,children:null==e?void 0:e.name},null==e?void 0:e.id))})]}),(0,n.jsxs)(d.default,{display:"flex",gap:3,children:[(0,n.jsxs)(x.default,{fullWidth:!0,children:[(0,n.jsx)(j.default,{id:"demo-simple-select-label",children:"Course"}),(0,n.jsx)(p.default,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:F,label:"Course",onChange:e=>ea(e.target.value),children:[1,2,3,4].map(e=>(0,n.jsx)(v.default,{value:e,children:e},e))})]}),(0,n.jsxs)(x.default,{fullWidth:!0,children:[(0,n.jsx)(j.default,{id:"demo-simple-select-label",children:"Edu type"}),(0,n.jsx)(p.default,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:A,label:"Edu type",disabled:!0,onChange:e=>M(e.target.value),children:m.map(e=>(0,n.jsx)(v.default,{value:e,children:e},e))})]})]}),(0,n.jsxs)(d.default,{display:"flex",gap:3,children:[(0,n.jsx)(D.LocalizationProvider,{dateAdapter:C.AdapterMoment,children:(0,n.jsx)(y.DatePicker,{label:"Start date",value:q.fromDate,onChange:e=>V(t=>({...t,fromDate:e})),renderInput:e=>(0,n.jsx)(u.TextField,{...e}),shouldDisableDate:e=>e<=new Date(h.serverTimeStorage)})}),(0,n.jsx)(D.LocalizationProvider,{dateAdapter:C.AdapterMoment,children:(0,n.jsx)(y.DatePicker,{label:"End date",value:q.toDate,onChange:e=>V(t=>({...t,toDate:e})),renderInput:e=>(0,n.jsx)(u.TextField,{...e}),shouldDisableDate:e=>e<=new Date(h.serverTimeStorage)})})]}),(0,n.jsx)(s.default,{multiple:!0,limitTags:3,id:"faculties-autocomplete",options:W||[],disableCloseOnSelect:!0,getOptionLabel:e=>(null==e?void 0:e.name)||"",renderOption:(e,t,a)=>{let{selected:l}=a;return(0,n.jsxs)("li",{...e,children:[(0,n.jsx)(g.default,{style:{marginRight:8},checked:l}),null==t?void 0:t.name]})},value:L,onChange:(e,t)=>R(t),renderInput:e=>(0,n.jsx)(u.TextField,{...e,label:"Faculties",placeholder:"Select Faculties"})}),(0,n.jsx)(s.default,{multiple:!0,limitTags:3,id:"faculties-autocomplete654",options:P||[],disableCloseOnSelect:!0,getOptionLabel:e=>(null==e?void 0:e.name)||"",renderOption:(e,t,a)=>{let{selected:l}=a;return(0,n.jsxs)("li",{...e,children:[(0,n.jsx)(g.default,{style:{marginRight:8},checked:l}),null==t?void 0:t.name]})},value:U,onChange:(e,t)=>G(t),renderInput:e=>(0,n.jsx)(u.TextField,{...e,label:"Groups",placeholder:"Select Groups"})}),(0,n.jsx)(u.TextField,{value:Q,label:"For what",onChange:e=>J(e.target.value)})]}),(0,n.jsxs)(d.default,{sx:{display:"flex",justifyContent:"space-between",gap:5},children:[(0,n.jsx)(w.default,{title:"dynamic section",children:(0,n.jsx)(c.default,{variant:"outlined",color:"success",component:"a",href:"/assets/noticeExample.png",download:"img",children:"example file"})}),(0,n.jsxs)(u.Stack,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,n.jsx)(c.default,{variant:"outlined",onClick:ee,children:"Cancel"}),(0,n.jsx)(c.default,{variant:"contained",onClick:()=>{if(!F||!A||!L.length||!U.length||!q.fromDate||!q.toDate||(null==Q?void 0:Q.trim())===""){k.toast.error("Validation failed. Please fill in all the required fields.");return}let e={dekanatId:N,course:F,educationId:K,facultiesId:L.map(e=>e.id),groupsId:U.map(e=>e.id),fromDate:q.fromDate.valueOf(),toDate:q.toDate.valueOf(),dynamicSection:Q};if(f){let t={...e,id:f.id};b.default.put(h.BASE_URL+"/notificationOuter/update",t,{headers:Z}).then(e=>{k.toast.success("Update success"),ee(),l()}).catch(e=>{k.toast.error(" Update error")})}else b.default.post(h.BASE_URL+"/notificationOuter/save",e,{headers:Z}).then(e=>{k.toast.success("Success"),ee(),l()}).catch(e=>{k.toast.error("Error")})},children:f?"update":"save"})]})]})]})]})})})},98493:function(e,t,a){"use strict";a.r(t);var l=a("85893");a("67294");var n=a("7104"),i=a("16356"),r=a("30381"),d=a.n(r),o=a("74113"),s=a("63750"),u=a("5434"),c=a("3506"),f=a("27233"),m=a("16393"),h=a("72132");t.default=e=>{let{data:t,isLoading:a,setPutData:r,setModalCreate:p,getNoticeFOrDean:x}=e,j=e=>{r(e),p(!0)},v=e=>{f.default.delete("".concat(m.BASE_URL,"/notificationOuter/deleteNO/").concat(e),(0,m.getHeaders)()).then(e=>{h.toast.warning(e.data.message||"Deleted"),x()}).catch(e=>{h.toast.error(e.response.data.message||"Error")})};return(0,l.jsx)(n.Card,{sx:{mt:2},children:(0,l.jsx)(n.CardContent,{children:(0,l.jsx)(i.DataGrid,{columns:[{field:"count",headerName:"\u2116",sortable:!0,width:50,align:"center",justifyContent:"center"},{minWidth:100,flex:.4,field:"educationYear",headerName:"Year",sortable:!0,align:"center",justifyContent:"center"},{minWidth:100,flex:.5,field:"dekanat",headerName:"Dean",sortable:!0,align:"center",justifyContent:"center"},{minWidth:80,flex:.3,field:"course",headerName:"Course",sortable:!0,align:"center",justifyContent:"center"},{minWidth:100,flex:.5,field:"fromDate",headerName:"From date",sortable:!0,align:"center",justifyContent:"center",renderCell:e=>(0,l.jsx)("p",{children:d()(e.row.fromDate).format("DD.MM.YYYY")})},{minWidth:100,flex:.5,field:"toDate",headerName:"To date",sortable:!0,align:"center",justifyContent:"center",renderCell:e=>(0,l.jsx)("p",{children:d()(e.row.toDate).format("DD.MM.YYYY")})},{minWidth:100,flex:.5,field:"facultyNames",headerName:"Faculty names",sortable:!0,align:"center",justifyContent:"center"},{minWidth:100,flex:.5,field:"groupNames",headerName:"Group names",sortable:!0,align:"center",justifyContent:"center"},{minWidth:100,flex:.5,field:"action",headerName:"Action",sortable:!1,align:"center",justifyContent:"center",renderCell:e=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.default,{onClick:()=>j(e.row),children:(0,l.jsx)(s.BsPencilSquare,{size:20,color:"green"})}),(0,l.jsx)(c.default,{title:"Delete",arrow:!0,children:(0,l.jsx)(o.default,{onClick:()=>{var t;return v(null===(t=e.row)||void 0===t?void 0:t.id)},children:(0,l.jsx)(u.MdDelete,{size:20,color:"red"})})})]})}],rows:t||[],loading:a,components:{Toolbar:i.GridToolbar},rowsPerPageOptions:[10,30,50,70,100],autoHeight:!0,initialState:{columns:{columnVisibilityModel:{action:!1}}}})})})}},45276:function(e,t,a){"use strict";a.r(t);var l=a("58865");a("33948"),a("57640"),a("9924"),a("17727");var n=a("85893"),i=a("67294"),r=a("71893"),d=a("94718"),o=a("26972"),s=a("55693"),u=a("98493"),c=a("50533"),f=a("89583"),m=a("39711"),h=a("5434"),p=a("93065");function x(){let e=(0,l._)(["\n    width: 100%;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]);return x=function(){return e},e}let j=r.default.div(x());t.default=()=>{(0,c.useSelector)(e=>{var t;return null===(t=e.dekanat.dekanat)||void 0===t?void 0:t.name});let[e,t]=(0,i.useState)([]),[a,l]=(0,i.useState)(!1),[r,x]=(0,i.useState)(!1),[v,g]=(0,i.useState)(null),b=(0,m.useNavigate)(),D=()=>{l(!0),p.default.get("/notificationOuter/getAllOuterNotifications").then(e=>{var a,l;t(null===(l=e.data.obj)||void 0===l?void 0:null===(a=l.sort((e,t)=>e.fromDate<t.fromDate?1:e.fromDate>t.fromDate?-1:0))||void 0===a?void 0:a.map((e,t)=>({...e,count:t+1})))}).catch(e=>{}).finally(()=>{l(!1)})};return(0,i.useEffect)(()=>{D()},[]),(0,n.jsxs)(j,{children:[(0,n.jsxs)(s.default,{mt:3,display:"flex",justifyContent:"end",gap:5,children:[(0,n.jsx)(d.default,{variant:"contained",endIcon:(0,n.jsx)(h.MdCreateNewFolder,{}),onClick:()=>x(!0),children:"create"}),(0,n.jsx)(d.default,{variant:"contained",color:"inherit",endIcon:(0,n.jsx)(f.FaFileAlt,{}),onClick:()=>b("history"),children:"History"})]}),(0,n.jsx)(u.default,{getNoticeFOrDean:()=>D(),data:e,isLoading:a,setPutData:g,setModalCreate:x}),(0,n.jsx)(o.default,{modalCreate:r,getNoticeFOrDean:D,handleCloseModalCreate:()=>{x(!1),g(null)},putData:v})]})}}}]);