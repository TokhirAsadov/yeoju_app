/*! For license information please see 4791.8b6d437c.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["4791"],{11341:function(e,t,a){"use strict";a.r(t);var l=a("58865");a("33948");var n=a("85893"),d=a("67294"),i=a("94718"),r=a("97367"),s=a("15729"),o=a("7104"),c=a("55693"),u=a("57024"),f=a("52861"),p=a("73871"),m=a("96413"),h=a("1190"),x=a("60155"),g=a("72132"),b=a("27233"),j=a("16393"),v=a("89589"),y=a("45697"),C=a.n(y),S=a("71893");function w(){let e=(0,l._)(["\n    ","\n"]);return w=function(){return e},e}let k=e=>{let{dataForPut:t,setDataForPutEduYear:a,getEduYearsData:l}=e,u={id:null,name:"",start:"",end:""},[y,C]=(0,d.useState)(!1),[S,w]=(0,d.useState)(u);(0,d.useEffect)(()=>{t&&(w(t),k())},[t]);let k=()=>C(!0),E=()=>{C(!1),w(u),a(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.default,{color:"success",variant:"contained",onClick:k,children:"Create an academic year"}),(0,n.jsx)(r.default,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:y,onClose:E,closeAfterTransition:!0,slots:{backdrop:s.default},slotProps:{backdrop:{timeout:500}},children:(0,n.jsx)(o.Fade,{in:y,children:(0,n.jsxs)(c.default,{sx:T,component:D,children:[(0,n.jsx)(v.default,{variant:"h6",children:"Academic year"}),(0,n.jsx)(f.default,{sx:{mt:3},fullWidth:!0,label:"Name",value:S.name,onChange:e=>w(t=>({...t,name:e.target.value}))}),(0,n.jsxs)(c.default,{display:"flex",gap:3,mt:3,children:[(0,n.jsx)(p.LocalizationProvider,{dateAdapter:m.AdapterMoment,children:(0,n.jsx)(h.DatePicker,{label:"Start date",value:S.start,onChange:e=>w(t=>({...t,start:e})),renderInput:e=>(0,n.jsx)(f.default,{...e})})}),(0,n.jsx)(p.LocalizationProvider,{dateAdapter:m.AdapterMoment,children:(0,n.jsx)(h.DatePicker,{label:"End date",value:S.end,onChange:e=>w(t=>({...t,end:e})),renderInput:e=>(0,n.jsx)(f.default,{...e})})})]}),(0,n.jsxs)(c.default,{sx:{marginTop:"15px",width:"100%",display:"flex",justifyContent:"end",gap:"15px"},children:[(0,n.jsx)(i.default,{onClick:E,variant:"outlined",children:"Cancel"}),(0,n.jsx)(i.default,{onClick:()=>{if(!S.name||!S.start||!S.end){g.toast.warning("All fields are required.");return}let e={id:S.id||null,name:S.name,weeksIds:null,start:S.start,end:S.end};e.id?b.default.put("".concat(j.BASE_URL,"/education/update"),e).then(e=>{l(),E(),g.toast.success("UPDATE")}).catch(e=>{g.toast.error("ERROR")}):b.default.post("".concat(j.BASE_URL,"/education/save"),e,(0,j.getHeaders)()).then(e=>{l(),E(),g.toast.success("SAVED")}).catch(e=>{g.toast.error("ERROR")})},variant:"contained",endIcon:(0,n.jsx)(x.IoSend,{}),children:"Save"})]})]})})})]})},T={zIndex:0,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"480px",bgcolor:"background.paper",borderRadius:"5px",boxShadow:24,p:2},D=S.default.div(w(),(0,u.extrasmall)({width:"330px !important"}));k.propTypes={dataForPut:C().object,setDataForPutEduYear:C().func},t.default=k},54072:function(e,t,a){"use strict";a.r(t);var l=a("58865");a("33948"),a("31672"),a("59461"),a("2490"),a("57640"),a("9924");var n=a("85893"),d=a("67294"),i=a.n(d),r=a("71893"),s=a("61261"),o=a("44025"),c=a("32392"),u=a("42154"),f=a("52861"),p=a("30381"),m=a.n(p),h=a("94718"),x=a("47516"),g=a("60155"),b=a("55693"),j=a("7104"),v=a("97367"),y=a("15729"),C=a("3506"),S=a("16393"),w=a("27233"),k=a("72132"),T=a("57024"),D=a("78258"),E=a("89589"),A=a("45697"),I=a.n(A),R=a("11341"),O=a("16356"),Y=a("74113"),M=a("63750"),_=a("89583");function P(){let e=(0,l._)(["\n    ","\n"]);return P=function(){return e},e}function W(){let e=(0,l._)(["\n    margin-top: 20px;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 30px;\n    ","\n"]);return W=function(){return e},e}function N(){let e=(0,l._)(["\n    width: 100%;\n    padding: 15px;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]);return N=function(){return e},e}let F={zIndex:0,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"480px",bgcolor:"background.paper",borderRadius:"5px",boxShadow:24,p:2},U=r.default.div(P(),(0,T.extrasmall)({width:"330px !important"})),z=r.default.div(W(),(0,T.extrasmall)({gridTemplateColumns:"1fr",justifyItems:"center"})),L=r.default.div(N());t.default=()=>{let[e,t]=i().useState(0),a=[2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035],l=[{name:"Orientation week",shortname:"OW",bgColor:"#FFF",type:"ORIENTATION_WEEK"},{name:"Theoretical education",shortname:"TE",bgColor:"#d0ffff",type:"THEORETICAL_EDUCATION"},{name:"Final exams",shortname:"F",bgColor:"#90b5e1",type:"FINAL_EXAMS"},{name:"Vacation",shortname:"V",bgColor:"#e4b7b7",type:"VACATION"},{name:"Theoretical/Practical education",shortname:"T/P",bgColor:"#d0ffff",type:"THEORETICAL_PRACTICAL_EDUCATION"},{name:"Self-study/Distancion education",shortname:"S/D",bgColor:"#d0ffff",type:"SELF_STUDY_DISTANCE_EDUCATION"},{name:"Extramural studies",shortname:"ES",bgColor:"#c5d79e",type:"EXTRAMURAL_STUDIES"}],r=["KUNDUZGI_KECHKI","SIRTQI","MAGISTRATURE"],p=["DEFAULT","MED"],[T,A]=(0,d.useState)([]),[P,W]=(0,d.useState)(""),[N,B]=(0,d.useState)(l[0].type),[H,q]=(0,d.useState)(a.find(e=>e===m()().year())),[G,K]=(0,d.useState)(p[0]),[V,X]=(0,d.useState)(l[0].name),[Q,Z]=(0,d.useState)(r[0]),[J,$]=(0,d.useState)(""),[ee,et]=(0,d.useState)(null),[ea,el]=(0,d.useState)(!0),[en,ed]=(0,d.useState)("".concat(m()(new Date).year(),"-W").concat(m()(new Date).isoWeek())),[ei,er]=(0,d.useState)(!1),[es,eo]=(0,d.useState)(null),ec=()=>er(!1),eu=e=>{eo(e)},ef=e=>{w.default.delete("".concat(S.BASE_URL,"/education/deleteById/").concat(e),(0,S.getHeaders)()).then(e=>{em(),k.toast.warning("Deleted successfully")}).catch(e=>{k.toast.error("Something went wrong")})},ep=()=>{var e;P&&w.default.get("".concat(S.BASE_URL,"/education/getSortNumberOfWeek/").concat(null==T?void 0:null===(e=T.find(e=>(null==e?void 0:e.name)===P))||void 0===e?void 0:e.id),(0,S.getHeaders)()).then(e=>{$(e.data.obj||1)}).catch(e=>{})},em=()=>{w.default.get("".concat(S.BASE_URL,"/education/educationYearsForCRUD"),(0,S.getHeaders)()).then(e=>{var t,a;A(e.data.obj.map((e,t)=>({...e,count:t+1}))),W(null===(a=e.data)||void 0===a?void 0:null===(t=a.obj[0])||void 0===t?void 0:t.name)}).catch(e=>{A([]),W("")})};(0,d.useEffect)(()=>{""!==P&&""!=H&&null!==ee&&""!==en&&""!==J?el(!1):el(!0)},[H,ee,en,J]),(0,d.useEffect)(()=>{em()},[]),(0,d.useEffect)(()=>{ep()},[P]);let eh=e=>{var t;e.preventDefault();let a="".concat(S.BASE_URL,"/attachment/upload/").concat(null==T?void 0:null===(t=T.find(e=>(null==e?void 0:e.name)===P))||void 0===t?void 0:t.id,"/").concat(m()(en).isoWeek(),"?year=").concat(m()(en).year(),"&defaultOrMed=").concat(G,"&weekNumber=").concat(J,"&eduType=").concat(Q,"&weekType=").concat(N,"&startWeek=").concat(m()(en).startOf("isoWeek").format("DD.MM.YYYY"),"&endWeek=").concat(m()(en).startOf("isoWeek").add(5,"days").format("DD.MM.YYYY")),l=new FormData;l.append("file",ee);let n=localStorage.getItem(S.TOKEN),d={headers:{"Content-Type":"multipart/form-data",Authorization:S.TokenType+n,"Access-Control-Allow-Origin":"*"}};w.default.post(a,l,d).then(e=>{var t;k.toast.success(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),er(!1)}).catch(e=>{var t,a;k.toast.error(null==e?void 0:null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})};function ex(e){return(0,n.jsxs)(b.default,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(b.default,{sx:{width:"100%",mr:1},children:(0,n.jsx)(D.default,{variant:"determinate",...e})}),(0,n.jsx)(b.default,{sx:{minWidth:35},children:(0,n.jsx)(E.default,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})}return ex.propTypes={value:I().number.isRequired},(0,n.jsxs)(L,{children:[(0,n.jsxs)(b.default,{display:"flex",justifyContent:"end",gap:2,mb:3,children:[(0,n.jsx)(R.default,{dataForPut:es,setDataForPutEduYear:eo,getEduYearsData:em}),(0,n.jsx)(h.default,{variant:"contained",onClick:()=>er(!0),children:"Add weekly training file"})]}),(0,n.jsx)(v.default,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:ei,onClose:ec,closeAfterTransition:!0,slots:{backdrop:y.default},slotProps:{backdrop:{timeout:500}},children:(0,n.jsx)(j.Fade,{in:ei,children:(0,n.jsx)(b.default,{sx:F,component:U,children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),m()(en).isoWeek(),m()(en).format("MMMM"),m()(en).format("MM"),m()(en).year(),m()(en).startOf("isoWeek").format("DD"),m()(en).startOf("isoWeek").add(5,"days").format("DD.MM.YYYY"),eh(e)},children:[(0,n.jsxs)(z,{children:[(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c.default,{id:"demo-simple-select-label",children:"O'quv yili"}),(0,n.jsx)(o.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:P,label:"O'quv yili",onChange:e=>W(e.target.value),children:T.length>0&&T.map((e,t)=>(0,n.jsx)(s.default,{value:e.name,children:e.name},t))})]}),(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c.default,{id:"demo-simple-select-label1",children:"Year"}),(0,n.jsx)(o.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:H,label:"Year",onChange:e=>q(e.target.value),children:a.map((e,t)=>(0,n.jsx)(s.default,{value:e,children:e},t))})]}),(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c.default,{id:"demo-simple-select-label1",children:"Type of week"}),(0,n.jsx)(o.default,{size:"small",sx:{width:"200px",borderRadius:"5px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:V,label:"Type of week",onChange:e=>X(e.target.value),children:l.map((e,t)=>(0,n.jsx)(s.default,{value:e.name,onClick:()=>B(e.type),children:(0,n.jsxs)(b.default,{sx:{width:"100%",display:"flex",gap:"5px",alignItems:"center"},children:[(0,n.jsx)(b.default,{sx:{fontSize:"12px",borderRight:"none",width:"40px",padding:"0 3px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"5px",border:"1px solid silver",backgroundColor:"".concat(e.bgColor),fontWeight:"bold"},children:e.shortname}),(0,n.jsx)("p",{children:e.name})]})},t))})]}),(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c.default,{id:"demo-simple-select-label1",children:"Type of education"}),(0,n.jsx)(o.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:Q,label:"Type of education",onChange:e=>Z(e.target.value),children:r.map((e,t)=>(0,n.jsx)(s.default,{value:e,children:e},t))})]}),(0,n.jsx)(f.default,{size:"small",value:J,label:"Week of education",type:"number",sx:{width:"200px"},InputProps:{inputProps:{min:1,max:53}},onChange:e=>$(e.target.value)}),(0,n.jsx)(f.default,{size:"small",label:"Date of the week",type:"week",value:en,sx:{width:"200px"},onChange:e=>ed(e.target.value)}),(0,n.jsxs)(u.default,{children:[(0,n.jsx)(c.default,{id:"demo-simple-select-label1",children:"Data type"}),(0,n.jsx)(o.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:G,label:"Data type",onChange:e=>K(e.target.value),children:p.map((e,t)=>(0,n.jsx)(s.default,{value:e,children:e},t))})]}),(0,n.jsxs)(h.default,{sx:{width:"200px",overflow:"hidden"},size:"sm",variant:"outlined",component:"label",endIcon:(0,n.jsx)(x.BiUpload,{}),children:[(0,n.jsx)("p",{children:(null==ee?void 0:ee.name)?ee.name.length<13?ee.name:ee.name.substring(0,13)+"....":"Choose file "}),(0,n.jsx)("input",{onChange:e=>et(e.target.files[0]),accept:"xml,.xml",type:"file",hidden:!0})]})]}),e>0&&(0,n.jsx)(b.default,{sx:{width:"100%",marginTop:"15px"},children:(0,n.jsx)(ex,{value:e})}),(0,n.jsxs)(b.default,{sx:{marginTop:"15px",width:"100%",display:"flex",justifyContent:"end",gap:"15px"},children:[(0,n.jsx)(h.default,{onClick:ec,variant:"outlined",children:"Cancel"}),(0,n.jsx)(C.default,{title:ea?"Fill in all the fields !":"",placement:"top",children:(0,n.jsx)("span",{children:(0,n.jsx)(h.default,{disabled:ea,endIcon:(0,n.jsx)(g.IoSend,{size:15}),type:"submit",variant:"contained",children:"Send"})})})]})]})})})}),(0,n.jsx)(O.DataGrid,{columns:[{field:"count",headerName:"\u2116",sortable:!0,width:50,align:"center",justifyContent:"center"},{minWidth:100,flex:1,field:"name",headerName:"Name",sortable:!0,align:"center",justifyContent:"center"},{minWidth:100,flex:.8,field:"start",headerName:"Start",sortable:!0,align:"center",justifyContent:"center",renderCell:e=>m()(e.row.start).format("DD.MM.YYYY")},{minWidth:100,flex:.8,field:"end",headerName:"End",sortable:!0,align:"center",renderCell:e=>m()(e.row.end).format("DD.MM.YYYY")},{minWidth:100,flex:.4,field:"action",headerName:"Action",sortable:!0,align:"center",renderCell:e=>(0,n.jsxs)(b.default,{display:"flex",gap:3,children:[(0,n.jsx)(Y.default,{onClick:()=>eu(e.row),children:(0,n.jsx)(M.BsPencilSquare,{size:20,color:"green"})}),(0,n.jsx)(Y.default,{onClick:()=>ef(e.row.id),children:(0,n.jsx)(_.FaTrash,{size:20,color:"red"})})]})}],rows:T,loading:!1,autoHeight:!0,components:{Toolbar:O.GridToolbar},rowsPerPageOptions:[10,30,50,70,100],initialState:{columns:{columnVisibilityModel:{currents:!1,finals:!1,retakeN:!1}},pagination:{pageSize:10}}})]})}}}]);