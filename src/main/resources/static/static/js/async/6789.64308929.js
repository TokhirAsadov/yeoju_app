/*! For license information please see 6789.64308929.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["6789"],{667637:function(e,l,a){"use strict";a.r(l);var n=a("258865");a("333948"),a("931672"),a("359461"),a("2490"),a("857640"),a("409924");var d=a("785893"),t=a("667294"),i=a.n(t),o=a("50533"),u=a("727233"),s=a("316393"),r=a("529258"),c=a("671893"),m=a("807104"),f=a("455693"),h=a("325727"),p=a("489589"),v=a("574113"),x=a("194718"),g=a("797367"),j=a("280471"),b=a("742154"),y=a("332392"),S=a("444025"),I=a("661261"),C=a("15352"),w=a("752861"),T=a("60155"),k=a("339628"),E=a("857024"),A=a("17171"),L=a("572132"),N=a("405434"),R=a("927120"),_=a("992120");function B(){let e=(0,n._)(["\n  ","\n"]);return B=function(){return e},e}function U(){let e=(0,n._)(["\n  padding: 0 10px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 20px;\n  flex-wrap: wrap;\n\n  p {\n    color: ",";\n    font-size: 30px;\n    font-weight: bold;\n    ","\n  }\n  ","\n"]);return U=function(){return e},e}function Y(){let e=(0,n._)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr;\n  gap: 20px;\n  padding: 10px;\n  ","\n  ","\n  ","\n  ","\n  ",""]);return Y=function(){return e},e}function F(){let e=(0,n._)(["\n  width: 100%;\n  padding: 1rem;\n"]);return F=function(){return e},e}let K={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,borderRadius:2,p:3},z=c.default.div(B(),(0,E.extrasmall)({width:"95% !important"})),O=c.default.h1(U(),s.mainColor,(0,E.extrasmall)({textAlign:"center",fontSize:"25px"}),(0,E.extrasmall)({justifyContent:"center"})),G=c.default.div(Y(),(0,E.xlarge)({gridTemplateColumns:"1fr 1fr 1fr  "}),(0,E.large)({gridTemplateColumns:"1fr 1fr 1fr  "}),(0,E.medium)({gridTemplateColumns:"1fr 1fr "}),(0,E.small)({gridTemplateColumns:"1fr 1fr "}),(0,E.extrasmall)({gridTemplateColumns:"1fr "})),H=c.default.div(F());l.default=()=>{let e=["UZBEK","ENGLISH","RUSSIAN"],l=["KUNDUZGI","KECHKI","SIRTQI","MAGISTRATURE"],[a,n]=(0,t.useState)([]),c=[1,2,3,4,5,6],[E,B]=(0,t.useState)([]),[U,Y]=(0,t.useState)(!1),[F,M]=(0,t.useState)(!1),[D,P]=(0,t.useState)([]),W=(0,o.useSelector)(e=>{var l;return null==e?void 0:null===(l=e.educationYear)||void 0===l?void 0:l.educationYear})||null,[Z,q]=(0,t.useState)(null),Q=(0,o.useDispatch)(),{headers:V}=(0,s.getHeaders)(),[J,X]=(0,t.useState)(!0),[$,ee]=(0,t.useState)([]),el={id:null,eduLang:e[0],eduType:l[0],educationYearId:null==W?void 0:W.id,subjectId:null,teacherId:null,level:c[0],groupsIds:[]},[ea,en]=(0,t.useState)(el),ed=()=>{Y(!1),en(el)},et=async()=>{await u.default.get(s.BASE_URL+"/education/educationYearsForSelected",{headers:V}).then(e=>{var l,a,n,d,t;P(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.obj),q(null==e?void 0:null===(n=e.data)||void 0===n?void 0:null===(a=n.obj)||void 0===a?void 0:a[0]),Q((0,_.fetchEducationYear)(null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(d=t.obj)||void 0===d?void 0:d[0]))}).catch(e=>{})},ei=()=>{M(!0),B([]),u.default.get("".concat(s.BASE_URL,"/plan/getTeacherWIthSubjectForPlan/").concat(null==W?void 0:W.id),{headers:V}).then(e=>{var l,a;B(null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(l=a.obj)||void 0===l?void 0:l.sort((e,l)=>e.fullName>l.fullName?1:-1)),M(!1)}).catch(e=>Q((0,r.kafedraTeacherStatisticsFetchingError)(e)))},eo=async e=>{u.default.post("".concat(s.BASE_URL,"/plan/createdPlanByKafedraMudiri"),e,{headers:V}).then(e=>{ei(),L.toast.success("created plan of subject successfully"),ed()}).catch(e=>{})},eu=async()=>{await u.default.get("".concat(s.BASE_URL,"/lesson/getAllLessonByKafedraOwner"),{headers:V}).then(e=>{var l;n(null===(l=e.data)||void 0===l?void 0:l.obj)}).catch(e=>{})},es=async()=>{await u.default.get("".concat(s.BASE_URL,"/group/getGroupsForKafedraMudiri?lang=").concat(null==ea?void 0:ea.eduLang,"&eduType=").concat(null==ea?void 0:ea.eduType,"&level=").concat(null==ea?void 0:ea.level),{headers:V}).then(e=>{var l;ee(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.obj)}).catch(e=>{})};(0,t.useEffect)(()=>{es(),""!==ea.teacherId&&ea.groupsIds.length>0&&""!==ea.subjectId&&""!=ea.level?X(!1):X(!0)},[ea]),(0,t.useEffect)(()=>{et(),eu()},[]),(0,t.useEffect)(()=>{W&&ei()},[W]),(0,t.useEffect)(()=>{(null==D?void 0:D.length)>0&&q(D[0])},[D]);function er(e){let{loading:l=!1}=e;return(0,d.jsxs)(m.Card,{children:[(0,d.jsx)(m.CardHeader,{avatar:l&&(0,d.jsx)(m.Skeleton,{animation:"wave",variant:"circular",width:40,height:40}),action:l&&null,title:l&&(0,d.jsx)(m.Skeleton,{animation:"wave",height:15,width:"80%",style:{marginBottom:6}}),subheader:l&&(0,d.jsx)(m.Skeleton,{animation:"wave",height:15,width:"40%"})}),(0,d.jsx)(m.CardContent,{children:l&&(0,d.jsxs)(i().Fragment,{children:[(0,d.jsx)(m.Skeleton,{animation:"wave",height:15,style:{marginBottom:6}}),(0,d.jsx)(m.Skeleton,{animation:"wave",height:15})]})})]})}return(0,d.jsxs)(H,{children:[(0,d.jsxs)(O,{children:[(0,d.jsx)("p",{children:"Connect group to teacher"}),(0,d.jsx)(x.default,{variant:"contained",endIcon:(0,d.jsx)(N.MdOutlineCreateNewFolder,{}),onClick:()=>{es(),Y(!0)},children:"create group plan"})]}),(0,d.jsxs)(b.default,{sx:{width:"280px",margin:"25px 0",background:"#fff"},children:[(0,d.jsx)(y.default,{id:"demo-simple-select-readonly-label15",children:"Academic year"}),(0,d.jsx)(S.default,{labelId:"demo-simple-select-readonly-label15",id:"demo-simple-select-readonly15",value:(null==Z?void 0:Z.name)||"",onChange:e=>{q(D.find(l=>(null==l?void 0:l.name)===e.target.value))},label:"Academic year",children:null==D?void 0:D.map(e=>(0,d.jsx)(I.default,{value:null==e?void 0:e.name,children:null==e?void 0:e.name},null==e?void 0:e.id))})]}),(0,d.jsx)(G,{children:F?Array.from({length:4}).map((e,l)=>(0,d.jsx)(er,{loading:!0},l)):E.map((e,l)=>{var a,n;return(0,d.jsx)(m.Card,{children:(0,d.jsxs)(m.CardContent,{children:[(0,d.jsxs)(f.default,{display:"flex",gap:2,alignItems:"center",children:[(0,d.jsx)(h.default,{alt:null==e?void 0:e.fullName,src:(null==e?void 0:e.photo)?s.BASE_URL+"/attachment/download/"+(null==e?void 0:null===(a=e.photo)||void 0===a?void 0:a.id):""}),(0,d.jsx)(p.default,{children:null==e?void 0:e.fullName})]}),(0,d.jsx)(f.default,{mt:2,children:(0,d.jsx)("ul",{style:{listStyleType:"none",color:"".concat(s.mainColor),fontWeight:"bold",fontSize:"16px"},children:null==e?void 0:null===(n=e.subjects)||void 0===n?void 0:n.map((e,l)=>(0,d.jsx)("li",{children:null==e?void 0:e.name},l))})})]})},l)})}),(0,d.jsx)(g.default,{open:U,onClose:ed,children:(0,d.jsxs)(f.default,{sx:K,component:z,children:[(0,d.jsxs)(f.default,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,d.jsx)(p.default,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Create group plan"}),(0,d.jsx)(v.default,{onClick:ed,"aria-label":"close",size:"medium",children:(0,d.jsx)(j.CgClose,{})})]}),(0,d.jsxs)(b.default,{sx:{width:"100%",margin:"25px 0"},children:[(0,d.jsx)(y.default,{id:"demo-simple-select-readonly-label",children:"Academic year"}),(0,d.jsx)(S.default,{labelId:"demo-simple-select-readonly-label",id:"demo-simple-select-readonly",value:null==W?void 0:W.name,onChange:e=>{e.target.value!==(null==W?void 0:W.name)&&Q((0,R.educationYearStatisticsFetching)()),Q((0,_.fetchEducationYear)(null==D?void 0:D.find(l=>(null==l?void 0:l.name)===e.target.value)))},label:"Academic year",children:null==D?void 0:D.map(e=>(0,d.jsx)(I.default,{value:null==e?void 0:e.name,children:null==e?void 0:e.name},null==e?void 0:e.id))})]}),(0,d.jsxs)(f.default,{sx:{display:"flex",gap:"20px"},children:[(0,d.jsxs)(b.default,{sx:{width:"100%"},children:[(0,d.jsx)(y.default,{id:"demo-simple-select-readonly-label1",children:"Language"}),(0,d.jsx)(S.default,{labelId:"demo-simple-select-readonly-label1",id:"demo-simple-select-readonly",value:ea.eduLang,label:"Language",onChange:e=>en(l=>({...l,eduLanguage:e.target.value})),children:e.map(e=>(0,d.jsx)(I.default,{value:e,children:e},e))})]}),(0,d.jsxs)(b.default,{sx:{width:"100%"},children:[(0,d.jsx)(y.default,{id:"demo-simple-select-readonly-label1",children:"Type of education"}),(0,d.jsx)(S.default,{labelId:"demo-simple-select-readonly-label1",id:"demo-simple-select-readonly",value:ea.eduType,label:"Type of education",onChange:e=>en(l=>({...l,eduType:e.target.value})),children:l.map(e=>(0,d.jsx)(I.default,{value:e,children:e},e))})]}),(0,d.jsxs)(b.default,{sx:{width:"100%"},children:[(0,d.jsx)(y.default,{id:"demo-simple-select-readonly-label1",children:"\u0421ourse"}),(0,d.jsx)(S.default,{labelId:"demo-simple-select-readonly-label1",id:"demo-simple-select-readonly",value:ea.level,label:"\u0421ourse",onChange:e=>en(l=>({...l,level:e.target.value})),children:c.map(e=>(0,d.jsx)(I.default,{value:e,children:e},e))})]})]}),(0,d.jsxs)(b.default,{sx:{width:"100%",margin:"25px 0"},children:[(0,d.jsx)(y.default,{id:"demo-simple-select-readonly-label1",children:"Teacher"}),(0,d.jsx)(S.default,{labelId:"demo-simple-select-readonly-label1",id:"demo-simple-select-readonly",value:ea.teacherId,label:"Teacher",onChange:e=>en(l=>({...l,teacherId:e.target.value})),children:null==E?void 0:E.map((e,l)=>(0,d.jsx)(I.default,{value:null==e?void 0:e.id,children:l+1+". "+(null==e?void 0:e.fullName)},l))})]}),(0,d.jsxs)(b.default,{sx:{width:"100%"},children:[(0,d.jsx)(y.default,{id:"demo-simple-select-readonly-label1",children:"Subject"}),(0,d.jsx)(S.default,{labelId:"demo-simple-select-readonly-label1",id:"demo-simple-select-readonly",value:ea.subjectId,label:"Subject",onChange:e=>en(l=>({...l,subjectId:e.target.value})),children:null==a?void 0:a.map((e,l)=>(0,d.jsx)(I.default,{value:null==e?void 0:e.subjectId,children:l+1+". "+(null==e?void 0:e.subjectName)},l))})]}),(0,d.jsx)(m.Autocomplete,{multiple:!0,id:"checkboxes-tags-demo",options:$,disableCloseOnSelect:!0,getOptionLabel:e=>e.groupName,value:ea.groupsIds,onChange:(e,l)=>{en(e=>({...e,groupsIds:l}))},isOptionEqualToValue:(e,l)=>e.id===l.id,renderOption:(e,l,a)=>{let{selected:n}=a;return(0,d.jsxs)("li",{...e,children:[(0,d.jsx)(C.default,{icon:(0,d.jsx)(k.default,{fontSize:"small"}),checkedIcon:(0,d.jsx)(A.default,{fontSize:"small"}),style:{marginRight:8},checked:n}),null==l?void 0:l.groupName]})},style:{width:"100%",margin:"25px 0"},renderInput:e=>(0,d.jsx)(w.default,{...e,label:"Groups"})}),(0,d.jsx)(f.default,{mt:2,display:"flex",justifyContent:"end",children:(0,d.jsx)(x.default,{onClick:()=>{var e;eo({...ea,educationYearId:null==W?void 0:W.id,groupsIds:(null==ea?void 0:null===(e=ea.groupsIds)||void 0===e?void 0:e.map(e=>e.id))||[]})},variant:"contained",disabled:J,endIcon:(0,d.jsx)(T.IoSend,{}),children:" save"})})]})})]})}}}]);