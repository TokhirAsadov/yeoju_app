/*! For license information please see 8409.49f21eb1.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["8409"],{23228:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return ne}});var r=e("76150"),i=e("38956"),o=e("58865"),l=e("37098"),a=e("18965");e("91038"),e("78783"),e("66992"),e("33948"),e("41539"),e("21249"),e("57640"),e("9924"),e("92222"),e("39714"),e("15581"),e("34514"),e("2490"),e("57658"),e("91058");var u=e("85893"),c=e("67294"),s=e("30381"),d=e.n(s),f=e("71893"),h=e("28685"),x=e("94718"),p=e("45155"),v=e("27233"),m=e("55693"),g=e("7104"),j=e("79352"),w=e("97367"),y=e("71042"),_=e("50533"),b=e("90650"),k=e("71632"),S=e("37595"),C=e("70231");function F(){var n=(0,o._)(["\n  flex: 3;\n  display: flex;\n  font-size: ",";\n  border: 1px solid ",";\n  align-items: center;\n  justify-content: center;\n  padding: 5px 10px !important;\n"]);return F=function(){return n},n}function Y(){var n=(0,o._)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]);return Y=function(){return n},n}function D(){var n=(0,o._)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 26px;\n  color: ",";\n"]);return D=function(){return n},n}function M(){var n=(0,o._)(["\n  display: flex;\n  gap: 20px;\n"]);return M=function(){return n},n}function z(){var n=(0,o._)(["\n  width: 100%;\n  min-height: 40px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 24px;\n  font-weight: bold;\n  border: 1px solid ",";\n  color: ",";\n  background-color: ",";\n  transition: 0.1s all ease-in;\n\n  &:hover {\n    filter: brightness(.7);\n  }\n\n  &:focus {\n    transform: scale(0.95);\n  }\n"]);return z=function(){return n},n}function E(){var n=(0,o._)(["\n  font-size: 12px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return E=function(){return n},n}function T(){var n=(0,o._)(["\n  width: 100%;\n  min-height: 40px;\n  border: 1px solid ",";\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n"]);return T=function(){return n},n}function N(){var n=(0,o._)(["\n  flex: 1;\n  height: 47px;\n  display: flex;\n  //flex-direction: column;\n"]);return N=function(){return n},n}function A(){var n=(0,o._)(["\n  display: flex;\n  width: 1200px;\n  margin: 0 auto;\n"]);return A=function(){return n},n}function I(){var n=(0,o._)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  font-size: 24px;\n"]);return I=function(){return n},n}function R(){var n=(0,o._)(["\n  width: 100%;\n    height: 70vh;\n  overflow: scroll;\n  display: flex;\n  flex-direction: column;\n  margin-top: 25px !important;\n"]);return R=function(){return n},n}function G(){var n=(0,o._)(["\n  width: 800px;\n  padding: 5px 10px !important;\n"]);return G=function(){return n},n}function H(){var n=(0,o._)(["\n  ","\n  ","\n"]);return H=function(){return n},n}var L=f.default.div(F(),function(n){return n.sz?"12px":"8px"},h.mainColor),U=(0,f.default)(b.motion.button)(Y(),h.mainColor),B=f.default.div(D(),h.mainColor),P=f.default.div(M()),X=f.default.button(z(),h.mainColor,function(n){return n.bg?"#fff":n.color?"green":"red"},function(n){return n.bg?n.bg:"#fff"}),q=f.default.span(E()),J=f.default.div(T(),h.mainColor),K=f.default.div(N()),O=f.default.div(A()),Q=f.default.div(I()),V=f.default.div(R()),W=f.default.div(G()),Z={width:"40px!important",height:"40px!important",fontSize:"24px"},$={border:"none"},nn={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"50vw",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},nt=f.default.div(H(),(0,k.small)({width:"80vw !important"}),(0,k.extrasmall)({width:"90vw !important"})),ne=function(n){var t,e=n.userName,o=n.kafedraId,s=n.date,f=n.forUser,b=n.url,k=n.isTeacher,F=n.colName,Y=(0,i._)((0,c.useState)(s),2),D=Y[0],M=Y[1],z=(0,i._)((0,c.useState)([]),2),E=z[0],T=z[1],N=(0,i._)((0,c.useState)(null),2),A=N[0],I=N[1],R=(0,i._)((0,c.useState)(null),2),G=R[0],H=R[1],ne=(0,i._)((0,c.useState)(null),2),nr=ne[0],ni=ne[1],no=(0,i._)((0,c.useState)(!1),2),nl=no[0],na=no[1],nu=function(n,t){var e;H(new Date(D.getFullYear(),D.getMonth(),n)),ni(null===(e=A[t])||void 0===e?void 0:e.monthly[n]),na(!0)},nc=function(){na(!1)},ns=(0,h.getHeaders)().headers;(0,c.useEffect)(function(){T(function(){return Array.from(Array(d()(D).daysInMonth()).keys()).map(function(n){return n+1})}),ny()},[D]);var nd=(0,i._)((0,c.useState)([]),2),nf=nd[0],nh=nd[1],nx=function(){null==A||A.map(function(n){var t=0;return null==E||E.map(function(e){(null==n?void 0:n.monthly[e])!=null&&t++}),nh(function(n){return(0,l._)(n).concat([t])}),n})};(0,c.useEffect)(function(){I(k?n_:nb)},[]);var np=(0,i._)((0,c.useState)(!1),2),nv=np[0],nm=np[1];(0,c.useEffect)(function(){nh([]),nx()},[nv]);var ng=(0,i._)((0,c.useState)(!0),2),nj=ng[0],nw=ng[1];var ny=(t=(0,r._)(function(){return(0,a._)(this,function(n){switch(n.label){case 0:var t;return nw(!0),[4,v.default.get("".concat(h.BASE_URL+b+o,"&date=").concat((t=D).getFullYear()+"."+(t.getMonth()+1)+"."+t.getDate()),{headers:ns}).then(function(n){var t,e;I(null==n?void 0:null===(e=n.data)||void 0===e?void 0:null===(t=e.obj)||void 0===t?void 0:t.all),nw(!1),nm(function(n){return!n})}).catch(function(n){})];case 1:return n.sent(),[2]}})}),function(){return t.apply(this,arguments)}),n_=(0,_.useSelector)(function(n){var t,e;return null==n?void 0:null===(e=n.rektorTeachers)||void 0===e?void 0:null===(t=e.rektorTeachers)||void 0===t?void 0:t.allTeachers}),nb=(0,_.useSelector)(function(n){var t,e;return null==n?void 0:null===(e=n.rektorStaffs)||void 0===e?void 0:null===(t=e.rektorStaffs)||void 0===t?void 0:t.allStaffs});return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(W,{style:{width:"".concat(f||"100%")},children:[(0,u.jsx)(P,{children:(0,u.jsx)(B,{children:e})}),(0,u.jsx)("hr",{}),(0,u.jsxs)(Q,{children:[(0,u.jsx)(x.default,{style:Z,onClick:function(){M(new Date(D.getFullYear(),D.getMonth()-1))},children:(0,u.jsx)(p.GrFormPrevious,{})}),(0,u.jsx)("input",{type:"month",id:"start",name:"start",min:"2022-04",value:d()(D).format("YYYY-MM"),onChange:function(n){return M(new Date(n.target.value))},style:$}),(0,u.jsx)(x.default,{style:Z,onClick:function(){M(new Date(D.getFullYear(),D.getMonth()+1))},children:(0,u.jsx)(p.GrFormNext,{})})]}),(0,u.jsx)(V,{children:nj?(0,u.jsx)(g.Skeleton,{animation:"wave",width:f||"100%",height:120}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(O,{children:null==E?void 0:E.map(function(n,t){return(0,u.jsxs)(u.Fragment,{children:[1===n&&(0,u.jsx)(L,{sz:!0,children:F},t),(0,u.jsx)(K,{children:(0,u.jsxs)(J,{children:[n,(0,u.jsx)(q,{children:d()(new Date(D.getFullYear(),D.getMonth(),n)).format("ddd")})]})},n),n===(null==E?void 0:E.length)&&(0,u.jsx)(K,{children:(0,u.jsx)(J,{children:"\u2211"})})]})})}),null==A?void 0:A.map(function(n,t){return(0,u.jsxs)(O,{children:[(0,u.jsx)(L,{children:n.fullName}),null==E?void 0:E.map(function(e){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(K,{children:(0,u.jsx)(X,{color:n.monthly[e],onClick:function(){return nu(e,t)},children:new Date(D.getFullYear(),D.getMonth(),e)<=new Date?n.monthly[e]?(0,u.jsx)(C.FaCircleCheck,{}):(0,u.jsx)(C.FaCircleXmark,{}):""})},e),e===(null==E?void 0:E.length)&&(0,u.jsx)(K,{children:(0,u.jsx)(X,{color:0!==nf[t],bg:0!==nf[t]?"green":"red",children:nf[t]})})]})})]})})]})}),(0,u.jsx)(m.default,{display:"flex",justifyContent:"end",mt:1,children:(0,u.jsx)(x.default,{onClick:function(){if(A){var n=[[F].concat((0,l._)(E.map(function(n){return n.toString()})),["Total"])].concat((0,l._)(A.map(function(n){var t=[n.fullName],e=0;return E.forEach(function(r){if(new Date(D.getFullYear(),D.getMonth(),r)<=new Date){var i=n.monthly[r]?"1":"0";t.push(i),e+=parseInt(i)}else t.push("")}),t.push(e.toString()),t}))),t=S.utils.aoa_to_sheet(n),e=S.utils.book_new();S.utils.book_append_sheet(e,t,"Sheet1"),S.writeFile(e,"exported_data.xlsx")}},variant:"contained",children:"Export"})}),(0,u.jsx)(w.default,{open:nl,onClose:nc,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,u.jsxs)(m.default,{sx:nn,component:nt,children:[(0,u.jsx)(U,{onClick:nc,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,u.jsx)(j.RiCloseLine,{})}),(0,u.jsx)(y.default,{time:G,item:nr})]})})]})})}}}]);