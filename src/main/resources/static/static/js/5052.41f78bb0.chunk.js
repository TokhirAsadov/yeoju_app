"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[5052],{75052:function(n,e,t){t.r(e);var o,r,i,a,l,s,d,c,u,p,f,x,h,g,m,v,Z,b,E,y,j,w=t(30168),A=t(1413),C=t(29439),S=t(72791),k=t(17939),P=t(27301),_=t(55294),T=t(56960),R=t(56355),L=t(59434),D=t(95173),H=t(24518),z=t(7692),I=t(16871),N=t(64554),O=t(80184),q=k.ZP.div(o||(o=(0,w.Z)(["\n","\n"])),(0,D.qD)({margin:"0  0 0 auto !important"})),B=k.ZP.span(r||(r=(0,w.Z)(["\n  width: 100%;\n  height: 35px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-bottom-right-radius: 10px;\n  border-top-right-radius: 10px;\n  color: #ffffff;\n  border: none;\n\n  &:hover {\n    filter: brightness(1.1);\n  }\n\n"])),P.Lr),F=k.ZP.input(i||(i=(0,w.Z)(["\n  width: 125px;\n  height: 35px;\n  background: white;\n  padding-left: 5px;\n  font-size: 18px;\n  padding-right: 10px;\n  border-radius: 10px;\n  cursor: pointer;\n  color: ",";\n  margin-left: 5px !important;\n  border: none;\n\n  &::placeholder {\n    font-size: 14px;\n    color: ",";\n  }\n\n  &:focus {\n    outline: none;\n  }\n"])),P.Lr,P.HN),G=k.ZP.span(a||(a=(0,w.Z)(["\n  font-size: 14px;\n"]))),M=k.ZP.div(l||(l=(0,w.Z)(["\n  width: 200px;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  padding: 5px 10px !important;\n  border-bottom: 1px solid lightgray;\n  cursor: pointer;\n\n  &::before {\n\n  }\n"]))),U=k.ZP.div(s||(s=(0,w.Z)(["\n  max-height: 300px;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 45px;\n  left: 20px;\n  margin-top: 3px !important;\n  border: 1px solid lightgray;\n  border-radius: 5px;\n  overflow: hidden;\n  overflow-y: scroll;\n  opacity: ",";\n"])),(function(n){return n.opacity})),K=k.ZP.div(d||(d=(0,w.Z)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n"]))),W=k.ZP.div(c||(c=(0,w.Z)(["\n  width: 150px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 10px;\n  background-color: #fff;\n"]))),J=k.ZP.section(u||(u=(0,w.Z)(["\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  ","\n"])),(0,D.qD)({flexDirection:"column"})),Q=k.ZP.div(p||(p=(0,w.Z)(["\n  position: absolute;\n  top: 45px;\n  z-index: 5;\n"]))),V=k.ZP.button(f||(f=(0,w.Z)(["\n  padding: 4px 35px;\n  background-color: ",";\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-size: 20px;\n  box-shadow: rgba(99, 99, 99, 0.2) 0 2px 8px 0;\n\n  ","\n  &:hover {\n    filter: brightness(1.1);\n  }\n\n"])),P.Lr,(0,D.qD)({padding:"6px 45px",margin:"35px auto"})),X=k.ZP.label(x||(x=(0,w.Z)(["\n  color: ",";\n  margin-left: 10px !important;\n  cursor: pointer;\n"])),P.Lr),Y=k.ZP.input.attrs({type:"radio"})(h||(h=(0,w.Z)(["\n  height: 22px;\n  width: 22px;\n  vertical-align: middle;\n  cursor: pointer;\n"]))),$=k.ZP.div(g||(g=(0,w.Z)(["\n  display: flex;\n  position: relative;\n"]))),nn=k.ZP.div(m||(m=(0,w.Z)(["\n  width: 150px;\n  padding: 4px 15px !important;\n  background-color: #fff;\n  border-radius: 10px;\n  font-size: 20px;\n  vertical-align: middle;\n  box-shadow: rgba(99, 99, 99, 0.2) 0 2px 8px 0;\n"]))),en=k.ZP.div(v||(v=(0,w.Z)(["\n  margin-left: 20px;\n  margin-right: 20px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  ","\n"])),(0,D.qD)({margin:0})),tn=k.ZP.textarea(Z||(Z=(0,w.Z)(["\n  width: 100%;\n  min-height: 200px;\n  padding: 5px 10px !important;\n  border: none;\n\n  &:focus {\n    outline: none;\n  }\n"]))),on=k.ZP.span(b||(b=(0,w.Z)(["\n  border-radius: 5px;\n  padding: 0 5px !important;\n  color: ",";\n  font-size: 20px;\n"])),P.Lr),rn=k.ZP.div(E||(E=(0,w.Z)(["\n  width: 95%;\n  height: 50%;\n  min-height: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #E6E8EB;\n  border-radius: 10px;\n  background-color: #fff;\n  position: relative;\n  margin: 20px auto;\n  overflow: hidden;\n  box-shadow: 0 3px 20px rgb(0 0 0 / 4%);\n"]))),an=k.ZP.form(y||(y=(0,w.Z)(["\n  width: 100%;\n"]))),ln=k.ZP.div(j||(j=(0,w.Z)(["\n  padding: 1rem !important;\n"])));e.default=function(){var n=(0,L.v9)((function(n){var e;return null===n||void 0===n||null===(e=n.section)||void 0===e?void 0:e.section})),e=(0,S.useState)("ALL_TEACHER"),t=(0,C.Z)(e,2),o=t[0],r=t[1],i=(0,S.useState)(""),a=(0,C.Z)(i,2),l=a[0],s=a[1],d=(0,S.useState)(""),c=(0,C.Z)(d,2),u=c[0],p=c[1],f=(0,I.s0)(),x=(0,S.useState)([]),h=(0,C.Z)(x,2),g=h[0],m=h[1],v=(0,S.useState)(""),Z=(0,C.Z)(v,2),b=Z[0],E=Z[1],y=(0,S.useState)(""),j=(0,C.Z)(y,2),w=j[0],k=j[1],D=(0,S.useState)({messageBody:b,smsType:o,status:"SENDING",userId:w}),sn=(0,C.Z)(D,2),dn=sn[0],cn=sn[1];(0,S.useEffect)((function(){if(l.length<3)m([]);else{var n=localStorage.getItem(P.o3),e={Authorization:P.iv+n,"Access-Control-Allow-Origin":"*"};_.Z.get(P._n+P.rK.GET_USER_SEARCHING_FOR_DEKAN+l,{headers:e}).then((function(n){var e;0!==(null===(e=n.data)||void 0===e?void 0:e.length)?m((function(){return n.data})):m([])})).catch((function(n){console.log(n)}))}}),[l]),(0,S.useEffect)((function(){cn((function(n){return(0,A.Z)((0,A.Z)({},n),{},{messageBody:b})}))}),[b]),(0,S.useEffect)((function(){cn((function(n){return(0,A.Z)((0,A.Z)({},n),{},{smsType:o})}))}),[o]),(0,S.useEffect)((function(){cn((function(n){return(0,A.Z)((0,A.Z)({},n),{},{userId:w})}))}),[w]);var un=function(){var n=localStorage.getItem(P.o3),e={Authorization:P.iv+n,"Access-Control-Allow-Origin":"*"};_.Z.post(P._n+P.rK.SMS_CREATE,dn,{headers:e}).then((function(n){200===n.status&&T.Am.success("Sending SMS successfully!")})).catch((function(n){T.Am.warning("Error..."),console.log(n)}))};return(0,O.jsxs)(ln,{children:[(0,O.jsxs)(N.Z,{sx:{display:"flex",justifyContent:"space-between",gap:"15px",alignItems:"center",flexWrap:"wrap"},children:[(0,O.jsxs)(on,{children:["Message: ","TEACHER"===o?o+" "+u:o]}),(0,O.jsx)(H.Z,{component:q,onClick:function(){return f("smsHistory")},variant:"contained",endIcon:(0,O.jsx)(z.DBs,{size:25}),children:"message history"})]}),(0,O.jsxs)(an,{onSubmit:function(n){return function(n){switch(n.preventDefault(),o){case"ALL_TEACHER":k(null),""===b?alert("Error, empty message of sms..."):un();break;case"TEACHER":""!==w&&""!==b?un():alert("Error, empty message of sms or do not choose teacher...");break;default:console.log("default")}}(n)},children:[(0,O.jsx)(rn,{children:(0,O.jsx)(tn,{name:b,value:b,onChange:function(n){return E(n.target.value)}})}),(0,O.jsxs)(J,{children:[(0,O.jsxs)(en,{children:[(0,O.jsxs)(nn,{children:[(0,O.jsx)(Y,{id:"all",name:"type",checked:"ALL_TEACHER"===o,onChange:function(){return r((function(){return"ALL_TEACHER"}))}}),(0,O.jsx)(X,{htmlFor:"all",children:"All"})]}),(0,O.jsxs)($,{children:[(0,O.jsxs)(nn,{children:[(0,O.jsx)(Y,{id:"teacher",name:"type",onChange:function(){return r((function(){return"TEACHER"}))}}),(0,O.jsx)(X,{htmlFor:"teacher",children:"Teacher"})]}),(0,O.jsx)(Q,{children:"TEACHER"===o&&(0,O.jsxs)(K,{children:[(0,O.jsxs)(W,{children:[(0,O.jsx)(F,{value:l,onChange:function(n){return s(n.target.value)},placeholder:"UserID or Passport"}),(0,O.jsx)(B,{onClick:function(){if(console.log(l," search  ================================  handleSearch"),""!==l&&l.length>2){var e=localStorage.getItem(P.o3),t={Authorization:P.iv+e,"Access-Control-Allow-Origin":"*"};_.Z.get(P._n+P.bU.GET_TEACHERS_FOR_SEND_SMS+"?search="+l+"&kafedraId="+(null===n||void 0===n?void 0:n.id),{headers:t}).then((function(n){var e;0!==(null===(e=n.data)||void 0===e?void 0:e.length)?m((function(){return n.data})):(p(""),alert("\u26a0\ufe0f Not fount user!...\ud83d\ude14"))})).catch((function(n){console.log(n)}))}else alert("Enter search param")},children:(0,O.jsx)(R.U41,{})})]}),(0,O.jsx)(U,{opacity:g.length>0?1:0,style:{display:"block",position:"absolute",top:"35px"},children:null===g||void 0===g?void 0:g.map((function(n){return(0,O.jsx)(M,{onClick:function(e){e.preventDefault(),k(null===n||void 0===n?void 0:n.id),p(null===n||void 0===n?void 0:n.fullName),s("")},children:(0,O.jsx)(G,{children:null===n||void 0===n?void 0:n.fullName})},null===n||void 0===n?void 0:n.id)}))})]})})]})]}),(0,O.jsx)(V,{onClick:function(){return console.log(dn,"sms")},children:"Send"})]})]})]})}}}]);
//# sourceMappingURL=5052.41f78bb0.chunk.js.map