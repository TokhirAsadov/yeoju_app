"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[8590],{98590:function(n,e,t){t.r(e),t.d(e,{default:function(){return cn}});var i,o,r=t(30168),l=t(29439),d=t(72791),a=t(17939),s=t(59434),u=t(68014),c=t(27301),p=t(1413),f=t(13496),x=t(55294),h=t(3331),v=t(56253),m=t(34197),g=t(89704),w=t(58766),b=t(72426),y=t.n(b),Z=t(84373),j=t(80184);function S(n){var e=n.data,t=n.setExpanded,i=n.openColor,o=n.isDefault,r=n.title,l=n.openTable,d=[{field:"id",headerName:"ID",width:40,editable:!1},{field:"fullName",headerName:"Name",type:"string",width:300,editable:!1,renderCell:function(n){var e,t,i;return(0,j.jsxs)(B,{children:[(0,j.jsx)("img",{src:null!==n&&void 0!==n&&null!==(e=n.row)&&void 0!==e&&e.photo?c._n+"/attachment/download/"+(null===n||void 0===n||null===(t=n.row)||void 0===t||null===(i=t.photo)||void 0===i?void 0:i.id):"",width:"50px",height:"50px",alt:null===n||void 0===n?void 0:n.value,style:{borderRadius:"50%"}}),(0,j.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:null===n||void 0===n?void 0:n.value})]})}},{field:"login",headerName:"Login",type:"string",width:300,editable:!1},{field:"email",headerName:"Email",type:"string",width:300,editable:!1},{field:"rfid",headerName:"RFID",type:"string",width:300,editable:!1},{field:"passport",headerName:"Passport",type:"string",width:300,editable:!1},{field:"time",headerName:"Kelgan vaqti \n".concat(y()(new Date).format("DD.MM.YYYY")),type:"string",width:180,editable:!1,renderCell:function(n){var e,t,i;return console.log(n),console.log(y()(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.time).format("DD.MM.YYYY HH:mm:ss")," ---- time bugun "),(0,j.jsx)(B,{children:null===(null===n||void 0===n||null===(t=n.row)||void 0===t?void 0:t.time)?"-":y()(null===n||void 0===n||null===(i=n.row)||void 0===i?void 0:i.time).format("DD.MM.YYYY HH:mm:ss")})}},{field:"positions",headerName:"Shtat birligi va lavozimi",type:"string",width:300,editable:!1}];return(0,j.jsxs)(v.E.div,{className:"KafedraExpandedCard",style:{background:"".concat(o?"#0096DB":i),zIndex:"100",minHeight:"300px",position:"absolute",display:"flex"},transition:{duration:"0.2"},layoutId:"kafedraId",children:[(0,j.jsx)("div",{onClick:t,style:{width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",alignSelf:"flex-end",cursor:"pointer",color:"white",backgroundColor:"rgba(255,255,255,0.5)"},children:(0,j.jsx)(Z.QAE,{})}),(0,j.jsxs)("span",{children:[r," - ",null===e||void 0===e?void 0:e.length]}),(0,j.jsx)(T,{children:l?(0,j.jsx)(g._,{density:"comfortable",style:{width:"100%",minHeight:"600px!important",borderRadius:"1rem",zIndex:"1000",backgroundColor:"#fff"},columns:d,rows:e,components:{Toolbar:w.n},autoHeight:!0,pageSize:5,initialState:(0,p.Z)((0,p.Z)({},e.initialState),{},{columns:{columnVisibilityModel:{id:!1,login:!1,card:!1,rfid:!1,email:!1,passport:!1}}})}):(0,j.jsx)(m.Z,{})})]})}var C,k,P,I,z,D,E,N,L,Y,R,M,H,K,_,T=a.ZP.div(i||(i=(0,r.Z)(["\n  width: 100%;\n  min-height: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 1.75rem 0 !important;\n  border-radius: 1rem;\n"]))),B=a.ZP.div(o||(o=(0,r.Z)(["\n  width: 100%;\n  display: flex;\n  gap: 10px;\n  margin: 5px !important;\n"]))),A=a.ZP.div(C||(C=(0,r.Z)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),q=function(n){var e=n.series,t=n.isSpinner,i=n.s,o=(0,d.useState)(!1),r=(0,l.Z)(o,2),a=r[0],u=r[1],g=(0,d.useState)(""),w=(0,l.Z)(g,2),b=w[0],y=w[1],Z=(0,d.useState)(!1),C=(0,l.Z)(Z,2),k=C[0],P=C[1],I=(0,d.useState)(""),z=(0,l.Z)(I,2),D=z[0],E=z[1],N=(0,d.useState)(!1),L=(0,l.Z)(N,2),Y=L[0],R=L[1],M=(0,s.v9)((function(n){var e,t;return i?null===n||void 0===n||null===(e=n.secondBulim)||void 0===e?void 0:e.secondBulim:null===n||void 0===n||null===(t=n.bulim)||void 0===t?void 0:t.bulim})),H=(0,d.useState)({chart:{type:"donut",width:380,events:{dataPointSelection:function(n,e,t){1===t.dataPointIndex?P(!1):P(!0),1===t.dataPointIndex?E("Kelmaganlar"):E("Kelganlar"),R(!1),O(t.dataPointIndex,null===M||void 0===M?void 0:M.id),u(!0)}}},labels:["Kelganlar","Kelmaganlar"],title:{text:"Statistics Of Today",style:{fontSize:"12px",fontWeight:"bold",fontFamily:void 0,color:"".concat(c.Lr)}},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}],colors:[function(n){n.value,n.seriesIndex,n.w;return"".concat(c.Lr)},function(n){var e=n.value,t=(n.seriesIndex,n.w);return e<t.config.series[0]/5?(y("#fff700"),"#fff700"):e>t.config.series[0]/5&&e<t.config.series[0]/2?(y("#f88017"),"#f88017"):(y("#f00"),"#f00")}],plotOptions:{pie:{expandOnClick:!1,size:400,height:"5%",donut:{size:"55%",labels:{show:!0,total:{show:!0,showAlways:!0,fontSize:"18px",color:"".concat(c.Lr)}}}}}}),K=(0,l.Z)(H,2),_=K[0],T=(K[1],(0,d.useState)([])),B=(0,l.Z)(T,2),q=B[0],F=B[1];(0,d.useEffect)((function(){console.log(i," <- s")}),[i]);var O=function(n){x.Z.get(c._n+"/section/getStatisticsForSectionDashboard?index="+n+"&sectionId="+(null===M||void 0===M?void 0:M.id)).then((function(n){var e,t;F(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(t=e.obj)||void 0===t?void 0:t.map((function(n,e){return(0,p.Z)((0,p.Z)({},n),{},{id:e})}))),R(!0)})).catch((function(n){console.log(n)}))};return(0,j.jsx)(h.s,{children:a?(0,j.jsx)(S,{setExpanded:function(){return u(!1)},isDefault:k,openColor:b,title:D,openTable:Y,data:q}):(0,j.jsx)(v.E.div,{layoutId:"kafedraId",style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:(0,j.jsx)(A,{children:t?(0,j.jsx)(m.Z,{}):(0,j.jsx)(f.Z,{options:_,series:e,type:"donut",width:"350"})})})})},F=t(88447),O=t(64554),U=t(17425),Q=t(19867),V=t(95173),W={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"70vw",height:"95vh",bgcolor:"#f7f7f7",boxShadow:24,borderRadius:3,p:4},G=a.ZP.div(k||(k=(0,r.Z)(["\n  ","\n  ","\n  ","\n"])),(0,V.IV)({width:"85vw !important",padding:"20px !important"}),(0,V.yG)({width:"90vw !important",padding:"20px !important"}),(0,V.qD)({width:"92vw !important",height:"90vh !important",padding:"15px !important"})),J=(0,a.ZP)(v.E.button)(P||(P=(0,r.Z)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"])),c.Lr),X=a.ZP.div(I||(I=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n  margin-right: 10px;\n  font-size: 60px;\n  font-weight: 200;\n"]))),$=a.ZP.span(z||(z=(0,r.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-size: 30px;\n  font-weight: 500;\n"]))),nn=a.ZP.span(D||(D=(0,r.Z)(["\n  width: 100px;\n  height: 100px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 40px;\n  background: #f7f7f7;\n  border-radius: 50%;\n"]))),en=a.ZP.span(E||(E=(0,r.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  font-size: 40px;\n"]))),tn=a.ZP.div(N||(N=(0,r.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 50px;\n  flex-direction: column;\n  padding: 5px 20px!important;\n  margin-top: 10px!important;\n"]))),on=a.ZP.div(L||(L=(0,r.Z)(["\n  width: 450px;\n  border-radius: 0.75rem;\n  background-color: #fff;\n  min-height: 250px;\n  color: ",";\n  cursor: pointer;\n\n  &:hover{\n    -webkit-box-shadow: 2px 3px 5px 1px rgba(81, 159, 219, 0.43);\n    -moz-box-shadow: 2px 3px 5px 1px rgba(81, 159, 219, 0.43);\n    box-shadow: 2px 3px 5px 1px rgba(81, 159, 219, 0.43);\n  }\n"])),c.Lr),rn=a.ZP.div(Y||(Y=(0,r.Z)(["\n  width: 450px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 0.75rem;\n  background-color: #fff;\n  min-height: 250px;\n  \n  &:hover{\n    -webkit-box-shadow: 2px 3px 5px 1px rgba(81, 159, 219, 0.43);\n    -moz-box-shadow: 2px 3px 5px 1px rgba(81, 159, 219, 0.43);\n    box-shadow: 2px 3px 5px 1px rgba(81, 159, 219, 0.43);\n  }\n"]))),ln=a.ZP.div(R||(R=(0,r.Z)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  overflow: scroll;\n  flex-wrap: wrap;\n  gap: 20px;\n"]))),dn=a.ZP.span(M||(M=(0,r.Z)(["\n  display: block;\n  color: ",";\n"])),c.Lr),an=a.ZP.div(H||(H=(0,r.Z)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: 300px auto;\n  gap: 20px;\n  margin-bottom: 20px!important;\n"]))),sn=a.ZP.div(K||(K=(0,r.Z)(["\n  font-size: 24px;\n  color: ",";\n"])),c.Lr),un=a.ZP.div(_||(_=(0,r.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  border-radius: 10px;\n  margin-top: 10px!important;\n  padding: 5px 10px!important;\n"]))),cn=function(n){var e=n.s,t=(0,s.v9)((function(n){var t,i;return e?null===n||void 0===n||null===(t=n.secondBulim)||void 0===t?void 0:t.secondBulim:null===n||void 0===n||null===(i=n.bulim)||void 0===i?void 0:i.bulim})),i=(0,d.useState)([20,8]),o=(0,l.Z)(i,2),r=o[0],a=o[1],p=(0,d.useState)(!0),f=(0,l.Z)(p,2),h=f[0],v=f[1],m=(0,d.useState)(!1),g=(0,l.Z)(m,2),w=g[0],b=g[1],y=(0,c.wU)().headers;(0,d.useEffect)((function(){x.Z.get(c._n+"/section/getStaffComeCountTodayStatistics?s="+e,{headers:y}).then((function(n){var e,t=null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.obj,i=[];null!==(null===t||void 0===t?void 0:t.comeCount)?i.push(null===t||void 0===t?void 0:t.comeCount):i.push(0),null!==(null===t||void 0===t?void 0:t.comeCount)?i.push((null===t||void 0===t?void 0:t.allCount)-(null===t||void 0===t?void 0:t.comeCount)):i.push(null===t||void 0===t?void 0:t.allCount),a((function(){return i})),v(!1)})).catch((function(n){console.log(n)})),console.log(r)}),[]);var Z=function(){b(!1)};return(0,j.jsx)(un,{children:(0,j.jsxs)(sn,{children:[(0,j.jsx)(an,{children:(0,j.jsx)(dn,{children:null===t||void 0===t?void 0:t.name})}),(0,j.jsxs)(ln,{children:[(0,j.jsx)(on,{onClick:function(){t&&b(!0)},children:(0,j.jsxs)(tn,{children:[(0,j.jsx)(en,{children:(0,j.jsx)(nn,{children:(0,j.jsx)(u.q_v,{})})}),(0,j.jsxs)($,{children:["Staffs",(0,j.jsx)(X,{children:t&&null!==r&&void 0!==r&&r.reduce((function(n,e){return n+e}))?null===r||void 0===r?void 0:r.reduce((function(n,e){return n+e})):0})]})]})}),(0,j.jsx)(F.Z,{open:w,onClose:Z,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,j.jsxs)(O.Z,{sx:W,component:G,children:[(0,j.jsx)(J,{onClick:Z,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,j.jsx)(U.eSQ,{})}),(0,j.jsx)("h2",{style:{textAlign:"center",color:c.Lr},children:"Staff"}),(0,j.jsx)(Q.default,{s:e})]})}),(0,j.jsx)(rn,{children:null!==r&&void 0!==r&&r.reduce((function(n,e){return n+e}))?(0,j.jsx)(q,{s:e,series:r,isSpinner:h}):"Not exists teachers"})]})]})})}},3331:function(n,e,t){t.d(e,{s:function(){return h}});var i=t(5646),o=t(72791),r=t(81421),l=t(29388),d=t(7497),a=(0,o.createContext)(null),s=t(66252),u=function(n){return!n.isLayoutDirty&&n.willUpdate(!1)};function c(){var n=new Set,e=new WeakMap,t=function(){return n.forEach(u)};return{add:function(i){n.add(i),e.set(i,i.addEventListener("willUpdate",t))},remove:function(i){var o;n.delete(i),null===(o=e.get(i))||void 0===o||o(),e.delete(i),t()},dirty:t}}var p=function(n){return!0===n},f=function(n){var e,t,i=n.children,r=n.id,u=n.inheritId,f=n.inherit,x=void 0===f||f;void 0!==u&&(x=u);var h=(0,o.useContext)(d.p),v=(0,o.useContext)(a),m=(0,l.CR)((0,s.N)(),2),g=m[0],w=m[1],b=(0,o.useRef)(null),y=null!==(e=h.id)&&void 0!==e?e:v;null===b.current&&(function(n){return p(!0===n)||"id"===n}(x)&&y&&(r=r?y+"-"+r:y),b.current={id:r,group:p(x)&&null!==(t=null===h||void 0===h?void 0:h.group)&&void 0!==t?t:c()});var Z=(0,o.useMemo)((function(){return(0,l.pi)((0,l.pi)({},b.current),{forceRender:g})}),[w]);return o.createElement(d.p.Provider,{value:Z},i)},x=0,h=function(n){var e=n.children;return o.useEffect((function(){(0,i.K)(!1,"AnimateSharedLayout is deprecated: https://www.framer.com/docs/guide-upgrade/##shared-layout-animations")}),[]),o.createElement(f,{id:(0,r.h)((function(){return"asl-".concat(x++)}))},e)}},66252:function(n,e,t){t.d(e,{N:function(){return d}});var i=t(29388),o=t(32968),r=t(72791),l=t(5328);function d(){var n=(0,l.t)(),e=(0,i.CR)((0,r.useState)(0),2),t=e[0],d=e[1],a=(0,r.useCallback)((function(){n.current&&d(t+1)}),[t]);return[(0,r.useCallback)((function(){return o.ZP.postRender(a)}),[a]),t]}},5328:function(n,e,t){t.d(e,{t:function(){return r}});var i=t(72791),o=t(92199);function r(){var n=(0,i.useRef)(!1);return(0,o.L)((function(){return n.current=!0,function(){n.current=!1}}),[]),n}}}]);
//# sourceMappingURL=8590.5fc56548.chunk.js.map