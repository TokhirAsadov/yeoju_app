"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[1265],{81265:function(e,n,t){t.r(n),t.d(n,{default:function(){return $}});var o,a,i,r,l,c,s,d,u=t(30168),f=t(1413),h=t(29439),p=t(72791),m=t(17939),g=t(56355),x=t(1582),Z=t(57621),j=t(39504),b=t(89704),v=t(58766),C=t(27301),w=t(64554),y=t(24518),S=t(13400),k=t(58617),D=t(88447),I=t(40071),z=t(20890),A=t(95173),F=t(55294),P=t(56960),U=t(48432),T=t(48550),O=t(80184),_=function(e){var n=e.closeBtnFn,t=e.fetchData,o=e.putData,a=o||{studentId:"",subject:"",forms:"",datas:"",times:"",rooms:""},i=(0,p.useState)(a),r=(0,h.Z)(i,2),l=r[0],c=r[1];return(0,O.jsxs)(N,{children:[(0,O.jsxs)(E,{children:[(0,O.jsx)(T.Z,{fullWidth:!0,disabled:!0,label:"StudentId",value:l.studentId,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{studentId:e.target.value})}))}}),(0,O.jsx)(T.Z,{fullWidth:!0,label:"Subject",value:l.subject,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{subject:e.target.value})}))}}),(0,O.jsx)(T.Z,{fullWidth:!0,label:"Form",value:l.forms,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{forms:e.target.value})}))}}),(0,O.jsx)(T.Z,{fullWidth:!0,label:"Data",value:l.datas,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{datas:e.target.value})}))}}),(0,O.jsx)(T.Z,{fullWidth:!0,label:"Time",value:l.times,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{times:e.target.value})}))}}),(0,O.jsx)(T.Z,{fullWidth:!0,label:"Room",value:l.rooms,onChange:function(e){return c((function(n){return(0,f.Z)((0,f.Z)({},n),{},{rooms:e.target.value})}))}})]}),(0,O.jsxs)(x.Z,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,O.jsx)(y.Z,{variant:"outlined",onClick:n,children:"Cancel"}),(0,O.jsx)(y.Z,{variant:"contained",onClick:function(){var e,a=!0;for(var i in l)if(""===l[i]){a=!1;break}a?(console.log(l),o?(e=l,F.Z.put(C._n+"/workOtherService/updateSingleFinal",e).then((function(e){console.log(e),P.Am.success("Successfully updated"),t(),n()})).catch((function(e){console.log(e),P.Am.error("Error updated")}))):function(e){F.Z.post(C._n+"/workOtherService/saveSingleFinal",e).then((function(e){console.log(e),P.Am.success("Successfully saved"),t(),n()})).catch((function(e){console.log(e),P.Am.error("Error saving")}))}(l)):P.Am.error("Please fill in all the fields")},children:o?"update":"save"})]})]})},E=m.ZP.div(o||(o=(0,u.Z)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 20px;\n  margin-bottom: 20px;\n  ","\n"])),(0,A.qD)({gridTemplateColumns:"1fr"})),N=m.ZP.div(a||(a=(0,u.Z)(["\n  margin: 20px 0;\n\n"]))),W=(0,p.memo)(_),R=t(78820),L=t(52739),M=t(13239),B=m.ZP.div(i||(i=(0,u.Z)(["\n  position: relative;\n  width: 95%;\n  height: 30px;\n  border-radius: 7px;\n  overflow: hidden;\n\n  .progress-bar {\n    background-color: ",";\n    color: #fff;\n    text-align: center;\n    line-height: 30px;\n    width: 0;\n    position: absolute;\n    transition: width 0.1s;\n  }\n"])),C.Lr),q=function(e){var n=e.saveFileUrl,t=e.urlBase,o=e.fetchData,a=e.titleFile,i=(0,p.useState)(!1),r=(0,h.Z)(i,2),l=r[0],c=r[1],s=(0,p.useState)(0),d=(0,h.Z)(s,2),u=(d[0],d[1]);return(0,O.jsxs)(w.Z,{display:"flex",justifyContent:"end",children:[(0,O.jsxs)(x.Z,{direction:"row",spacing:2,children:[(0,O.jsxs)(y.Z,{startIcon:(0,O.jsx)(R.IEK,{}),variant:"contained",component:"label",onChange:function(e){c(!0);var t=e.target.files[0],a=C._n+n,i=localStorage.getItem(C.o3),r={headers:{"Content-Type":"multipart/form-data",Authorization:C.iv+i,"Access-Control-Allow-Origin":"*"},onUploadProgress:function(e){u(Math.round(100*e.loaded/e.total))}},l=new FormData;l.append("file",t),console.log(t),F.Z.post(a,l,r).then((function(e){console.log(e),P.Am.success("Uploaded file successfully"),o()})).catch((function(e){console.log(e),P.Am.error("Upload failed")})).finally((function(){return c(!1)})),e.target.value=null},children:["import file",(0,O.jsx)("input",{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"file",hidden:!0})]}),(0,O.jsx)(y.Z,{variant:"contained",onClick:function(){for(var e=atob(t),n=new Uint8Array(e.length),o=0;o<e.length;++o)n[o]=e.charCodeAt(o);var i=new Blob([n],{type:"application/xlsx"}),r=document.createElement("a");r.href=URL.createObjectURL(i),r.download="".concat(a,".xlsx"),document.body.appendChild(r),r.click(),document.body.removeChild(r)},children:"example file"})]}),(0,O.jsx)(L.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:l,children:(0,O.jsx)(B,{children:(0,O.jsx)(M.Z,{color:"inherit"})})})]})},G=t(71986),H=m.ZP.div(r||(r=(0,u.Z)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    h4 {\n        color: black;\n    }\n\n    h5 {\n        color: red;\n    }\n\n"]))),V=m.ZP.button(l||(l=(0,u.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 5px;\n    border-radius: 50%;\n    border: none;\n    background-color: ",";\n    color: white;\n    font-size: 12px;\n"])),C.Lr),K={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},X={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:700,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},J=m.ZP.div(c||(c=(0,u.Z)(["\n    ","\n"])),(0,A.qD)({width:"95% !important"})),Q=m.ZP.div(s||(s=(0,u.Z)(["\n    display: flex;\n    align-items: center;\n    color: ",";\n    gap: 5px;\n\n    h1 {\n        margin: 0;\n        font-size: 30px;\n        font-weight: bold;\n\n    }\n"])),C.Lr),Y=m.ZP.div(d||(d=(0,u.Z)(["\n    width: 100%;\n    padding: 1rem;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]))),$=function(){var e=G.Cy,n=(0,p.useState)(1e3),t=(0,h.Z)(n,2),o=t[0],a=t[1],i=(0,p.useState)(null),r=(0,h.Z)(i,2),l=r[0],c=r[1],s=[{field:"count",headerName:"\u2116",sortable:!0,width:50,align:"center",justifyContent:"center"},{minWidth:100,flex:.5,field:"studentId",headerName:"Student id",sortable:!0,align:"center",justifyContent:"center"},{minWidth:200,flex:1,field:"subject",headerName:"Subject",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.4,field:"forms",headerName:"Form",sortable:!0,align:"center",justifyContent:"center"},{flex:.3,field:"datas",headerName:"Data",editable:!1,sortable:!1,align:"center"},{flex:.3,field:"times",headerName:"Time",editable:!1,sortable:!1,align:"center"},{flex:.3,field:"rooms",headerName:"Room",editable:!1,sortable:!1,align:"center"},{flex:.4,field:"action",headerName:"Action",editable:!1,sortable:!1,align:"center",renderCell:function(e){return(0,O.jsx)(x.Z,{direction:"row",spacing:2,justifyContent:"center",children:(0,O.jsx)(S.Z,{"aria-label":"change",color:"success",onClick:function(){return fe(e.row)},children:(0,O.jsx)(k.z2D,{})})})}}],d=(0,C.wU)().headers,u=(0,p.useState)([]),m=(0,h.Z)(u,2),A=m[0],T=m[1],_=(0,p.useState)(!1),E=(0,h.Z)(_,2),N=E[0],R=E[1],L=(0,p.useState)(!1),M=(0,h.Z)(L,2),B=M[0],$=M[1],ee=(0,p.useState)(!1),ne=(0,h.Z)(ee,2),te=ne[0],oe=ne[1],ae=(0,p.useState)(null),ie=(0,h.Z)(ae,2),re=ie[0],le=ie[1],ce=(0,p.useState)({page:0,pageSize:30}),se=(0,h.Z)(ce,2),de=se[0],ue=se[1],fe=function(e){var n={id:e.id,studentId:e.studentId,subject:e.subject,forms:e.forms,datas:e.datas,times:e.times,rooms:e.rooms};console.log(n),c(n),oe(!0)},he=function(){R(!0),F.Z.get("".concat(C._n,"/workOtherService/getFinals?page=").concat(de.page+1,"&size=").concat(de.pageSize)).then((function(e){var n,t,o,i;a(null===(n=e.data.obj)||void 0===n?void 0:n.totalElements),T(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(o=t.obj)||void 0===o||null===(i=o.content)||void 0===i?void 0:i.map((function(e,n){return(0,f.Z)((0,f.Z)({},e),{},{count:n+1})})))})).catch((function(e){console.log(e)})).finally((function(){return R(!1)}))};(0,p.useEffect)((function(){he()}),[de]);var pe=function(){le(null),$(!1)},me=function(){oe(!1),c(null)};return(0,O.jsxs)(Y,{children:[(0,O.jsx)(q,{titleFile:"MONITORING_STUDENT_EXAM_FILE",fetchData:he,saveFileUrl:"/workOtherService/saveFinal",urlBase:e}),(0,O.jsxs)(Q,{children:[(0,O.jsx)(g.W95,{size:25}),(0,O.jsx)("h1",{children:"Finals"})]}),(0,O.jsx)(Z.Z,{children:(0,O.jsxs)(j.Z,{children:[(0,O.jsx)(w.Z,{display:"flex",justifyContent:"space-between",mb:2,children:(0,O.jsx)(U.Z,{setData:T,searchUrl:"/otherService/studentsFinals2/",pagination:de,fetchData:he})}),(0,O.jsx)(b._,{rowCount:o,columns:s,rows:A||[],loading:N,components:{Toolbar:v.n},pageSize:de.pageSize,page:de.page,rowsPerPageOptions:[10,30,50,70,100],paginationMode:"server",onPageChange:function(e){ue((function(n){return(0,f.Z)((0,f.Z)({},n),{},{page:e})}))},onPageSizeChange:function(e){ue((function(n){return(0,f.Z)((0,f.Z)({},n),{},{pageSize:e})}))},autoHeight:!0,initialState:{columns:{columnVisibilityModel:{action:!1}}}})]})}),(0,O.jsx)(D.Z,{open:B,onClose:pe,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,O.jsxs)(w.Z,{sx:K,component:J,children:[(0,O.jsxs)(H,{children:[(0,O.jsx)("h5",{children:"Delete"}),(0,O.jsxs)(V,{onClick:pe,children:[" ",(0,O.jsx)(I.bjh,{size:22})]})]}),(0,O.jsxs)(w.Z,{children:[(0,O.jsx)(x.Z,{sx:{height:"100px"},direction:"row",justifyContent:"center",alignItems:"center",children:(0,O.jsx)(z.Z,{variant:"h6",color:"black",children:"Do you want to delete !"})}),(0,O.jsxs)(x.Z,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,O.jsx)(y.Z,{variant:"outlined",onClick:pe,children:"Cancel"}),(0,O.jsx)(y.Z,{variant:"contained",color:"error",onClick:function(){re&&F.Z.delete("".concat(C._n,"/example/").concat(re),{headers:d}).then((function(e){pe(),P.Am.success("Delete item")})).catch((function(e){console.log(e),P.Am.error("Error deleting")}))},children:"Ok"})]})]})]})}),(0,O.jsx)(D.Z,{open:te,onClose:me,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,O.jsxs)(w.Z,{sx:X,component:J,children:[(0,O.jsxs)(H,{children:[(0,O.jsx)("h3",{children:l?"Update":"Create"}),(0,O.jsxs)(V,{onClick:me,children:[" ",(0,O.jsx)(I.bjh,{size:22})]})]}),(0,O.jsx)(w.Z,{children:(0,O.jsx)(W,{closeBtnFn:me,fetchData:he,putData:l})})]})})]})}},48432:function(e,n,t){var o=t(1413),a=t(29439),i=t(72791),r=t(63466),l=t(48550),c=t(39126),s=t(55294),d=t(27301),u=t(80184),f=function(e){var n=e.setData,t=e.searchUrl,f=e.fetchData,h=e.pagination,p=(0,i.useRef)(null),m=(0,i.useState)(""),g=(0,a.Z)(m,2),x=g[0],Z=g[1],j=(0,d.wU)().headers;return(0,i.useEffect)((function(){Z("")}),[h]),(0,u.jsx)(l.Z,{placeholder:"Search by ID card",size:"small",value:x,onChange:function(e){return function(e){Z(e),p.current&&p.current.cancel("Operation canceled due to new request.");var a=s.Z.CancelToken.source();p.current=a;var i=setTimeout((function(){e.length>=2?s.Z.get("".concat(d._n).concat(t).concat(e),{headers:j,cancelToken:a.token}).then((function(e){var t=e.data.obj.obj;n(t.map((function(e,n){return(0,o.Z)((0,o.Z)({},e),{},{count:n+1})})))})).catch((function(e){s.Z.isCancel(e)?console.log("Request canceled:",e.message):console.error(e)})):f()}),300);return function(){a&&a.cancel("Operation canceled due to component unmount."),clearTimeout(i)}}(e.target.value)},id:"idCard",sx:{width:"300px"},InputProps:{startAdornment:(0,u.jsx)(r.Z,{position:"start",children:(0,u.jsx)(c.dVI,{size:20})})}})};n.Z=(0,i.memo)(f)}}]);
//# sourceMappingURL=1265.82603980.chunk.js.map