"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[655],{20655:function(n,e,o){o.r(e);var l,i,t,d,a,r,u,s=o(30168),c=o(4942),v=o(1413),h=o(29439),p=o(72791),f=o(17939),m=o(27301),g=o(55294),x=o(56960),Z=(o(17402),o(34197)),b=o(89704),j=o(58766),w=o(56355),k=o(23853),y=o(39126),C=o(17425),S=o(95173),O=o(56253),z=o(64554),R=o(48550),E=o(73766),P=o(88447),I=o(94454),U=o(98937),_=o(77907),L=o(24518),V=o(57621),A=o(39504),K=o(80184),N=(0,K.jsx)(U.Z,{fontSize:"small"}),B=(0,K.jsx)(_.Z,{fontSize:"small"}),D=f.ZP.div(l||(l=(0,s.Z)(["\n    height: 250px;\n    padding-top: 10px;\n    display: grid;\n    overflow-y: scroll;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 30px;\n    ","\n    ","\n    ","\n"])),(0,S.IV)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,S.yG)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,S.qD)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"})),H=(0,f.ZP)(O.E.button)(i||(i=(0,s.Z)(["\n    width: 30px;\n    height: 30px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: ",";\n    border-radius: 50%;\n    color: white;\n    font-size: 26px;\n    border: none;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n"])),m.Lr),T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",display:"flex",flexDirection:"column",gap:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},M=f.ZP.div(t||(t=(0,s.Z)(["\n    ","\n    ","\n    ","\n"])),(0,S.IV)({width:"97vw !important",height:"97vh !important"}),(0,S.yG)({width:"97vw !important",height:"97vh !important"}),(0,S.qD)({width:"97vw !important",height:"97vh !important"})),Q=f.ZP.button(d||(d=(0,s.Z)(["\n    width: 30px;\n    height: 30px;\n    background-color: #fff;\n    font-size: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid red;\n    border-radius: 0.5rem;\n    color: red;\n    padding: 5px !important;\n\n    &:hover {\n        transform: scale(1.1);\n    }\n\n"]))),q=f.ZP.button(a||(a=(0,s.Z)(["\n    width: 30px;\n    height: 30px;\n    background-color: #fff;\n    font-size: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid ",";\n    border-radius: 0.5rem;\n    color: ",";\n    padding: 5px !important;\n\n    &:hover {\n        transform: scale(1.1);\n    }\n\n"])),m.Lr,m.Lr),F=f.ZP.div(r||(r=(0,s.Z)(["\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n    margin: 5px !important;\n"]))),G=f.ZP.div(u||(u=(0,s.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n"])));e.default=function(){var n=(0,p.useState)(!1),e=(0,h.Z)(n,2),o=e[0],l=e[1],i=(0,p.useState)([]),t=(0,h.Z)(i,2),d=t[0],a=t[1],r=(0,p.useState)([]),u=(0,h.Z)(r,2),s=u[0],f=u[1],S=(0,p.useState)(!1),O=(0,h.Z)(S,2),U=O[0],_=O[1],Y=(0,p.useState)([]),J=(0,h.Z)(Y,2),W=J[0],X=J[1],$=(0,p.useState)([]),nn=(0,h.Z)($,2),en=nn[0],on=nn[1],ln=(0,p.useState)({id:null,nameEn:null,nameRu:null,nameUz:null,owner:null,room:null,phone:null,roles:[],positions:[]}),tn=(0,h.Z)(ln,2),dn=tn[0],an=tn[1],rn=(0,p.useState)(null),un=(0,h.Z)(rn,2),sn=un[0],cn=un[1],vn=[{field:"id",headerName:"ID",width:40,editable:!1},{field:"nameEn",headerName:"English name",type:"string",width:300,editable:!1},{field:"nameUz",headerName:"O`zbekcha nomi",type:"string",width:300,editable:!1},{field:"nameRu",headerName:"\u0420\u0443\u0441\u0441\u043a\u043e\u0435 \u0438\u043c\u044f",type:"string",width:300,editable:!1},{field:"owner",headerName:"Kafedra mudiri",type:"string",width:300,editable:!1,renderCell:function(n){var e,o;return(0,K.jsx)("div",{children:null===n||void 0===n||null===(e=n.row)||void 0===e||null===(o=e.owner)||void 0===o?void 0:o.label})}},{field:"room",headerName:"Room",type:"string",width:100,editable:!1},{field:"phone",headerName:"Phone",type:"string",width:200,editable:!1},{field:"service",headerName:"Service",type:"string",width:100,editable:!1,renderCell:function(n){return(0,K.jsxs)(F,{children:[(0,K.jsx)(q,{onClick:function(){var e;return xn(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.id)},children:(0,K.jsx)(k.vPQ,{})}),(0,K.jsx)(Q,{onClick:function(){var e,o;return mn(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.id,null===n||void 0===n||null===(o=n.row)||void 0===o?void 0:o.nameEn)},children:(0,K.jsx)(y.yvY,{})})]})}}],hn=(0,m.wU)().headers;(0,p.useEffect)((function(){fn(),pn()}),[]);var pn=function(){g.Z.get(m._n+"/kafedra/allKafedra",{headers:hn}).then((function(n){var e;console.log(null===n||void 0===n?void 0:n.data,"kafedralar"),a(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.obj),l(!1)})).catch((function(n){console.log(n)}))},fn=function(){g.Z.get(m._n+"/dekanat/getDatasForSavedKafedraMudiri").then((function(n){var e,o,l,i,t,d;f(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(o=e.obj)||void 0===o?void 0:o.users),X(null===n||void 0===n||null===(l=n.data)||void 0===l||null===(i=l.obj)||void 0===i?void 0:i.roles),on(null===n||void 0===n||null===(t=n.data)||void 0===t||null===(d=t.obj)||void 0===d?void 0:d.positions)})).catch((function(n){console.log(n)}))},mn=function(n,e){console.log(n,"deleted"),an({id:null,nameEn:null,nameRu:null,nameUz:null,owner:null,room:null,phone:null,roles:[],positions:[]}),window.confirm("Do you want to delete ".concat(e,"?"))&&(g.Z.delete("".concat(m._n,"/kafedra/deleteKafedra/").concat(n),{headers:hn}).then((function(e){var o;a(null===d||void 0===d?void 0:d.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==n}))),x.Am.success(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})).catch((function(n){console.log(n)})),x.Am.success("Deleted successfully",{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}))},gn=function(){_(!1)},xn=function(n){_(!0),console.log(n,"edited"),g.Z.get("".concat(m._n,"/kafedra/getKafedraV3ById?id=").concat(n),{headers:hn}).then((function(n){var e,o;console.log(null===n||void 0===n?void 0:n.data," <---- "),cn(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(o=e.obj)||void 0===o?void 0:o.owner),an((function(e){var o,l,i,t,d,a,r,u,s,c,h,p,f,m,g,x,Z,b,j,w,k;return(0,v.Z)((0,v.Z)({},e),{},{id:null===n||void 0===n||null===(o=n.data)||void 0===o||null===(l=o.obj)||void 0===l?void 0:l.id,nameEn:null===n||void 0===n||null===(i=n.data)||void 0===i||null===(t=i.obj)||void 0===t?void 0:t.nameEn,nameRu:null===n||void 0===n||null===(d=n.data)||void 0===d||null===(a=d.obj)||void 0===a?void 0:a.nameRu,nameUz:null===n||void 0===n||null===(r=n.data)||void 0===r||null===(u=r.obj)||void 0===u?void 0:u.nameUz,owner:null===n||void 0===n||null===(s=n.data)||void 0===s||null===(c=s.obj)||void 0===c?void 0:c.owner,ownerId:null===n||void 0===n||null===(h=n.data)||void 0===h||null===(p=h.obj)||void 0===p||null===(f=p.owner)||void 0===f?void 0:f.value,room:null===n||void 0===n||null===(m=n.data)||void 0===m||null===(g=m.obj)||void 0===g?void 0:g.room,phone:null===n||void 0===n||null===(x=n.data)||void 0===x||null===(Z=x.obj)||void 0===Z?void 0:Z.phone,roles:null===n||void 0===n||null===(b=n.data)||void 0===b||null===(j=b.obj)||void 0===j?void 0:j.roles,positions:null===n||void 0===n||null===(w=n.data)||void 0===w||null===(k=w.obj)||void 0===k?void 0:k.positions})}))})).catch((function(n){console.log(n)}))};(0,p.useEffect)((function(){o&&pn()}),[o]),(0,p.useEffect)((function(){console.log(dn,"change updateKafedra")}),[dn]);var Zn=function(n){an((function(e){return(0,v.Z)((0,v.Z)({},e),{},(0,c.Z)({},n.target.name,n.target.value))}))};return(0,K.jsxs)(G,{children:[(0,K.jsx)(z.Z,{display:"flex",justifyContent:"end",children:(0,K.jsx)(L.Z,{sx:{width:"220px"},variant:"contained",onClick:function(){cn(null),an({id:null,nameEn:null,nameRu:null,nameUz:null,owner:null,room:null,phone:null,roles:[],positions:[]}),_(!0)},children:" Add new department"})}),o&&(null===d||void 0===d?void 0:d.length)>0?(0,K.jsx)(Z.Z,{}):(0,K.jsx)(V.Z,{children:(0,K.jsx)(A.Z,{children:(0,K.jsx)(b._,{checkboxSelection:!0,sx:{minHeight:"670px!important",overflow:"scroll"},columns:vn,rows:d,components:{Toolbar:j.n},pageSize:10,initialState:(0,v.Z)((0,v.Z)({},d.initialState),{},{columns:{columnVisibilityModel:{id:!1,nameRu:!1}}})})})}),(0,K.jsx)(P.Z,{open:U,onClose:gn,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,K.jsxs)(z.Z,{sx:T,component:M,children:[(0,K.jsx)(H,{onClick:gn,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,K.jsx)(C.eSQ,{})}),(0,K.jsx)("h3",{style:{color:"".concat(m.Lr)},children:null!==(null===dn||void 0===dn?void 0:dn.id)&&null!==dn&&void 0!==dn&&dn.id?"Update kafedra":"Create new kafedra"}),(0,K.jsxs)(D,{children:[(0,K.jsx)(R.Z,{id:"outlined-basic",label:"English name",variant:"outlined",value:null===dn||void 0===dn?void 0:dn.nameEn,name:"nameEn",onChange:Zn}),(0,K.jsx)(R.Z,{id:"outlined-basic",label:"\u0420\u0443\u0441\u0441\u043a\u043e\u0435 \u0438\u043c\u044f",variant:"outlined",value:null===dn||void 0===dn?void 0:dn.nameRu,name:"nameRu",onChange:Zn}),(0,K.jsx)(R.Z,{id:"outlined-basic",label:"O`zbekcha nomi",variant:"outlined",value:null===dn||void 0===dn?void 0:dn.nameUz,name:"nameUz",onChange:Zn}),(0,K.jsx)(E.Z,{id:"checkboxes-tags-demo",options:s,disableCloseOnSelect:!0,getOptionLabel:function(n){return null===n||void 0===n?void 0:n.label},value:sn,onChange:function(n,e){console.log(e,"new value"),cn(e),an((function(n){return(0,v.Z)((0,v.Z)({},n),{},{ownerId:null===e||void 0===e?void 0:e.value})}))},onInputChange:function(n,e){var o;"change"===(null===n||void 0===n?void 0:n.type)&&((o=e).length>3&&g.Z.get(m._n+"/user/getUsersForUserRole?keyword="+o,{headers:hn}).then((function(n){var e;f(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.obj)})).catch((function(n){console.log(n)})))},renderOption:function(n,e,o){var l=o.selected;return(0,K.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,K.jsx)(I.Z,{icon:N,checkedIcon:B,style:{marginRight:8},checked:l}),null===e||void 0===e?void 0:e.label]}))},renderInput:function(n){return(0,K.jsx)(R.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Owner",placeholder:"Owner"}))}}),(0,K.jsx)(R.Z,{id:"outlined-basic",label:"Room",variant:"outlined",value:null===dn||void 0===dn?void 0:dn.room,name:"room",onChange:Zn}),(0,K.jsx)(R.Z,{id:"outlined-basic",label:"Phone",variant:"outlined",value:null===dn||void 0===dn?void 0:dn.phone,name:"phone",onChange:Zn}),(0,K.jsx)(E.Z,{multiple:!0,id:"checkboxes-tags-demo",options:W,disableCloseOnSelect:!0,getOptionLabel:function(n){return n},value:null===dn||void 0===dn?void 0:dn.roles,onChange:function(n,e){an((function(n){return(0,v.Z)((0,v.Z)({},n),{},{roles:e})}))},renderOption:function(n,e,o){var l=o.selected;return(0,K.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,K.jsx)(I.Z,{icon:N,checkedIcon:B,style:{marginRight:8},checked:l}),e]}))},renderInput:function(n){return(0,K.jsx)(R.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Roles",placeholder:"Roles"}))}}),(0,K.jsx)(E.Z,{multiple:!0,id:"checkboxes-tags-demo",options:en,disableCloseOnSelect:!0,getOptionLabel:function(n){return n},value:null===dn||void 0===dn?void 0:dn.positions,onChange:function(n,e){an((function(n){return(0,v.Z)((0,v.Z)({},n),{},{positions:e})}))},renderOption:function(n,e,o){var l=o.selected;return(0,K.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,K.jsx)(I.Z,{icon:N,checkedIcon:B,style:{marginRight:8},checked:l}),e]}))},renderInput:function(n){return(0,K.jsx)(R.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Positions",placeholder:"Positions"}))}})]}),(0,K.jsx)(z.Z,{sx:{display:"flex",justifyContent:"end"},children:(0,K.jsx)(L.Z,{variant:"contained",endIcon:null!==(null===dn||void 0===dn?void 0:dn.id)&&null!==dn&&void 0!==dn&&dn.id?(0,K.jsx)(k.vPQ,{}):(0,K.jsx)(w.TvB,{}),onClick:function(){return null!==(null===dn||void 0===dn?void 0:dn.id)&&null!==dn&&void 0!==dn&&dn.id?function(n){delete n.owner,console.log(n,"edit kafedra"),Object.values(n).every((function(n){return null!==n&&n}))?g.Z.post(m._n+"/kafedra/createKafedraV2",n,{headers:hn}).then((function(n){_(!1),pn(),x.Am.success("Updated kafedra successfully!.")})).catch((function(n){console.log(n)})):x.Am.warning("Empty any field..")}(dn):(delete(n=dn).owner,delete n.id,console.log(n," for save kafedra"),void(Object.values(n).every((function(n){return null!==n&&n}))?g.Z.post(m._n+"/kafedra/createKafedraV2",(0,v.Z)((0,v.Z)({},n),{},{id:null}),{headers:hn}).then((function(e){_(!1),pn(),x.Am.success("".concat(null===n||void 0===n?void 0:n.name," kafedra has been saved successfully!."))})).catch((function(n){var e,o;console.log(n),x.Am.error(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message)})):x.Am.warning("Empty any field..")));var n},children:null!==(null===dn||void 0===dn?void 0:dn.id)&&null!==dn&&void 0!==dn&&dn.id?"Update":" Save"})})]})})]})}},77907:function(n,e,o){var l=o(64836);e.Z=void 0;var i=l(o(45649)),t=o(80184),d=(0,i.default)((0,t.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");e.Z=d},98937:function(n,e,o){var l=o(64836);e.Z=void 0;var i=l(o(45649)),t=o(80184),d=(0,i.default)((0,t.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");e.Z=d}}]);
//# sourceMappingURL=655.8a4b3d05.chunk.js.map