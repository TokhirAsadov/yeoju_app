"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[3919],{83919:function(e,n,o){o.r(n);var i,l,t,d,a,r,s,u,c,p,v,f=o(30168),h=o(1413),m=o(29439),x=o(72791),g=o(17939),b=o(59434),w=o(27301),Z=o(56355),j=o(24518),y=o(72426),S=o.n(y),k=o(23853),I=o(39126),C=o(55294),P=o(56960),N=o(88447),A=o(64554),H=o(17425),O=o(86388),U=o(34197),T=o(89704),_=o(58766),D=o(88197),E=o(5900),z=o(56253),B=o(95173),M=o(80184),R=g.ZP.div(i||(i=(0,f.Z)(["\n  ",",\n  ","\n"])),(0,B.qD)({width:"90vw !important"}),(0,B.yG)({width:"90vw !important"})),L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"85vw",height:"85vh",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},Q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"500px",padding:"15px ",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:3},q=g.ZP.div(l||(l=(0,f.Z)(["\n","\n"])),(0,B.qD)({width:"95vw !important"})),F={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"95vw",minHeight:400,bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},W=(0,g.ZP)(z.E.button)(t||(t=(0,f.Z)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"])),w.Lr),G=g.ZP.div(d||(d=(0,f.Z)(["\n  width: 100%;\n  display: flex;\n  gap: 10px;\n  margin: 5px !important;\n"]))),K=g.ZP.button(a||(a=(0,f.Z)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid red;\n  border-radius: 0.5rem;\n  color: red;\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"]))),V=g.ZP.button(r||(r=(0,f.Z)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid ",";\n  border-radius: 0.5rem;\n  color: ",";\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"])),w.Lr,w.Lr),Y=g.ZP.div(s||(s=(0,f.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: 5px !important;\n"]))),J=g.ZP.div(u||(u=(0,f.Z)(["\n  width: 100%;\n  background-color: #fff;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),X=g.ZP.div(c||(c=(0,f.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n"]))),$=g.ZP.h3(p||(p=(0,f.Z)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  flex-wrap: wrap;\n  gap: 20px;\n  color: ",";\n"])),w.Lr),ee=g.ZP.div(v||(v=(0,f.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  border-radius: 10px;\n  margin-top: 10px !important;\n  margin-left: 10px !important;\n  padding: 5px 10px !important;\n"])));n.default=function(){var e=(0,b.v9)((function(e){var n;return null===e||void 0===e||null===(n=e.dekanat)||void 0===n?void 0:n.dekanat})),n=(0,x.useState)(!0),o=(0,m.Z)(n,2),i=o[0],l=o[1],t=(0,x.useState)(!1),d=(0,m.Z)(t,2),a=d[0],r=d[1],s=(0,x.useState)(""),u=(0,m.Z)(s,2),c=u[0],p=u[1],v=[{field:"id",headerName:"ID",width:40,editable:!1},{field:"fullName",headerName:"Name",type:"string",width:300,editable:!1,renderCell:function(e){var n,o,i,l;return(0,M.jsxs)(G,{children:[null!==e&&void 0!==e&&null!==(n=e.row)&&void 0!==n&&n.photo?(0,M.jsx)("img",{src:null!==e&&void 0!==e&&null!==(o=e.row)&&void 0!==o&&o.photo?w._n+"/attachment/download/"+(null===e||void 0===e||null===(i=e.row)||void 0===i||null===(l=i.photo)||void 0===l?void 0:l.id):"",width:"40px",height:"40px",alt:null===e||void 0===e?void 0:e.value,style:{borderRadius:"50%"}}):(0,M.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px"},children:(0,M.jsx)(Z.q1E,{})}),(0,M.jsx)("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px"},children:(0,M.jsx)(j.Z,{onClick:function(){var n;return Ie(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.id)},children:null===e||void 0===e?void 0:e.value})})]})}},{field:"login",headerName:"Login",type:"string",width:300,editable:!1},{field:"email",headerName:"Email",type:"string",width:300,editable:!1},{field:"rfid",headerName:"RFID",type:"string",width:300,editable:!1},{field:"passport",headerName:"Passport",type:"string",width:300,editable:!1},{field:"countTouch",headerName:"Kelgan kunlari \n".concat(S()(new Date).format("MMM")),type:"string",width:170,editable:!1,renderCell:function(e){return(0,M.jsx)(Y,{children:(0,M.jsxs)(j.Z,{onClick:function(){var n,o,i,l;return Se(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.fullName,null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.id,null===e||void 0===e||null===(i=e.row)||void 0===i||null===(l=i.photo)||void 0===l?void 0:l.id)},children:[null===e||void 0===e?void 0:e.value,(0,M.jsx)(I.bbP,{size:20})]})})}},{field:"positions",headerName:"Shtat birligi va lavozimi",type:"string",width:190,editable:!1,renderCell:function(e){return(0,M.jsx)(Y,{children:null===e||void 0===e?void 0:e.value})}},{field:"STATUS",headerName:"Action",type:"string",width:100,editable:!1,renderCell:function(e){return(0,M.jsxs)(Y,{children:[(0,M.jsx)(V,{onClick:function(){var n,o,i;return Ne(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.id,null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.fullName,null===e||void 0===e||null===(i=e.row)||void 0===i?void 0:i.positions)},children:(0,M.jsx)(k.vPQ,{})}),(0,M.jsx)(K,{onClick:function(){var n,o;return Ae(null===e||void 0===e||null===(n=e.row)||void 0===n?void 0:n.id,null===e||void 0===e||null===(o=e.row)||void 0===o?void 0:o.fullName)},children:(0,M.jsx)(I.yvY,{})})]})}}],f=(0,x.useState)([]),g=(0,m.Z)(f,2),y=g[0],z=g[1],B=(0,x.useState)(!1),ne=(0,m.Z)(B,2),oe=ne[0],ie=ne[1],le=(0,x.useState)(""),te=(0,m.Z)(le,2),de=te[0],ae=te[1],re=(0,x.useState)(""),se=(0,m.Z)(re,2),ue=se[0],ce=se[1],pe=(0,x.useState)(!1),ve=(0,m.Z)(pe,2),fe=(ve[0],ve[1]),he=(0,x.useState)(!1),me=(0,m.Z)(he,2),xe=me[0],ge=me[1],be=(0,x.useState)(!1),we=(0,m.Z)(be,2),Ze=we[0],je=we[1],ye=(0,w.wU)().headers,Se=function(e,n,o){return ce(e),ae(o),p(n),ge(!0)},ke=function(){ge(!1)},Ie=function(e){p(e),fe(!0)},Ce=function(){r(!1)},Pe=function(){ie(!1),je(!1)},Ne=function(e,n,o){_e((function(i){return(0,h.Z)((0,h.Z)({},i),{},{sectionId:null,positionId:o,userId:{value:e,label:n}})})),C.Z.get(w._n+"/staff/getStaffIdWithUserId/"+e,{headers:ye}).then((function(e){var n;P.Am.success(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message),_e((function(n){var o;return(0,h.Z)((0,h.Z)({},n),{},{id:null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.obj})})),je(!0)})).catch((function(e){var n,o;console.log(e),P.Am.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}))},Ae=function(e,n){C.Z.get(w._n+"/staff/getStaffIdWithUserId/"+e,{headers:ye}).then((function(e){var o;window.confirm("Do you want to delete ".concat(n,"?"))&&C.Z.delete(w._n+"/staff/deleteStaff/"+(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.obj),{headers:ye}).then((function(e){var n;P.Am.error(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),He()})).catch((function(e){var n,o;P.Am.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),console.log(e)}))})).catch((function(e){var n,o;console.log(e),P.Am.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message)}))};(0,x.useEffect)((function(){He()}),[]);var He=function(){l(!0);z([]),C.Z.get(w._n+"/section/getStatisticsForDekan",{headers:ye}).then((function(e){var n,o;console.log(e.data,"- 55 55 --------------------- -------------"),z(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(o=n.obj)||void 0===o?void 0:o.sort((function(e,n){return e.fullName>n.fullName?1:-1}))),l(!1)})).catch((function(e){console.log(e)}))},Oe=(0,x.useState)({id:null,sectionId:null,positionId:null,userId:null}),Ue=(0,m.Z)(Oe,2),Te=Ue[0],_e=Ue[1],De=function(e){void 0!==(null===e||void 0===e?void 0:e.id)&&null!==(null===e||void 0===e?void 0:e.id)&&""!==(null===e||void 0===e?void 0:e.id)&&void 0!==(null===e||void 0===e?void 0:e.userId)&&null!==(null===e||void 0===e?void 0:e.userId)&&""!==(null===e||void 0===e?void 0:e.userId)&&void 0!==(null===e||void 0===e?void 0:e.positionId)&&""!==(null===e||void 0===e?void 0:e.positionId)&&null!==(null===e||void 0===e?void 0:e.positionId)?C.Z.post(w._n+"/staff/saveStaff",e,{headers:ye}).then((function(e){P.Am.success("Staff updated successfully."),He(),je(!1)})).catch((function(e){var n,o;console.log(e),P.Am.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})):P.Am.warning("Empty any fields...")},Ee=function(e){""!==(null===e||void 0===e?void 0:e.id)&&void 0!==(null===e||void 0===e?void 0:e.id)||(e.id=null,e.sectionId=null),null===(null===e||void 0===e?void 0:e.id)&&(e.sectionId=null),void 0!==(null===e||void 0===e?void 0:e.userId)&&null!==(null===e||void 0===e?void 0:e.userId)&&""!==(null===e||void 0===e?void 0:e.userId)&&void 0!==(null===e||void 0===e?void 0:e.positionId)&&""!==(null===e||void 0===e?void 0:e.positionId)&&null!==(null===e||void 0===e?void 0:e.positionId)?(P.Am.success("all done add"),C.Z.post(w._n+"/staff/saveStaff",e,{headers:ye}).then((function(e){P.Am.success("Staff saved successfully."),He(),ie(!1)})).catch((function(e){var n,o;console.log(e),P.Am.error(null===e||void 0===e||null===(n=e.response)||void 0===n||null===(o=n.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}))):P.Am.warning("Empty any fields..."),console.log(e,"save staff")};return(0,M.jsxs)(ee,{children:[(0,M.jsxs)($,{children:["Table of Staffs",(0,M.jsxs)(X,{children:[(0,M.jsx)(j.Z,{variant:"contained",onClick:function(){r(!0)},children:"Open Month Modal"}),(0,M.jsx)(j.Z,{variant:"contained",color:"success",onClick:function(){_e((0,h.Z)((0,h.Z)({},Te),{},{id:null,userId:null,sectionId:null,positionId:null})),ie(!0)},endIcon:(0,M.jsx)(I.IaE,{}),children:"Add Staff"})]})]}),(0,M.jsx)(N.Z,{open:a,onClose:Ce,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,M.jsxs)(A.Z,{sx:L,component:R,children:[(0,M.jsx)(W,{onClick:Ce,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,M.jsx)(H.eSQ,{})}),(0,M.jsx)(O.Z,{colName:"Staffs",isTeacher:!1,date:new Date,userName:e.name,kafedraId:e.id,url:"/staff/getStatisticsForRektor?sectionId="})]})}),(0,M.jsx)(J,{children:i?(0,M.jsx)(U.Z,{}):(0,M.jsx)(T._,{checkboxSelection:!0,style:{width:"500px!important",minHeight:"300px!important"},columns:v,rows:y,components:{Toolbar:_.n},autoHeight:!0,pageSize:10,initialState:(0,h.Z)((0,h.Z)({},null===y||void 0===y?void 0:y.initialState),{},{columns:{columnVisibilityModel:{id:!1,login:!1,card:!1,rfid:!1,email:!1,passport:!1}}})})}),(0,M.jsx)(N.Z,{open:xe,onClose:ke,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,M.jsxs)(A.Z,{sx:F,children:[(0,M.jsx)(W,{onClick:ke,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,M.jsx)(H.eSQ,{})}),(0,M.jsx)(D.Z,{userName:ue,userId:c,date:new Date,photo:de})]})}),(0,M.jsx)(N.Z,{open:oe,onClose:Pe,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,M.jsxs)(A.Z,{sx:Q,component:q,children:[(0,M.jsx)(W,{onClick:Pe,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,M.jsx)(H.eSQ,{})}),(0,M.jsx)(E.Z,{isSection:!1,title:"Add Staff",formArr:[{label:"id",name:"id",placeholder:"Enter id of staff",type:"text"},{label:"Select User:",name:"userId",placeholder:"Select User",type:"select"},{label:"Select Position:",name:"positionId",placeholder:"Select Position",type:"select"}],submitBtn:null!==(null===Te||void 0===Te?void 0:Te.id)?"Update":"Save",onSubmit:function(e){return null!==(null===Te||void 0===Te?void 0:Te.id)?De(e):Ee(e)},updateItem:Te})]})}),(0,M.jsx)(N.Z,{open:Ze,onClose:Pe,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,M.jsxs)(A.Z,{sx:Q,component:q,children:[(0,M.jsx)(W,{onClick:Pe,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,M.jsx)(H.eSQ,{})}),(0,M.jsx)(E.Z,{isSection:!1,title:"Update Staff",formArr:[{label:"id",name:"id",placeholder:"Enter id of staff",type:"text"},{label:"Select User:",name:"userId",placeholder:"Select User",type:"select"},{label:"Select Position:",name:"positionId",placeholder:"Select Position",type:"select"}],submitBtn:null!==(null===Te||void 0===Te?void 0:Te.id)?"Update":"Save",onSubmit:function(e){return null!==(null===Te||void 0===Te?void 0:Te.id)?De(e):Ee(e)},updateItem:Te})]})})]})}}}]);
//# sourceMappingURL=3919.816948b4.chunk.js.map