"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[3541],{73541:function(e,n,t){t.r(n),t.d(n,{default:function(){return te}});var i,a,o,r,l=t(30168),c=t(1413),s=t(29439),u=t(72791),d=t(17939),f=t(24518),h=t(15861),m=t(64687),p=t.n(m),x=t(88447),Z=t(64554),j=t(40071),g=t(73766),v=t(48550),b=t(1582),D=t(95173),C=t(27301),y=t(58406),S=t(68096),k=t(30829),w=t(84638),N=t(94454),I=t(55294),Y=t(36571),O=t(69783),W=t(67039),F=t(59434),M=t(56960),_=t(80184),A=function(e){var n=e.modalCreate,t=e.handleCloseModalCreate,i=e.getNoticeFOrDean,a=e.putData,o=["SIRTQI"],r=(0,F.v9)((function(e){return e.dekanat.dekanat.id})),l=(0,u.useState)(""),d=(0,s.Z)(l,2),m=d[0],D=d[1],A=(0,u.useState)(o[0]),T=(0,s.Z)(A,2),z=T[0],H=T[1],R=(0,u.useState)([]),q=(0,s.Z)(R,2),U=q[0],V=q[1],$=(0,u.useState)([]),B=(0,s.Z)($,2),Q=B[0],X=B[1],J=(0,u.useState)([]),K=(0,s.Z)(J,2),ee=K[0],ne=K[1],te=(0,u.useState)([]),ie=(0,s.Z)(te,2),ae=ie[0],oe=ie[1],re=(0,u.useState)([]),le=(0,s.Z)(re,2),ce=le[0],se=le[1],ue=(0,u.useState)({fromDate:"",toDate:""}),de=(0,s.Z)(ue,2),fe=de[0],he=de[1],me=(0,u.useState)(""),pe=(0,s.Z)(me,2),xe=pe[0],Ze=pe[1],je=(0,C.wU)().headers,ge=function(){t(),D(""),X([]),oe([]),Ze(""),he({fromDate:"",toDate:""})},ve=function(){var e=(0,h.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.Z.get(C._n+"/education/educationYearsForSelected",{headers:je}).then((function(e){se(e.data.obj)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){I.Z.get(C._n+"/faculty/allFacultiesWithShortName").then((function(e){V(e.data.obj)})).catch((function(e){console.log(e),V([])})),ve()}),[]),(0,u.useEffect)((function(){var e,n,t;n=z,t=Q,""!==(e=m)&&""!==n&&0!==t.length&&I.Z.get(C._n+"/group/getGroupsByFacultiesIds?course=".concat(e,"&educationType=").concat(n,"&facultiesIds=").concat(t.map((function(e){return e.id})))).then((function(e){if(ne(e.data.obj),null!==a&&void 0!==a&&a.groupNames){var n=e.data.obj.filter((function(e){return a.groupNames.includes(e.name)}));console.log(n,"fill"),oe(n)}})).catch((function(e){console.log(e),ne([])}))}),[m,z,Q]),(0,u.useEffect)((function(){!function(){if(a){if(console.log(a),a.course&&D(a.course),a.facultyNames){var e=U.filter((function(e){return a.facultyNames.includes(e.name)}));X(e)}if(a.educationYear&&ce){var n,t=(null===(n=ce.find((function(e){return e.name===a.educationYear})))||void 0===n?void 0:n.id)||"";Ze(t)}a.fromDate&&a.toDate&&he({fromDate:a.fromDate,toDate:a.toDate})}}()}),[a]),(0,_.jsx)(x.Z,{open:n,onClose:ge,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,_.jsxs)(Z.Z,{sx:L,component:G,children:[(0,_.jsxs)(P,{children:[(0,_.jsx)("h4",{children:" Notice"}),(0,_.jsxs)(E,{onClick:ge,children:[" ",(0,_.jsx)(j.bjh,{size:22})]})]}),(0,_.jsxs)(Z.Z,{children:[(0,_.jsxs)(Z.Z,{sx:{overflowY:"scroll",marginY:3,height:"70vh",display:"flex",flexDirection:"column",gap:3},children:[(0,_.jsxs)(S.Z,{fullWidth:!0,sx:{mt:1},children:[(0,_.jsx)(k.Z,{id:"demo-simple-select-label",children:"Years of education"}),(0,_.jsx)(y.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:xe,label:"Years of education",onChange:function(e){return Ze(e.target.value)},children:ce.map((function(e){return(0,_.jsx)(w.Z,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},null===e||void 0===e?void 0:e.id)}))})]}),(0,_.jsxs)(Z.Z,{display:"flex",gap:3,children:[(0,_.jsxs)(S.Z,{fullWidth:!0,children:[(0,_.jsx)(k.Z,{id:"demo-simple-select-label",children:"Course"}),(0,_.jsx)(y.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:m,label:"Course",onChange:function(e){return n=e.target.value,D(n),X([]),void oe([]);var n},children:[1,2,3,4].map((function(e){return(0,_.jsx)(w.Z,{value:e,children:e},e)}))})]}),(0,_.jsxs)(S.Z,{fullWidth:!0,children:[(0,_.jsx)(k.Z,{id:"demo-simple-select-label",children:"Edu type"}),(0,_.jsx)(y.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:z,label:"Edu type",disabled:!0,onChange:function(e){return H(e.target.value)},children:o.map((function(e){return(0,_.jsx)(w.Z,{value:e,children:e},e)}))})]})]}),(0,_.jsxs)(Z.Z,{display:"flex",gap:3,children:[(0,_.jsx)(Y._,{dateAdapter:O.Z,children:(0,_.jsx)(W.M,{label:"Start date",value:fe.fromDate,onChange:function(e){return he((function(n){return(0,c.Z)((0,c.Z)({},n),{},{fromDate:e.$d})}))},renderInput:function(e){return(0,_.jsx)(v.Z,(0,c.Z)({},e))},shouldDisableDate:function(e){return e<=new Date}})}),(0,_.jsx)(Y._,{dateAdapter:O.Z,children:(0,_.jsx)(W.M,{label:"End date",value:fe.toDate,onChange:function(e){return he((function(n){return(0,c.Z)((0,c.Z)({},n),{},{toDate:e.$d})}))},renderInput:function(e){return(0,_.jsx)(v.Z,(0,c.Z)({},e))},shouldDisableDate:function(e){return e<=new Date}})})]}),(0,_.jsx)(g.Z,{multiple:!0,id:"faculties-autocomplete",options:U||[],disableCloseOnSelect:!0,getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.name)||""},renderOption:function(e,n,t){var i=t.selected;return(0,_.jsxs)("li",(0,c.Z)((0,c.Z)({},e),{},{children:[(0,_.jsx)(N.Z,{style:{marginRight:8},checked:i}),null===n||void 0===n?void 0:n.name]}))},value:Q,onChange:function(e,n){return X(n)},renderInput:function(e){return(0,_.jsx)(v.Z,(0,c.Z)((0,c.Z)({},e),{},{label:"Faculties",placeholder:"Select Faculties"}))}}),(0,_.jsx)(g.Z,{multiple:!0,id:"faculties-autocomplete654",options:ee||[],disableCloseOnSelect:!0,getOptionLabel:function(e){return(null===e||void 0===e?void 0:e.name)||""},renderOption:function(e,n,t){var i=t.selected;return(0,_.jsxs)("li",(0,c.Z)((0,c.Z)({},e),{},{children:[(0,_.jsx)(N.Z,{style:{marginRight:8},checked:i}),null===n||void 0===n?void 0:n.name]}))},value:ae,onChange:function(e,n){return oe(n)},renderInput:function(e){return(0,_.jsx)(v.Z,(0,c.Z)((0,c.Z)({},e),{},{label:"Groups",placeholder:"Select Faculties"}))}})]}),(0,_.jsxs)(b.Z,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,_.jsx)(f.Z,{variant:"outlined",onClick:ge,children:"Cancel"}),(0,_.jsx)(f.Z,{variant:"contained",onClick:function(){if(m&&z&&Q.length&&ae.length&&fe.fromDate&&fe.toDate){var e={dekanatId:r,course:m,educationId:xe,facultiesId:Q.map((function(e){return e.id})),groupsId:ae.map((function(e){return e.id})),fromDate:fe.fromDate,toDate:fe.toDate};if(a){var n=(0,c.Z)((0,c.Z)({},e),{},{id:a.id});I.Z.put(C._n+"/notificationOuter/update",n,{headers:je}).then((function(e){console.log(e.data),M.Am.success("Update success"),ge(),i()})).catch((function(e){console.log(e),M.Am.error(" Update error")})),console.log(n,"upDate")}else I.Z.post(C._n+"/notificationOuter/save",e,{headers:je}).then((function(e){console.log(e.data),M.Am.success("Success"),ge(),i()})).catch((function(e){console.log(e),M.Am.error("Error")}))}else M.Am.error("Validation failed. Please fill in all the required fields.")},children:a?"update":"save"})]})]})]})})},P=d.ZP.div(i||(i=(0,l.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  h4 {\n    color: black;\n  }\n\n  h5 {\n    color: red;\n  }\n\n"]))),E=d.ZP.button(a||(a=(0,l.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n  border-radius: 50%;\n  border: none;\n  background-color: ",";\n  color: white;\n  font-size: 12px;\n"])),C.Lr),G=d.ZP.div(o||(o=(0,l.Z)(["\n  ","\n"])),(0,D.qD)({width:"97% !important"})),L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},T=(0,u.memo)(A),z=t(57621),H=t(39504),R=t(89704),q=t(58766),U=t(72426),V=t.n(U),$=t(13400),B=t(39126),Q=function(e){var n=e.data,t=e.isLoading,i=e.setPutData,a=e.setModalCreate,o=[{field:"count",headerName:"\u2116",sortable:!0,width:50,align:"center",justifyContent:"center"},{minWidth:100,flex:.4,field:"educationYear",headerName:"Year",sortable:!0,align:"center",justifyContent:"center"},{minWidth:100,flex:.5,field:"dekanat",headerName:"Dean",sortable:!0,align:"center",justifyContent:"center"},{minWidth:80,flex:.3,field:"course",headerName:"Course",sortable:!0,align:"center",justifyContent:"center"},{minWidth:100,flex:.5,field:"fromDate",headerName:"From date",sortable:!0,align:"center",justifyContent:"center",renderCell:function(e){return(0,_.jsx)("p",{children:V()(e.row.fromDate).format("DD.MM.YYYY")})}},{minWidth:100,flex:.5,field:"toDate",headerName:"To date",sortable:!0,align:"center",justifyContent:"center",renderCell:function(e){return(0,_.jsx)("p",{children:V()(e.row.toDate).format("DD.MM.YYYY")})}},{minWidth:100,flex:.5,field:"facultyNames",headerName:"Faculty names",sortable:!0,align:"center",justifyContent:"center"},{minWidth:100,flex:.5,field:"groupNames",headerName:"Group names",sortable:!0,align:"center",justifyContent:"center"},{minWidth:100,flex:.5,field:"action",headerName:"Action",sortable:!1,align:"center",justifyContent:"center",renderCell:function(e){return(0,_.jsx)($.Z,{onClick:function(){return r(e.row)},children:(0,_.jsx)(B.HlX,{size:20,color:"green"})})}}],r=function(e){i(e),a(!0)};return(0,_.jsx)(z.Z,{sx:{mt:2},children:(0,_.jsx)(H.Z,{children:(0,_.jsx)(R._,{columns:o,rows:n||[],loading:t,components:{Toolbar:q.n},rowsPerPageOptions:[10,30,50,70,100],autoHeight:!0,initialState:{columns:{columnVisibilityModel:{action:!1}}}})})})},X=t(20890),J=t(56355),K=t(16871),ee=t(16856),ne=d.ZP.div(r||(r=(0,l.Z)(["\n    width: 100%;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]))),te=function(){var e="Sirtqi ta'lim"===(0,F.v9)((function(e){var n;return null===(n=e.dekanat.dekanat)||void 0===n?void 0:n.name})),n=(0,u.useState)([]),t=(0,s.Z)(n,2),i=t[0],a=t[1],o=(0,u.useState)(!1),r=(0,s.Z)(o,2),l=r[0],d=r[1],h=(0,u.useState)(!1),m=(0,s.Z)(h,2),p=m[0],x=m[1],j=(0,u.useState)(null),g=(0,s.Z)(j,2),v=g[0],b=g[1],D=(0,K.s0)(),y=function(){d(!0),I.Z.get(C._n+"/notificationOuter/getAllOuterNotifications ").then((function(e){var n;a(null===(n=e.data.obj)||void 0===n?void 0:n.map((function(e,n){return(0,c.Z)((0,c.Z)({},e),{},{count:n+1})})))})).catch((function(e){console.log(e)})).finally((function(){d(!1)}))};return(0,u.useEffect)((function(){y()}),[]),(0,_.jsxs)(ne,{children:[e?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(Z.Z,{mt:3,display:"flex",justifyContent:"end",gap:5,children:[(0,_.jsx)(f.Z,{variant:"contained",endIcon:(0,_.jsx)(ee.Db7,{}),onClick:function(){return x(!0)},children:"create"}),(0,_.jsx)(f.Z,{variant:"contained",color:"inherit",endIcon:(0,_.jsx)(J.mGS,{}),onClick:function(){return D("history")},children:"History"})]}),(0,_.jsx)(Q,{data:i,isLoading:l,setPutData:b,setModalCreate:x})]}):(0,_.jsx)(z.Z,{sx:{mt:3},children:(0,_.jsx)(H.Z,{children:(0,_.jsx)(X.Z,{textAlign:"center",fontWeight:"bold",color:"error",fontSize:25,children:"For external education only !"})})}),(0,_.jsx)(T,{modalCreate:p,getNoticeFOrDean:y,handleCloseModalCreate:function(){x(!1),b(null)},putData:v})]})}}}]);
//# sourceMappingURL=3541.aa2e9b04.chunk.js.map