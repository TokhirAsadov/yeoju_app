{"version":3,"file":"static/js/6454.3b9b8769.chunk.js","mappings":"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","sources":["components/spinner/Spinner2.jsx","components/uquvbulimi/statistics/EducationStatistics.jsx"],"sourcesContent":["import React from 'react';\r\nimport './spinner2.css'\r\n\r\nconst Spinner2 = () => {\r\n  return (\r\n    <div className={\"spinner2\"}>\r\n      <svg viewBox=\"0 0 120 120\">\r\n        <g className=\"g1\">\r\n          <rect className=\"r1\" x=\"30\" y=\"30\" width=\"60\" height=\"60\"/>\r\n          <rect className=\"big\" x=\"81\" y=\"81\" width=\"8\" height=\"8\"/>\r\n          <rect className=\"r_ol\" x=\"31\" y=\"31\" width=\"8\" height=\"8\"/>\r\n          <rect className=\"r_or\" x=\"81\" y=\"31\" width=\"8\" height=\"8\"/>\r\n          <rect className=\"r_ul\" x=\"31\" y=\"81\" width=\"8\" height=\"8\"/>\r\n          <xrect className=\"r_ur\" x=\"81\" y=\"81\" width=\"8\" height=\"8\"/>\r\n        </g>\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spinner2;","import React, {useEffect, useState} from 'react';\r\nimport styled from \"styled-components\";\r\nimport axios from \"axios\";\r\nimport {BASE_URL, getHeaders} from \"../../../utills/ServiceUrls\";\r\nimport moment from \"moment\";\r\nimport Spinner2 from \"../../spinner/Spinner2\";\r\nimport {Card, CardContent} from \"@mui/material\";\r\n\r\nconst EducationStatistics = () => {\r\n    const [check, setCheck] = useState(false);\r\n    const [data, setData] = useState([]);\r\n    const [statistics, setStatistics] = useState([]);\r\n\r\n    const [map1, setMap1] = useState(new Map());\r\n\r\n    const {headers} = getHeaders();\r\n\r\n    useEffect(() => {\r\n        setCheck(true);\r\n        setCheck(false);\r\n        fetchData();\r\n\r\n    }, [])\r\n\r\n    const [objWeek, setObjWeek] = useState({\r\n        date: new Date(),\r\n        dateFrom: moment(new Date()).startOf('isoWeek').toDate(),\r\n        dateTo: moment(new Date()).endOf('isoWeek').toDate(),\r\n        weekNumber: moment(new Date()).isoWeek(),\r\n        year: moment(new Date()).year(),\r\n        weekday: moment(new Date()).day(),\r\n    });\r\n\r\n\r\n    const fetchData = () => {\r\n\r\n        axios.get(BASE_URL + `/timeTableByWeekOfYear/getTimeTableByAllRoomAndWeek2?week=${objWeek?.weekNumber}&weekday=${objWeek.weekday}&year=${objWeek.year}&t=false`, {headers})\r\n            .then(res => {\r\n                setData(res?.data?.obj);\r\n                setStatistics(res?.data?.secondObj);\r\n                setCheck(true)\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        data && setMap1(downloadStatistics(data, statistics))\r\n    }, [data])\r\n\r\n\r\n\r\n    const downloadStatistics = (data, statistics) => {\r\n\r\n        let kafedraNames = new Set();\r\n        let connectKafedra = new Map();\r\n        let kafedraAndTeachers = new Map();\r\n        let lessonAndStatistics = new Map();\r\n\r\n        data?.length > 0 && data?.forEach(d => {\r\n            d?.forEach(d2 => {\r\n                kafedraNames.add(d2?.kafedraId)\r\n                connectKafedra.set(d2, d2?.kafedraId)\r\n\r\n            })\r\n        })\r\n        kafedraNames.forEach(k => {\r\n            let arr = [];\r\n            connectKafedra.forEach((value, key) => {\r\n                if (value === k) {\r\n                    arr.push(key)\r\n                }\r\n            })\r\n            kafedraAndTeachers.set(k, arr)\r\n        })\r\n        kafedraAndTeachers.forEach((value, key) => {\r\n            let arr2 = [];\r\n            let names = new Set();\r\n            let teacherLessons = new Map();\r\n            value?.forEach((val) => {\r\n                let itm = statistics.flat()?.filter(s => s?.room === val?.room && s?.section === val?.hourNumber);\r\n                if (itm?.length === 0) {\r\n                    arr2.push(val)\r\n                }\r\n            })\r\n            arr2?.forEach(i => {\r\n                names.add(i?.teacherName[0])\r\n            })\r\n            names.forEach(i => {\r\n                teacherLessons.set(i, arr2?.filter(i2 => i2?.teacherName[0] === i))\r\n            })\r\n            lessonAndStatistics.set(key, teacherLessons)\r\n        })\r\n\r\n\r\n        const arr = Array.from(lessonAndStatistics);\r\n        return arr?.map(i => [i[0], Array.from(i[1])]);\r\n    }\r\n\r\n\r\n    return (\r\n        <Container>\r\n            <Card>\r\n                <CardContent>\r\n                    {\r\n                        check && data?.length > 0 && map1?.length > 0\r\n                            ? map1?.map(i2 => {\r\n                                return <Table>\r\n                                    <Row>\r\n                                        <KafedraName>{i2[0]}</KafedraName>\r\n                                        <ItemWrapper>\r\n                                            {\r\n                                                i2[1]?.map((teacher, teacherIndex) => {\r\n                                                    return <Item>\r\n                                                        <TeacherCount>{teacherIndex + 1}</TeacherCount>\r\n                                                        <TeacherItem>{teacher[0]}</TeacherItem>\r\n                                                        <DataItem>\r\n                                                            {\r\n                                                                teacher[1]?.sort((a, b) => (a.hourNumber > b.hourNumber) ? 1 : ((b.hourNumber > a.hourNumber) ? -1 : 0))?.map(les => {\r\n                                                                    return <StatisticsItem>\r\n                                                                        <Child flex={2}\r\n                                                                               fs={\"9px\"}>{les?.lessonName}</Child>\r\n                                                                        <Child flex={1} fs={\"11px\"}>{les?.room}</Child>\r\n                                                                        <Child\r\n                                                                            flex={1}>{moment(objWeek?.date).format(\"DD-MM-YYYY\")}</Child>\r\n                                                                        <Child\r\n                                                                            flex={1}>{les?.periodStartAndEndTime}</Child>\r\n                                                                    </StatisticsItem>\r\n                                                                })\r\n                                                            }\r\n                                                        </DataItem>\r\n                                                    </Item>\r\n                                                })\r\n                                            }\r\n                                        </ItemWrapper>\r\n                                    </Row>\r\n                                </Table>\r\n                            })\r\n                            : <Spinner2/>\r\n                    }\r\n                </CardContent>\r\n            </Card>\r\n        </Container>\r\n    );\r\n};\r\n\r\nconst Child = styled.div`\r\n    flex: ${props => props.flex || 1};\r\n    font-size: ${props => props.fs || \"14px\"};\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border: 1px solid blue;\r\n    padding: 5px;\r\n    text-align: center;\r\n`\r\n\r\nconst StatisticsItem = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    \r\n`\r\n\r\nconst DataItem = styled.div`\r\n    flex: 6;\r\n    display: flex;\r\n    flex-direction: column;\r\n\r\n`\r\n\r\nconst TeacherItem = styled.div`\r\n    flex: 2;\r\n    border: 1px solid blue;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n`\r\nconst TeacherCount = styled.div`\r\n    flex: 0.25;\r\n    border: 1px solid blue;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n`\r\n\r\nconst Item = styled.div`\r\n    width: 100%;\r\n    display: flex;\r\n    border: 1px solid blue;\r\n\r\n`\r\n\r\nconst ItemWrapper = styled.div`\r\n    flex: 8;\r\n    display: flex;\r\n    flex-direction: column;\r\n`\r\n\r\nconst KafedraName = styled.div`\r\n    flex: 2;\r\n    border: 2px solid blue;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    text-align: center;\r\n    font-size: 24px;\r\n\r\n`\r\n\r\nconst Row = styled.div`\r\n    width: 100%;\r\n    display: flex;\r\n`\r\n\r\nconst Table = styled.div`\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background-color: #fff;\r\n`\r\n\r\nconst Container = styled.div`\r\n    width: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 20px;\r\n    padding: 10px;\r\n\r\n`\r\n\r\nexport default EducationStatistics;"],"names":["className","viewBox","x","y","width","height","Child","styled","props","flex","fs","StatisticsItem","DataItem","TeacherItem","TeacherCount","Item","ItemWrapper","KafedraName","Row","Table","Container","useState","check","setCheck","data","setData","statistics","setStatistics","Map","map1","setMap1","headers","getHeaders","useEffect","fetchData","date","Date","dateFrom","moment","startOf","toDate","dateTo","endOf","weekNumber","isoWeek","year","weekday","day","objWeek","axios","BASE_URL","then","res","obj","secondObj","catch","err","console","log","downloadStatistics","kafedraNames","Set","connectKafedra","kafedraAndTeachers","lessonAndStatistics","length","forEach","d","d2","add","kafedraId","set","k","arr","value","key","push","arr2","names","teacherLessons","val","itm","flat","filter","s","room","section","hourNumber","i","teacherName","i2","Array","from","map","teacher","teacherIndex","sort","a","b","les","lessonName","format","periodStartAndEndTime"],"sourceRoot":""}