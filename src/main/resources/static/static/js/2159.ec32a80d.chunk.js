"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[2159],{52159:function(n,e,t){t.r(e);var i,o,l,r,a,s=t(30168),c=t(15861),d=t(1413),u=t(29439),f=t(64687),v=t.n(f),p=t(72791),h=t(17939),x=t(27301),m=t(95173),g=t(17425),Z=t(1582),j=t(48550),b=t(65117),w=t(84638),y=t(64554),k=t(16856),C=t(13400),I=t(39126),A=t(24518),L=t(88447),S=t(40071),P=t(20890),_=t(59434),z=t(55294),N=t(56960),T=t(80184);var D={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},E=h.ZP.div(i||(i=(0,s.Z)(["\n  ","\n"])),(0,m.qD)({width:"95% !important"})),q=h.ZP.div(o||(o=(0,s.Z)(["\n  width: 100%;\n  display: flex;\n  gap: 5px;\n  align-items: start;\n  font-size: 16px;\n  text-align: start;\n  color: ",";\n  font-weight: bold;\n  ","\n"])),x.Lr,(0,m.qD)({fontSize:"14px"})),U=h.ZP.div(l||(l=(0,s.Z)(["\n  padding: 15px;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  background-color: #fff;\n  border-radius: 0.5rem;\n  box-shadow: 1px 3px 8px 0 rgba(34, 60, 80, 0.2);\n\n  p {\n    display: flex;\n    align-items: center;\n    color: black;\n    font-size: 14px;\n  }\n\n"]))),V=h.ZP.div(r||(r=(0,s.Z)(["\n  width: 100%;\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr 1fr;\n  gap: 20px;\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),(0,m.sp)({gridTemplateColumns:"1fr 1fr 1fr  "}),(0,m.bH)({gridTemplateColumns:"1fr 1fr 1fr  "}),(0,m.IV)({gridTemplateColumns:"1fr 1fr "}),(0,m.yG)({gridTemplateColumns:"1fr 1fr "}),(0,m.qD)({gridTemplateColumns:"1fr "})),B=h.ZP.div(a||(a=(0,s.Z)(["\n  width: 100%;\n  padding: 1rem;\n\n  h2 {\n    color: ",";\n    font-size: 28px;\n  }\n"])),x.Lr);e.default=function(){var n=(0,_.v9)((function(n){var e;return null===(e=n.section)||void 0===e?void 0:e.section})),e=(0,_.v9)((function(n){var e;return null===(e=n.user)||void 0===e?void 0:e.user})),t=[{title:"Update",icon:(0,T.jsx)(k.ZO5,{color:"#0087be"})},{title:"Delete",icon:(0,T.jsx)(k.ZkW,{color:"red"})}],i=(0,x.wU)().headers,o=(0,p.useState)({id:null,name:null,kafedraId:null===n||void 0===n?void 0:n.id}),l=(0,u.Z)(o,2),r=l[0],a=l[1],s=(0,p.useState)([]),f=(0,u.Z)(s,2),h=f[0],m=f[1],H=(0,p.useState)(!1),O=(0,u.Z)(H,2),W=O[0],F=O[1],G=p.useState(null),K=(0,u.Z)(G,2),M=K[0],Q=K[1],R=(0,p.useState)(!0),J=(0,u.Z)(R,2),X=J[0],Y=J[1],$=Boolean(M),nn=function(){return F(!0)},en=function(){F(!1),a((function(n){return(0,d.Z)((0,d.Z)({},n),{},{name:null,id:null})}))},tn=function(){var n=(0,c.Z)(v().mark((function n(e){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.Z.post("".concat(x._n,"/lesson/createLessonV2"),e,{headers:i}).then((function(n){var e;N.Am.success(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.message),on(),en()})).catch((function(n){console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),on=function(){var n=(0,c.Z)(v().mark((function n(){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.Z.get("".concat(x._n,"/lesson/getAllLessonByKafedraOwnerId/").concat(null===e||void 0===e?void 0:e.id),{headers:i}).then((function(n){var e;m(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.obj),console.log(n.data)})).catch((function(n){console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,p.useEffect)((function(){null!==r&&void 0!==r&&r.name&&""!==(null===r||void 0===r?void 0:r.name)?Y(!1):Y(!0)}),[r]);var ln=function(n){Q(null),"Update"===n?nn():"Delete"===n&&sn(null===r||void 0===r?void 0:r.id)},rn=function(){var n=(0,c.Z)(v().mark((function n(){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.Z.get("".concat(x._n,"/lesson/checkLessonNameAlreadyExists?subjectName=").concat(null===r||void 0===r?void 0:r.name),{headers:i}).then((function(n){var e,t;null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e.success?N.Am.error("\u26a0\ufe0f"+(null===(t=n.data)||void 0===t?void 0:t.message)):an()})).catch((function(n){console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),an=function(){var n=(0,c.Z)(v().mark((function n(){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.Z.put("".concat(x._n,"/lesson/updateLessonV2"),r,{headers:i}).then((function(n){var e,t,i;null!==n&&void 0!==n&&null!==(e=n.data)&&void 0!==e&&e.success?N.Am.success(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message):N.Am.error(null===n||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message),on(),en()})).catch((function(n){console.log(n)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),sn=function(){var n=(0,c.Z)(v().mark((function n(e){return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.confirm("Are you sure you want to delete lesson?")){n.next=5;break}return n.next=3,z.Z.delete("".concat(x._n,"/lesson/deleteLesson/").concat(e),{headers:i}).then((function(n){var t;N.Am.success(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.message),m(null===h||void 0===h?void 0:h.filter((function(n){return n.subjectId!==e}))),a((function(n){return(0,d.Z)((0,d.Z)({},n),{},{name:null,id:null})}))})).catch((function(n){console.log(n)}));case 3:n.next=6;break;case 5:a((function(n){return(0,d.Z)((0,d.Z)({},n),{},{name:null,id:null})}));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,p.useEffect)((function(){on()}),[]),(0,T.jsxs)(B,{children:[(0,T.jsxs)(y.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[(0,T.jsx)("h2",{children:"Subjects"}),(0,T.jsx)(A.Z,{variant:"contained",onClick:nn,children:"create a new subject"})]}),(0,T.jsx)(V,{children:null===h||void 0===h?void 0:h.map((function(n,e){return(0,T.jsx)(U,{children:(0,T.jsxs)(y.Z,{display:"flex",alignItems:"flex-start",children:[(0,T.jsx)(y.Z,{width:"100%",children:(0,T.jsxs)(q,{children:[(0,T.jsx)(y.Z,{width:"30px",height:"30px",children:(0,T.jsx)(g.i8,{size:30})}),(0,T.jsx)("span",{children:null===n||void 0===n?void 0:n.subjectName})]})}),(0,T.jsx)(C.Z,{"aria-label":"actions",id:"long-button","aria-controls":$?"long-menu":void 0,"aria-expanded":$?"true":void 0,"aria-haspopup":"true",onClick:function(e){return t=e,i=null===n||void 0===n?void 0:n.subjectId,Q(t.currentTarget),void a((function(n){var e;return(0,d.Z)((0,d.Z)({},n),{},{id:i,name:null===h||void 0===h||null===(e=h.find((function(n){return(null===n||void 0===n?void 0:n.subjectId)===i})))||void 0===e?void 0:e.subjectName})}));var t,i},size:"small",children:(0,T.jsx)(I.FQA,{})})]})},null===n||void 0===n?void 0:n.subjectId)}))}),(0,T.jsx)(L.Z,{open:W,onClose:en,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,T.jsxs)(y.Z,{sx:D,component:E,children:[(0,T.jsxs)(y.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,T.jsx)(P.Z,{variant:"h6",color:x.Lr,mt:1,children:null===(null===r||void 0===r?void 0:r.id)?"Create a new subject":"Update subject"}),(0,T.jsxs)(C.Z,{onClick:en,children:[" ",(0,T.jsx)(S.bjh,{size:22})]})]}),(0,T.jsxs)(y.Z,{children:[(0,T.jsx)(Z.Z,{sx:{height:"150px",padding:"0 10px"},direction:"row",justifyContent:"center",alignItems:"center",children:(0,T.jsx)(j.Z,{fullWidth:!0,value:null===r||void 0===r?void 0:r.name,required:!0,label:"Subject name",onChange:function(n){return a((function(e){return(0,d.Z)((0,d.Z)({},e),{},{name:n.target.value})}))}})}),(0,T.jsxs)(Z.Z,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,T.jsx)(A.Z,{variant:"outlined",onClick:en,children:"Cancel"}),(0,T.jsx)(A.Z,{variant:"contained",onClick:null===(null===r||void 0===r?void 0:r.id)?function(){console.log(r,"save method"),z.Z.get("".concat(x._n,"/lesson/checkLessonNameAlreadyExists?subjectName=").concat(null===r||void 0===r?void 0:r.name),{headers:i}).then((function(n){var e,t,i;(console.log(null===(e=n.data)||void 0===e?void 0:e.success),null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.success)?N.Am.error("\u26a0\ufe0f"+(null===(i=n.data)||void 0===i?void 0:i.message)):tn(r)})).catch((function(n){console.log(n)}))}:rn,disabled:X,children:null===(null===r||void 0===r?void 0:r.id)?"save":"update"})]})]})]})}),(0,T.jsx)(b.Z,{id:"long-menu",MenuListProps:{"aria-labelledby":"long-button"},anchorEl:M,open:$,onClose:ln,PaperProps:{style:{maxHeight:180,width:"20ch"}},children:t.map((function(n,e){return(0,T.jsx)(w.Z,{onClick:function(){return ln(n.title)},children:(0,T.jsxs)(y.Z,{display:"flex",gap:"5px",alignItems:"center",children:[n.icon," ",n.title]})},e)}))})]})}}}]);
//# sourceMappingURL=2159.ec32a80d.chunk.js.map