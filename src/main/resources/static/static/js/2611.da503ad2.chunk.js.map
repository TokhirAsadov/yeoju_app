{"version":3,"file":"static/js/2611.da503ad2.chunk.js","mappings":"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","sources":["components/teacher/timeTable/TeacherTimeTable.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport styled from \"styled-components\";\r\nimport {BASE_URL, getHeaders, mainColor, navbarHeight} from \"../../../utills/ServiceUrls\";\r\nimport axios from \"axios\";\r\nimport TeacherTimeTableOfWeek from \"./TeacherTimeTableOfWeek\";\r\nimport {useSelector} from \"react-redux\";\r\nimport moment from \"moment\";\r\nimport 'moment/locale/ru';\r\nconst TeacherTimeTable = () => {\r\n\r\n  const {headers} = getHeaders();\r\n  const [data,setData] = useState([]);\r\n  const [statistics,setStatistics] = useState(null);\r\n  const user = useSelector(state => state?.user?.user)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const getDaysOfWeek = (weekNumber, year) => {\r\n        moment.locale('ru');\r\n        const startDate = moment().year(year).isoWeek(weekNumber).startOf('isoWeek');\r\n        const daysOfWeek = [];\r\n        for (let i = 0; i < 6; i++) {\r\n            daysOfWeek.push(startDate.clone().add(i, 'days').toDate());\r\n        }\r\n        return daysOfWeek;\r\n    };\r\n    const [objWeek, setObjWeek] = useState({\r\n        date: new Date(),\r\n        dateFrom: moment(new Date()).startOf('isoWeek').toDate(),\r\n        dateTo: moment(new Date()).endOf('isoWeek').toDate(),\r\n        weekNumber: moment( new Date()).isoWeek(),\r\n        daysOfWeek:getDaysOfWeek(moment( new Date()).isoWeek(),moment().year()),\r\n    });\r\n\r\n    useEffect(()=>{\r\n        setIsLoading(true)\r\n    axios.get(BASE_URL+\"/timeTableByWeekOfYear/getTeacherTimeTable?t=\"+user?.id+\"&week=\"+objWeek?.weekNumber+\"&year=\"+moment(objWeek?.date).format(\"YYYY\"),{headers})\r\n      .then(res=>{\r\n        const resultData = res?.data?.obj\r\n\r\n        const convertDate = [];\r\n\r\n        const showGroups = {};\r\n\r\n        resultData?.forEach((item) => {\r\n          item.shows.forEach((show) => {\r\n            const key = show.daysName;\r\n            if (!showGroups[key]) {\r\n              showGroups[key] = {\r\n                teacherData: item.teacherData,\r\n                shows: [],\r\n              };\r\n            }\r\n            showGroups[key].shows.push(show);\r\n          });\r\n        });\r\n\r\n        for (const key in showGroups) {\r\n          convertDate.push(showGroups[key]);\r\n        }\r\n\r\n        console.log(convertDate);\r\n        setData(convertDate)\r\n          setIsLoading(false)\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n\r\n\r\n    axios.get(BASE_URL+\"/user/getTeacherStatisticsForTimeTableByWeek?teacherId=\"+user?.id+\"&week=\"+objWeek?.weekNumber+\"&year=\"+moment(objWeek?.date).format(\"YYYY\"), {headers})\r\n      .then(res => {\r\n\r\n        setStatistics(res?.data?.obj);\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n      })\r\n\r\n  },[])\r\n\r\n  return (\r\n    <Container>\r\n      <Title>Teacher Time table</Title>\r\n\r\n      {\r\n        statistics!==null && <TeacherTimeTableOfWeek isLoading={isLoading} obj={objWeek} data={data} statistics={statistics}/>\r\n      }\r\n\r\n    </Container>\r\n  );\r\n};\r\n\r\nconst Title = styled.h3`\r\n  color: ${mainColor};\r\n  margin-bottom: 20px;\r\n`\r\n\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  padding: 1rem!important;\r\n`;\r\n\r\n\r\nexport default TeacherTimeTable;"],"names":["Title","styled","mainColor","Container","headers","getHeaders","useState","data","setData","statistics","setStatistics","user","useSelector","state","isLoading","setIsLoading","date","Date","dateFrom","moment","startOf","toDate","dateTo","endOf","weekNumber","isoWeek","daysOfWeek","year","startDate","i","push","clone","add","getDaysOfWeek","objWeek","useEffect","axios","BASE_URL","id","format","then","res","resultData","obj","convertDate","showGroups","key","forEach","item","shows","show","daysName","teacherData","console","log","catch","err"],"sourceRoot":""}