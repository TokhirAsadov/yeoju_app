"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[7815],{67815:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var o,i,l,d,a,r,s,u,v,c,f,h,x,p,m=t(30168),g=t(1413),w=t(29439),b=t(72791),D=t(17939),Z=t(95173),y=t(73766),j=t(48550),k=t(55294),Y=t(27301),H=t(16856),P=t(72426),S=t.n(P),z=t(1582),M=t(47047),N=t(80184),B=D.ZP.span(o||(o=(0,m.Z)(["\n  color: ",";\n  position: absolute;\n  top: 40%;\n  right: -26.3px;\n  font-size: 11px;\n  rotate: 90deg;\n"])),(function(e){return null!==e&&void 0!==e&&e.color?"green":"red"})),C=D.ZP.span(i||(i=(0,m.Z)(["\n  display: flex;\n  align-items: start;\n  font-size: ",";\n  text-align: start;\n  font-weight: 600;\n  letter-spacing: 0.8px;\n"])),(function(e){return e.fontSize||"7px"})),E=D.ZP.span(l||(l=(0,m.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: ",";\n  text-align: center;\n  font-weight: 600;\n  letter-spacing: 0.8px;\n"])),(function(e){return e.fontSize||"7px"})),F=D.ZP.span(d||(d=(0,m.Z)(["\n  font-size: 12px;\n  font-weight: 300;\n"]))),T=D.ZP.div(a||(a=(0,m.Z)(["\n  width: 100%;\n  height: 130px;\n  display: flex;\n  border-top: 0.1px solid #cacaca;\n"]))),W=D.ZP.div(r||(r=(0,m.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  font-size: 14px;\n  font-weight: 600;\n  letter-spacing: 0.2px;\n"]))),_=D.ZP.span(s||(s=(0,m.Z)(["\n  flex: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  gap: 8px;\n  border-right: 0.1px solid #cacaca;\n  font-size: 9px;\n  padding: 10px!important;\n\n  background-color: ",";\n  color: ",";\n  \n"])),(function(e){return e.flex}),(function(e){return null!==e&&void 0!==e&&e.bg?"red":"white"}),(function(e){return null!==e&&void 0!==e&&e.bg?"white":"#000"})),I=D.ZP.span(u||(u=(0,m.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column; \n  gap: 20px;\n  position: relative;\n"]))),O=D.ZP.div(v||(v=(0,m.Z)(["\n  width: 100%;\n  height: 60px;\n  display: flex;\n  background-color: #B4E2FB;\n  font-size: 14px;\n  font-weight: 600;\n  letter-spacing: 0.2px;\n"]))),R=D.ZP.div(c||(c=(0,m.Z)(["\n  overflow: hidden;\n  margin: 0 auto;\n  width: 1300px;\n  border: 0.2px solid ",";\n  border-radius: 7px;\n  box-shadow: rgba(99, 99, 99, 0.2) 0 2px 8px 0;\n"])),Y.Lr),q=D.ZP.div(f||(f=(0,m.Z)(["\n  width: 100%;\n  overflow: scroll;\n"]))),A=function(e){var n,t=e.data,o=e.statistics,i=e.weekDay,l=e.week,d=(0,b.useState)(!1),a=(0,w.Z)(d,2),r=a[0],s=a[1];(0,b.useEffect)((function(){console.log(t,"data"),console.log(o,"statistics"),s(!0)}),[]);var u=new Date,v=S()(new Date).isoWeek(),c=[{number:1,hour:"9:00 - 9:50",start:u.setHours(9,0,0),end:u.setHours(9,50,0)},{number:2,hour:"10:00 - 10:50",start:u.setHours(10,0,0),end:u.setHours(10,50,0)},{number:3,hour:"11:00 - 11:50",start:u.setHours(11,0,0),end:u.setHours(11,50,0)},{number:4,hour:"12:00 - 12:50",start:u.setHours(12,0,0),end:u.setHours(12,50,0)},{number:5,hour:"13:00 - 13:50",start:u.setHours(13,0,0),end:u.setHours(13,50,0)},{number:6,hour:"14:00 - 14:50",start:u.setHours(14,0,0),end:u.setHours(14,50,0)},{number:7,hour:"15:00 - 15:50",start:u.setHours(15,0,0),end:u.setHours(15,50,0)},{number:8,hour:"16:00 - 16:50",start:u.setHours(16,0,0),end:u.setHours(16,50,0)},{number:9,hour:"17:00 - 17:50",start:u.setHours(17,0,0),end:u.setHours(17,50,0)},{number:10,hour:"18:00 - 18:50",start:u.setHours(18,0,0),end:u.setHours(18,50,0)},{number:11,hour:"19:00 - 19:50",start:u.setHours(19,0,0),end:u.setHours(19,50,0)},{number:12,hour:"20:00 - 20:50",start:u.setHours(20,0,0),end:u.setHours(20,50,0)}],f=[{day:1,name:"\u041f\u043d"},{day:2,name:"\u0412\u0442"},{day:3,name:"\u0421\u0440"},{day:4,name:"\u0427\u0442"},{day:5,name:"\u041f\u0442"},{day:6,name:"\u0421\u0431"}];return(0,N.jsx)(q,{children:r?(0,N.jsxs)(R,{children:[(0,N.jsxs)(O,{children:[(0,N.jsx)(_,{flex:1,children:"TIME"}),null===c||void 0===c?void 0:c.map((function(e,n){return(0,N.jsx)(_,{flex:2,children:null===e||void 0===e?void 0:e.hour},n)}))]}),(0,N.jsx)(W,{children:null===f||void 0===f||null===(n=f.filter((function(e){return i?e.day===i:e.day===(new Date).getDay()})))||void 0===n?void 0:n.map((function(e,n){return o&&0!==(null===o||void 0===o?void 0:o.length)&&o[null===e||void 0===e?void 0:e.day],(0,N.jsxs)(T,{children:[(0,N.jsx)(_,{flex:1,children:(0,N.jsx)(F,{children:null===e||void 0===e?void 0:e.name})}),null===c||void 0===c?void 0:c.map((function(n,i){var d,a,r,s,u,c,f,h,x,p,m,g,w,b,D=null===t||void 0===t?void 0:t.find((function(e){return(null===e||void 0===e?void 0:e.hourNumber)===(null===n||void 0===n?void 0:n.number)})),Z=null===o||void 0===o?void 0:o.filter((function(e){return(null===e||void 0===e?void 0:e.section)===(null===n||void 0===n?void 0:n.number)})),y=new Date(null===n||void 0===n?void 0:n.start);return y.setDate(y.getDate()-y.getDay()+(null===e||void 0===e?void 0:e.day)),D?(0,N.jsx)(_,{flex:2,bg:(void 0===Z||0===(null===Z||void 0===Z?void 0:Z.length))&&((null===e||void 0===e?void 0:e.day)<=(new Date).getDay()&&((null===n||void 0===n?void 0:n.start)<new Date||y<new Date)||l<v),children:(0,N.jsxs)(I,{children:[(0,N.jsx)(E,{fontSize:(null===D||void 0===D||null===(d=D.lessonName)||void 0===d?void 0:d.length)>18?"8px":"7px",children:D.lessonName}),Z&&0!==(null===Z||void 0===Z?void 0:Z.length)&&(0,N.jsxs)(B,{color:new Date(null===n||void 0===n?void 0:n.start).setDate(new Date(null===(a=Z[0])||void 0===a?void 0:a.time).getDate())>=(null===(r=Z[0])||void 0===r?void 0:r.time),children:[new Date(null===n||void 0===n?void 0:n.start).setDate(new Date(null===(s=Z[0])||void 0===s?void 0:s.time).getDate())>=(null===(u=Z[0])||void 0===u?void 0:u.time)?(0,N.jsx)(H.Zjh,{size:16}):(0,N.jsx)(H.X6R,{size:16})," ",S()(new Date(new Date(null===n||void 0===n?void 0:n.start).setDate(new Date(null===(c=Z[0])||void 0===c?void 0:c.time).getDate())>=(null===(f=Z[0])||void 0===f?void 0:f.time)?new Date(null===n||void 0===n?void 0:n.start).setDate(new Date(null===(h=Z[0])||void 0===h?void 0:h.time).getDate())-(null===(x=Z[0])||void 0===x?void 0:x.time):(null===(p=Z[0])||void 0===p?void 0:p.time)-new Date(null===n||void 0===n?void 0:n.start).setDate(new Date(null===(m=Z[0])||void 0===m?void 0:m.time).getDate()))).format("mm:ss")]}),(void 0===Z||0===(null===Z||void 0===Z?void 0:Z.length))&&((null===e||void 0===e?void 0:e.day)<=(new Date).getDay()&&((null===n||void 0===n?void 0:n.start)<new Date||y<new Date)||l<v)&&(0,N.jsxs)(B,{color:!1,children:[" ",(0,N.jsx)(H.X6R,{size:12})," "," "," 50:00"]}),(0,N.jsx)(C,{fontSize:(null===D||void 0===D||null===(g=D.teacherName)||void 0===g?void 0:g.length)>1?"8px":"7px",children:(null===D||void 0===D||null===(w=D.teacherName)||void 0===w?void 0:w.length)>1?null===D||void 0===D||null===(b=D.teacherName)||void 0===b?void 0:b.join("/ "):null===D||void 0===D?void 0:D.teacherName[0]})]})},i):(0,N.jsx)(_,{flex:2,children:" - "},i)}))]},n)}))})]}):(0,N.jsx)(z.Z,{spacing:1,children:(0,N.jsx)(M.Z,{variant:"rectangular",style:{margin:"0 auto"},width:1076,height:490})})})},X=t(69783),L=t(36571),U=t(87607),V=D.ZP.div(h||(h=(0,m.Z)(["\n    width: 300px;\n    ","\n"])),(0,Z.qD)({width:"80%"})),$=D.ZP.div(x||(x=(0,m.Z)(["\n    margin: 15px 0 0;\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    justify-content: start;\n    ","\n"])),(0,Z.qD)({justifyContent:"center"})),G=D.ZP.div(p||(p=(0,m.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n\n"]))),J=function(){var e=(0,b.useState)([]),n=(0,w.Z)(e,2),t=n[0],o=n[1],i=(0,b.useState)([]),l=(0,w.Z)(i,2),d=l[0],a=l[1],r=(0,b.useState)([]),s=(0,w.Z)(r,2),u=s[0],v=s[1],c=(0,b.useState)(null),f=(0,w.Z)(c,2),h=f[0],x=f[1],p=(0,b.useState)(!1),m=(0,w.Z)(p,2),D=m[0],Z=m[1],H=(0,b.useState)([]),P=(0,w.Z)(H,2),z=P[0],M=P[1],B=(0,b.useState)(null),C=(0,w.Z)(B,2),E=C[0],F=C[1],T=(0,b.useState)({date:new Date,dateFrom:null,dateTo:null,weekNumber:null,year:null,weekday:null}),W=(0,w.Z)(T,2),_=W[0],I=W[1],O=(0,Y.wU)().headers;(0,b.useEffect)((function(){k.Z.get(Y._n+"/building/getBuildingsForSelect",{headers:O}).then((function(e){var n,t,o;console.log(e.data," <- buildings fetch"),M(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.obj),F(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(o=t.obj[0])||void 0===o?void 0:o.label)})).catch((function(e){console.log(e)})),k.Z.get(Y._n+"/room/getRoomsForSelect",{headers:O}).then((function(e){var n;o(null===(n=e.data)||void 0===n?void 0:n.obj)})).catch((function(e){console.log(e)}))}),[]),(0,b.useEffect)((function(){h&&_.weekday&&k.Z.get(Y._n+"/timeTableByWeekOfYear/getTimeTableByRoom?r="+h+"&week="+_.weekNumber+"&weekday="+_.weekday+"&year="+_.year,{headers:O}).then((function(e){var n,t;Z(!0),a(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.obj),v(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.secondObj)})).catch((function(e){console.log(e)}))}),[h,_]);var R=b.useState(S()()),q=(0,w.Z)(R,2),J=q[0],K=q[1];return(0,b.useEffect)((function(){!function(e){var n=S()(e.format("YYYY-MM-DD")).isoWeek(),t=S()(e.format("YYYY-MM-DD")).day(),o=S()(e.format("YYYY-MM-DD")).year(),i=S()(e.format("YYYY-MM-DD")).startOf("isoWeek").toDate(),l=S()(e.format("YYYY-MM-DD")).endOf("isoWeek").toDate();I({date:e,dateFrom:i,dateTo:l,weekNumber:n,year:o,weekday:t})}(J)}),[J]),(0,N.jsxs)(G,{children:[(0,N.jsxs)($,{children:[(0,N.jsx)(V,{children:(0,N.jsx)(y.Z,{disablePortal:!0,id:"combo-box-demo",options:z,defaultValue:z[0],onChange:function(e,n){F(null===n||void 0===n?void 0:n.label)},renderInput:function(e){return(0,N.jsx)(j.Z,(0,g.Z)((0,g.Z)({},e),{},{label:"Buildings"}))}})}),(0,N.jsx)(V,{children:(0,N.jsx)(y.Z,{disablePortal:!0,id:"combo-box-demo",options:null===t||void 0===t?void 0:t.filter((function(e){var n;return null===e||void 0===e||null===(n=e.label)||void 0===n?void 0:n.startsWith(null===E||void 0===E?void 0:E.substring(0,1))})),onChange:function(e,n){x(null===n||void 0===n?void 0:n.label)},sx:{width:300},renderInput:function(e){return(0,N.jsx)(j.Z,(0,g.Z)((0,g.Z)({},e),{},{label:"Auditory"}))}})}),(0,N.jsx)(V,{children:(0,N.jsx)(L._,{dateAdapter:X.Z,children:(0,N.jsx)(U.$,{label:"Day",inputFormat:"DD/MM/YYYY",value:J,onChange:function(e){K(e)},renderInput:function(e){return(0,N.jsx)(j.Z,(0,g.Z)({sx:{width:"300px !important"}},e))}})})})]}),D&&(0,N.jsx)(A,{data:d,statistics:u,weekDay:_.weekday,week:_.weekNumber})]})}}}]);
//# sourceMappingURL=7815.72dfe140.chunk.js.map