"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[1139],{81139:function(e,n,t){t.r(n),t.d(n,{default:function(){return Y}});var r,a,i,o,l,c,s,d=t(30168),u=t(1413),f=t(29439),h=t(72791),p=t(17939),x=t(56355),g=t(1582),m=t(57621),Z=t(39504),j=t(89704),b=t(58766),v=t(27301),C=t(64554),y=t(24518),S=t(13400),w=t(58617),k=t(88447),M=t(40071),I=t(20890),D=t(95173),A=t(55294),z=t(56960),P=t(84257),U=t(48432),N=t(48550),R=t(80184),O=function(e){var n=e.closeBtnFn,t=e.fetchData,r=e.putData,a=r||{studentId:"",year:"",semester:"",subject:"",credit:"",score:""},i=(0,h.useState)(a),o=(0,f.Z)(i,2),l=o[0],c=o[1];return(0,R.jsxs)(_,{children:[(0,R.jsxs)(T,{children:[(0,R.jsx)(N.Z,{fullWidth:!0,disabled:!0,label:"StudentId",value:l.studentId,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{studentId:e.target.value})}))}}),(0,R.jsx)(N.Z,{fullWidth:!0,label:"Year",value:l.year,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{year:e.target.value})}))}}),(0,R.jsx)(N.Z,{fullWidth:!0,label:"Semester",value:l.semester,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{semester:e.target.value})}))}}),(0,R.jsx)(N.Z,{fullWidth:!0,label:"Subject",value:l.subject,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{subject:e.target.value})}))}}),(0,R.jsx)(N.Z,{fullWidth:!0,label:"Credit",type:"number",value:l.credit,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{credit:e.target.value})}))}}),(0,R.jsx)(N.Z,{fullWidth:!0,label:"Score",value:l.score,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{score:e.target.value})}))}})]}),(0,R.jsxs)(g.Z,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,R.jsx)(y.Z,{variant:"outlined",onClick:n,children:"Cancel"}),(0,R.jsx)(y.Z,{variant:"contained",onClick:function(){var e=!0;for(var a in l)if(""===l[a]){e=!1;break}if(e){var i=parseInt(l.credit,10);if(isNaN(i))z.Am.error("Please enter a valid number for Credit.");else{var o=(0,u.Z)((0,u.Z)({},l),{},{credit:i});console.log(o),r?function(e){A.Z.put(v._n+"/workOtherService/updateSingleResult",e).then((function(e){console.log(e),z.Am.success("Successfully updated"),t(),n()})).catch((function(e){console.log(e),z.Am.error("Error updated")}))}(o):function(e){A.Z.post(v._n+"/workOtherService/saveSingleResult",e).then((function(e){console.log(e),z.Am.success("Successfully saved"),t(),n()})).catch((function(e){console.log(e),z.Am.error("Error saving")}))}(o)}}else z.Am.error("Please fill in all the fields")},children:r?"update":"save"})]})]})},T=p.ZP.div(r||(r=(0,d.Z)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 20px;\n  margin-bottom: 20px;\n  ","\n"])),(0,D.qD)({gridTemplateColumns:"1fr"})),_=p.ZP.div(a||(a=(0,d.Z)(["\n  margin: 20px 0;\n\n"]))),E=(0,h.memo)(O),F=t(71986),W=p.ZP.div(i||(i=(0,d.Z)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n\n    h4 {\n        color: black;\n    }\n\n    h5 {\n        color: red;\n    }\n\n"]))),B=p.ZP.button(o||(o=(0,d.Z)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    padding: 5px;\n    border-radius: 50%;\n    border: none;\n    background-color: ",";\n    color: white;\n    font-size: 12px;\n"])),v.Lr),L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:700,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},G=p.ZP.div(l||(l=(0,d.Z)(["\n    ","\n"])),(0,D.qD)({width:"95% !important"})),H=p.ZP.div(c||(c=(0,d.Z)(["\n    display: flex;\n    align-items: center;\n    color: ",";\n    gap: 5px;\n\n    h1 {\n        margin: 0;\n        font-size: 30px;\n        font-weight: bold;\n\n    }\n"])),v.Lr),V=p.ZP.div(s||(s=(0,d.Z)(["\n    width: 100%;\n    padding: 1rem;\n\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]))),Y=function(){var e=function(e){var n=[{alph:"A+",Min:95,Max:100},{alph:"A",Min:90,Max:94},{alph:"B+",Min:85,Max:89},{alph:"B",Min:80,Max:84},{alph:"C+",Min:75,Max:79},{alph:"C",Min:70,Max:74},{alph:"D+",Min:65,Max:69},{alph:"D",Min:60,Max:64},{alph:"F",Min:0,Max:59},{alph:"FA",Min:0,Max:0}],t=parseInt(e);return 0!==t?n.find((function(e){return e.Min<=t})):n.find((function(e){return e.Min<=t&&e.Max<=t}))},n=F.gu,t=(0,h.useState)(1e3),r=(0,f.Z)(t,2),a=r[0],i=r[1],o=(0,h.useState)(null),l=(0,f.Z)(o,2),c=l[0],s=l[1],d=[{field:"count",headerName:"\u2116",sortable:!0,width:50,align:"center",justifyContent:"center"},{minWidth:100,flex:.4,field:"year",headerName:"Year",sortable:!0,align:"center",justifyContent:"center"},{minWidth:100,flex:.5,field:"studentId",headerName:"Student id",sortable:!0,align:"center",justifyContent:"center"},{flex:.3,field:"semester",headerName:"Semester",sortable:!0,align:"center"},{minWidth:200,flex:1,field:"subject",headerName:"Subject",editable:!1,sortable:!1,align:"center"},{flex:.3,field:"credit",headerName:"Credit",editable:!1,sortable:!1,align:"center"},{flex:.3,field:"score",headerName:"Score",editable:!1,sortable:!1,align:"center"},{flex:.3,field:"grade",headerName:"Grade",editable:!1,sortable:!1,align:"center"},{flex:.4,field:"action",headerName:"Action",editable:!1,sortable:!1,align:"center",renderCell:function(e){return(0,R.jsx)(g.Z,{direction:"row",spacing:2,justifyContent:"center",children:(0,R.jsx)(S.Z,{"aria-label":"change",color:"success",onClick:function(){return he(e.row)},children:(0,R.jsx)(w.z2D,{})})})}}],p=(0,v.wU)().headers,D=(0,h.useState)([]),N=(0,f.Z)(D,2),O=N[0],T=N[1],_=(0,h.useState)(!1),Y=(0,f.Z)(_,2),K=Y[0],J=Y[1],Q=(0,h.useState)(!1),X=(0,f.Z)(Q,2),$=X[0],ee=X[1],ne=(0,h.useState)(!1),te=(0,f.Z)(ne,2),re=te[0],ae=te[1],ie=(0,h.useState)(null),oe=(0,f.Z)(ie,2),le=oe[0],ce=oe[1],se=(0,h.useState)({page:0,pageSize:30}),de=(0,f.Z)(se,2),ue=de[0],fe=de[1],he=function(e){var n={id:e.id,studentId:e.studentId,year:e.year,semester:e.semester,subject:e.subject,credit:e.credit,score:e.score,grade:e.grade};console.log(n),s(n),ae(!0)},pe=function(){J(!0),A.Z.get("".concat(v._n,"/workOtherService/getResults?page=").concat(ue.page+1,"&size=").concat(ue.pageSize)).then((function(n){var t,r,a,o;i(null===(t=n.data.obj)||void 0===t?void 0:t.totalElements),T(null===n||void 0===n||null===(r=n.data)||void 0===r||null===(a=r.obj)||void 0===a||null===(o=a.content)||void 0===o?void 0:o.map((function(n,t){var r;return(0,u.Z)((0,u.Z)({},n),{},{count:t+1,grade:null===(r=e(null===n||void 0===n?void 0:n.score))||void 0===r?void 0:r.alph})})))})).catch((function(e){console.log(e)})).finally((function(){return J(!1)}))};(0,h.useEffect)((function(){pe()}),[ue]);var xe=function(){ce(null),ee(!1)},ge=function(){ae(!1),s(null)};return(0,R.jsxs)(V,{children:[(0,R.jsx)(P.Z,{titleFile:"MONITORING_STUDENT_RESULT_FILE",fetchData:pe,saveFileUrl:"/workOtherService/updateResult",urlBase:n}),(0,R.jsxs)(H,{children:[(0,R.jsx)(x.W95,{size:25}),(0,R.jsx)("h1",{children:"Results"})]}),(0,R.jsx)(m.Z,{children:(0,R.jsxs)(Z.Z,{children:[(0,R.jsx)(C.Z,{display:"flex",justifyContent:"space-between",mb:2,children:(0,R.jsx)(U.Z,{setData:T,searchUrl:"/otherService/studentsResults2/",pagination:ue,fetchData:pe})}),(0,R.jsx)(j._,{rowCount:a,columns:d,rows:O||[],loading:K,components:{Toolbar:b.n},pageSize:ue.pageSize,page:ue.page,rowsPerPageOptions:[10,30,50,70,100],paginationMode:"server",onPageChange:function(e){fe((function(n){return(0,u.Z)((0,u.Z)({},n),{},{page:e})}))},onPageSizeChange:function(e){fe((function(n){return(0,u.Z)((0,u.Z)({},n),{},{pageSize:e})}))},autoHeight:!0,initialState:{columns:{columnVisibilityModel:{action:!1}}}})]})}),(0,R.jsx)(k.Z,{open:$,onClose:xe,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,R.jsxs)(C.Z,{sx:L,component:G,children:[(0,R.jsxs)(W,{children:[(0,R.jsx)("h5",{children:"Delete"}),(0,R.jsxs)(B,{onClick:xe,children:[" ",(0,R.jsx)(M.bjh,{size:22})]})]}),(0,R.jsxs)(C.Z,{children:[(0,R.jsx)(g.Z,{sx:{height:"100px"},direction:"row",justifyContent:"center",alignItems:"center",children:(0,R.jsx)(I.Z,{variant:"h6",color:"black",children:"Do you want to delete !"})}),(0,R.jsxs)(g.Z,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,R.jsx)(y.Z,{variant:"outlined",onClick:xe,children:"Cancel"}),(0,R.jsx)(y.Z,{variant:"contained",color:"error",onClick:function(){le&&A.Z.delete("".concat(v._n,"/example/").concat(le),{headers:p}).then((function(e){xe(),z.Am.success("Delete item")})).catch((function(e){console.log(e),z.Am.error("Error deleting")}))},children:"Ok"})]})]})]})}),(0,R.jsx)(k.Z,{open:re,onClose:ge,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,R.jsxs)(C.Z,{sx:q,component:G,children:[(0,R.jsxs)(W,{children:[(0,R.jsx)("h3",{children:c?"Update":"Create"}),(0,R.jsxs)(B,{onClick:ge,children:[" ",(0,R.jsx)(M.bjh,{size:22})]})]}),(0,R.jsx)(C.Z,{children:(0,R.jsx)(E,{closeBtnFn:ge,fetchData:pe,putData:c})})]})})]})}},84257:function(e,n,t){var r,a=t(30168),i=t(29439),o=t(72791),l=t(64554),c=t(24518),s=t(78820),d=t(52739),u=t(55294),f=t(27301),h=t(17939),p=t(56960),x=t(13239),g=t(1582),m=t(80184),Z=h.ZP.div(r||(r=(0,a.Z)(["\n  position: relative;\n  width: 95%;\n  height: 30px;\n  //background-color: #ccc;\n  border-radius: 7px;\n  overflow: hidden;\n\n  .progress-bar {\n    background-color: ",";\n    color: #fff;\n    text-align: center;\n    line-height: 30px;\n    width: 0;\n    position: absolute;\n    transition: width 0.1s;\n  }\n"])),f.Lr);n.Z=function(e){var n=e.saveFileUrl,t=e.urlBase,r=e.fetchData,a=e.titleFile,h=(0,o.useState)(!1),j=(0,i.Z)(h,2),b=j[0],v=j[1],C=(0,o.useState)(0),y=(0,i.Z)(C,2),S=(y[0],y[1]);return(0,m.jsxs)(l.Z,{display:"flex",justifyContent:"end",children:[(0,m.jsxs)(g.Z,{direction:"row",spacing:2,children:[(0,m.jsxs)(c.Z,{startIcon:(0,m.jsx)(s.IEK,{}),variant:"contained",component:"label",onChange:function(e){v(!0);var t=e.target.files[0],a=f._n+n,i=localStorage.getItem(f.o3),o={headers:{"Content-Type":"multipart/form-data",Authorization:f.iv+i,"Access-Control-Allow-Origin":"*"},onUploadProgress:function(e){S(Math.round(100*e.loaded/e.total))}},l=new FormData;l.append("file",t),console.log(t),u.Z.put(a,l,o).then((function(e){console.log(e),p.Am.success("Uploaded file successfully"),r()})).catch((function(e){console.log(e),p.Am.error("Upload failed")})).finally((function(){return v(!1)})),e.target.value=null},children:["import file",(0,m.jsx)("input",{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"file",hidden:!0})]}),(0,m.jsx)(c.Z,{variant:"contained",onClick:function(){for(var e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);var i=new Blob([n],{type:"application/xlsx"}),o=document.createElement("a");o.href=URL.createObjectURL(i),o.download="".concat(a,".xlsx"),document.body.appendChild(o),o.click(),document.body.removeChild(o)},children:"example file"})]}),(0,m.jsx)(d.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:b,children:(0,m.jsx)(Z,{children:(0,m.jsx)(l.Z,{display:"flex",justifyContent:"center",children:(0,m.jsx)(x.Z,{color:"inherit"})})})})]})}},48432:function(e,n,t){var r=t(1413),a=t(29439),i=t(72791),o=t(63466),l=t(48550),c=t(39126),s=t(55294),d=t(27301),u=t(80184),f=function(e){var n=e.setData,t=e.searchUrl,f=e.fetchData,h=e.pagination,p=(0,i.useRef)(null),x=(0,i.useState)(""),g=(0,a.Z)(x,2),m=g[0],Z=g[1],j=(0,d.wU)().headers;return(0,i.useEffect)((function(){Z("")}),[h]),(0,u.jsx)(l.Z,{placeholder:"Search by ID card",size:"small",value:m,onChange:function(e){return function(e){Z(e),p.current&&p.current.cancel("Operation canceled due to new request.");var a=s.Z.CancelToken.source();p.current=a;var i=setTimeout((function(){e.length>=2?s.Z.get("".concat(d._n).concat(t).concat(e),{headers:j,cancelToken:a.token}).then((function(e){var t=e.data.obj.obj;n(t.map((function(e,n){return(0,r.Z)((0,r.Z)({},e),{},{count:n+1})})))})).catch((function(e){s.Z.isCancel(e)?console.log("Request canceled:",e.message):console.error(e)})):f()}),300);return function(){a&&a.cancel("Operation canceled due to component unmount."),clearTimeout(i)}}(e.target.value)},id:"idCard",sx:{width:"300px"},InputProps:{startAdornment:(0,u.jsx)(o.Z,{position:"start",children:(0,u.jsx)(c.dVI,{size:20})})}})};n.Z=(0,i.memo)(f)}}]);
//# sourceMappingURL=1139.54242915.chunk.js.map