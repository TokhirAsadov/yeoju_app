"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[338],{90338:function(n,e,o){o.r(e);var i,l,t,d,r,a,s,c=o(30168),u=o(4942),v=o(1413),h=o(29439),p=o(72791),f=o(17939),g=o(27301),m=o(55294),x=(o(17402),o(56960)),Z=o(23853),b=o(39126),j=o(34197),w=o(89704),y=o(58766),k=o(88447),C=o(64554),S=o(17425),O=o(48550),I=o(73766),P=o(94454),R=o(98937),L=o(77907),z=o(56253),_=o(95173),N=o(56355),A=o(24518),B=o(57621),H=o(39504),T=o(80184),V=(0,T.jsx)(R.Z,{fontSize:"small"}),D=(0,T.jsx)(L.Z,{fontSize:"small"}),E=f.ZP.div(i||(i=(0,c.Z)(["\n  height: 155px;\n  padding-top: 10px;\n  display: grid;\n  overflow-y: scroll;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 30px;\n  ","\n  ","\n  ","\n"])),(0,_.IV)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,_.yG)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,_.qD)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"})),U=(0,f.ZP)(z.E.button)(l||(l=(0,c.Z)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"])),g.Lr),M={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"1000px",display:"flex",flexDirection:"column",gap:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},Q=f.ZP.div(t||(t=(0,c.Z)(["\n  ","\n  ","\n ","\n"])),(0,_.IV)({width:"97vw !important",height:"97vh !important"}),(0,_.yG)({width:"97vw !important",height:"97vh !important"}),(0,_.qD)({width:"97vw !important",height:"97vh !important"})),q=f.ZP.button(d||(d=(0,c.Z)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid red;\n  border-radius: 0.5rem;\n  color: red;\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"]))),F=f.ZP.button(r||(r=(0,c.Z)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid ",";\n  border-radius: 0.5rem;\n  color: ",";\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"])),g.Lr,g.Lr),G=f.ZP.div(a||(a=(0,c.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: 5px !important;\n"]))),W=f.ZP.div(s||(s=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 1rem;\n"])));e.default=function(){var n=(0,p.useState)(!0),e=(0,h.Z)(n,2),o=(e[0],e[1]),i=(0,p.useState)(null),l=(0,h.Z)(i,2),t=l[0],d=l[1],r=(0,p.useState)([]),a=(0,h.Z)(r,2),s=(a[0],a[1]),c=(0,p.useState)([]),f=(0,h.Z)(c,2),R=(f[0],f[1]),L=(0,p.useState)([]),z=(0,h.Z)(L,2),_=z[0],Y=z[1],J=(0,p.useState)(!1),K=(0,h.Z)(J,2),X=K[0],$=K[1],nn=(0,p.useState)([]),en=(0,h.Z)(nn,2),on=en[0],ln=en[1],tn=(0,p.useState)(!1),dn=(0,h.Z)(tn,2),rn=dn[0],an=dn[1],sn=(0,p.useState)(!1),cn=(0,h.Z)(sn,2),un=cn[0],vn=cn[1],hn=(0,p.useState)([]),pn=(0,h.Z)(hn,2),fn=pn[0],gn=pn[1],mn=(0,p.useState)([]),xn=(0,h.Z)(mn,2),Zn=xn[0],bn=xn[1],jn=(0,p.useState)({id:null,name:null,owner:null,room:null,phone:null,roles:[],positions:[]}),wn=(0,h.Z)(jn,2),yn=wn[0],kn=wn[1],Cn=(0,g.wU)().headers,Sn=function(n){n.length>3&&m.Z.get(g._n+"/user/getUsersForUserRole?keyword="+n,{headers:Cn}).then((function(n){var e;Y(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.obj)})).catch((function(n){console.log(n)}))};(0,p.useEffect)((function(){m.Z.get(g._n+"/user/getDataForStaffSaving",{headers:Cn}).then((function(n){var e,i,l,t,d;s(null===(e=n.data)||void 0===e||null===(i=e.roles)||void 0===i?void 0:i.map((function(n){return n.label=n.label.startsWith("ROLE_")?n.label.substring(5):n.label,n}))),R(null===(l=n.data)||void 0===l?void 0:l.sections),o(!1),gn(null===n||void 0===n||null===(t=n.data)||void 0===t?void 0:t.roles2),bn(null===n||void 0===n||null===(d=n.data)||void 0===d?void 0:d.positions)})).catch((function(n){console.log(n)})),On()}),[]);var On=function(){m.Z.get(g._n+"/section/allSections",{headers:Cn}).then((function(n){var e;console.log(null===n||void 0===n?void 0:n.data,"sections"),ln(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.obj),$(!1)})).catch((function(n){console.log(n)}))};(0,p.useEffect)((function(){X&&On()}),[X]);var In=[{field:"id",headerName:"ID",width:40,editable:!1},{field:"name",headerName:"Name",type:"string",width:300,editable:!1},{field:"owner",headerName:"Bo`lim boshlig`i",type:"string",width:300,editable:!1,renderCell:function(n){var e,o;return(0,T.jsx)("div",{children:null===n||void 0===n||null===(e=n.row)||void 0===e||null===(o=e.owner)||void 0===o?void 0:o.fullName})}},{field:"room",headerName:"Room",type:"string",width:100,editable:!1},{field:"phone",headerName:"Phone",type:"string",width:200,editable:!1},{field:"service",headerName:"Service",type:"string",width:200,editable:!1,renderCell:function(n){return(0,T.jsxs)(G,{children:[(0,T.jsx)(F,{onClick:function(){var e;return Pn(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.id)},children:(0,T.jsx)(Z.vPQ,{})}),(0,T.jsx)(q,{onClick:function(){var e,o;return zn(null===n||void 0===n||null===(e=n.row)||void 0===e?void 0:e.id,null===n||void 0===n||null===(o=n.row)||void 0===o?void 0:o.name)},children:(0,T.jsx)(b.yvY,{})})]})}}],Pn=function(n){console.log(n,"edited"),console.log(t,"owner"),m.Z.get(g._n+"/section/getSectionById?id="+n,{headers:Cn}).then((function(n){var e,o;console.log(null===n||void 0===n?void 0:n.data),d(null===n||void 0===n||null===(e=n.data)||void 0===e||null===(o=e.obj)||void 0===o?void 0:o.owner),kn((function(e){var o,i,l,t,d,r,a,s,c,u,h,p,f,g;return(0,v.Z)((0,v.Z)({},e),{},{id:null===n||void 0===n||null===(o=n.data)||void 0===o||null===(i=o.obj)||void 0===i?void 0:i.id,name:null===n||void 0===n||null===(l=n.data)||void 0===l||null===(t=l.obj)||void 0===t?void 0:t.name,owner:null===n||void 0===n||null===(d=n.data)||void 0===d||null===(r=d.obj)||void 0===r?void 0:r.owner,room:null===n||void 0===n||null===(a=n.data)||void 0===a||null===(s=a.obj)||void 0===s?void 0:s.room,phone:null===n||void 0===n||null===(c=n.data)||void 0===c||null===(u=c.obj)||void 0===u?void 0:u.phone,roles:null===n||void 0===n||null===(h=n.data)||void 0===h||null===(p=h.obj)||void 0===p?void 0:p.roles,positions:null===n||void 0===n||null===(f=n.data)||void 0===f||null===(g=f.obj)||void 0===g?void 0:g.positions})}))})).catch((function(n){console.log(n)})),an(!1),vn(!0)},Rn=function(n){kn((function(e){return(0,v.Z)((0,v.Z)({},e),{},(0,u.Z)({},n.target.name,n.target.value))}))},Ln=function(){an(!1),vn(!1)},zn=function(n,e){kn({id:null,name:null,owner:null,room:null,phone:null,roles:[],positions:[]}),d(null),window.confirm("Do you want to delete ".concat(e,"?"))&&(m.Z.delete("".concat(g._n,"/section/deleteSection/").concat(n),{headers:Cn}).then((function(e){var o;ln(null===on||void 0===on?void 0:on.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==n}))),x.Am.success(null===e||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})).catch((function(n){console.log(n)})),x.Am.success("Deleted successfully",{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}))};return(0,T.jsxs)(W,{children:[(0,T.jsx)(C.Z,{display:"flex",justifyContent:"end",children:(0,T.jsx)(A.Z,{sx:{width:"220px"},variant:"contained",onClick:function(){d(null),kn({id:null,name:null,owner:null,room:null,phone:null,roles:[],positions:[]}),vn(!1),an(!0)},children:"Add new section"})}),X&&(null===on||void 0===on?void 0:on.length)>0?(0,T.jsx)(j.Z,{}):(0,T.jsx)(B.Z,{children:(0,T.jsx)(H.Z,{children:(0,T.jsx)(w._,{checkboxSelection:!0,sx:{minHeight:"670px!important",overflow:"scroll"},columns:In,rows:on,components:{Toolbar:y.n},pageSize:10,initialState:(0,v.Z)((0,v.Z)({},on.initialState),{},{columns:{columnVisibilityModel:{id:!1}}})})})}),(0,T.jsx)(k.Z,{open:rn,onClose:Ln,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,T.jsxs)(C.Z,{sx:M,component:Q,children:[(0,T.jsx)(U,{onClick:Ln,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,T.jsx)(S.eSQ,{})}),(0,T.jsx)("h3",{style:{color:"".concat(g.Lr)},children:"Create new section"}),(0,T.jsxs)(E,{children:[(0,T.jsx)(O.Z,{id:"outlined-basic",label:"Name",variant:"outlined",value:null===yn||void 0===yn?void 0:yn.name,name:"name",onChange:Rn}),(0,T.jsx)(I.Z,{id:"checkboxes-tags-demo",options:_,disableCloseOnSelect:!0,getOptionLabel:function(n){return null===n||void 0===n?void 0:n.label},value:t,onChange:function(n,e){console.log(e,"new value"),d(e),kn((function(n){return(0,v.Z)((0,v.Z)({},n),{},{ownerId:null===e||void 0===e?void 0:e.value})}))},onInputChange:function(n,e){"change"===(null===n||void 0===n?void 0:n.type)&&Sn(e)},renderOption:function(n,e,o){var i=o.selected;return(0,T.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,T.jsx)(P.Z,{icon:V,checkedIcon:D,style:{marginRight:8},checked:i}),null===e||void 0===e?void 0:e.label]}))},renderInput:function(n){return(0,T.jsx)(O.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Owner",placeholder:"Owner"}))}}),(0,T.jsx)(O.Z,{id:"outlined-basic",label:"Room",variant:"outlined",value:null===yn||void 0===yn?void 0:yn.room,name:"room",onChange:Rn}),(0,T.jsx)(O.Z,{sx:{minWidth:"200px"},id:"outlined-basic",label:"Phone",variant:"outlined",value:null===yn||void 0===yn?void 0:yn.phone,name:"phone",onChange:Rn}),(0,T.jsx)(I.Z,{multiple:!0,id:"checkboxes-tags-demo",options:fn,disableCloseOnSelect:!0,getOptionLabel:function(n){return n},value:null===yn||void 0===yn?void 0:yn.roles,onChange:function(n,e){kn((function(n){return(0,v.Z)((0,v.Z)({},n),{},{roles:e})}))},renderOption:function(n,e,o){var i=o.selected;return(0,T.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,T.jsx)(P.Z,{icon:V,checkedIcon:D,style:{marginRight:8},checked:i}),e]}))},renderInput:function(n){return(0,T.jsx)(O.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Roles",placeholder:"Roles"}))}}),(0,T.jsx)(I.Z,{multiple:!0,id:"checkboxes-tags-demo",options:Zn,disableCloseOnSelect:!0,getOptionLabel:function(n){return n},value:null===yn||void 0===yn?void 0:yn.positions,onChange:function(n,e){kn((function(n){return(0,v.Z)((0,v.Z)({},n),{},{positions:e})}))},renderOption:function(n,e,o){var i=o.selected;return(0,T.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,T.jsx)(P.Z,{icon:V,checkedIcon:D,style:{marginRight:8},checked:i}),e]}))},renderInput:function(n){return(0,T.jsx)(O.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Positions",placeholder:"Positions"}))}})]}),(0,T.jsx)(C.Z,{sx:{display:"flex",justifyContent:"end"},children:(0,T.jsx)(A.Z,{size:"large",variant:"contained",endIcon:(0,T.jsx)(N.TvB,{}),onClick:function(){return delete(n=yn).owner,delete n.id,console.log(n," for save section"),void(Object.values(n).every((function(n){return null!==n&&n}))?m.Z.post(g._n+"/section/createSectionV2",n,{headers:Cn}).then((function(e){an(!1),On(),x.Am.success("".concat(null===n||void 0===n?void 0:n.name," section has been saved successfully!."))})).catch((function(n){var e,o;console.log(n),x.Am.error(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message)})):x.Am.warning("Empty any field.."));var n},children:" Save"})})]})}),(0,T.jsx)(k.Z,{open:un,onClose:Ln,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,T.jsxs)(C.Z,{sx:M,component:Q,children:[(0,T.jsx)(U,{onClick:Ln,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,T.jsx)(S.eSQ,{})}),(0,T.jsx)("h3",{style:{color:"".concat(g.Lr)},children:"Edit section"}),(0,T.jsxs)(E,{children:[(0,T.jsx)(O.Z,{id:"outlined-basic",label:"Name",variant:"outlined",value:null===yn||void 0===yn?void 0:yn.name,name:"name",onChange:Rn}),(0,T.jsx)(I.Z,{id:"checkboxes-tags-demo",options:_,disableCloseOnSelect:!0,getOptionLabel:function(n){return null===n||void 0===n?void 0:n.label},value:t,onChange:function(n,e){console.log(e,"new value"),d(e),kn((function(n){return(0,v.Z)((0,v.Z)({},n),{},{ownerId:null===e||void 0===e?void 0:e.value})}))},onInputChange:function(n,e){"change"===(null===n||void 0===n?void 0:n.type)&&Sn(e)},renderOption:function(n,e,o){var i=o.selected;return(0,T.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,T.jsx)(P.Z,{icon:V,checkedIcon:D,style:{marginRight:8},checked:i}),null===e||void 0===e?void 0:e.label]}))},renderInput:function(n){return(0,T.jsx)(O.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Owner",placeholder:"Owner"}))}}),(0,T.jsx)(O.Z,{id:"outlined-basic",label:"Room",variant:"outlined",value:null===yn||void 0===yn?void 0:yn.room,name:"room",onChange:Rn}),(0,T.jsx)(O.Z,{id:"outlined-basic",label:"Phone",variant:"outlined",value:null===yn||void 0===yn?void 0:yn.phone,name:"phone",onChange:Rn}),(0,T.jsx)(I.Z,{multiple:!0,id:"checkboxes-tags-demo",options:fn,disableCloseOnSelect:!0,getOptionLabel:function(n){return n},value:null===yn||void 0===yn?void 0:yn.roles,onChange:function(n,e){kn((function(n){return(0,v.Z)((0,v.Z)({},n),{},{roles:e})}))},renderOption:function(n,e,o){var i=o.selected;return(0,T.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,T.jsx)(P.Z,{icon:V,checkedIcon:D,style:{marginRight:8},checked:i}),e]}))},renderInput:function(n){return(0,T.jsx)(O.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Roles",placeholder:"Roles"}))}}),(0,T.jsx)(I.Z,{multiple:!0,id:"checkboxes-tags-demo",options:Zn,disableCloseOnSelect:!0,getOptionLabel:function(n){return n},value:null===yn||void 0===yn?void 0:yn.positions,onChange:function(n,e){kn((function(n){return(0,v.Z)((0,v.Z)({},n),{},{positions:e})}))},renderOption:function(n,e,o){var i=o.selected;return(0,T.jsxs)("li",(0,v.Z)((0,v.Z)({},n),{},{children:[(0,T.jsx)(P.Z,{icon:V,checkedIcon:D,style:{marginRight:8},checked:i}),e]}))},renderInput:function(n){return(0,T.jsx)(O.Z,(0,v.Z)((0,v.Z)({},n),{},{label:"Positions",placeholder:"Positions"}))}})]}),(0,T.jsx)(C.Z,{sx:{display:"flex",justifyContent:"end"},children:(0,T.jsx)(A.Z,{size:"large",variant:"contained",endIcon:(0,T.jsx)(N.TvB,{}),onClick:function(){return function(n){var e=n.id,o=n.name,i=n.owner,l=n.phone,t=n.positions,d=n.roles,r={id:e,name:o,ownerId:i.value,phone:l,positions:t,roles:d};console.log(r,"booody"),Object.values(n).every((function(n){return null!==n&&n}))?m.Z.post(g._n+"/section/createSectionV2",r,{headers:Cn}).then((function(e){vn(!1),On(),x.Am.success("".concat(null===n||void 0===n?void 0:n.name," section has been updated successfully!."))})).catch((function(n){var e,o;console.log(n),x.Am.error(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(o=e.data)||void 0===o?void 0:o.message)})):x.Am.warning("Empty any field..")}(yn)},children:" Update"})})]})})]})}},77907:function(n,e,o){var i=o(64836);e.Z=void 0;var l=i(o(45649)),t=o(80184),d=(0,l.default)((0,t.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");e.Z=d},98937:function(n,e,o){var i=o(64836);e.Z=void 0;var l=i(o(45649)),t=o(80184),d=(0,l.default)((0,t.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");e.Z=d}}]);
//# sourceMappingURL=338.e4934ebe.chunk.js.map