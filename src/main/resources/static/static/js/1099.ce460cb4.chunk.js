"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[1099],{91099:function(e,n,t){t.r(n),t.d(n,{default:function(){return K}});var a,r,l,i,o,c,s,d=t(30168),u=t(1413),f=t(29439),h=t(72791),p=t(17939),g=t(56355),x=t(1582),Z=t(57621),m=t(39504),b=t(89704),j=t(58766),v=t(27301),C=t(64554),y=t(24518),w=t(13400),k=t(58617),S=t(88447),N=t(40071),D=t(20890),I=t(95173),W=t(55294),z=t(56960),A=t(84257),P=t(48432),F=t(48550),U=t(80184),T=function(e){var n=e.closeBtnFn,t=e.fetchData,a=e.putData,r=a||{studentId:"",year:"",semester:"",subject:"",credit:"",currents:"",finals:"",totals:"",penalty:"",retakeN:"",retakeData:"",note:""},l=(0,h.useState)(r),i=(0,f.Z)(l,2),o=i[0],c=i[1];return(0,U.jsxs)(_,{children:[(0,U.jsxs)(O,{children:[(0,U.jsx)(F.Z,{fullWidth:!0,disabled:!0,label:"StudentId",value:o.studentId,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{studentId:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Year",value:o.year,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{year:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Semester",value:o.semester,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{semester:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Subject",value:o.subject,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{subject:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Credit",type:"number",value:o.credit,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{credit:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Currents",value:o.currents,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{currents:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Finals",value:o.finals,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{finals:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Totals",value:o.totals,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{totals:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Penalty",value:o.penalty,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{penalty:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Contract N",value:o.retakeN,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{retakeN:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Contract date",value:o.retakeData,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{retakeData:e.target.value})}))}}),(0,U.jsx)(F.Z,{fullWidth:!0,label:"Note",value:o.note,onChange:function(e){return c((function(n){return(0,u.Z)((0,u.Z)({},n),{},{note:e.target.value})}))}})]}),(0,U.jsxs)(x.Z,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,U.jsx)(y.Z,{variant:"outlined",onClick:n,children:"Cancel"}),(0,U.jsx)(y.Z,{variant:"contained",onClick:function(){var e=!0;for(var r in o)if(""===o[r]){e=!1;break}if(e){var l=parseInt(o.credit,10);if(isNaN(l))z.Am.error("Please enter a valid number for Credit.");else{var i=(0,u.Z)((0,u.Z)({},o),{},{credit:l});console.log(i),a?function(e){W.Z.put(v._n+"/workOtherService/updateSingleFail",e).then((function(e){console.log(e),z.Am.success("Successfully updated"),t(),n()})).catch((function(e){console.log(e),z.Am.error("Error updated")}))}(i):function(e){W.Z.post(v._n+"/workOtherService/saveSingleFail",e).then((function(e){console.log(e),t(),z.Am.success("Successfully saved"),n()})).catch((function(e){console.log(e),z.Am.error("Error saving")}))}(i)}}else z.Am.error("Please fill in all the fields")},children:"save"})]})]})},O=p.ZP.div(a||(a=(0,d.Z)(["\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 20px;\n  margin-bottom: 20px;\n  ","\n"])),(0,I.qD)({gridTemplateColumns:"1fr"})),_=p.ZP.div(r||(r=(0,d.Z)(["\n  margin: 20px 0;\n\n"]))),E=(0,h.memo)(T),R=t(214),L=t(71986),B=p.ZP.div(l||(l=(0,d.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  h4 {\n    color: black;\n  }\n\n  h5 {\n    color: red;\n  }\n\n"]))),M=p.ZP.button(i||(i=(0,d.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 5px;\n  border-radius: 50%;\n  border: none;\n  background-color: ",";\n  color: white;\n  font-size: 12px;\n"])),v.Lr),q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:700,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},G={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",boxShadow:24,padding:"15px",borderRadius:"8px"},H=p.ZP.div(o||(o=(0,d.Z)(["\n  ","\n"])),(0,I.qD)({width:"95% !important"})),V=p.ZP.div(c||(c=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  color: #ff5c5c;\n  gap: 5px;\n\n  h1 {\n    margin: 0;\n    font-size: 30px;\n    font-weight: bold;\n\n  }\n"]))),Y=p.ZP.div(s||(s=(0,d.Z)(["\n  width: 100%;\n  padding: 1rem;\n\n  .MuiDataGrid-columnHeaderTitleContainer {\n    justify-content: center;\n  }\n"]))),K=function(){var e=L.QN,n=(0,h.useState)(1e3),t=(0,f.Z)(n,2),a=t[0],r=t[1],l=(0,h.useState)(null),i=(0,f.Z)(l,2),o=i[0],c=i[1],s=[{field:"count",headerName:"\u2116",sortable:!0,width:50,align:"center",justifyContent:"center"},{minWidth:90,flex:.4,field:"year",headerName:"Year",sortable:!0,align:"center",justifyContent:"center"},{minWidth:90,flex:.4,field:"studentId",headerName:"Student Id",sortable:!0,align:"center",justifyContent:"center"},{minWidth:90,flex:.3,field:"semester",headerName:"Semester",sortable:!0,align:"center"},{minWidth:150,flex:1,field:"subject",headerName:"Subject",editable:!1,sortable:!1,align:"center"},{minWidth:70,flex:.2,field:"credit",headerName:"Credit",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.4,field:"currents",headerName:"Score",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.4,field:"finals",headerName:"Final Score",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.4,field:"totals",headerName:"Total Score",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.5,field:"penalty",headerName:"Penalty",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.5,field:"retakeN",headerName:"Contract",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.5,field:"retakeData",headerName:"Contract Date",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.5,field:"note",headerName:"Note",editable:!1,sortable:!1,align:"center"},{minWidth:100,flex:.4,field:"receipt",headerName:"Receipt",editable:!1,sortable:!1,align:"center",renderCell:function(e){var n,t=null===(n=e.row.penalty)||void 0===n?void 0:n.substring(0,1),a=e.row.penalty,r=e.row.subject,l=e.row.studentId;return(0,U.jsx)(R.Z,{penaltyIf:t,penalty:a,subject:r,studentId:l})}},{flex:.4,field:"action",headerName:"Action",editable:!1,sortable:!1,align:"center",renderCell:function(e){return(0,U.jsx)(x.Z,{direction:"row",spacing:2,justifyContent:"center",children:(0,U.jsx)(w.Z,{"aria-label":"change",color:"success",onClick:function(){return he(e.row)},children:(0,U.jsx)(k.z2D,{})})})}}],d=(0,v.wU)().headers,p=(0,h.useState)([]),I=(0,f.Z)(p,2),F=I[0],T=I[1],O=(0,h.useState)(!1),_=(0,f.Z)(O,2),K=_[0],Q=_[1],J=(0,h.useState)(!1),X=(0,f.Z)(J,2),$=X[0],ee=X[1],ne=(0,h.useState)(null),te=(0,f.Z)(ne,2),ae=te[0],re=te[1],le=(0,h.useState)(!1),ie=(0,f.Z)(le,2),oe=ie[0],ce=ie[1],se=(0,h.useState)({page:0,pageSize:30}),de=(0,f.Z)(se,2),ue=de[0],fe=de[1],he=function(e){var n={id:e.id,studentId:e.studentId,year:e.year,semester:e.semester,subject:e.subject,credit:e.credit,currents:e.currents,finals:e.finals,totals:e.totals,penalty:e.penalty,retakeN:e.retakeN,retakeData:e.retakeData,note:e.note};c(n),ce(!0)},pe=function(){Q(!0),W.Z.get("".concat(v._n,"/workOtherService/getFails?page=").concat(ue.page+1,"&size=").concat(ue.pageSize)).then((function(e){var n,t,a,l;r(null===(n=e.data.obj)||void 0===n?void 0:n.totalElements),T(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.obj)||void 0===a||null===(l=a.content)||void 0===l?void 0:l.map((function(e,n){return(0,u.Z)((0,u.Z)({},e),{},{count:n+1})})))})).catch((function(e){console.log(e)})).finally((function(){return Q(!1)}))};(0,h.useEffect)((function(){pe()}),[ue]);var ge=function(){re(null),ee(!1)},xe=function(){ce(!1),c(null)};return(0,U.jsxs)(Y,{children:[(0,U.jsx)(A.Z,{titleFile:"MONITORING_STUDENT_FAIL_FILE",fetchData:pe,saveFileUrl:"/workOtherService/updateFails",urlBase:e}),(0,U.jsxs)(V,{children:[(0,U.jsx)(g.W95,{size:25}),(0,U.jsx)("h1",{children:"Fails"})]}),(0,U.jsx)(Z.Z,{children:(0,U.jsxs)(m.Z,{children:[(0,U.jsx)(C.Z,{display:"flex",justifyContent:"space-between",mb:2,children:(0,U.jsx)(P.Z,{setData:T,searchUrl:"/otherService/studentsFails2/",pagination:ue,fetchData:pe})}),(0,U.jsx)(b._,{rowCount:a,columns:s,rows:F||[],loading:K,components:{Toolbar:j.n},pageSize:ue.pageSize,page:ue.page,rowsPerPageOptions:[10,30,50,70,100],paginationMode:"server",onPageChange:function(e){fe((function(n){return(0,u.Z)((0,u.Z)({},n),{},{page:e})}))},onPageSizeChange:function(e){fe((function(n){return(0,u.Z)((0,u.Z)({},n),{},{pageSize:e})}))},autoHeight:!0,initialState:{columns:{columnVisibilityModel:{action:!1,currents:!1,finals:!1,retakeN:!1}}}})]})}),(0,U.jsx)(S.Z,{open:$,onClose:ge,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,U.jsxs)(C.Z,{sx:G,component:H,children:[(0,U.jsxs)(B,{children:[(0,U.jsx)("h5",{children:"Delete"}),(0,U.jsxs)(M,{onClick:ge,children:[" ",(0,U.jsx)(N.bjh,{size:22})]})]}),(0,U.jsxs)(C.Z,{children:[(0,U.jsx)(x.Z,{sx:{height:"100px"},direction:"row",justifyContent:"center",alignItems:"center",children:(0,U.jsx)(D.Z,{variant:"h6",color:"black",children:"Do you want to delete !"})}),(0,U.jsxs)(x.Z,{direction:"row",spacing:2,justifyContent:"flex-end",alignItems:"center",children:[(0,U.jsx)(y.Z,{variant:"outlined",onClick:ge,children:"Cancel"}),(0,U.jsx)(y.Z,{variant:"contained",color:"error",onClick:function(){ae&&W.Z.delete("".concat(v._n,"/example/").concat(ae),{headers:d}).then((function(e){ge(),z.Am.success("Delete item")})).catch((function(e){console.log(e),z.Am.error("Error deleting")}))},children:"Ok"})]})]})]})}),(0,U.jsx)(S.Z,{open:oe,onClose:xe,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,U.jsxs)(C.Z,{sx:q,component:H,children:[(0,U.jsxs)(B,{children:[(0,U.jsx)("h3",{children:o?"Update":"Create"}),(0,U.jsxs)(M,{onClick:xe,children:[" ",(0,U.jsx)(N.bjh,{size:22})]})]}),(0,U.jsx)(C.Z,{children:(0,U.jsx)(E,{closeBtnFn:xe,fetchData:pe,putData:o})})]})})]})}},84257:function(e,n,t){var a,r=t(30168),l=t(29439),i=t(72791),o=t(64554),c=t(24518),s=t(78820),d=t(52739),u=t(55294),f=t(27301),h=t(17939),p=t(56960),g=t(13239),x=t(1582),Z=t(80184),m=h.ZP.div(a||(a=(0,r.Z)(["\n  position: relative;\n  width: 95%;\n  height: 30px;\n  //background-color: #ccc;\n  border-radius: 7px;\n  overflow: hidden;\n\n  .progress-bar {\n    background-color: ",";\n    color: #fff;\n    text-align: center;\n    line-height: 30px;\n    width: 0;\n    position: absolute;\n    transition: width 0.1s;\n  }\n"])),f.Lr);n.Z=function(e){var n=e.saveFileUrl,t=e.urlBase,a=e.fetchData,r=e.titleFile,h=(0,i.useState)(!1),b=(0,l.Z)(h,2),j=b[0],v=b[1],C=(0,i.useState)(0),y=(0,l.Z)(C,2),w=(y[0],y[1]);return(0,Z.jsxs)(o.Z,{display:"flex",justifyContent:"end",children:[(0,Z.jsxs)(x.Z,{direction:"row",spacing:2,children:[(0,Z.jsxs)(c.Z,{startIcon:(0,Z.jsx)(s.IEK,{}),variant:"contained",component:"label",onChange:function(e){v(!0);var t=e.target.files[0],r=f._n+n,l=localStorage.getItem(f.o3),i={headers:{"Content-Type":"multipart/form-data",Authorization:f.iv+l,"Access-Control-Allow-Origin":"*"},onUploadProgress:function(e){w(Math.round(100*e.loaded/e.total))}},o=new FormData;o.append("file",t),console.log(t),u.Z.put(r,o,i).then((function(e){console.log(e),p.Am.success("Uploaded file successfully"),a()})).catch((function(e){console.log(e),p.Am.error("Upload failed")})).finally((function(){return v(!1)})),e.target.value=null},children:["import file",(0,Z.jsx)("input",{accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",type:"file",hidden:!0})]}),(0,Z.jsx)(c.Z,{variant:"contained",onClick:function(){for(var e=atob(t),n=new Uint8Array(e.length),a=0;a<e.length;++a)n[a]=e.charCodeAt(a);var l=new Blob([n],{type:"application/xlsx"}),i=document.createElement("a");i.href=URL.createObjectURL(l),i.download="".concat(r,".xlsx"),document.body.appendChild(i),i.click(),document.body.removeChild(i)},children:"example file"})]}),(0,Z.jsx)(d.Z,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:j,children:(0,Z.jsx)(m,{children:(0,Z.jsx)(o.Z,{display:"flex",justifyContent:"center",children:(0,Z.jsx)(g.Z,{color:"inherit"})})})})]})}},48432:function(e,n,t){var a=t(1413),r=t(29439),l=t(72791),i=t(63466),o=t(48550),c=t(39126),s=t(55294),d=t(27301),u=t(80184),f=function(e){var n=e.setData,t=e.searchUrl,f=e.fetchData,h=e.pagination,p=(0,l.useRef)(null),g=(0,l.useState)(""),x=(0,r.Z)(g,2),Z=x[0],m=x[1],b=(0,d.wU)().headers;return(0,l.useEffect)((function(){m("")}),[h]),(0,u.jsx)(o.Z,{placeholder:"Search by ID card",size:"small",value:Z,onChange:function(e){return function(e){m(e),p.current&&p.current.cancel("Operation canceled due to new request.");var r=s.Z.CancelToken.source();p.current=r;var l=setTimeout((function(){e.length>=2?s.Z.get("".concat(d._n).concat(t).concat(e),{headers:b,cancelToken:r.token}).then((function(e){var t=e.data.obj.obj;n(t.map((function(e,n){return(0,a.Z)((0,a.Z)({},e),{},{count:n+1})})))})).catch((function(e){s.Z.isCancel(e)?console.log("Request canceled:",e.message):console.error(e)})):f()}),300);return function(){r&&r.cancel("Operation canceled due to component unmount."),clearTimeout(l)}}(e.target.value)},id:"idCard",sx:{width:"300px"},InputProps:{startAdornment:(0,u.jsx)(i.Z,{position:"start",children:(0,u.jsx)(c.dVI,{size:20})})}})};n.Z=(0,l.memo)(f)}}]);
//# sourceMappingURL=1099.ce460cb4.chunk.js.map