"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[3945],{3945:function(e,t,a){a.r(t);var n,o,i,d=a(30168),r=a(1413),l=a(29439),s=a(72791),u=a(27301),c=a(72426),f=a.n(c),v=a(55294),h=a(73766),k=a(48550),w=a(84891),Z=a(17939),m=a(95173),b=a(59434),g=(a(23333),a(80184)),p=Z.ZP.div(n||(n=(0,d.Z)(["\n  width: 300px;\n  ","\n"])),(0,m.qD)({width:"80%"})),W=Z.ZP.div(o||(o=(0,d.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 25px;\n  margin-bottom: 1rem;\n  ","\n"])),(0,m.qD)({justifyContent:"center"})),x=Z.ZP.div(i||(i=(0,d.Z)(["\n  width: 100%;\n  padding: 1rem;\n"])));t.default=function(){var e=(0,b.v9)((function(e){var t;return null===e||void 0===e||null===(t=e.section)||void 0===t?void 0:t.section})),t=(0,s.useState)([]),a=(0,l.Z)(t,2),n=a[0],o=a[1],i=(0,s.useState)(null),d=(0,l.Z)(i,2),c=d[0],Z=d[1],m=(0,u.wU)().headers,y=(0,s.useState)([]),Y=(0,l.Z)(y,2),j=Y[0],T=Y[1],D=(0,s.useState)(!1),O=(0,l.Z)(D,2),S=O[0],C=O[1],N=(0,s.useState)(null),_=(0,l.Z)(N,2),E=_[0],F=_[1],I=function(e,t){f().locale("ru");for(var a=f()().year(t).isoWeek(e).startOf("isoWeek"),n=[],o=0;o<6;o++)n.push(a.clone().add(o,"days").toDate());return n},P=(0,s.useState)({date:f()().format("YYYY-[W]WW"),dateFrom:f()().startOf("isoWeek").toDate(),dateTo:f()().endOf("isoWeek").toDate(),weekNumber:f()().isoWeek(),daysOfWeek:I(f()().isoWeek(),f()().year())}),B=(0,l.Z)(P,2),q=B[0],K=B[1];(0,s.useEffect)((function(){(null===e||void 0===e?void 0:e.id)&&v.Z.get(u._n+"/kafedra/getTeachersForSelectByKafedraId?kafedraId="+(null===e||void 0===e?void 0:e.id),{headers:m}).then((function(e){var t;o(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.obj)})).catch((function(e){console.log(e)}))}),[]),(0,s.useEffect)((function(){C(!0),c&&v.Z.get(u._n+"/timeTableByWeekOfYear/getTeacherTimeTable?t="+c+"&week="+(null===q||void 0===q?void 0:q.weekNumber)+"&year="+f()(null===q||void 0===q?void 0:q.date).format("YYYY"),{headers:m}).then((function(e){var t,a=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.obj,n=[],o={};for(var i in null===a||void 0===a||a.forEach((function(e){e.shows.forEach((function(t){var a=t.daysName;o[a]||(o[a]={teacherData:e.teacherData,shows:[]}),o[a].shows.push(t)}))})),o)n.push(o[i]);T(n),C(!1)})).catch((function(e){console.log(e),T([])})),c&&L(c)}),[c,q]);var L=function(e){v.Z.get(u._n+"/user/getTeacherStatisticsForTimeTableByWeek?teacherId="+e+"&week="+(null===q||void 0===q?void 0:q.weekNumber)+"&year="+f()(null===q||void 0===q?void 0:q.date).format("YYYY"),{headers:m}).then((function(e){var t;F(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.obj)})).catch((function(e){console.log(e),F(null)}))};return(0,g.jsxs)(x,{children:[(0,g.jsxs)(W,{children:[(0,g.jsx)(p,{children:(0,g.jsx)(h.Z,{disablePortal:!0,id:"combo-box-demo",options:n,onChange:function(e,t){Z(null===t||void 0===t?void 0:t.value)},sx:{width:300},renderInput:function(e){return(0,g.jsx)(k.Z,(0,r.Z)((0,r.Z)({},e),{},{label:"Teacher"}))}})}),(0,g.jsx)(k.Z,{label:"Date of the week",type:"week",sx:{width:"200px"},value:q.date,onChange:function(e){var t=e.target.value,a=f()(t).isoWeek(),n=f()(t).startOf("isoWeek").toDate(),o=f()(t).endOf("isoWeek").toDate(),i=f()(t).year();K({date:t,dateFrom:n,dateTo:o,weekNumber:a,daysOfWeek:I(a,i)})}})]}),c&&(0,g.jsx)(w.Z,{isLoading:S,obj:q,data:j,statistics:E})]})}}}]);
//# sourceMappingURL=3945.898a52be.chunk.js.map