"use strict";(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([[2407],{63869:function(n,e,o){o.d(e,{Z:function(){return t}});o(72791);var i=o(80184),t=function(){return(0,i.jsx)("div",{className:"spinner2",children:(0,i.jsx)("svg",{viewBox:"0 0 120 120",children:(0,i.jsxs)("g",{className:"g1",children:[(0,i.jsx)("rect",{className:"r1",x:"30",y:"30",width:"60",height:"60"}),(0,i.jsx)("rect",{className:"big",x:"81",y:"81",width:"8",height:"8"}),(0,i.jsx)("rect",{className:"r_ol",x:"31",y:"31",width:"8",height:"8"}),(0,i.jsx)("rect",{className:"r_or",x:"81",y:"31",width:"8",height:"8"}),(0,i.jsx)("rect",{className:"r_ul",x:"31",y:"81",width:"8",height:"8"}),(0,i.jsx)("xrect",{className:"r_ur",x:"81",y:"81",width:"8",height:"8"})]})})})}},92407:function(n,e,o){o.r(e),o.d(e,{default:function(){return ln}});var i,t,l,d,r,u,a,s,v,c,f,h,x,m,g,p=o(30168),w=o(1413),b=o(29439),Z=o(72791),j=o(17939),D=o(95173),y=o(48550),k=o(73766),Y=o(55294),H=o(27301),N=o(72426),S=o.n(N),z=o(30829),P=o(58406),M=o(84638),F=o(68096),O=o(16856),W=o(1582),_=o(47047),E=o(80184),B=j.ZP.span(i||(i=(0,p.Z)(["\n  color: ",";\n  position: absolute;\n  top: 40%;\n  right: -26.3px;\n  font-size: 11px;\n  rotate: 90deg;\n"])),(function(n){return null!==n&&void 0!==n&&n.color?"green":"red"})),C=(j.ZP.span(t||(t=(0,p.Z)(["\n  font-size: ",";;\n  font-weight: 600;\n  letter-spacing: 0.8px;\n"])),(function(n){return n.fontSize||"12px"})),j.ZP.span(l||(l=(0,p.Z)(["\n  display: flex;\n  align-items: start;\n  font-size: ",";\n  text-align: start;\n  font-weight: 600;\n  letter-spacing: 0.8px;\n"])),(function(n){return n.fontSize||"7px"}))),I=j.ZP.span(d||(d=(0,p.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: ",";\n  text-align: center;\n  font-weight: 600;\n  letter-spacing: 0.8px;\n"])),(function(n){return n.fontSize||"7px"})),T=j.ZP.span(r||(r=(0,p.Z)(["\n  font-size: 12px;\n  font-weight: 300;\n"]))),A=j.ZP.div(u||(u=(0,p.Z)(["\n  width: 100%;\n  height: 130px;\n  display: flex;\n  border-top: 0.1px solid #cacaca;\n"]))),R=j.ZP.div(a||(a=(0,p.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  font-size: 14px;\n  font-weight: 600;\n  letter-spacing: 0.2px;\n"]))),X=j.ZP.span(s||(s=(0,p.Z)(["\n  flex: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  gap: 8px;\n  border-right: 0.1px solid #cacaca;\n  font-size: 9px;\n  padding: 10px!important;\n\n  background-color: ",";\n  color: ",";\n  \n"])),(function(n){return n.flex}),(function(n){return null!==n&&void 0!==n&&n.bg?"red":"white"}),(function(n){return null!==n&&void 0!==n&&n.bg?"white":"#000"})),q=j.ZP.span(v||(v=(0,p.Z)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column; \n  gap: 20px;\n  position: relative;\n"]))),U=j.ZP.div(c||(c=(0,p.Z)(["\n  width: 100%;\n  height: 60px;\n  display: flex;\n  background-color: #B4E2FB;\n  font-size: 14px;\n  font-weight: 600;\n  letter-spacing: 0.2px;\n"]))),V=j.ZP.div(f||(f=(0,p.Z)(["\n  margin: 0 auto;\n  width: 1300px;\n  box-shadow: rgba(99, 99, 99, 0.2) 0 2px 8px 0;\n"]))),$=j.ZP.div(h||(h=(0,p.Z)(["\n  width: 100%;\n"]))),G=function(n){var e,o=n.index,i=n.data,t=n.statistics,l=n.weekDay,d=n.week,r=(0,Z.useState)(!1),u=(0,b.Z)(r,2),a=u[0],s=u[1];(0,Z.useEffect)((function(){s(!0)}),[]);var v=new Date,c=S()(new Date).isoWeek(),f=[{number:1,hour:"9:00 - 9:50",start:v.setHours(9,0,0),end:v.setHours(9,50,0)},{number:2,hour:"10:00 - 10:50",start:v.setHours(10,0,0),end:v.setHours(10,50,0)},{number:3,hour:"11:00 - 11:50",start:v.setHours(11,0,0),end:v.setHours(11,50,0)},{number:4,hour:"12:00 - 12:50",start:v.setHours(12,0,0),end:v.setHours(12,50,0)},{number:5,hour:"13:00 - 13:50",start:v.setHours(13,0,0),end:v.setHours(13,50,0)},{number:6,hour:"14:00 - 14:50",start:v.setHours(14,0,0),end:v.setHours(14,50,0)},{number:7,hour:"15:00 - 15:50",start:v.setHours(15,0,0),end:v.setHours(15,50,0)},{number:8,hour:"16:00 - 16:50",start:v.setHours(16,0,0),end:v.setHours(16,50,0)},{number:9,hour:"17:00 - 17:50",start:v.setHours(17,0,0),end:v.setHours(17,50,0)},{number:10,hour:"18:00 - 18:50",start:v.setHours(18,0,0),end:v.setHours(18,50,0)},{number:11,hour:"19:00 - 19:50",start:v.setHours(19,0,0),end:v.setHours(19,50,0)},{number:12,hour:"20:00 - 20:50",start:v.setHours(20,0,0),end:v.setHours(20,50,0)}],h=[{day:1,name:"\u041f\u043d"},{day:2,name:"\u0412\u0442"},{day:3,name:"\u0421\u0440"},{day:4,name:"\u0427\u0442"},{day:5,name:"\u041f\u0442"},{day:6,name:"\u0421\u0431"}];return(0,E.jsx)($,{children:a?(0,E.jsxs)(V,{children:[0===o&&(0,E.jsxs)(U,{children:[(0,E.jsx)(X,{flex:1,children:"TIME"}),null===f||void 0===f?void 0:f.map((function(n,e){return(0,E.jsx)(X,{flex:2,children:null===n||void 0===n?void 0:n.hour},e)}))]}),(0,E.jsx)(R,{children:null===h||void 0===h||null===(e=h.filter((function(n){return l?n.day===l:n.day===(new Date).getDay()})))||void 0===e?void 0:e.map((function(n,e){var o,l,r,u,a;return t&&0!==(null===t||void 0===t?void 0:t.length)&&t[null===n||void 0===n?void 0:n.day],(0,E.jsxs)(A,{children:[(0,E.jsx)(X,{flex:1,children:(0,E.jsx)(T,{children:i&&7===(null===(o=i[0])||void 0===o||null===(l=o.room)||void 0===l?void 0:l.length)?null===(r=i[0])||void 0===r?void 0:r.room:null===(u=i[0])||void 0===u||null===(a=u.room)||void 0===a?void 0:a.substring(0,5)})}),null===f||void 0===f?void 0:f.map((function(e,o){var l,r,u,a,s,v,f,h,x,m,g,p,w,b,Z,j=null===i||void 0===i?void 0:i.find((function(n){return(null===n||void 0===n?void 0:n.hourNumber)===(null===e||void 0===e?void 0:e.number)})),D=null===t||void 0===t||null===(l=t.filter((function(n){return(null===n||void 0===n?void 0:n.section)===(null===e||void 0===e?void 0:e.number)})))||void 0===l?void 0:l.sort((function(n,e){return(null===n||void 0===n?void 0:n.time)>(null===e||void 0===e?void 0:e.time)?1:(null===n||void 0===n?void 0:n.time)<(null===e||void 0===e?void 0:e.time)?-1:0})),y=new Date(null===e||void 0===e?void 0:e.start);return y.setDate(y.getDate()-y.getDay()+(null===n||void 0===n?void 0:n.day)),j?(0,E.jsx)(X,{flex:2,bg:(void 0===D||0===(null===D||void 0===D?void 0:D.length))&&((null===n||void 0===n?void 0:n.day)<=(new Date).getDay()&&((null===e||void 0===e?void 0:e.start)<new Date||y<new Date)||d<c),children:(0,E.jsxs)(q,{children:[(0,E.jsx)(I,{fontSize:(null===j||void 0===j||null===(r=j.lessonName)||void 0===r?void 0:r.length)>18?"8px":"7px",children:j.lessonName}),D&&0!==(null===D||void 0===D?void 0:D.length)&&(0,E.jsxs)(B,{color:new Date(null===e||void 0===e?void 0:e.start).setDate(new Date(null===(u=D[0])||void 0===u?void 0:u.time).getDate())>=(null===(a=D[0])||void 0===a?void 0:a.time),children:[new Date(null===e||void 0===e?void 0:e.start).setDate(new Date(null===(s=D[0])||void 0===s?void 0:s.time).getDate())>=(null===(v=D[0])||void 0===v?void 0:v.time)?(0,E.jsx)(O.Zjh,{size:16}):(0,E.jsx)(O.X6R,{size:16})," ",S()(new Date(new Date(null===e||void 0===e?void 0:e.start).setDate(new Date(null===(f=D[0])||void 0===f?void 0:f.time).getDate())>=(null===(h=D[0])||void 0===h?void 0:h.time)?new Date(null===e||void 0===e?void 0:e.start).setDate(new Date(null===(x=D[0])||void 0===x?void 0:x.time).getDate())-(null===(m=D[0])||void 0===m?void 0:m.time):(null===(g=D[0])||void 0===g?void 0:g.time)-new Date(null===e||void 0===e?void 0:e.start).setDate(new Date(null===(p=D[0])||void 0===p?void 0:p.time).getDate()))).format("mm:ss")]}),(void 0===D||0===(null===D||void 0===D?void 0:D.length))&&((null===n||void 0===n?void 0:n.day)<=(new Date).getDay()&&((null===e||void 0===e?void 0:e.start)<new Date||y<new Date)||d<c)&&(0,E.jsxs)(B,{color:!1,children:[" ",(0,E.jsx)(O.X6R,{size:12})," "," "," 50:00"]}),(0,E.jsx)(C,{fontSize:(null===j||void 0===j||null===(w=j.teacherName)||void 0===w?void 0:w.length)>1?"8px":"7px",children:(null===j||void 0===j||null===(b=j.teacherName)||void 0===b?void 0:b.length)>1?null===j||void 0===j||null===(Z=j.teacherName)||void 0===Z?void 0:Z.join("/ "):null===j||void 0===j?void 0:j.teacherName[0]})]})},o):(0,E.jsx)(X,{flex:2,children:" - "},o)}))]},e)}))})]}):(0,E.jsx)(W.Z,{spacing:1,children:(0,E.jsx)(_.Z,{variant:"rectangular",style:{margin:"0 auto"},width:1076,height:490})})})},J=o(63869),K=o(69783),L=o(36571),Q=o(87607),nn=o(77159),en=j.ZP.div(x||(x=(0,p.Z)(["\n    width: 300px;\n    ","\n"])),(0,D.qD)({width:"80%"})),on=j.ZP.div(m||(m=(0,p.Z)(["\n    overflow: hidden;\n    margin: 15px 0 0;\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    ","\n"])),(0,D.qD)({justifyContent:"center"})),tn=j.ZP.div(g||(g=(0,p.Z)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n\n"]))),ln=function(){var n,e,o,i,t,l,d=(0,Z.useState)(!1),r=(0,b.Z)(d,2),u=r[0],a=r[1],s=(0,Z.useState)([]),v=(0,b.Z)(s,2),c=v[0],f=v[1],h=(0,Z.useState)([]),x=(0,b.Z)(h,2),m=x[0],g=x[1],p=(0,Z.useState)([]),j=(0,b.Z)(p,2),D=j[0],N=j[1],O=(0,Z.useState)(null),W=(0,b.Z)(O,2),_=W[0],B=W[1],C=(0,Z.useState)((null===D||void 0===D||null===(n=D.find((function(n){return(null===n||void 0===n?void 0:n.label)===_})))||void 0===n?void 0:n.minFloor)||1),I=(0,b.Z)(C,2),T=I[0],A=I[1],R=(0,H.wU)().headers,X=Z.useState(S()()),q=(0,b.Z)(X,2),U=q[0],V=q[1],$=(0,Z.useState)(!1),ln=(0,b.Z)($,2),dn=ln[0],rn=ln[1];(0,Z.useEffect)((function(){Y.Z.get(H._n+"/building/getBuildingsForSelect",{headers:R}).then((function(n){var e,o,i;N(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.obj),B(null===n||void 0===n||null===(o=n.data)||void 0===o||null===(i=o.obj[0])||void 0===i?void 0:i.label)})).catch((function(n){console.log(n)}))}),[]);var un=(0,Z.useState)({date:new Date,dateFrom:S()().startOf("isoWeek").toDate(),dateTo:S()().endOf("isoWeek").toDate(),weekNumber:S()().isoWeek(),year:S()().year(),weekday:S()().day()}),an=(0,b.Z)(un,2),sn=an[0],vn=an[1];(0,Z.useEffect)((function(){a(!1),rn(!1),_&&fn()}),[_,T,sn]),(0,Z.useEffect)((function(){!function(n){var e=S()(n.format("YYYY-MM-DD")).isoWeek(),o=S()(n.format("YYYY-MM-DD")).day(),i=S()(n.format("YYYY-MM-DD")).year(),t=S()(n.format("YYYY-MM-DD")).startOf("isoWeek").toDate(),l=S()(n.format("YYYY-MM-DD")).endOf("isoWeek").toDate();vn({date:n,dateFrom:t,dateTo:l,weekNumber:e,year:i,weekday:o})}(U)}),[U]);var cn=function(n){var e=[];return null===n||void 0===n||n.forEach((function(n){null===n||void 0===n||n.forEach((function(n){var o=null===e||void 0===e?void 0:e.findIndex((function(e){var o,i,t;return(null===(o=e[0])||void 0===o||null===(i=o.room)||void 0===i?void 0:i.trim())===(null===(t=n.room)||void 0===t?void 0:t.trim())}));o+1?e[o].push(n):e.push([n])}))})),e},fn=function(){Y.Z.get(H._n+"/timeTableByWeekOfYear/getTimeTableByAllRoomAndWeek?b=".concat(null===_||void 0===_?void 0:_.substring(0,1),"-").concat(T,"&week=").concat(null===sn||void 0===sn?void 0:sn.weekNumber,"&weekday=").concat(sn.weekday,"&year=").concat(sn.year,"&t=true"),{headers:R}).then((function(n){var e,o;f(cn(n.data.obj)),console.log(n.data,"111111111"),console.log(cn(n.data.obj),"2222222222222"),g(cn(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.secondObj)),console.log(cn(null===(o=n.data)||void 0===o?void 0:o.secondObj),"3333333333333"),a(!0),rn(!1)})).catch((function(n){console.log(n),rn(!0)}))},hn=(0,Z.useState)(!1),xn=(0,b.Z)(hn,2);xn[0],xn[1];return console.log(dn),(0,E.jsxs)(tn,{children:[D&&(null===D||void 0===D?void 0:D.length)>0&&(0,E.jsxs)(on,{children:[(0,E.jsx)(en,{children:(0,E.jsx)(k.Z,{disablePortal:!0,id:"combo-box-demo",options:D,defaultValue:D[0],onChange:function(n,e){B(null===e||void 0===e?void 0:e.label)},renderInput:function(n){return(0,E.jsx)(y.Z,(0,w.Z)((0,w.Z)({},n),{},{label:"Buildings"}))}})}),(0,E.jsx)(en,{children:(0,E.jsxs)(F.Z,{fullWidth:!0,children:[(0,E.jsx)(z.Z,{id:"demo-simple-select-label",children:"Floor"}),(0,E.jsx)(P.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:T,label:"Floor",onChange:function(n){A(n.target.value)},children:null===(e=function(n,e){for(var o=[];n<=e;n++)o.push(n);return o}(null===D||void 0===D||null===(i=D.find((function(n){return(null===n||void 0===n?void 0:n.label)===_})))||void 0===i?void 0:i.minFloor,null===D||void 0===D||null===(t=D.find((function(n){return(null===n||void 0===n?void 0:n.label)===_})))||void 0===t?void 0:t.maxFloor))||void 0===e||null===(o=e.filter((function(n){return 0!==n})))||void 0===o?void 0:o.map((function(n){return(0,E.jsx)(M.Z,{value:n,children:n})}))})]})}),(0,E.jsx)(L._,{dateAdapter:K.Z,children:(0,E.jsx)(Q.$,{label:"Day",inputFormat:"DD/MM/YYYY",value:U,onChange:function(n){V(n)},renderInput:function(n){return(0,E.jsx)(y.Z,(0,w.Z)({},n))}})})]}),(0,E.jsx)("div",{style:{width:"100%",overflowX:"scroll"},children:u?null===c||void 0===c||null===(l=c.filter((function(n){return(null===n||void 0===n?void 0:n.length)>0})))||void 0===l?void 0:l.map((function(n,e){var o=[];return null===m||void 0===m||m.map((function(e){var i;return(null===e||void 0===e||null===(i=e.filter((function(e){var o,i,t,l,d,r,u,a,s,v;return(5===(null===e||void 0===e||null===(o=e.room)||void 0===o?void 0:o.lastIndexOf("-"))?null===e||void 0===e||null===(i=e.room)||void 0===i?void 0:i.substring(0,5):null===e||void 0===e?void 0:e.room)===(7===(null===(t=n[0])||void 0===t||null===(l=t.room)||void 0===l||null===(d=l.trim())||void 0===d?void 0:d.length)?null===(r=n[0])||void 0===r?void 0:r.room:null===(u=n[0])||void 0===u||null===(a=u.room)||void 0===a?void 0:a.substring(0,(null===(s=n[0])||void 0===s||null===(v=s.room)||void 0===v?void 0:v.indexOf("-"))+4))})))||void 0===i?void 0:i.length)>0&&(o=null===e||void 0===e?void 0:e.filter((function(e){var o,i,t,l,d,r,u,a;return(null===e||void 0===e?void 0:e.room)===(null===(o=n[0])||void 0===o||null===(i=o.room)||void 0===i||null===(t=i.trim())||void 0===t?void 0:t.length)==7?null===(l=n[0])||void 0===l?void 0:l.room:null===(d=n[0])||void 0===d||null===(r=d.room)||void 0===r?void 0:r.substring(0,(null===(u=n[0])||void 0===u||null===(a=u.room)||void 0===a?void 0:a.indexOf("-"))+4)}))),e})),(0,E.jsx)(G,{index:e,data:n,statistics:o,weekDay:sn.weekday,week:sn.weekNumber})})):dn?(0,E.jsx)(nn.Z,{w:"200",h:"180"}):(0,E.jsx)(J.Z,{})})]})}}}]);
//# sourceMappingURL=2407.e6d81673.chunk.js.map