/*! For license information please see 9060.7e2e930b.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["9060"],{42255:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var a=n("7409"),l=n("38956"),i=n("58865");n("92222"),n("69826"),n("31672"),n("59461"),n("2490"),n("41539"),n("21249"),n("57640"),n("9924");var o=n("85893"),r=n("67294"),d=n.n(r),s=n("71893"),u=n("61261"),c=n("44025"),f=n("32392"),p=n("42154"),m=n("52861"),h=n("30381"),x=n.n(h),v=n("94718"),g=n("47516"),b=n("60155"),y=n("55693"),j=n("7104"),C=n("97367"),T=n("15729"),k=n("3506"),w=n("28685"),S=n("27233"),I=n("72132"),_=n("71632"),D=n("78258"),E=n("89589"),A=n("45697"),O=n.n(A);function M(){var e=(0,i._)(["\n    ","\n"]);return M=function(){return e},e}function Y(){var e=(0,i._)(["\n    margin-top: 20px;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 30px;\n    ","\n"]);return Y=function(){return e},e}function R(){var e=(0,i._)(["\n    width: 100%;\n    padding: 15px;\n"]);return R=function(){return e},e}var W={zIndex:0,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"480px",bgcolor:"background.paper",borderRadius:"5px",boxShadow:24,p:2},N=s.default.div(M(),(0,_.extrasmall)({width:"330px !important"})),F=s.default.div(Y(),(0,_.extrasmall)({gridTemplateColumns:"1fr",justifyItems:"center"})),U=s.default.div(R()),z=function(){var e=function(e){return(0,o.jsxs)(y.default,{sx:{display:"flex",alignItems:"center"},children:[(0,o.jsx)(y.default,{sx:{width:"100%",mr:1},children:(0,o.jsx)(D.default,(0,a._)({variant:"determinate"},e))}),(0,o.jsx)(y.default,{sx:{minWidth:35},children:(0,o.jsx)(E.default,{variant:"body2",color:"text.secondary",children:"".concat(Math.round(e.value),"%")})})]})},t=(0,l._)(d().useState(0),2),n=t[0];t[1];var i=[2022,2023,2024,2025,2026,2027,2028,2029,2030],s=[{name:"Orientation week",shortname:"OW",bgColor:"#FFF",type:"ORIENTATION_WEEK"},{name:"Theoretical education",shortname:"TE",bgColor:"#d0ffff",type:"THEORETICAL_EDUCATION"},{name:"Final exams",shortname:"F",bgColor:"#90b5e1",type:"FINAL_EXAMS"},{name:"Vacation",shortname:"V",bgColor:"#e4b7b7",type:"VACATION"},{name:"Theoretical/Practical education",shortname:"T/P",bgColor:"#d0ffff",type:"THEORETICAL_PRACTICAL_EDUCATION"},{name:"Self-study/Distancion education",shortname:"S/D",bgColor:"#d0ffff",type:"SELF_STUDY_DISTANCE_EDUCATION"},{name:"Extramural studies",shortname:"ES",bgColor:"#c5d79e",type:"EXTRAMURAL_STUDIES"}],h=["KUNDUZGI_KECHKI","SIRTQI","MAGISTRATURE"],_=["DEFAULT","MED"],A=(0,l._)((0,r.useState)([]),2),M=A[0],Y=A[1],R=(0,l._)((0,r.useState)(""),2),z=R[0],L=R[1],P=(0,l._)((0,r.useState)(s[0].type),2),B=P[0],H=P[1],K=(0,l._)((0,r.useState)(i[1]),2),q=K[0],V=K[1],G=(0,l._)((0,r.useState)(_[0]),2),X=G[0],Q=G[1],Z=(0,l._)((0,r.useState)(s[0].name),2),J=Z[0],$=Z[1],ee=(0,l._)((0,r.useState)(h[0]),2),et=ee[0],en=ee[1],ea=(0,l._)((0,r.useState)(""),2),el=ea[0],ei=ea[1],eo=(0,l._)((0,r.useState)(null),2),er=eo[0],ed=eo[1],es=(0,l._)((0,r.useState)(!0),2),eu=es[0],ec=es[1],ef=(0,l._)((0,r.useState)("".concat(x()(new Date).year(),"-W").concat(x()(new Date).isoWeek())),2),ep=ef[0],em=ef[1],eh=(0,l._)((0,r.useState)(!1),2),ex=eh[0],ev=eh[1],eg=function(){return ev(!1)};(0,r.useEffect)(function(){""!==z&&""!=q&&null!==er&&""!==ep&&""!==el?ec(!1):ec(!0)},[q,er,ep,el]),(0,r.useEffect)(function(){S.default.get(w.BASE_URL+"/education/educationYearsForSelected").then(function(e){var t,n;Y(e.data.obj),L(null===(n=e.data)||void 0===n?void 0:null===(t=n.obj[0])||void 0===t?void 0:t.name)}).catch(function(e){console.log(e),Y([]),L("")})},[]);var eb=function(e){e.preventDefault();var t,n="".concat(w.BASE_URL,"/attachment/upload/").concat(null==M?void 0:null===(t=M.find(function(e){return(null==e?void 0:e.name)===z}))||void 0===t?void 0:t.id,"/").concat(x()(ep).isoWeek(),"?year=").concat(x()(ep).year(),"&defaultOrMed=").concat(X,"&weekNumber=").concat(el,"&eduType=").concat(et,"&weekType=").concat(B,"&startWeek=").concat(x()(ep).startOf("isoWeek").format("DD.MM.YYYY"),"&endWeek=").concat(x()(ep).startOf("isoWeek").add(5,"days").format("DD.MM.YYYY")),a=new FormData;a.append("file",er);var l=localStorage.getItem(w.TOKEN),i={headers:{"Content-Type":"multipart/form-data",Authorization:w.TokenType+l,"Access-Control-Allow-Origin":"*"}};console.log(n,"url"),console.log(a),S.default.post(n,a,i).then(function(e){var t;I.toast.success(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),ev(!1)}).catch(function(e){var t,n;I.toast.error(null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(t=n.data)||void 0===t?void 0:t.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})})};return e.propTypes={value:O().number.isRequired},(0,o.jsxs)(U,{children:[(0,o.jsx)(y.default,{display:"flex",justifyContent:"end",children:(0,o.jsx)(v.default,{variant:"contained",onClick:function(){return ev(!0)},children:"Add weekly training file"})}),(0,o.jsx)(C.default,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:ex,onClose:eg,closeAfterTransition:!0,slots:{backdrop:T.default},slotProps:{backdrop:{timeout:500}},children:(0,o.jsx)(j.Fade,{in:ex,children:(0,o.jsx)(y.default,{sx:W,component:N,children:(0,o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),console.log({eduYers:z,year:q,type:B,weekedu:el,typesDay:J,eduTypes:et,week:{weekNumber:x()(ep).isoWeek(),monthName:x()(ep).format("MMMM"),monthNumber:x()(ep).format("MM"),year:x()(ep).year(),monday:x()(ep).startOf("isoWeek").format("DD"),saturday:x()(ep).startOf("isoWeek").add(5,"days").format("DD.MM.YYYY")},typeFile:X,file:er}),eb(e)},children:[(0,o.jsxs)(F,{children:[(0,o.jsxs)(p.default,{children:[(0,o.jsx)(f.default,{id:"demo-simple-select-label",children:"O'quv yili"}),(0,o.jsx)(c.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label",id:"demo-simple-select",value:z,label:"O'quv yili",onChange:function(e){return L(e.target.value)},children:M.length>0&&M.map(function(e,t){return(0,o.jsx)(u.default,{value:e.name,children:e.name},t)})})]}),(0,o.jsxs)(p.default,{children:[(0,o.jsx)(f.default,{id:"demo-simple-select-label1",children:"Year"}),(0,o.jsx)(c.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:q,label:"Year",onChange:function(e){return V(e.target.value)},children:i.map(function(e,t){return(0,o.jsx)(u.default,{value:e,children:e},t)})})]}),(0,o.jsxs)(p.default,{children:[(0,o.jsx)(f.default,{id:"demo-simple-select-label1",children:"Type of week"}),(0,o.jsx)(c.default,{size:"small",sx:{width:"200px",borderRadius:"5px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:J,label:"Type of week",onChange:function(e){return $(e.target.value)},children:s.map(function(e,t){return(0,o.jsx)(u.default,{value:e.name,onClick:function(){return H(e.type)},children:(0,o.jsxs)(y.default,{sx:{width:"100%",display:"flex",gap:"5px",alignItems:"center"},children:[(0,o.jsx)(y.default,{sx:{fontSize:"12px",borderRight:"none",width:"40px",padding:"0 3px",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"5px",border:"1px solid silver",backgroundColor:"".concat(e.bgColor),fontWeight:"bold"},children:e.shortname}),(0,o.jsx)("p",{children:e.name})]})},t)})})]}),(0,o.jsxs)(p.default,{children:[(0,o.jsx)(f.default,{id:"demo-simple-select-label1",children:"Type of education"}),(0,o.jsx)(c.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:et,label:"Type of education",onChange:function(e){return en(e.target.value)},children:h.map(function(e,t){return(0,o.jsx)(u.default,{value:e,children:e},t)})})]}),(0,o.jsx)(m.default,{size:"small",value:el,label:"Week of education",type:"number",sx:{width:"200px"},InputProps:{inputProps:{min:1,max:53}},onChange:function(e){return ei(e.target.value)}}),(0,o.jsx)(m.default,{size:"small",label:"Date of the week",type:"week",value:ep,sx:{width:"200px"},onChange:function(e){return em(e.target.value)}}),(0,o.jsxs)(p.default,{children:[(0,o.jsx)(f.default,{id:"demo-simple-select-label1",children:"Data type"}),(0,o.jsx)(c.default,{size:"small",sx:{width:"200px"},labelId:"demo-simple-select-label1",id:"demo-simple-select1",value:X,label:"Data type",onChange:function(e){return Q(e.target.value)},children:_.map(function(e,t){return(0,o.jsx)(u.default,{value:e,children:e},t)})})]}),(0,o.jsxs)(v.default,{sx:{width:"200px",overflow:"hidden"},size:"sm",variant:"outlined",component:"label",endIcon:(0,o.jsx)(g.BiUpload,{}),children:[(0,o.jsx)("p",{children:(null==er?void 0:er.name)?er.name.length<13?er.name:er.name.substring(0,13)+"....":"Choose file "}),(0,o.jsx)("input",{onChange:function(e){return ed(e.target.files[0])},accept:"xml,.xml",type:"file",hidden:!0})]})]}),n>0&&(0,o.jsx)(y.default,{sx:{width:"100%",marginTop:"15px"},children:(0,o.jsx)(e,{value:n})}),(0,o.jsxs)(y.default,{sx:{marginTop:"15px",width:"100%",display:"flex",justifyContent:"end",gap:"15px"},children:[(0,o.jsx)(v.default,{onClick:eg,variant:"outlined",children:"Cancel"}),(0,o.jsx)(k.default,{title:eu?"Fill in all the fields !":"",placement:"top",children:(0,o.jsx)("span",{children:(0,o.jsx)(v.default,{disabled:eu,endIcon:(0,o.jsx)(b.IoSend,{size:15}),type:"submit",variant:"contained",children:"Send"})})})]})]})})})})]})}}}]);