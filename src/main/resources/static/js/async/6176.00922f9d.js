/*! For license information please see 6176.00922f9d.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["6176"],{42944:function(n,e,l){"use strict";l.r(e);var t=l("58865");l("33948"),l("57640"),l("9924"),l("57658"),l("33792"),l("31672"),l("59461"),l("2490"),l("25387"),l("72608");var i=l("85893"),o=l("67294"),a=l("71893"),d=l("27233"),u=l("16393"),r=l("55693"),s=l("32392"),c=l("61261"),v=l("42154"),f=l("44025"),p=l("33217"),m=l("22092"),h=l("57024"),x=l("45697"),g=l.n(x),b=l("71982"),j=l("72625"),w=l("30381"),k=l.n(w),y=l("92120"),S=l("50533"),D=l("78951");function N(){let n=(0,t._)(["\n    margin: 0 auto;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 30px;\n    height: 30px;\n    background-color: red;\n    color: white;\n    border-radius: 50%;\n"]);return N=function(){return n},n}function E(){let n=(0,t._)(["\n    h6 {\n        font-size: 11px;\n        font-weight: bold;\n        color: #000000;\n    }\n\n    p {\n        font-size: 10px;\n        font-weight: normal;\n        color: silver;\n    }\n\n"]);return E=function(){return n},n}function C(){let n=(0,t._)(["\n    width: 30px;\n    height: 30px;\n    border-radius: 50%;\n    margin: 0 auto;\n\n"]);return C=function(){return n},n}function _(){let n=(0,t._)(["\n    margin-top: 15px;\n    display: grid;\n    grid-template-columns: 0.2fr 1fr 0.2fr;\n    align-items: center;\n    gap: 5px;\n\n"]);return _=function(){return n},n}function T(){let n=(0,t._)(["\n    margin-top: 20px;\n\n    h5 {\n        text-align: center;\n        margin: 30px 0;\n        color: ",";\n    }\n"]);return T=function(){return n},n}function z(){let n=(0,t._)(["\n    font-size: 15px;\n    font-weight: bold;\n    color: ",";\n"]);return z=function(){return n},n}function F(){let n=(0,t._)(["\n    border-radius: 8px;\n    background-color: #fff;\n    padding: 10px;\n    box-shadow: rgba(99, 99, 99, 0.2) 0px 2px 8px 0px;\n"]);return F=function(){return n},n}function W(){let n=(0,t._)(["\n    display: flex;\n    justify-content: end;\n    margin: 20px 0;\n"]);return W=function(){return n},n}function O(){let n=(0,t._)(["\n    width: 100%;\n    min-width: 300px;\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr 1fr;\n    gap: 40px;\n    margin-bottom: 40px;\n    ","\n    ","\n"]);return O=function(){return n},n}function B(){let n=(0,t._)(["\n    font-size: 13px;\n    width: 200px !important;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    border-radius: 8px !important;;\n    color: ",";\n    padding: 5px 20px !important;\n    height: 42px !important;\n    margin: 5px !important;\n    box-shadow: rgba(0, 0, 0, 0.1) 0 4px 12px;\n\n    &:hover {\n        color: #ffffff !important;\n        background-color: #5093f1 !important;\n    }\n\n    &.Mui-selected {\n        color: #ffffff !important;\n        background-color: #5093f1 !important;\n    }\n"]);return B=function(){return n},n}function Y(){let n=(0,t._)(["\n    width: 100%;\n    padding: 10px;\n\n"]);return Y=function(){return n},n}let R=a.default.div(N()),A=a.default.div(E()),I=a.default.div(C()),L=a.default.div(_()),U=a.default.div(T(),u.mainColor),q=a.default.p(z(),n=>n.cl),M=a.default.div(F()),H=a.default.div(W()),G=a.default.div(O(),(0,h.small)({gridTemplateColumns:"auto auto"}),(0,h.extrasmall)({gridTemplateColumns:"auto"})),J=a.default.div(B(),u.mainColor),K=a.default.div(Y());e.default=()=>{let[n,e]=(0,o.useState)([]),[l,t]=(0,o.useState)(""),[a,h]=(0,o.useState)({}),[x,w]=(0,o.useState)([]),[N,E]=(0,o.useState)([]),[C,_]=(0,o.useState)(0),[T,z]=(0,o.useState)([]),[F,W]=(0,o.useState)([]),[O,B]=(0,o.useState)([]),Y=(0,S.useSelector)(n=>{var e;return null==n?void 0:null===(e=n.educationYear)||void 0===e?void 0:e.educationYear}),[P,Q]=(0,o.useState)(!0),[V,X]=(0,o.useState)(!1),{headers:Z}=(0,u.getHeaders)(),$=(0,S.useDispatch)(),nn=[1,2,3,4],ne=[1,2,3,4,5],[nl,nt]=(0,o.useState)({date:new Date,dateFrom:k()().startOf("isoWeek").toDate(),dateTo:k()().endOf("isoWeek").toDate(),weekNumber:k()().isoWeek(),weekDay:k()().day()}),ni=async()=>{await d.default.get(u.BASE_URL+"/education/educationYearsForSelected",{headers:Z}).then(n=>{var e,l;$((0,y.fetchEducationYear)(null==n?void 0:null===(l=n.data)||void 0===l?void 0:null===(e=l.obj)||void 0===e?void 0:e[0]))}).catch(n=>{})};(0,o.useEffect)(()=>{d.default.get(u.BASE_URL+"/dekanat/all",Z).then(n=>{var l;e(n.data.obj),w(null===(l=n.data.obj)||void 0===l?void 0:l.map(n=>n.name)),t(n.data.obj[0].name)}).catch(n=>void 0)},[]),(0,o.useEffect)(()=>{ni()},[]),(0,o.useEffect)(()=>{var n,e;B([]),Q(!0),(null==N?void 0:N.length)>0&&Y&&d.default.get("".concat(u.BASE_URL,"/timeTableByWeekOfYear/studentStatisticsWithWeekOfEduYear/").concat(null==Y?void 0:Y.id,"?facultyId=").concat(N[C].id,"&facultyShortName=").concat(N[C].shortName,"&eduType=").concat(null==a?void 0:null===(n=a.eduType)||void 0===n?void 0:n.name,"&eduTypeId=").concat(null==a?void 0:null===(e=a.eduType)||void 0===e?void 0:e.id)).then(n=>{var e,l,t,i,o,a;z(null==n?void 0:null===(l=n.data)||void 0===l?void 0:null===(e=l.obj)||void 0===e?void 0:e.map(n=>{let e=[];return null==n||n.map(n=>{ne.map(l=>{var t,i,o,a;(null==n?void 0:n.sortNumber)===(null==nl?void 0:nl.weekNumber)?l<=(null==nl?void 0:nl.weekDay)&&e.push(null==n?void 0:null===(i=n[l])||void 0===i?void 0:null===(t=i.statistics)||void 0===t?void 0:t.map(e=>({...e,day:l,week:null==n?void 0:n.sortNumber}))):e.push(null==n?void 0:null===(a=n[l])||void 0===a?void 0:null===(o=a.statistics)||void 0===o?void 0:o.map(e=>({...e,day:l,week:null==n?void 0:n.sortNumber})))})}),Object.values(function(n){return n.reduce((n,e)=>{let l=null==e?void 0:e.fullName;return n[l]?n[l].push(e):n[l]=[e],n},{})}(null==e?void 0:e.flat()))})),W(null==n?void 0:null===(i=n.data)||void 0===i?void 0:null===(t=i.secondObj)||void 0===t?void 0:t.map(n=>null==n?void 0:n.map(n=>({...n,count:Object.values(function(n){return n.reduce((n,e)=>(n[e]?n[e].push(e):n[e]=[e],n),{})}(null==n?void 0:n.count))})))),null==n||null===(a=n.data)||void 0===a||null===(o=a.obj)||void 0===o||o.map(n=>{n.map(n=>{(null==n?void 0:n.sortNumber)===(null==nl?void 0:nl.weekNumber)?ne.map(e=>{e<=(null==nl?void 0:nl.weekDay)&&B(l=>{var t;return[...l,...null==n?void 0:null===(t=n[e])||void 0===t?void 0:t.statistics]})}):ne.map(e=>{B(l=>{var t;return[...l,...null==n?void 0:null===(t=n[e])||void 0===t?void 0:t.statistics]})})})}),Q(!1)}).catch(n=>{Q(!1),X(!0)})},[Y,C,N]),(0,o.useEffect)(()=>{var e;E((null===(e=n.find(n=>n.name===l))||void 0===e?void 0:e.faculties)||[]),h(n.find(n=>n.name===l))},[l]),(0,o.useEffect)(()=>{},[N]);let no=[5,10,20,30,40,50],[na,nd]=(0,o.useState)(no[0]),nu=n=>{nd(n.target.value)};function nr(n){let{children:e,value:l,index:t,...o}=n;return(0,i.jsx)("div",{role:"tabpanel",hidden:l!==t,id:"simple-tabpanel-".concat(t),"aria-labelledby":"simple-tab-".concat(t),...o,children:l===t&&(0,i.jsx)(r.default,{sx:{p:0},children:(0,i.jsx)("div",{children:e})})})}return nr.propTypes={children:g().node,index:g().number.isRequired,value:g().number.isRequired},(0,i.jsxs)(K,{children:[(0,i.jsxs)(v.default,{sx:{width:"200px",m:2},children:[(0,i.jsx)(s.default,{id:"demo-simple-select-label",children:"Dean"}),(0,i.jsx)(f.default,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l,label:"Dean",onChange:n=>{t(n.target.value)},children:x.map((n,e)=>(0,i.jsx)(c.default,{value:n,children:n},e))})]}),(0,i.jsx)("div",{className:"dekantabs",children:(0,i.jsx)(p.default,{variant:"scrollable",scrollButtons:!0,allowScrollButtonsMobile:!0,value:C,onChange:(n,e)=>{_(e)},indicatorColor:"","aria-label":"basic tabs example",children:null==N?void 0:N.map((n,e)=>{var l;return(0,i.jsx)(m.default,{component:J,label:null==n?void 0:n.shortName,...(l=e,{id:"simple-tab-".concat(l),"aria-controls":"simple-tabpanel-".concat(l)})},e)})})}),null==N?void 0:N.map((n,e)=>(0,i.jsxs)(nr,{value:C,index:e,children:[(0,i.jsx)(H,{children:(0,i.jsxs)(v.default,{sx:{minWidth:100},size:"small",children:[(0,i.jsx)(s.default,{id:"select-label",children:"Size"}),(0,i.jsx)(f.default,{labelId:"select-label",id:"select-small-size",value:na,label:"Size",onChange:nu,children:no.map((n,e)=>(0,i.jsx)(c.default,{value:n,children:n},e))})]})}),(0,i.jsxs)(G,{children:[P&&Array.from({length:4}).map((n,e)=>(0,i.jsxs)(M,{children:[(0,i.jsxs)(q,{cl:0===e&&"".concat(u.mainColor)||1===e&&"#FD8539"||2===e&&"#2ED480"||3===e&&"#FE6D8E",children:[e+1,"-Course"]}),(0,i.jsx)(U,{children:(0,i.jsxs)(r.default,{sx:{width:"100%"},children:[(0,i.jsx)(b.default,{}),(0,i.jsx)(b.default,{animation:"wave"}),(0,i.jsx)(b.default,{animation:!1})]})})]},e)),!P&&T?null==T?void 0:T.map((n,e)=>{var l,t,o;return(0,i.jsxs)(M,{children:[(0,i.jsxs)(q,{cl:0===e&&"".concat(u.mainColor)||1===e&&"#FD8539"||2===e&&"#2ED480"||3===e&&"#FE6D8E",children:[e+1,"-Course"]}),(0,i.jsx)(U,{children:n.length>0?null==n?void 0:null===(o=n.sort(function(n,e){return(null==n?void 0:n.length)<(null==e?void 0:e.length)?1:(null==n?void 0:n.length)>(null==e?void 0:e.length)?-1:0}))||void 0===o?void 0:null===(t=o.map((n,l)=>{let t=0;return null==n||n.map(n=>{let l=k()().isoWeek(),i=k()().format("DD");if(l>n.week&&Number(i)>n.day){var o,a,d,u,r,s,c,v;(null==F?void 0:null===(u=F[e])||void 0===u?void 0:null===(d=u.find(e=>(null==e?void 0:e.week)===(null==n?void 0:n.week)&&e.groupName===(null==n?void 0:n.groupName)))||void 0===d?void 0:null===(a=d.count)||void 0===a?void 0:null===(o=a[(null==n?void 0:n.day)-1])||void 0===o?void 0:o.length)&&(t+=null==F?void 0:null===(v=F[e])||void 0===v?void 0:null===(c=v.find(e=>(null==e?void 0:e.week)===(null==n?void 0:n.week)&&(null==e?void 0:e.groupName)===(null==n?void 0:n.groupName)))||void 0===c?void 0:null===(s=c.count)||void 0===s?void 0:null===(r=s[(null==n?void 0:n.day)-1])||void 0===r?void 0:r.length)}}),{...n,counter:t}}))||void 0===t?void 0:null===(l=t.sort(function(n,e){return(null==n?void 0:n.counter)<(null==e?void 0:e.counter)?1:(null==n?void 0:n.counter)>(null==e?void 0:e.counter)?-1:0}))||void 0===l?void 0:l.map((n,e)=>{var l,t;return e<na&&(0,i.jsxs)(L,{children:[(0,i.jsx)(I,{children:(0,i.jsx)("img",{style:{width:"100%"},src:(null==n?void 0:n.avatarimg)?null==n?void 0:n.avatarimg:j,alt:"avatar"})}),(0,i.jsxs)(A,{children:[(0,i.jsx)("h6",{children:null==n?void 0:null===(l=n[0])||void 0===l?void 0:l.fullName}),(0,i.jsx)("p",{children:null==n?void 0:null===(t=n[0])||void 0===t?void 0:t.groupName})]}),(0,i.jsx)(R,{children:null==n?void 0:n.counter})]},e)}):(0,i.jsx)(r.default,{children:(0,i.jsx)(D.default,{w:150,h:130})})})]},e)}):!P&&nn.map((n,e)=>(0,i.jsxs)(M,{children:[(0,i.jsxs)(q,{cl:0===e&&"".concat(u.mainColor)||1===e&&"#FD8539"||2===e&&"#2ED480"||3===e&&"#FE6D8E",children:[e+1,"-Course"]}),(0,i.jsx)(U,{children:(0,i.jsx)("h5",{children:"No data Students"})})]}))]})]},e))]})}}}]);