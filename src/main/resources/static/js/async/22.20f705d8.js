/*! For license information please see 22.20f705d8.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["22"],{17171:function(e,n,o){"use strict";var t=o("5751");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=t(o("64938")),i=o("85893"),a=(0,l.default)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");n.default=a},39628:function(e,n,o){"use strict";var t=o("5751");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=t(o("64938")),i=o("85893"),a=(0,l.default)((0,i.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");n.default=a},56017:function(e,n,o){"use strict";o.r(n),o.d(n,{default:function(){return K}});var t=o("27412"),l=o("7409"),i=o("99282"),a=o("38956"),d=o("58865");o("85827"),o("25387"),o("72608"),o("2490"),o("41539"),o("69826"),o("31672"),o("59461"),o("92222"),o("21249"),o("57640"),o("9924"),o("23157"),o("57327"),o("88449"),o("19894"),o("26833"),o("68216"),o("79433");var r=o("85893"),u=o("67294"),s=o("71893"),c=o("28685"),f=o("27233"),v=o("72132"),h=o("86893"),p=o("63750"),m=o("45184"),g=o("16356"),x=o("97367"),b=o("55693"),j=o("79352"),_=o("52861"),w=o("44118"),C=o("15352"),y=o("39628"),k=o("17171"),S=o("90650"),O=o("71632"),R=o("89583"),I=o("94718"),L=o("7104");function B(){var e=(0,d._)(["\n  height: 155px;\n  padding-top: 10px;\n  display: grid;\n  overflow-y: scroll;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 30px;\n  ","\n  ","\n  ","\n"]);return B=function(){return e},e}function E(){var e=(0,d._)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]);return E=function(){return e},e}function z(){var e=(0,d._)(["\n  ","\n  ","\n ","\n"]);return z=function(){return e},e}function P(){var e=(0,d._)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid red;\n  border-radius: 0.5rem;\n  color: red;\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"]);return P=function(){return e},e}function N(){var e=(0,d._)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid ",";\n  border-radius: 0.5rem;\n  color: ",";\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"]);return N=function(){return e},e}function U(){var e=(0,d._)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: 5px !important;\n"]);return U=function(){return e},e}function H(){var e=(0,d._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 1rem;\n"]);return H=function(){return e},e}var A=(0,r.jsx)(y.default,{fontSize:"small"}),T=(0,r.jsx)(k.default,{fontSize:"small"}),D=s.default.div(B(),(0,O.medium)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,O.small)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,O.extrasmall)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"})),F=(0,s.default)(S.motion.button)(E(),c.mainColor),V={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"1000px",display:"flex",flexDirection:"column",gap:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},M=s.default.div(z(),(0,O.medium)({width:"97vw !important",height:"97vh !important"}),(0,O.small)({width:"97vw !important",height:"97vh !important"}),(0,O.extrasmall)({width:"97vw !important",height:"97vh !important"})),G=s.default.button(P()),W=s.default.button(N(),c.mainColor,c.mainColor),q=s.default.div(U()),J=s.default.div(H()),K=function(){var e=(0,a._)((0,u.useState)(!0),2),n=(e[0],e[1]),o=(0,a._)((0,u.useState)(null),2),d=o[0],s=o[1],y=(0,a._)((0,u.useState)([]),2),k=(y[0],y[1]),S=(0,a._)((0,u.useState)([]),2),O=(S[0],S[1]),B=(0,a._)((0,u.useState)([]),2),E=B[0],z=B[1],P=(0,a._)((0,u.useState)(!1),2),N=P[0],U=P[1],H=(0,a._)((0,u.useState)([]),2),K=H[0],Q=H[1],X=(0,a._)((0,u.useState)(!1),2),Y=X[0],Z=X[1],$=(0,a._)((0,u.useState)(!1),2),ee=$[0],en=$[1],eo=(0,a._)((0,u.useState)([]),2),et=eo[0],el=eo[1],ei=(0,a._)((0,u.useState)([]),2),ea=ei[0],ed=ei[1],er=(0,a._)((0,u.useState)({id:null,name:null,owner:null,room:null,phone:null,roles:[],positions:[]}),2),eu=er[0],es=er[1],ec=(0,c.getHeaders)().headers,ef=function(e){e.length>4?f.default.get(c.BASE_URL+"/user/getUsersForUserRole?keyword="+e,{headers:ec}).then(function(e){var n,o=(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.obj).reduce(function(e,n){return e.find(function(e){return e.label===n.label})?e:e.concat([n])},[]);console.log(o),z(o)}).catch(function(e){console.log(e)}):z([])};(0,u.useEffect)(function(){f.default.get(c.BASE_URL+"/user/getDataForStaffSaving",{headers:ec}).then(function(e){var o,t,l,i,a;k(null===(t=e.data)||void 0===t?void 0:null===(o=t.roles)||void 0===o?void 0:o.map(function(e){return e.label=e.label.startsWith("ROLE_")?e.label.substring(5):e.label,e})),O(null===(l=e.data)||void 0===l?void 0:l.sections),n(!1),el(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.roles2),ed(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.positions)}).catch(function(e){console.log(e)}),ev()},[]);var ev=function(){f.default.get(c.BASE_URL+"/section/allSections",{headers:ec}).then(function(e){var n;console.log(null==e?void 0:e.data,"sections"),Q(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.obj),U(!1)}).catch(function(e){console.log(e)})};(0,u.useEffect)(function(){N&&ev()},[N]);var eh=[{field:"id",headerName:"ID",width:40,editable:!1},{field:"name",headerName:"Name",type:"string",width:300,editable:!1},{field:"owner",headerName:"Bo`lim boshlig`i",type:"string",width:300,editable:!1,renderCell:function(e){var n,o;return(0,r.jsx)("div",{children:null==e?void 0:null===(o=e.row)||void 0===o?void 0:null===(n=o.owner)||void 0===n?void 0:n.fullName})}},{field:"room",headerName:"Room",type:"string",width:100,editable:!1},{field:"phone",headerName:"Phone",type:"string",width:200,editable:!1},{field:"service",headerName:"Service",type:"string",width:200,editable:!1,renderCell:function(e){return(0,r.jsxs)(q,{children:[(0,r.jsx)(W,{onClick:function(){var n;return ep(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id)},children:(0,r.jsx)(h.FiEdit,{})}),(0,r.jsx)(G,{onClick:function(){var n,o;return ex(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id,null==e?void 0:null===(o=e.row)||void 0===o?void 0:o.name)},children:(0,r.jsx)(p.BsTrash,{})})]})}}],ep=function(e){console.log(e,"edited"),console.log(d,"owner"),f.default.get(c.BASE_URL+"/section/getSectionById?id="+e,{headers:ec}).then(function(e){var n,o;console.log(null==e?void 0:e.data),s(null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(n=o.obj)||void 0===n?void 0:n.owner),es(function(n){var o,t,a,d,r,u,s,c,f,v,h,p,m,g;return(0,i._)((0,l._)({},n),{id:null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(o=t.obj)||void 0===o?void 0:o.id,name:null==e?void 0:null===(d=e.data)||void 0===d?void 0:null===(a=d.obj)||void 0===a?void 0:a.name,owner:null==e?void 0:null===(u=e.data)||void 0===u?void 0:null===(r=u.obj)||void 0===r?void 0:r.owner,room:null==e?void 0:null===(c=e.data)||void 0===c?void 0:null===(s=c.obj)||void 0===s?void 0:s.room,phone:null==e?void 0:null===(v=e.data)||void 0===v?void 0:null===(f=v.obj)||void 0===f?void 0:f.phone,roles:null==e?void 0:null===(p=e.data)||void 0===p?void 0:null===(h=p.obj)||void 0===h?void 0:h.roles,positions:null==e?void 0:null===(g=e.data)||void 0===g?void 0:null===(m=g.obj)||void 0===m?void 0:m.positions})})}).catch(function(e){console.log(e)}),Z(!1),en(!0)},em=function(e){es(function(n){return(0,i._)((0,l._)({},n),(0,t._)({},e.target.name,e.target.value))})},eg=function(){Z(!1),en(!1)},ex=function(e,n){es({id:null,name:null,owner:null,room:null,phone:null,roles:[],positions:[]}),s(null),window.confirm("Do you want to delete ".concat(n,"?"))&&(f.default.delete("".concat(c.BASE_URL,"/section/deleteSection/").concat(e),{headers:ec}).then(function(n){var o;Q(null==K?void 0:K.filter(function(n){return(null==n?void 0:n.id)!==e})),v.toast.success(null==n?void 0:null===(o=n.data)||void 0===o?void 0:o.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}).catch(function(e){console.log(e)}),v.toast.success("Deleted successfully",{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}))},eb=function(e){var n=e.id,o=e.name,t=e.owner,l=e.phone,i=e.positions,a=e.roles,d={id:n,name:o,ownerId:t.value,phone:l,positions:i,roles:a};console.log(d,"booody"),Object.values(e).every(function(e){return null!==e&&e})?f.default.post(c.BASE_URL+"/section/createSectionV2",d,{headers:ec}).then(function(n){en(!1),ev(),v.toast.success("".concat(null==e?void 0:e.name," section has been updated successfully!."))}).catch(function(e){var n,o;console.log(e),v.toast.error(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message)}):v.toast.warning("Empty any field..")},ej=function(e){delete e.owner,delete e.id,console.log(e," for save section"),Object.values(e).every(function(e){return null!==e&&e})?f.default.post(c.BASE_URL+"/section/createSectionV2",e,{headers:ec}).then(function(n){Z(!1),ev(),v.toast.success("".concat(null==e?void 0:e.name," section has been saved successfully!."))}).catch(function(e){var n,o;console.log(e),v.toast.error(null==e?void 0:null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message)}):v.toast.warning("Empty any field..")};return(0,r.jsxs)(J,{children:[(0,r.jsx)(b.default,{display:"flex",justifyContent:"end",children:(0,r.jsx)(I.default,{sx:{width:"220px"},variant:"contained",onClick:function(){s(null),es({id:null,name:null,owner:null,room:null,phone:null,roles:[],positions:[]}),en(!1),Z(!0)},children:"Add new section"})}),N&&(null==K?void 0:K.length)>0?(0,r.jsx)(m.default,{}):(0,r.jsx)(L.Card,{children:(0,r.jsx)(L.CardContent,{children:(0,r.jsx)(g.DataGrid,{checkboxSelection:!0,sx:{minHeight:"670px!important",overflow:"scroll"},columns:eh,rows:K,components:{Toolbar:g.GridToolbar},pageSize:10,initialState:(0,i._)((0,l._)({},K.initialState),{columns:{columnVisibilityModel:{id:!1}}})})})}),(0,r.jsx)(x.default,{open:Y,onClose:eg,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,r.jsxs)(b.default,{sx:V,component:M,children:[(0,r.jsx)(F,{onClick:eg,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,r.jsx)(j.RiCloseLine,{})}),(0,r.jsx)("h3",{style:{color:"".concat(c.mainColor)},children:"Create new section"}),(0,r.jsxs)(D,{children:[(0,r.jsx)(_.default,{id:"outlined-basic",label:"Name",variant:"outlined",value:null==eu?void 0:eu.name,name:"name",onChange:em}),(0,r.jsx)(w.default,{id:"checkboxes-tags-demo",options:E,onFocus:function(){return z([])},disableCloseOnSelect:!0,getOptionLabel:function(e){return null==e?void 0:e.label},value:d,onChange:function(e,n){console.log(n,"new value"),s(n),es(function(e){return(0,i._)((0,l._)({},e),{ownerId:null==n?void 0:n.value})})},onInputChange:function(e,n){(null==e?void 0:e.type)==="change"&&ef(n)},renderOption:function(e,n,o){var t=o.selected;return(0,r.jsxs)("li",(0,i._)((0,l._)({},e),{children:[(0,r.jsx)(C.default,{icon:A,checkedIcon:T,style:{marginRight:8},checked:t}),null==n?void 0:n.label]}))},renderInput:function(e){return(0,r.jsx)(_.default,(0,i._)((0,l._)({},e),{label:"Owner",placeholder:"Owner"}))}}),(0,r.jsx)(_.default,{id:"outlined-basic",label:"Room",variant:"outlined",value:null==eu?void 0:eu.room,name:"room",onChange:em}),(0,r.jsx)(_.default,{sx:{minWidth:"200px"},id:"outlined-basic",label:"Phone",variant:"outlined",value:null==eu?void 0:eu.phone,name:"phone",onChange:em}),(0,r.jsx)(w.default,{multiple:!0,id:"checkboxes-tags-demo",options:et,disableCloseOnSelect:!0,getOptionLabel:function(e){return e},value:null==eu?void 0:eu.roles,onChange:function(e,n){es(function(e){return(0,i._)((0,l._)({},e),{roles:n})})},renderOption:function(e,n,o){var t=o.selected;return(0,r.jsxs)("li",(0,i._)((0,l._)({},e),{children:[(0,r.jsx)(C.default,{icon:A,checkedIcon:T,style:{marginRight:8},checked:t}),n]}))},renderInput:function(e){return(0,r.jsx)(_.default,(0,i._)((0,l._)({},e),{label:"Roles",placeholder:"Roles"}))}}),(0,r.jsx)(w.default,{multiple:!0,id:"checkboxes-tags-demo",options:ea,disableCloseOnSelect:!0,getOptionLabel:function(e){return e},value:null==eu?void 0:eu.positions,onChange:function(e,n){es(function(e){return(0,i._)((0,l._)({},e),{positions:n})})},renderOption:function(e,n,o){var t=o.selected;return(0,r.jsxs)("li",(0,i._)((0,l._)({},e),{children:[(0,r.jsx)(C.default,{icon:A,checkedIcon:T,style:{marginRight:8},checked:t}),n]}))},renderInput:function(e){return(0,r.jsx)(_.default,(0,i._)((0,l._)({},e),{label:"Positions",placeholder:"Positions"}))}})]}),(0,r.jsx)(b.default,{sx:{display:"flex",justifyContent:"end"},children:(0,r.jsx)(I.default,{size:"large",variant:"contained",endIcon:(0,r.jsx)(R.FaSave,{}),onClick:function(){return ej(eu)},children:" Save"})})]})}),(0,r.jsx)(x.default,{open:ee,onClose:eg,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,r.jsxs)(b.default,{sx:V,component:M,children:[(0,r.jsx)(F,{onClick:eg,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,r.jsx)(j.RiCloseLine,{})}),(0,r.jsx)("h3",{style:{color:"".concat(c.mainColor)},children:"Edit section"}),(0,r.jsxs)(D,{children:[(0,r.jsx)(_.default,{id:"outlined-basic",label:"Name",variant:"outlined",value:null==eu?void 0:eu.name,name:"name",onChange:em}),(0,r.jsx)(w.default,{id:"checkboxes-tags-demo",options:E,disableCloseOnSelect:!0,getOptionLabel:function(e){return null==e?void 0:e.label},value:d,onChange:function(e,n){console.log(n,"new value"),s(n),es(function(e){return(0,i._)((0,l._)({},e),{ownerId:null==n?void 0:n.value})})},onInputChange:function(e,n){(null==e?void 0:e.type)==="change"&&ef(n)},renderOption:function(e,n,o){var t=o.selected;return(0,r.jsxs)("li",(0,i._)((0,l._)({},e),{children:[(0,r.jsx)(C.default,{icon:A,checkedIcon:T,style:{marginRight:8},checked:t}),null==n?void 0:n.label]}))},renderInput:function(e){return(0,r.jsx)(_.default,(0,i._)((0,l._)({},e),{label:"Owner",placeholder:"Owner"}))}}),(0,r.jsx)(_.default,{id:"outlined-basic",label:"Room",variant:"outlined",value:null==eu?void 0:eu.room,name:"room",onChange:em}),(0,r.jsx)(_.default,{id:"outlined-basic",label:"Phone",variant:"outlined",value:null==eu?void 0:eu.phone,name:"phone",onChange:em}),(0,r.jsx)(w.default,{multiple:!0,id:"checkboxes-tags-demo",options:et,disableCloseOnSelect:!0,getOptionLabel:function(e){return e},value:null==eu?void 0:eu.roles,onChange:function(e,n){es(function(e){return(0,i._)((0,l._)({},e),{roles:n})})},renderOption:function(e,n,o){var t=o.selected;return(0,r.jsxs)("li",(0,i._)((0,l._)({},e),{children:[(0,r.jsx)(C.default,{icon:A,checkedIcon:T,style:{marginRight:8},checked:t}),n]}))},renderInput:function(e){return(0,r.jsx)(_.default,(0,i._)((0,l._)({},e),{label:"Roles",placeholder:"Roles"}))}}),(0,r.jsx)(w.default,{multiple:!0,id:"checkboxes-tags-demo",options:ea,disableCloseOnSelect:!0,getOptionLabel:function(e){return e},value:null==eu?void 0:eu.positions,onChange:function(e,n){es(function(e){return(0,i._)((0,l._)({},e),{positions:n})})},renderOption:function(e,n,o){var t=o.selected;return(0,r.jsxs)("li",(0,i._)((0,l._)({},e),{children:[(0,r.jsx)(C.default,{icon:A,checkedIcon:T,style:{marginRight:8},checked:t}),n]}))},renderInput:function(e){return(0,r.jsx)(_.default,(0,i._)((0,l._)({},e),{label:"Positions",placeholder:"Positions"}))}})]}),(0,r.jsx)(b.default,{sx:{display:"flex",justifyContent:"end"},children:(0,r.jsx)(I.default,{size:"large",variant:"contained",endIcon:(0,r.jsx)(R.FaSave,{}),onClick:function(){return eb(eu)},children:" Update"})})]})})]})}}}]);