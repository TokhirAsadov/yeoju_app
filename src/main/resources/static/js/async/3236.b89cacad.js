/*! For license information please see 3236.b89cacad.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["3236"],{17171:function(e,n,l){"use strict";var o=l("5751");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=o(l("64938")),i=l("85893"),a=(0,t.default)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");n.default=a},39628:function(e,n,l){"use strict";var o=l("5751");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=o(l("64938")),i=l("85893"),a=(0,t.default)((0,i.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");n.default=a},76692:function(e,n,l){"use strict";l.r(n);var o=l("58865");l("33948"),l("25387"),l("72608"),l("2490"),l("31672"),l("59461"),l("57640"),l("9924"),l("88449"),l("19894"),l("68216"),l("79433");var t=l("85893"),i=l("67294"),a=l("71893"),d=l("16393"),r=l("27233"),s=l("72132"),u=l("86893"),c=l("63750"),v=l("53432"),h=l("16356"),p=l("97367"),f=l("55693"),m=l("79352"),x=l("52861"),g=l("44118"),b=l("15352"),j=l("39628"),C=l("17171"),w=l("90650"),y=l("57024"),k=l("89583"),S=l("94718"),O=l("7104");function R(){let e=(0,o._)(["\n    height: 155px;\n    padding-top: 10px;\n    display: grid;\n    overflow-y: scroll;\n    grid-template-columns: repeat(3, 1fr);\n    gap: 30px;\n    ","\n    ","\n    ","\n"]);return R=function(){return e},e}function _(){let e=(0,o._)(["\n    width: 30px;\n    height: 30px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: ",";\n    border-radius: 50%;\n    color: white;\n    font-size: 26px;\n    border: none;\n    position: absolute;\n    top: 10px;\n    right: 10px;\n"]);return _=function(){return e},e}function I(){let e=(0,o._)(["\n    ","\n    ","\n    ","\n"]);return I=function(){return e},e}function L(){let e=(0,o._)(["\n    width: 30px;\n    height: 30px;\n    background-color: #fff;\n    font-size: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid red;\n    border-radius: 0.5rem;\n    color: red;\n    padding: 5px !important;\n\n    &:hover {\n        transform: scale(1.1);\n    }\n\n"]);return L=function(){return e},e}function P(){let e=(0,o._)(["\n    width: 30px;\n    height: 30px;\n    background-color: #fff;\n    font-size: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid ",";\n    border-radius: 0.5rem;\n    color: ",";\n    padding: 5px !important;\n\n    &:hover {\n        transform: scale(1.1);\n    }\n\n"]);return P=function(){return e},e}function B(){let e=(0,o._)(["\n    width: 100%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 10px;\n    margin: 5px !important;\n"]);return B=function(){return e},e}function E(){let e=(0,o._)(["\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n    .MuiDataGrid-columnHeaderTitleContainer {\n        justify-content: center;\n    }\n"]);return E=function(){return e},e}let N=(0,t.jsx)(j.default,{fontSize:"small"}),z=(0,t.jsx)(C.default,{fontSize:"small"}),H=a.default.div(R(),(0,y.medium)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,y.small)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,y.extrasmall)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"})),U=(0,a.default)(w.motion.button)(_(),d.mainColor),T={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"1000px",display:"flex",flexDirection:"column",gap:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},A=a.default.div(I(),(0,y.medium)({width:"97vw !important",height:"97vh !important"}),(0,y.small)({width:"97vw !important",height:"97vh !important"}),(0,y.extrasmall)({width:"97vw !important",height:"97vh !important"})),W=a.default.button(L()),D=a.default.button(P(),d.mainColor,d.mainColor),F=a.default.div(B()),M=a.default.div(E());n.default=()=>{let[e,n]=(0,i.useState)(!0),[l,o]=(0,i.useState)(null),[a,j]=(0,i.useState)([]),[C,w]=(0,i.useState)([]),[y,R]=(0,i.useState)([]),[_,I]=(0,i.useState)(!1),[L,P]=(0,i.useState)([]),[B,E]=(0,i.useState)(!1),[V,G]=(0,i.useState)(!1),[q,J]=(0,i.useState)([]),[K,Q]=(0,i.useState)([]),[X,Y]=(0,i.useState)({id:null,name:null,owner:null,room:null,phone:null,roles:[],positions:[]}),{headers:Z}=(0,d.getHeaders)(),$=e=>{e.length>4?r.default.get(d.BASE_URL+"/user/getUsersForUserRole?keyword="+e,{headers:Z}).then(e=>{var n;R((null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.obj).reduce((e,n)=>e.find(e=>e.label===n.label)?e:e.concat([n]),[]))}).catch(e=>{}):R([])};(0,i.useEffect)(()=>{r.default.get(d.BASE_URL+"/user/getDataForStaffSaving",{headers:Z}).then(e=>{var l,o,t,i,a;j(null===(o=e.data)||void 0===o?void 0:null===(l=o.roles)||void 0===l?void 0:l.map(e=>(e.label=e.label.startsWith("ROLE_")?e.label.substring(5):e.label,e))),w(null===(t=e.data)||void 0===t?void 0:t.sections),n(!1),J(null==e?void 0:null===(i=e.data)||void 0===i?void 0:i.roles2),Q(null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.positions)}).catch(e=>{}),ee()},[]);let ee=()=>{r.default.get(d.BASE_URL+"/section/allSections",{headers:Z}).then(e=>{var n,l;P(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(n=l.obj)||void 0===n?void 0:n.map((e,n)=>({...e,count:n+1}))),I(!1)}).catch(e=>{})};(0,i.useEffect)(()=>{_&&ee()},[_]);let en=[{field:"count",headerName:"\u2116",width:40,align:"center",editable:!1},{field:"name",headerName:"Name",flex:1,minWidth:250,editable:!1},{field:"owner",headerName:"Department head",flex:1,minWidth:300,editable:!1,renderCell:e=>{var n,l;return(0,t.jsx)("div",{children:null==e?void 0:null===(l=e.row)||void 0===l?void 0:null===(n=l.owner)||void 0===n?void 0:n.fullName})}},{field:"positions",headerName:"Positions",flex:.8,minWidth:300,editable:!1,renderCell:e=>{var n,l;return null==e?void 0:null===(l=e.row)||void 0===l?void 0:null===(n=l.positions)||void 0===n?void 0:n.map((e,n)=>(0,t.jsxs)("div",{children:[null==e?void 0:e.userPositionName,",\xa0"]},n))}},{field:"room",headerName:"Room",flex:.4,minWidth:100,align:"center",editable:!1},{field:"phone",headerName:"Phone",flex:.5,minWidth:150,align:"center",editable:!1},{field:"service",headerName:"Service",flex:.3,minWidth:100,editable:!1,renderCell:e=>(0,t.jsxs)(F,{children:[(0,t.jsx)(D,{onClick:()=>{var n;return el(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id)},children:(0,t.jsx)(u.FiEdit,{})}),(0,t.jsx)(W,{onClick:()=>{var n,l;return ei(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id,null==e?void 0:null===(l=e.row)||void 0===l?void 0:l.name)},children:(0,t.jsx)(c.BsTrash,{})})]})}],el=e=>{r.default.get(d.BASE_URL+"/section/getSectionById?id="+e,{headers:Z}).then(e=>{var n,l;o(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(n=l.obj)||void 0===n?void 0:n.owner),Y(n=>{var l,o,t,i,a,d,r,s,u,c,v,h,p,f;return{...n,id:null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(l=o.obj)||void 0===l?void 0:l.id,name:null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(t=i.obj)||void 0===t?void 0:t.name,owner:null==e?void 0:null===(d=e.data)||void 0===d?void 0:null===(a=d.obj)||void 0===a?void 0:a.owner,room:null==e?void 0:null===(s=e.data)||void 0===s?void 0:null===(r=s.obj)||void 0===r?void 0:r.room,phone:null==e?void 0:null===(c=e.data)||void 0===c?void 0:null===(u=c.obj)||void 0===u?void 0:u.phone,roles:null==e?void 0:null===(h=e.data)||void 0===h?void 0:null===(v=h.obj)||void 0===v?void 0:v.roles,positions:null==e?void 0:null===(f=e.data)||void 0===f?void 0:null===(p=f.obj)||void 0===p?void 0:p.positions}})}).catch(e=>{}),E(!1),G(!0)},eo=e=>{Y(n=>({...n,[e.target.name]:e.target.value}))},et=()=>{E(!1),G(!1)},ei=(e,n)=>{Y({id:null,name:null,owner:null,room:null,phone:null,roles:[],positions:[]}),o(null),window.confirm("Do you want to delete ".concat(n,"?"))&&(r.default.delete("".concat(d.BASE_URL,"/section/deleteSection/").concat(e),{headers:Z}).then(n=>{var l;P(null==L?void 0:L.filter(n=>(null==n?void 0:n.id)!==e)),s.toast.success(null==n?void 0:null===(l=n.data)||void 0===l?void 0:l.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}).catch(e=>{}),s.toast.success("Deleted successfully",{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}))},ea=e=>{let{id:n,name:l,owner:o,phone:t,positions:i,roles:a}=e,u=o.value;Object.values(e).every(e=>null!==e&&e)?r.default.post(d.BASE_URL+"/section/createSectionV2",{id:n,name:l,ownerId:u,phone:t,positions:i,roles:a},{headers:Z}).then(n=>{G(!1),ee(),s.toast.success("".concat(null==e?void 0:e.name," section has been updated successfully!."))}).catch(e=>{var n,l;s.toast.error(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)}):s.toast.warning("Empty any field..")},ed=e=>{delete e.owner,delete e.id,Object.values(e).every(e=>null!==e&&e)?r.default.post(d.BASE_URL+"/section/createSectionV2",e,{headers:Z}).then(n=>{E(!1),ee(),s.toast.success("".concat(null==e?void 0:e.name," section has been saved successfully!."))}).catch(e=>{var n,l;s.toast.error(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)}):s.toast.warning("Empty any field..")},er=(0,g.createFilterOptions)({stringify:e=>e.label+e.login});return(0,t.jsxs)(M,{children:[(0,t.jsx)(f.default,{display:"flex",justifyContent:"end",children:(0,t.jsx)(S.default,{sx:{width:"220px"},variant:"contained",onClick:()=>{o(null),Y({id:null,name:null,owner:null,room:null,phone:null,roles:[],positions:[]}),G(!1),E(!0)},children:"Add new section"})}),_&&(null==L?void 0:L.length)>0?(0,t.jsx)(v.default,{}):(0,t.jsx)(O.Card,{children:(0,t.jsx)(O.CardContent,{children:(0,t.jsx)(h.DataGrid,{columns:en,rows:L,components:{Toolbar:h.GridToolbar},rowsPerPageOptions:[10,20,30,40,50,100],autoHeight:!0,initialState:{columns:{columnVisibilityModel:{positions:!1}},pagination:{pageSize:10}}})})}),(0,t.jsx)(p.default,{open:B,onClose:et,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,t.jsxs)(f.default,{sx:T,component:A,children:[(0,t.jsx)(U,{onClick:et,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,t.jsx)(m.RiCloseLine,{})}),(0,t.jsx)("h3",{style:{color:"".concat(d.mainColor)},children:"Create new section"}),(0,t.jsxs)(H,{children:[(0,t.jsx)(x.default,{id:"outlined-basic",label:"Name",variant:"outlined",value:null==X?void 0:X.name,name:"name",onChange:eo}),(0,t.jsx)(g.default,{id:"checkboxes-tags-demo",options:y,onFocus:()=>R([]),disableCloseOnSelect:!0,getOptionLabel:e=>null==e?void 0:e.label,value:l,filterOptions:er,onChange:(e,n)=>{o(n),Y(e=>({...e,ownerId:null==n?void 0:n.value}))},onInputChange:(e,n)=>{(null==e?void 0:e.type)==="change"&&$(n)},renderOption:(e,n,l)=>{let{selected:o}=l;return(0,t.jsxs)("li",{...e,children:[(0,t.jsx)(b.default,{icon:N,checkedIcon:z,style:{marginRight:8},checked:o}),null==n?void 0:n.label]})},renderInput:e=>(0,t.jsx)(x.default,{...e,label:"Owner",placeholder:"Owner"})}),(0,t.jsx)(x.default,{id:"outlined-basic",label:"Room",variant:"outlined",value:null==X?void 0:X.room,name:"room",onChange:eo}),(0,t.jsx)(x.default,{sx:{minWidth:"200px"},id:"outlined-basic",label:"Phone",variant:"outlined",value:null==X?void 0:X.phone,name:"phone",onChange:eo}),(0,t.jsx)(g.default,{multiple:!0,id:"checkboxes-tags-demo",options:q,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:null==X?void 0:X.roles,onChange:(e,n)=>{Y(e=>({...e,roles:n}))},renderOption:(e,n,l)=>{let{selected:o}=l;return(0,t.jsxs)("li",{...e,children:[(0,t.jsx)(b.default,{icon:N,checkedIcon:z,style:{marginRight:8},checked:o}),n]})},renderInput:e=>(0,t.jsx)(x.default,{...e,label:"Roles",placeholder:"Roles"})}),(0,t.jsx)(g.default,{multiple:!0,id:"checkboxes-tags-demo",options:K,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:null==X?void 0:X.positions,onChange:(e,n)=>{Y(e=>({...e,positions:n}))},renderOption:(e,n,l)=>{let{selected:o}=l;return(0,t.jsxs)("li",{...e,children:[(0,t.jsx)(b.default,{icon:N,checkedIcon:z,style:{marginRight:8},checked:o}),n]})},renderInput:e=>(0,t.jsx)(x.default,{...e,label:"Positions",placeholder:"Positions"})})]}),(0,t.jsx)(f.default,{sx:{display:"flex",justifyContent:"end"},children:(0,t.jsx)(S.default,{size:"large",variant:"contained",endIcon:(0,t.jsx)(k.FaSave,{}),onClick:()=>ed(X),children:" Save"})})]})}),(0,t.jsx)(p.default,{open:V,onClose:et,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,t.jsxs)(f.default,{sx:T,component:A,children:[(0,t.jsx)(U,{onClick:et,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,t.jsx)(m.RiCloseLine,{})}),(0,t.jsx)("h3",{style:{color:"".concat(d.mainColor)},children:"Edit section"}),(0,t.jsxs)(H,{children:[(0,t.jsx)(x.default,{id:"outlined-basic",label:"Name",variant:"outlined",value:null==X?void 0:X.name,name:"name",onChange:eo}),(0,t.jsx)(g.default,{id:"checkboxes-tags-demo",options:y,disableCloseOnSelect:!0,getOptionLabel:e=>null==e?void 0:e.label,value:l,onChange:(e,n)=>{o(n),Y(e=>({...e,ownerId:null==n?void 0:n.value}))},onInputChange:(e,n)=>{(null==e?void 0:e.type)==="change"&&$(n)},renderOption:(e,n,l)=>{let{selected:o}=l;return(0,t.jsxs)("li",{...e,children:[(0,t.jsx)(b.default,{icon:N,checkedIcon:z,style:{marginRight:8},checked:o}),null==n?void 0:n.label]})},renderInput:e=>(0,t.jsx)(x.default,{...e,label:"Owner",placeholder:"Owner"})}),(0,t.jsx)(x.default,{id:"outlined-basic",label:"Room",variant:"outlined",value:null==X?void 0:X.room,name:"room",onChange:eo}),(0,t.jsx)(x.default,{id:"outlined-basic",label:"Phone",variant:"outlined",value:null==X?void 0:X.phone,name:"phone",onChange:eo}),(0,t.jsx)(g.default,{multiple:!0,id:"checkboxes-tags-demo",options:q,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:null==X?void 0:X.roles,onChange:(e,n)=>{Y(e=>({...e,roles:n}))},renderOption:(e,n,l)=>{let{selected:o}=l;return(0,t.jsxs)("li",{...e,children:[(0,t.jsx)(b.default,{icon:N,checkedIcon:z,style:{marginRight:8},checked:o}),n]})},renderInput:e=>(0,t.jsx)(x.default,{...e,label:"Roles",placeholder:"Roles"})}),(0,t.jsx)(g.default,{multiple:!0,id:"checkboxes-tags-demo",options:K,disableCloseOnSelect:!0,getOptionLabel:e=>e,value:null==X?void 0:X.positions,onChange:(e,n)=>{Y(e=>({...e,positions:n}))},renderOption:(e,n,l)=>{let{selected:o}=l;return(0,t.jsxs)("li",{...e,children:[(0,t.jsx)(b.default,{icon:N,checkedIcon:z,style:{marginRight:8},checked:o}),n]})},renderInput:e=>(0,t.jsx)(x.default,{...e,label:"Positions",placeholder:"Positions"})})]}),(0,t.jsx)(f.default,{sx:{display:"flex",justifyContent:"end"},children:(0,t.jsx)(S.default,{size:"large",variant:"contained",endIcon:(0,t.jsx)(k.FaSave,{}),onClick:()=>ea(X),children:" Update"})})]})})]})}}}]);