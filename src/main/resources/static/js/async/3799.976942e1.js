/*! For license information please see 3799.976942e1.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["3799"],{17171:function(e,n,l){"use strict";var o=l("5751");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=o(l("64938")),i=l("85893"),d=(0,t.default)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");n.default=d},39628:function(e,n,l){"use strict";var o=l("5751");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t=o(l("64938")),i=l("85893"),d=(0,t.default)((0,i.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank");n.default=d},69214:function(e,n,l){"use strict";l.r(n),l.d(n,{default:function(){return Y}});var o=l("27412"),t=l("7409"),i=l("99282"),d=l("38956"),a=l("58865");l("92222"),l("57327"),l("88449"),l("19894"),l("2490"),l("41539"),l("85827"),l("25387"),l("72608"),l("69826"),l("31672"),l("59461"),l("21249"),l("57640"),l("9924"),l("26833"),l("68216"),l("79433");var u=l("85893"),r=l("67294"),s=l("71893"),c=l("27233"),v=l("28685"),f=l("72132"),h=l("45184"),p=l("16356"),m=l("86893"),g=l("63750"),x=l("97367"),b=l("55693"),j=l("79352"),_=l("52861"),y=l("44118"),w=l("15352"),k=l("90650"),C=l("71632"),S=l("39628"),O=l("17171"),I=l("89583"),R=l("42154"),E=l("32392"),T=l("61261"),N=l("44025"),U=l("94718"),B=l("7104");function L(){var e=(0,a._)(["\n  height: 250px;\n  padding-top: 10px;\n  display: grid;\n  overflow-y: scroll;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 30px;\n  ","\n  ","\n  ","\n"]);return L=function(){return e},e}function D(){var e=(0,a._)(["\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-radius: 50%;\n  color: white;\n  font-size: 26px;\n  border: none;\n  position: absolute;\n  top: 10px;\n  right: 10px;\n"]);return D=function(){return e},e}function z(){var e=(0,a._)(["\n  ","\n  ","\n  ",""]);return z=function(){return e},e}function H(){var e=(0,a._)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid red;\n  border-radius: 0.5rem;\n  color: red;\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"]);return H=function(){return e},e}function F(){var e=(0,a._)(["\n  width: 30px;\n  height: 30px;\n  background-color: #fff;\n  font-size: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid ",";\n  border-radius: 0.5rem;\n  color: ",";\n  padding: 5px !important;\n\n  &:hover {\n    transform: scale(1.1);\n  }\n\n"]);return F=function(){return e},e}function A(){var e=(0,a._)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 10px;\n  margin: 5px !important;\n"]);return A=function(){return e},e}function P(){var e=(0,a._)(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n  padding: 1rem;\n"]);return P=function(){return e},e}var K=(0,u.jsx)(S.default,{fontSize:"small"}),V=(0,u.jsx)(O.default,{fontSize:"small"}),M=s.default.div(L(),(0,C.medium)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,C.small)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"}),(0,C.extrasmall)({height:"100%",gridTemplateColumns:"1fr",gap:"15px"})),G=(0,s.default)(k.motion.button)(D(),v.mainColor),Q={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"80vw",display:"flex",flexDirection:"column",gap:"20px",bgcolor:"background.paper",boxShadow:24,borderRadius:3,p:4},Z=s.default.div(z(),(0,C.medium)({width:"97vw !important",height:"97vh !important"}),(0,C.small)({width:"97vw !important",height:"97vh !important"}),(0,C.extrasmall)({width:"97vw !important",height:"97vh !important"})),W=s.default.button(H()),q=s.default.button(F(),v.mainColor,v.mainColor),J=s.default.div(A()),X=s.default.div(P()),Y=function(){var e=(0,d._)((0,r.useState)([]),2),n=(e[0],e[1]),l=(0,d._)((0,r.useState)(!1),2),a=l[0];l[1];var s=(0,d._)((0,r.useState)([]),2),k=s[0],C=s[1],S=(0,d._)((0,r.useState)([]),2),O=S[0],L=S[1],D=(0,d._)((0,r.useState)(!1),2),z=D[0],H=D[1],F=(0,d._)((0,r.useState)([]),2),A=F[0],P=F[1],Y=(0,d._)((0,r.useState)([]),2),$=Y[0],ee=Y[1],en=(0,d._)((0,r.useState)([]),2),el=en[0],eo=en[1],et=(0,d._)((0,r.useState)({id:null,name:null,owner:null,room:null,phone:null,eduType:null,facultiesName:[],roles:[],positions:[]}),2),ei=et[0],ed=et[1],ea=(0,d._)((0,r.useState)(null),2),eu=ea[0],er=ea[1];(0,r.useEffect)(function(){console.log(ei,"< - updateDekanat")},[ei]),(0,r.useEffect)(function(){a&&ep()},[a]);var es=[{field:"id",headerName:"ID",width:40,editable:!1},{field:"name",headerName:"Name",type:"string",width:300,editable:!1},{field:"owner",headerName:"Dean",type:"string",width:300,editable:!1,renderCell:function(e){var n,l;return(0,u.jsx)("div",{children:null==e?void 0:null===(l=e.row)||void 0===l?void 0:null===(n=l.owner)||void 0===n?void 0:n.fullName})}},{field:"room",headerName:"Room",type:"string",width:100,editable:!1},{field:"phone",headerName:"Phone",type:"string",width:200,editable:!1},{field:"service",headerName:"Service",type:"string",width:200,editable:!1,renderCell:function(e){return(0,u.jsxs)(J,{children:[(0,u.jsx)(q,{onClick:function(){var n;return ef(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id)},children:(0,u.jsx)(m.FiEdit,{})}),(0,u.jsx)(W,{onClick:function(){var n,l;return ev(null==e?void 0:null===(n=e.row)||void 0===n?void 0:n.id,null==e?void 0:null===(l=e.row)||void 0===l?void 0:l.name)},children:(0,u.jsx)(g.BsTrash,{})})]})}}],ec=(0,v.getHeaders)().headers,ev=function(e,n){console.log(e,"deleted"),ed({id:null,nameEn:null,nameRu:null,nameUz:null,owner:null,eduType:null,room:null,phone:null,roles:[],positions:[]}),window.confirm("Do you want to delete ".concat(n,"?"))&&(c.default.delete("".concat(v.BASE_URL,"/dekanat/deleteById/").concat(e),{headers:ec}).then(function(n){var l;console.log("-------------------------------------------------------"),C(null==k?void 0:k.filter(function(n){return(null==n?void 0:n.id)!==e})),f.toast.success(null==n?void 0:null===(l=n.data)||void 0===l?void 0:l.message,{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})}).catch(function(e){console.log(e)}),f.toast.success("Deleted successfully",{position:"top-right",autoClose:!1,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}))},ef=function(e){c.default.get(v.BASE_URL+"/dekanat/getDekanatById?id="+e,{headers:ec}).then(function(e){var n,l;console.log(null==e?void 0:e.data),er(null==e?void 0:null===(l=e.data)||void 0===l?void 0:null===(n=l.obj)||void 0===n?void 0:n.owner),ed(function(n){var l,o,d,a,u,r,s,c,v,f,h,p,m,g,x,b,j,_;return(0,i._)((0,t._)({},n),{id:null==e?void 0:null===(o=e.data)||void 0===o?void 0:null===(l=o.obj)||void 0===l?void 0:l.id,name:null==e?void 0:null===(a=e.data)||void 0===a?void 0:null===(d=a.obj)||void 0===d?void 0:d.name,owner:null==e?void 0:null===(r=e.data)||void 0===r?void 0:null===(u=r.obj)||void 0===u?void 0:u.owner,phone:null==e?void 0:null===(c=e.data)||void 0===c?void 0:null===(s=c.obj)||void 0===s?void 0:s.phone,room:null==e?void 0:null===(f=e.data)||void 0===f?void 0:null===(v=f.obj)||void 0===v?void 0:v.room,eduType:null==e?void 0:null===(p=e.data)||void 0===p?void 0:null===(h=p.obj)||void 0===h?void 0:h.eduType,facultiesName:null==e?void 0:null===(g=e.data)||void 0===g?void 0:null===(m=g.obj)||void 0===m?void 0:m.facultiesName,roles:null==e?void 0:null===(b=e.data)||void 0===b?void 0:null===(x=b.obj)||void 0===x?void 0:x.roles,positions:null==e?void 0:null===(_=e.data)||void 0===_?void 0:null===(j=_.obj)||void 0===j?void 0:j.positions})})}),H(!0)},eh=function(e){e.length>4?c.default.get(v.BASE_URL+"/user/getUsersForUserRole?keyword="+e,{headers:ec}).then(function(e){var n;L((null===(n=e.data)||void 0===n?void 0:n.obj).reduce(function(e,n){return e.find(function(e){return e.label===n.label})?e:e.concat([n])},[]))}).catch(function(e){console.log(e)}):L([])};(0,r.useEffect)(function(){c.default.get(v.BASE_URL+"/faculty/getFacultyForDekanatSaved").then(function(e){var l,o,t,i,d,a,u;n(null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.obj),P(null==e?void 0:null===(t=e.data)||void 0===t?void 0:null===(o=t.obj)||void 0===o?void 0:o.map(function(e){return null==e?void 0:e.label})),ee(null==e?void 0:null===(d=e.data)||void 0===d?void 0:null===(i=d.secondObj)||void 0===i?void 0:i.roles),eo(null==e?void 0:null===(u=e.data)||void 0===u?void 0:null===(a=u.secondObj)||void 0===a?void 0:a.positions)}).catch(function(e){console.log(e)}),ep()},[]);var ep=function(){c.default.get(v.BASE_URL+"/dekanat/all",{headers:ec}).then(function(e){var n;console.log(null==e?void 0:e.data,"dekanats"),C(null==e?void 0:null===(n=e.data)||void 0===n?void 0:n.obj)}).catch(function(e){console.log(e)})},em=function(){H(!1)},eg=function(e){ed(function(n){return(0,i._)((0,t._)({},n),(0,o._)({},e.target.name,e.target.value))})},ex=function(e){delete e.id,console.log(e,"save dean"),Object.values(e).every(function(e){return null!==e&&e})?c.default.post(v.BASE_URL+"/dekanat/saveV2",(0,i._)((0,t._)({},e),{id:null}),{headers:ec}).then(function(n){H(!1),ep(),f.toast.success("".concat(null==e?void 0:e.name," dean's office has been saved successfully!."))}).catch(function(e){var n,l;console.log(e),f.toast.error(null==e?void 0:null===(l=e.response)||void 0===l?void 0:null===(n=l.data)||void 0===n?void 0:n.message)}):f.toast.warning("Empty any field..")},eb=function(e){console.log(e,"edit section"),Object.values(e).every(function(e){return null!==e&&e})?c.default.post(v.BASE_URL+"/dekanat/saveV2",e,{headers:ec}).then(function(e){H(!1),ep(),f.toast.success("Updated dean successfully!.")}).catch(function(e){console.log(e)}):f.toast.warning("Empty any field..")};return(0,u.jsxs)(X,{children:[(0,u.jsx)(b.default,{display:"flex",justifyContent:"end",children:(0,u.jsx)(U.default,{sx:{width:"220px"},variant:"contained",onClick:function(){er(null),ed({id:null,name:null,owner:null,room:null,phone:null,eduType:null,facultiesName:[],roles:[],positions:[]}),H(!0)},children:"Add new dean's office"})}),a&&(null==k?void 0:k.length)>0?(0,u.jsx)(h.default,{}):(0,u.jsx)(B.Card,{children:(0,u.jsx)(B.CardContent,{sx:{overflow:"scroll"},children:(0,u.jsx)(p.DataGrid,{checkboxSelection:!0,sx:{minHeight:"670px!important",overflow:"scroll"},columns:es,rows:k,components:{Toolbar:p.GridToolbar},pageSize:10,initialState:(0,i._)((0,t._)({},k.initialState),{columns:{columnVisibilityModel:{id:!1}}})})})}),(0,u.jsx)(x.default,{open:z,onClose:em,"aria-labelledby":"keep-mounted-modal-title","aria-describedby":"keep-mounted-modal-description",children:(0,u.jsxs)(b.default,{sx:Q,component:Z,children:[(0,u.jsx)(G,{onClick:em,whileHover:{rotate:180,scale:1.1},whileTap:{scale:.9},transition:{duration:.3},children:(0,u.jsx)(j.RiCloseLine,{})}),(0,u.jsx)("h3",{style:{color:"".concat(v.mainColor)},children:(null==ei?void 0:ei.id)!==null&&(null==ei?void 0:ei.id)?"Update dean's office":"Create new dean's office"}),(0,u.jsxs)(M,{children:[(0,u.jsx)(_.default,{id:"outlined-basic",label:"Name",variant:"outlined",value:null==ei?void 0:ei.name,name:"name",onChange:eg}),(0,u.jsxs)(R.default,{fullWidth:!0,children:[(0,u.jsx)(E.default,{id:"demo-simple-select-label",children:"Education Type"}),(0,u.jsxs)(N.default,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:null==ei?void 0:ei.eduType,name:"eduType",label:"Education Type",onChange:eg,children:[(0,u.jsx)(T.default,{value:"KUNDUZGI",children:"KUNDUZGI"}),(0,u.jsx)(T.default,{value:"KECHKI",children:"KECHKI"}),(0,u.jsx)(T.default,{value:"SIRTQI",children:"SIRTQI"})]})]}),(0,u.jsx)(y.default,{id:"checkboxes-tags-demo",options:O,disableCloseOnSelect:!0,onFocus:function(){return L([])},getOptionLabel:function(e){return null==e?void 0:e.label},value:eu,onChange:function(e,n){er(n),ed(function(e){return(0,i._)((0,t._)({},e),{owner:n})})},onInputChange:function(e,n){(null==e?void 0:e.type)==="change"&&eh(n)},renderOption:function(e,n,l){var o=l.selected;return(0,u.jsxs)("li",(0,i._)((0,t._)({},e),{children:[(0,u.jsx)(w.default,{icon:K,checkedIcon:V,style:{marginRight:8},checked:o}),null==n?void 0:n.label]}))},renderInput:function(e){return(0,u.jsx)(_.default,(0,i._)((0,t._)({},e),{label:"Owner",placeholder:"Owner"}))}}),(0,u.jsx)(_.default,{id:"outlined-basic",label:"Room",variant:"outlined",value:null==ei?void 0:ei.room,name:"room",onChange:eg}),(0,u.jsx)(_.default,{id:"outlined-basic",label:"Phone",variant:"outlined",value:null==ei?void 0:ei.phone,name:"phone",onChange:eg}),(0,u.jsx)(y.default,{multiple:!0,id:"checkboxes-tags-demo",options:$,disableCloseOnSelect:!0,getOptionLabel:function(e){return e},value:null==ei?void 0:ei.roles,onChange:function(e,n){ed(function(e){return(0,i._)((0,t._)({},e),{roles:n})})},renderOption:function(e,n,l){var o=l.selected;return(0,u.jsxs)("li",(0,i._)((0,t._)({},e),{children:[(0,u.jsx)(w.default,{icon:K,checkedIcon:V,style:{marginRight:8},checked:o}),n]}))},renderInput:function(e){return(0,u.jsx)(_.default,(0,i._)((0,t._)({},e),{label:"Roles",placeholder:"Roles"}))}}),(0,u.jsx)(y.default,{multiple:!0,id:"checkboxes-tags-demo",options:el,disableCloseOnSelect:!0,getOptionLabel:function(e){return e},value:null==ei?void 0:ei.positions,onChange:function(e,n){ed(function(e){return(0,i._)((0,t._)({},e),{positions:n})})},renderOption:function(e,n,l){var o=l.selected;return(0,u.jsxs)("li",(0,i._)((0,t._)({},e),{children:[(0,u.jsx)(w.default,{icon:K,checkedIcon:V,style:{marginRight:8},checked:o}),n]}))},renderInput:function(e){return(0,u.jsx)(_.default,(0,i._)((0,t._)({},e),{label:"Positions",placeholder:"Positions"}))}}),(0,u.jsx)(y.default,{multiple:!0,id:"checkboxes-tags-demo",options:A,disableCloseOnSelect:!0,getOptionLabel:function(e){return e},value:null==ei?void 0:ei.facultiesName,onChange:function(e,n){ed(function(e){return(0,i._)((0,t._)({},e),{facultiesName:n})})},renderOption:function(e,n,l){var o=l.selected;return(0,u.jsxs)("li",(0,i._)((0,t._)({},e),{children:[(0,u.jsx)(w.default,{icon:K,checkedIcon:V,style:{marginRight:8},checked:o}),n]}))},renderInput:function(e){return(0,u.jsx)(_.default,(0,i._)((0,t._)({},e),{label:"Faculties",placeholder:"Faculties"}))}})]}),(0,u.jsx)(b.default,{sx:{display:"flex",justifyContent:"end"},children:(0,u.jsx)(U.default,{variant:"contained",endIcon:(null==ei?void 0:ei.id)!==null&&(null==ei?void 0:ei.id)?(0,u.jsx)(m.FiEdit,{}):(0,u.jsx)(I.FaSave,{}),onClick:function(){return(null==ei?void 0:ei.id)!==null&&(null==ei?void 0:ei.id)?eb(ei):ex(ei)},children:(null==ei?void 0:ei.id)!==null&&(null==ei?void 0:ei.id)?"Update":" Save"})})]})})]})}}}]);