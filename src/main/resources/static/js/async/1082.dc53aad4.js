/*! For license information please see 1082.dc53aad4.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["1082"],{81784:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return S}});var r=t("7409"),o=t("99282"),i=t("38956"),l=t("58865");t("57327"),t("88449"),t("19894"),t("2490"),t("41539"),t("23157");var u=t("85893"),a=t("67294"),d=t.n(a),s=t("71893"),c=t("71632"),f=t("44118"),v=t("52861"),x=t("27233"),h=t("28685"),m=t("55255"),p=t("30381"),g=t.n(p),w=t("96413"),b=t("73871"),D=t("14628");function y(){var n=(0,l._)(["\n    width: 300px;\n    ","\n"]);return y=function(){return n},n}function j(){var n=(0,l._)(["\n    margin: 15px 0 0;\n    padding: 10px 0;\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 25px;\n    justify-content: start;\n    ","\n"]);return j=function(){return n},n}function _(){var n=(0,l._)(["\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    padding: 1rem;\n\n"]);return _=function(){return n},n}var k=s.default.div(y(),(0,c.extrasmall)({width:"80%"})),H=s.default.div(j(),(0,c.extrasmall)({justifyContent:"center"})),Y=s.default.div(_()),S=function(){var n=(0,i._)((0,a.useState)([]),2),e=n[0],t=n[1],l=(0,i._)((0,a.useState)([]),2),s=l[0],c=l[1],p=(0,i._)((0,a.useState)([]),2),y=p[0],j=p[1],_=(0,i._)((0,a.useState)(null),2),S=_[0],M=_[1],z=(0,i._)((0,a.useState)(!1),2),N=z[0],C=z[1],B=(0,i._)((0,a.useState)([]),2),E=B[0],O=B[1],A=(0,i._)((0,a.useState)(null),2),R=A[0],F=A[1],T=(0,i._)((0,a.useState)({date:new Date,dateFrom:null,dateTo:null,weekNumber:null,year:null,weekday:null}),2),W=T[0],I=T[1],L=function(n){var e=g()(n.format("YYYY-MM-DD")).isoWeek(),t=g()(n.format("YYYY-MM-DD")).day(),r=g()(n.format("YYYY-MM-DD")).year(),o=g()(n.format("YYYY-MM-DD")).startOf("isoWeek").toDate(),i=g()(n.format("YYYY-MM-DD")).endOf("isoWeek").toDate();I({date:n,dateFrom:o,dateTo:i,weekNumber:e,year:r,weekday:t})},P=(0,h.getHeaders)().headers;(0,a.useEffect)(function(){x.default.get(h.BASE_URL+"/building/getBuildingsForSelect",{headers:P}).then(function(n){var e,t,r;console.log(n.data," <- buildings fetch"),O(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.obj),F(null==n?void 0:null===(r=n.data)||void 0===r?void 0:null===(t=r.obj[0])||void 0===t?void 0:t.label)}).catch(function(n){console.log(n)}),x.default.get(h.BASE_URL+"/room/getRoomsForSelect",{headers:P}).then(function(n){var e;t(null===(e=n.data)||void 0===e?void 0:e.obj)}).catch(function(n){console.log(n)})},[]),(0,a.useEffect)(function(){S&&W.weekday&&x.default.get(h.BASE_URL+"/timeTableByWeekOfYear/getTimeTableByRoom?r="+S+"&week="+W.weekNumber+"&weekday="+W.weekday+"&year="+W.year,{headers:P}).then(function(n){var e,t;C(!0),c(null==n?void 0:null===(e=n.data)||void 0===e?void 0:e.obj),j(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.secondObj)}).catch(function(n){console.log(n)})},[S,W]);var U=(0,i._)(d().useState(g()()),2),V=U[0],q=U[1];return(0,a.useEffect)(function(){L(V)},[V]),(0,u.jsxs)(Y,{children:[(0,u.jsxs)(H,{children:[(0,u.jsx)(k,{children:(0,u.jsx)(f.default,{disablePortal:!0,id:"combo-box-demo",options:E,defaultValue:E[0],onChange:function(n,e){F(null==e?void 0:e.label)},renderInput:function(n){return(0,u.jsx)(v.default,(0,o._)((0,r._)({},n),{label:"Buildings"}))}})}),(0,u.jsx)(k,{children:(0,u.jsx)(f.default,{disablePortal:!0,id:"combo-box-demo",options:null==e?void 0:e.filter(function(n){var e;return null==n?void 0:null===(e=n.label)||void 0===e?void 0:e.startsWith(null==R?void 0:R.substring(0,1))}),onChange:function(n,e){M(null==e?void 0:e.label)},sx:{width:300},renderInput:function(n){return(0,u.jsx)(v.default,(0,o._)((0,r._)({},n),{label:"Auditory"}))}})}),(0,u.jsx)(k,{children:(0,u.jsx)(b.LocalizationProvider,{dateAdapter:w.AdapterMoment,children:(0,u.jsx)(D.DesktopDatePicker,{label:"Day",inputFormat:"DD/MM/YYYY",value:V,onChange:function(n){q(n)},renderInput:function(n){return(0,u.jsx)(v.default,(0,r._)({sx:{width:"300px !important"}},n))}})})})]}),N&&(0,u.jsx)(m.default,{data:s,statistics:y,weekDay:W.weekday,week:W.weekNumber})]})}},55255:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return O}});var r=t("38956"),o=t("58865");t("21249"),t("57640"),t("9924"),t("57327"),t("88449"),t("19894"),t("2490"),t("41539"),t("69826"),t("31672"),t("59461");var i=t("85893"),l=t("67294"),u=t("71893"),a=t("28685"),d=t("5434"),s=t("30381"),c=t.n(s),f=t("7104");function v(){var n=(0,o._)(["\n  color: ",";\n  position: absolute;\n  top: 40%;\n  right: -26.3px;\n  font-size: 11px;\n  rotate: 90deg;\n"]);return v=function(){return n},n}function x(){var n=(0,o._)(["\n  display: flex;\n  align-items: start;\n  font-size: ",";\n  text-align: start;\n  font-weight: 600;\n  letter-spacing: 0.8px;\n"]);return x=function(){return n},n}function h(){var n=(0,o._)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: ",";\n  text-align: center;\n  font-weight: 600;\n  letter-spacing: 0.8px;\n"]);return h=function(){return n},n}function m(){var n=(0,o._)(["\n  font-size: 12px;\n  font-weight: 300;\n"]);return m=function(){return n},n}function p(){var n=(0,o._)(["\n  width: 100%;\n  height: 130px;\n  display: flex;\n  border-top: 0.1px solid #cacaca;\n"]);return p=function(){return n},n}function g(){var n=(0,o._)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  font-size: 14px;\n  font-weight: 600;\n  letter-spacing: 0.2px;\n"]);return g=function(){return n},n}function w(){var n=(0,o._)(["\n  flex: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  gap: 8px;\n  border-right: 0.1px solid #cacaca;\n  font-size: 9px;\n  padding: 10px!important;\n\n  background-color: ",";\n  color: ",";\n  \n"]);return w=function(){return n},n}function b(){var n=(0,o._)(["\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column; \n  gap: 20px;\n  position: relative;\n"]);return b=function(){return n},n}function D(){var n=(0,o._)(["\n  width: 100%;\n  height: 60px;\n  display: flex;\n  background-color: #B4E2FB;\n  font-size: 14px;\n  font-weight: 600;\n  letter-spacing: 0.2px;\n"]);return D=function(){return n},n}function y(){var n=(0,o._)(["\n  overflow: hidden;\n  margin: 0 auto;\n  width: 1300px;\n  border: 0.2px solid ",";\n  border-radius: 7px;\n  box-shadow: rgba(99, 99, 99, 0.2) 0 2px 8px 0;\n"]);return y=function(){return n},n}function j(){var n=(0,o._)(["\n  width: 100%;\n  overflow: scroll;\n"]);return j=function(){return n},n}var _=u.default.span(v(),function(n){return(null==n?void 0:n.color)?"green":"red"}),k=u.default.span(x(),function(n){return n.fontSize||"7px"}),H=u.default.span(h(),function(n){return n.fontSize||"7px"}),Y=u.default.span(m()),S=u.default.div(p()),M=u.default.div(g()),z=u.default.span(w(),function(n){return n.flex},function(n){return(null==n?void 0:n.bg)?"red":"white"},function(n){return(null==n?void 0:n.bg)?"white":"#000"}),N=u.default.span(b()),C=u.default.div(D()),B=u.default.div(y(),a.mainColor),E=u.default.div(j()),O=function(n){var e,t=n.data,o=n.statistics,u=n.weekDay,a=n.week,s=(0,r._)((0,l.useState)(!1),2),v=s[0],x=s[1];(0,l.useEffect)(function(){console.log(t,"data"),console.log(o,"statistics"),x(!0)},[]);var h=new Date,m=c()(new Date).isoWeek(),p=[{number:1,hour:"9:00 - 9:50",start:h.setHours(9,0,0),end:h.setHours(9,50,0)},{number:2,hour:"10:00 - 10:50",start:h.setHours(10,0,0),end:h.setHours(10,50,0)},{number:3,hour:"11:00 - 11:50",start:h.setHours(11,0,0),end:h.setHours(11,50,0)},{number:4,hour:"12:00 - 12:50",start:h.setHours(12,0,0),end:h.setHours(12,50,0)},{number:5,hour:"13:00 - 13:50",start:h.setHours(13,0,0),end:h.setHours(13,50,0)},{number:6,hour:"14:00 - 14:50",start:h.setHours(14,0,0),end:h.setHours(14,50,0)},{number:7,hour:"15:00 - 15:50",start:h.setHours(15,0,0),end:h.setHours(15,50,0)},{number:8,hour:"16:00 - 16:50",start:h.setHours(16,0,0),end:h.setHours(16,50,0)},{number:9,hour:"17:00 - 17:50",start:h.setHours(17,0,0),end:h.setHours(17,50,0)},{number:10,hour:"18:00 - 18:50",start:h.setHours(18,0,0),end:h.setHours(18,50,0)},{number:11,hour:"19:00 - 19:50",start:h.setHours(19,0,0),end:h.setHours(19,50,0)},{number:12,hour:"20:00 - 20:50",start:h.setHours(20,0,0),end:h.setHours(20,50,0)}],g=[{day:1,name:"\u041F\u043D"},{day:2,name:"\u0412\u0442"},{day:3,name:"\u0421\u0440"},{day:4,name:"\u0427\u0442"},{day:5,name:"\u041F\u0442"},{day:6,name:"\u0421\u0431"}];return(0,i.jsx)(E,{children:v?(0,i.jsxs)(B,{children:[(0,i.jsxs)(C,{children:[(0,i.jsx)(z,{flex:1,children:"TIME"}),null==p?void 0:p.map(function(n,e){return(0,i.jsx)(z,{flex:2,children:null==n?void 0:n.hour},e)})]}),(0,i.jsx)(M,{children:null==g?void 0:null===(e=g.filter(function(n){return u?n.day===u:n.day===new Date().getDay()}))||void 0===e?void 0:e.map(function(n,e){var r=null;return o&&(null==o?void 0:o.length)!==0&&o[null==n?void 0:n.day],(0,i.jsxs)(S,{children:[(0,i.jsx)(z,{flex:1,children:(0,i.jsx)(Y,{children:null==n?void 0:n.name})}),null==p?void 0:p.map(function(e,r){var l,u,s,f,v,x,h,p,g,w,b,D,y,j,Y=null==t?void 0:t.find(function(n){return(null==n?void 0:n.hourNumber)===(null==e?void 0:e.number)}),S=null==o?void 0:o.filter(function(n){return(null==n?void 0:n.section)===(null==e?void 0:e.number)}),M=new Date(null==e?void 0:e.start);return M.setDate(M.getDate()-M.getDay()+(null==n?void 0:n.day)),Y?(0,i.jsx)(z,{flex:2,bg:(void 0===S||(null==S?void 0:S.length)===0)&&((null==n?void 0:n.day)<=new Date().getDay()&&((null==e?void 0:e.start)<new Date||M<new Date)||a<m),children:(0,i.jsxs)(N,{children:[(0,i.jsx)(H,{fontSize:(null==Y?void 0:null===(l=Y.lessonName)||void 0===l?void 0:l.length)>18?"8px":"7px",children:Y.lessonName}),S&&(null==S?void 0:S.length)!==0&&(0,i.jsxs)(_,{color:new Date(null==e?void 0:e.start).setDate(new Date(null===(u=S[0])||void 0===u?void 0:u.time).getDate())>=(null===(s=S[0])||void 0===s?void 0:s.time),children:[new Date(null==e?void 0:e.start).setDate(new Date(null===(f=S[0])||void 0===f?void 0:f.time).getDate())>=(null===(v=S[0])||void 0===v?void 0:v.time)?(0,i.jsx)(d.MdOutlineAddCircleOutline,{size:16}):(0,i.jsx)(d.MdRemoveCircleOutline,{size:16})," ",c()(new Date(new Date(null==e?void 0:e.start).setDate(new Date(null===(x=S[0])||void 0===x?void 0:x.time).getDate())>=(null===(h=S[0])||void 0===h?void 0:h.time)?new Date(null==e?void 0:e.start).setDate(new Date(null===(p=S[0])||void 0===p?void 0:p.time).getDate())-(null===(g=S[0])||void 0===g?void 0:g.time):(null===(w=S[0])||void 0===w?void 0:w.time)-new Date(null==e?void 0:e.start).setDate(new Date(null===(b=S[0])||void 0===b?void 0:b.time).getDate()))).format("mm:ss")]}),(void 0===S||(null==S?void 0:S.length)===0)&&((null==n?void 0:n.day)<=new Date().getDay()&&((null==e?void 0:e.start)<new Date||M<new Date)||a<m)&&(0,i.jsxs)(_,{color:!1,children:[" ",(0,i.jsx)(d.MdRemoveCircleOutline,{size:12})," "," "," 50:00"]}),(0,i.jsx)(k,{fontSize:(null==Y?void 0:null===(D=Y.teacherName)||void 0===D?void 0:D.length)>1?"8px":"7px",children:(null==Y?void 0:null===(y=Y.teacherName)||void 0===y?void 0:y.length)>1?null==Y?void 0:null===(j=Y.teacherName)||void 0===j?void 0:j.join("/ "):null==Y?void 0:Y.teacherName[0]})]})},r):(0,i.jsx)(z,{flex:2,children:" - "},r)})]},e)})})]}):(0,i.jsx)(f.Stack,{spacing:1,children:(0,i.jsx)(f.Skeleton,{variant:"rectangular",style:{margin:"0 auto"},width:1076,height:490})})})}}}]);