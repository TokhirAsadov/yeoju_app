/*! For license information please see 8439.0506acb9.js.LICENSE.txt */
(self.webpackChunkkiut_client=self.webpackChunkkiut_client||[]).push([["8439"],{9578:function(n,e,t){"use strict";t.r(e);var r=t("58865");t("33948"),t("57640"),t("9924");var o=t("85893"),i=t("67294"),l=t("71893"),a=t("16393"),u=t("27233"),s=t("89583"),d=t("72132"),c=t("57024"),p=t("55693"),f=t("94718"),x=t("47516"),h=t("39711");function g(){let n=(0,r._)(["\n","\n"]);return g=function(){return n},n}function m(){let n=(0,r._)(["\n  width: 100%;\n  height: 35px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: ",";\n  border-bottom-right-radius: 10px;\n  border-top-right-radius: 10px;\n  color: #ffffff;\n  border: none;\n\n  &:hover {\n    filter: brightness(1.1);\n  }\n\n"]);return m=function(){return n},n}function b(){let n=(0,r._)(["\n  position: absolute;\n  top: 45px;\n  z-index: 5;\n","\n"]);return b=function(){return n},n}function j(){let n=(0,r._)(["\n  width: 125px;\n  height: 35px;\n  background: white;\n  padding-left: 5px;\n  font-size: 18px;\n  padding-right: 10px;\n  border-radius: 10px;\n  cursor: pointer;\n  color: ",";\n  margin-left: 5px !important;\n  border: none;\n\n  &::placeholder {\n    font-size: 14px;\n    color: ",";\n  }\n\n  &:focus {\n    outline: none;\n  }\n"]);return j=function(){return n},n}function v(){let n=(0,r._)(["\n  font-size: 12px;\n  color: lightgray;\n"]);return v=function(){return n},n}function E(){let n=(0,r._)(["\n  font-size: 14px;\n"]);return E=function(){return n},n}function _(){let n=(0,r._)(["\n  width: 200px;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  padding: 5px 10px !important;\n  border-bottom: 1px solid lightgray;\n  cursor: pointer;\n\n  &::before {\n\n  }\n"]);return _=function(){return n},n}function y(){let n=(0,r._)(["\n  max-height: 300px;\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  top: 45px;\n  left: 20px;\n  margin-top: 3px !important;\n  border: 1px solid lightgray;\n  border-radius: 5px;\n  overflow: hidden;\n  overflow-y: scroll;\n  opacity: ",";\n"]);return y=function(){return n},n}function S(){let n=(0,r._)(["\n  display: flex;\n  flex-direction: column;\n  position: relative;\n"]);return S=function(){return n},n}function C(){let n=(0,r._)(["\n  width: 150px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-radius: 10px;\n  background-color: #fff;\n"]);return C=function(){return n},n}function w(){let n=(0,r._)(["\n  width: 150px;\n  height: 35px;\n  background: white;\n  padding-left: 5px;\n  font-size: 18px;\n  padding-right: 10px;\n  border-radius: 10px;\n  border: none;\n  cursor: pointer;\n  color: ",";\n\n  &:focus {\n    outline: none;\n  }\n\n  option {\n    color: black;\n    background: white;\n    font-weight: 300;\n    display: flex;\n    white-space: pre;\n    min-height: 20px;\n    padding: 0px 2px 1px;\n  }\n"]);return w=function(){return n},n}function A(){let n=(0,r._)(["\n  position: absolute;\n  background-color: rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]);return A=function(){return n},n}function k(){let n=(0,r._)(["\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  ","\n\n"]);return k=function(){return n},n}function N(){let n=(0,r._)(["\n  margin-left: 20px;\n  margin-top: 20px;\n  display: flex;\n  justify-content: end;\n"]);return N=function(){return n},n}function T(){let n=(0,r._)(["\n  margin-right: 25px;\n  padding: 4px 35px !important;\n  background-color: ",";\n  color: #fff;\n  border: none;\n  border-radius: 10px;\n  font-size: 20px;\n\n  &:hover {\n    filter: brightness(1.1);\n  }\n\n"]);return T=function(){return n},n}function D(){let n=(0,r._)(["\n  color: ",";\n  margin-left: 10px !important;\n  cursor: pointer;\n"]);return D=function(){return n},n}function R(){let n=(0,r._)(["\n  height: 22px;\n  width: 22px;\n  vertical-align: middle;\n  cursor: pointer;\n"]);return R=function(){return n},n}function O(){let n=(0,r._)(["\n  position: relative;\n"]);return O=function(){return n},n}function U(){let n=(0,r._)(["\n  width: 150px;\n  padding: 4px 15px !important;\n  background-color: #fff;\n  border-radius: 10px;\n  font-size: 20px;\n  vertical-align: middle;\n"]);return U=function(){return n},n}function z(){let n=(0,r._)(["\n  margin-left: 20px;\n  margin-top: 20px;\n  padding-left: 20px;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  ","\n\n"]);return z=function(){return n},n}function L(){let n=(0,r._)(["\n  width: 100%;\n  min-height: 200px;\n  padding: 5px 10px !important;\n  border: none;\n\n  &:focus {\n    outline: none;\n  }\n"]);return L=function(){return n},n}function G(){let n=(0,r._)(["\n  border-radius: 5px;\n  padding: 0 5px !important;\n  color: ",";\n  font-size: 20px;\n"]);return G=function(){return n},n}function K(){let n=(0,r._)(["\n  width: 95%;\n  height: 50%;\n  min-height: 200px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: 1px solid #E6E8EB;\n  border-radius: 10px;\n  background-color: #fff;\n  position: relative;\n  margin: 20px auto;\n  overflow: hidden;\n  box-shadow: 0 3px 20px rgb(0 0 0 / 4%);\n"]);return K=function(){return n},n}function I(){let n=(0,r._)(["\n  width: 100%;\n"]);return I=function(){return n},n}function F(){let n=(0,r._)(["\n  height: 100%;\n  min-height: 500px;\n  border-radius: 10px;\n  margin-top: 10px !important;\n  padding: 5px 10px !important;\n"]);return F=function(){return n},n}let B=l.default.div(g(),(0,c.extrasmall)({margin:"0  0 0 auto !important"})),P=l.default.span(m(),a.mainColor),M=l.default.div(b(),(0,c.extrasmall)({top:0,left:"160px"})),H=l.default.input(j(),a.mainColor,a.color_2),W=l.default.span(v()),Y=l.default.span(E()),q=l.default.div(_()),J=l.default.div(y(),n=>n.opacity),Q=l.default.div(S()),V=l.default.div(C()),X=l.default.select(w(),a.mainColor);l.default.div(A());let Z=l.default.section(k(),(0,c.extrasmall)({flexDirection:"column"})),$=l.default.div(N()),nn=l.default.button(T(),a.mainColor),ne=l.default.label(D(),a.mainColor),nt=l.default.input.attrs({type:"radio"})(R()),nr=l.default.div(O()),no=l.default.div(U()),ni=l.default.div(z(),(0,c.extrasmall)({flexDirection:"column",paddingLeft:"0",marginTop:"20px",marginLeft:"0"})),nl=l.default.textarea(L()),na=l.default.span(G(),a.mainColor),nu=l.default.div(K()),ns=l.default.form(I()),nd=l.default.div(F());e.default=()=>{let[n,e]=(0,i.useState)("ALL"),[t,r]=(0,i.useState)(1),[l,c]=(0,i.useState)(""),[g,m]=(0,i.useState)([]),[b,j]=(0,i.useState)(""),[v,E]=(0,i.useState)(""),[_,y]=(0,i.useState)([]),[S,C]=(0,i.useState)(""),[w,A]=(0,i.useState)(""),[k,N]=(0,i.useState)({course:t,messageBody:S,groupName:l,smsType:n,status:"SENDING",userId:w}),T=(0,h.useNavigate)();(0,i.useEffect)(()=>{if(b.length<3)y([]);else{let n=localStorage.getItem(a.TOKEN),e={Authorization:a.TokenType+n,"Access-Control-Allow-Origin":"*"};u.default.get(a.BASE_URL+a.DEKAN.GET_USER_SEARCHING_FOR_DEKAN+b,{headers:e}).then(n=>{var e;(null===(e=n.data)||void 0===e?void 0:e.length)!==0?y(()=>n.data):y([])}).catch(n=>{})}},[b]),(0,i.useEffect)(()=>{N(n=>({...n,messageBody:S}))},[S]),(0,i.useEffect)(()=>{N(e=>({...e,smsType:n}))},[n]),(0,i.useEffect)(()=>{N(n=>({...n,groupName:l}))},[l]),(0,i.useEffect)(()=>{N(n=>({...n,course:t}))},[t]),(0,i.useEffect)(()=>{N(n=>({...n,userId:w}))},[w]);let D=e=>{switch(e.preventDefault(),n){case"ALL":r(null),c(null),A(null),""===S?alert("Error, empty message of sms..."):R();break;case"COURSE":c(""),A(""),null!==t&&""!==S?R():alert("Error, empty message of sms or course...");break;case"GROUP":""!==l&&""!==S?R():alert("Error, empty message of sms or name of group...");break;case"STUDENT":""!==w&&""!==S?R():alert("Error, empty message of sms or do not choose student...")}},R=()=>{let n=localStorage.getItem(a.TOKEN),e={Authorization:a.TokenType+n,"Access-Control-Allow-Origin":"*"};u.default.post(a.BASE_URL+a.DEKAN.SMS_CREATE,k,{headers:e}).then(n=>{200===n.status&&d.toast.success("Sending SMS successfully!")}).catch(n=>{d.toast.warning("Error...")})};return(0,o.jsxs)(nd,{children:[(0,o.jsxs)(p.default,{sx:{display:"flex",justifyContent:"space-between",gap:"15px",alignItems:"center",flexWrap:"wrap"},children:[(0,o.jsxs)(na,{children:["Message: ","COURSE"===n?n+" - "+t:"GROUP"===n?n+" "+l:"STUDENT"===n?n+" "+v:n]}),(0,o.jsx)(f.default,{component:B,onClick:()=>T("smsHistory"),variant:"contained",endIcon:(0,o.jsx)(x.BiMailSend,{size:25}),children:"message history"})]}),(0,o.jsxs)(ns,{onSubmit:n=>D(n),children:[(0,o.jsx)(nu,{children:(0,o.jsx)(nl,{name:S,value:S,onChange:n=>C(n.target.value)})}),(0,o.jsxs)(Z,{children:[(0,o.jsxs)(ni,{children:[(0,o.jsxs)(no,{children:[(0,o.jsx)(nt,{id:"all",name:"type",checked:"ALL"===n,onChange:()=>e(()=>"ALL")}),(0,o.jsx)(ne,{htmlFor:"all",children:"All"})]}),(0,o.jsxs)(nr,{children:[(0,o.jsxs)(no,{children:[(0,o.jsx)(nt,{id:"course",name:"type",onChange:()=>e(()=>"COURSE")}),(0,o.jsx)(ne,{htmlFor:"course",children:"Course"})]}),(0,o.jsx)(M,{children:"COURSE"===n&&(0,o.jsxs)(X,{value:t,onChange:n=>r(()=>n.target.value),children:[(0,o.jsx)("option",{value:1,children:"Course - 1"}),(0,o.jsx)("option",{value:2,children:"Course - 2"}),(0,o.jsx)("option",{value:3,children:"Course - 3"}),(0,o.jsx)("option",{value:4,children:"Course - 4"})]})})]}),(0,o.jsxs)(nr,{children:[(0,o.jsxs)(no,{children:[(0,o.jsx)(nt,{id:"group",name:"type",onChange:()=>{e(()=>"GROUP");let n=localStorage.getItem(a.TOKEN),t={Authorization:a.TokenType+n,"Access-Control-Allow-Origin":"*"};u.default.get(a.BASE_URL+a.DEKAN.GET_GROUPS_NAMES_FOR_DEKAN_BY_DEKAN_ID,{headers:t}).then(n=>{c(n.data[0]),m(n.data)}).catch(n=>{})}}),(0,o.jsx)(ne,{htmlFor:"group",children:"Group"})]}),(0,o.jsx)(M,{children:"GROUP"===n&&(0,o.jsx)(X,{value:l,onChange:n=>c(()=>n.target.value),children:(null==g?void 0:g.length)>0?g.map((n,e)=>(0,o.jsx)("option",{value:n,children:n},e)):""})})]}),(0,o.jsxs)(nr,{children:[(0,o.jsxs)(no,{children:[(0,o.jsx)(nt,{id:"student",name:"type",onChange:()=>e(()=>"STUDENT")}),(0,o.jsx)(ne,{htmlFor:"student",children:"Student"})]}),(0,o.jsx)(M,{children:"STUDENT"===n&&(0,o.jsxs)(Q,{children:[(0,o.jsxs)(V,{children:[(0,o.jsx)(H,{value:b,onChange:n=>j(n.target.value),placeholder:"StudentID or Passport"}),(0,o.jsx)(P,{onClick:()=>{if(""!==b&&b.length>2){let n=localStorage.getItem(a.TOKEN),e={Authorization:a.TokenType+n,"Access-Control-Allow-Origin":"*"};u.default.get(a.BASE_URL+a.DEKAN.GET_USER_SEARCHING_FOR_DEKAN+b,{headers:e}).then(n=>{var e;(null===(e=n.data)||void 0===e?void 0:e.length)!==0?y(()=>n.data):(E(""),alert("\u26A0\uFE0F Not fount user!...\uD83D\uDE14"))}).catch(n=>{})}else alert("Enter search param")},children:(0,o.jsx)(s.FaSearch,{})})]}),(0,o.jsx)(J,{opacity:_.length>0?1:0,style:{display:"block",position:"absolute",top:"35px"},children:null==_?void 0:_.map(n=>(0,o.jsxs)(q,{onClick:e=>{e.preventDefault(),A(n.id),E(n.fullName),j("")},children:[(0,o.jsx)(Y,{children:n.fullName}),(0,o.jsx)(W,{children:n.groupData.name})]},n.id))})]})})]})]}),(0,o.jsx)($,{children:(0,o.jsx)(nn,{onClick:()=>void 0,children:"Send"})})]})]})]})}}}]);